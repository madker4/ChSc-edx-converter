<div id="storeArea">
<div changecount="1" created="201706151504" modified="201706151504" modifier="YourName" ordercounter="0" tags="course" title="Окружающий мир">
<pre>&lt;&lt;courseAdminPanel&gt;&gt;/%
|Автор			|Роман Борисович Соловьёв|
|Аудитория		|1–4 класс|
|Картинка в шапке	|./environment/headeroms_common.jpg|
|courseId			|environment0|
!!!Описание
&lt;p&gt;Этот курс&amp;nbsp;&amp;mdash; первый шаг и&amp;nbsp;фундамент для изучения всего цикла естественных наук. В&amp;nbsp;начальной школе, когда детей еще живо интересует устройство мира, важно сформировать у&amp;nbsp;них целостную систему представлений и&amp;nbsp;удовлетворить их&amp;nbsp;любопытство. В&amp;nbsp;основу курса легли многолетние педагогические наработки, благодаря которым Р.&amp;nbsp;Б.&amp;nbsp;Соловьев виртуозно &amp;laquo;раскладывает по&amp;nbsp;полочкам&amp;raquo; основы биологии, химии и&amp;nbsp;физики. Опираясь на&amp;nbsp;простое, объясняет сложное: симбиоз, принципы металлургии, работу системы кровообращения.&lt;/p&gt;
&lt;p&gt;
Если у&amp;nbsp;вас возникли вопросы или комментарии, пишите нам на&amp;nbsp;&lt;a href="mailto:okrumir@yandex.ru"&gt;okrumir@yandex.ru&lt;/a&gt;
&lt;/p&gt;
&lt;div style="width: 100%; border-top: 1px solid #B7B7B7; padding-top: 10px; margin-top: 20px;"&gt;
&lt;img src="./environment/images/rbs.jpg" data-hidpi-src="images/rbs_2x.jpg" alt="" width="255" height="191" style="float: left;"&gt;
&lt;p style="margin-top: 16px;"&gt;&lt;b&gt;Роман Борисович Соловьёв&lt;/b&gt;&lt;/p&gt;
&lt;p&gt;Учитель с&amp;nbsp;20-летним стажем. Магистр психологии и&amp;nbsp;педагогики. Создатель курсов пропедевтики естествознания для дошкольников и&amp;nbsp;младших школьников.&lt;/p&gt;&lt;div style="background: #B7B7B7; clear: both; height: 1px; width: 100%; margin-bottom: 20px;"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;h2&gt;
&lt;a href="javascript:;" onclick="onClickTiddlerLink(event)" class="tiddlyLink tiddlyLinkExisting" refresh="link" tiddlylink="Окружающий мир. 1й класс"&gt;1 класс. &lt;span style="font-weight: 400;"&gt;Мир живого&lt;/span&gt;&lt;/a&gt;
&lt;/h2&gt;
&lt;h2&gt;
&lt;a href="javascript:;" onclick="onClickTiddlerLink(event)" class="tiddlyLink tiddlyLinkExisting" refresh="link" tiddlylink="Окружающий мир. 2 класс"&gt;2 класс. &lt;span style="font-weight: 400;"&gt;Мир неживого&lt;/span&gt;&lt;/a&gt;
&lt;/h2&gt;
&lt;h2&gt;
&lt;a href="javascript:;" onclick="onClickTiddlerLink(event)" class="tiddlyLink tiddlyLinkExisting" refresh="link" tiddlylink="Окружающий мир. 3 класс"&gt;3 класс. &lt;span style="font-weight: 400;"&gt;Тело человека&lt;/span&gt;&lt;/a&gt;
&lt;/h2&gt;
&lt;h2 style="color: #ccc;"&gt;
&lt;!--a href="javascript:;" onclick="onClickTiddlerLink(event)" class="tiddlyLink tiddlyLinkExisting" refresh="link" tiddlylink="Окружающий мир. 4 класс"--&gt;&lt;b&gt;4 класс.&lt;/b&gt; &lt;span style="font-weight: 400;"&gt;Физические и химические явления&lt;/span&gt;&lt;!--/a--&gt;
&lt;/h2&gt;
!!!In title
!%/</pre>
</div>
<div changecount="1" created="201701301743" environment0="0" modified="201706161754" modifier="Яков Литвин" tags="unit [[Окружающий мир]]" title="Как пользоваться материалами курса">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
&lt;!--Как пользоваться материалами к&amp;nbsp;курсу &amp;laquo;Окружающий мир&amp;raquo;--&gt;

&lt;p&gt;
	Здравствуйте, уважаемый коллега!
&lt;/p&gt;

&lt;p&gt;
	Мы&amp;nbsp;предлагаем вам авторский электронный курс для 1&amp;nbsp;класса по&amp;nbsp;предмету &amp;laquo;Окружающий мир&amp;raquo;. 
&lt;/p&gt;

&lt;p&gt;
	1&amp;nbsp;класс посвящен разнообразию живых организмов. В&amp;nbsp;упрощенной системе четырех царств рассматриваются признаки царств живого, делается акцент на&amp;nbsp;пользе и&amp;nbsp;вреде разных организмов для человека. В&amp;nbsp;уроках, посвященных сельскому хозяйству и&amp;nbsp;животноводству, рассказывается о&amp;nbsp;роли человека в&amp;nbsp;природе. Затронута тема микроорганизмов: ученики знакомятся с&amp;nbsp;бактериями и&amp;nbsp;вирусами, вводится понятие симбиоза. В&amp;nbsp;конце курса предлагаются темы сообществ: луга, леса, озера, отдельный урок посвящен вопросам охраны природы.
&lt;/p&gt;

&lt;p&gt;
	К&amp;nbsp;каждому уроку курса мы&amp;nbsp;подготовили разные типы материалов, как для введения новой темы, так и&amp;nbsp;для повторения изученного. 
&lt;/p&gt;

&lt;h2&gt;
	1. Видео
&lt;/h2&gt;

&lt;p&gt;
	Видеоролики с&amp;nbsp;объяснением нового материала соответствуют одному уроку и&amp;nbsp;длятся в&amp;nbsp;среднем 10&amp;ndash;12&amp;nbsp;минут. Это короче школьного урока, т.&amp;nbsp;к. время для записей, рисунков или комментариев, а&amp;nbsp;также на&amp;nbsp;повторение или закрепление остается за&amp;nbsp;рамками видео. 
&lt;/p&gt;

&lt;p&gt;
	Мы&amp;nbsp;предлагаем использовать видеоролики для комментированного показа во&amp;nbsp;время урока. В&amp;nbsp;методических материалах для учителя указаны границы информационных блоков, где, на&amp;nbsp;наш взгляд, стоит прерваться для обсуждения или комментария, а&amp;nbsp;также рисунков и&amp;nbsp;записей.
&lt;/p&gt;

&lt;p&gt;
	Кроме того, видеоуроки помогут ученикам, пропустившим занятие, нагнать материал. 
&lt;/p&gt;

&lt;h2&gt;
	2. Конспект для ученика
&lt;/h2&gt;

&lt;p&gt;
	Конспект для ученика (распечатка) не&amp;nbsp;покрывает всё содержание урока: в&amp;nbsp;него вошли только самые важные моменты. Распечатки&amp;nbsp;&amp;mdash; не&amp;nbsp;аналог учебника. Их&amp;nbsp;роль&amp;nbsp;&amp;mdash; дублировать записи, которые ученик делает по&amp;nbsp;ходу урока в&amp;nbsp;тетради. Если эти записи неполны, непонятны или неряшливы, распечатка восполнит упущения. Кроме того, сделанные профессиональными художниками и&amp;nbsp;дизайнерами конспекты&amp;nbsp;&amp;mdash; яркие, красивые, выразительные и&amp;nbsp;служат своеобразным подарком ученику. Поэтому мы&amp;nbsp;рекомендуем делать цветную распечатку конспекта и&amp;nbsp;выдавать ее&amp;nbsp;уже после занятия.
&lt;/p&gt;

&lt;p&gt;
	Цветные распечатки стоит хранить в&amp;nbsp;файловых или простых папках. Если ученик небрежно относится к&amp;nbsp;конспекту, мы&amp;nbsp;советуем выдавать ему новый экземпляр, но&amp;nbsp;худшего качества (черно-белый или ксерокопию). По&amp;nbsp;распечатанному конспекту, как и&amp;nbsp;по&amp;nbsp;записям в&amp;nbsp;тетради, ученик повторяет материал к&amp;nbsp;уроку. Обычно это и&amp;nbsp;есть основное домашнее задание. 
&lt;/p&gt;

&lt;h2&gt;
	3. Методичка для учителя
&lt;/h2&gt;

&lt;p&gt;
	Методический материал (методичка) для учителя содержит:
&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;
		&lt;p&gt;
			текст сценария, по&amp;nbsp;которому снят видеоролик;
		&lt;/p&gt;
	&lt;/li&gt;
	&lt;li&gt;
		&lt;p&gt;
			границы информационных блоков, где мы&amp;nbsp;рекомендуем прерывать просмотр видео или рассказ учителя для записей и&amp;nbsp;рисунков;
		&lt;/p&gt;
	&lt;/li&gt;
	&lt;li&gt; 
		&lt;p&gt;
			варианты схематичных изображений по&amp;nbsp;методике &amp;laquo;трехсекундного рисунка&amp;raquo;&amp;nbsp;&amp;mdash; основа для записей учеников в&amp;nbsp;тетрадях (&lt;a href='https://youtu.be/3XTeSonxuQo'&gt;фрагмент урока&lt;/a&gt; с&amp;nbsp;демонстрацией этой методики);
		&lt;/p&gt;
	&lt;/li&gt;
	&lt;li&gt;
		&lt;p&gt;
			краткие методические комментарии и&amp;nbsp;дополнительные пояснения по&amp;nbsp;материалу урока.
		&lt;/p&gt;
	&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;
	В&amp;nbsp;некоторых методичках предложены темы докладов и&amp;nbsp;сообщений, а&amp;nbsp;также идеи для внеклассной работы.
&lt;/p&gt;

&lt;p&gt;
	Готовясь к&amp;nbsp;уроку, заранее ознакомьтесь с&amp;nbsp;содержанием методички, и, по&amp;nbsp;возможности, видеоролика.
&lt;/p&gt;

&lt;p&gt; 
	Вы&amp;nbsp;можете полностью придерживаться сценария, изменять и&amp;nbsp;дополнять его по&amp;nbsp;своему усмотрению. Вне зависимости от&amp;nbsp;того, планируете вы&amp;nbsp;показывать на&amp;nbsp;уроке видеоролик или будете рассказывать сами, мы&amp;nbsp;рекомендуем оставлять время для записей и&amp;nbsp;рисунков по&amp;nbsp;каждому блоку.
&lt;/p&gt;

&lt;p&gt;
	Условные обозначения помогут быстро ориентироваться в&amp;nbsp;тексте методички:
&lt;/p&gt;

&lt;img src="./environment/about/uslovnye_oboznachenia.png" style='max-width: 100%;'&gt;

&lt;h2&gt;
	4. Материалы для повторения и&amp;nbsp;закрепления
&lt;/h2&gt;

&lt;p&gt;
	После каждого урока предусмотрены интерактивные задания. Они позволяют ученику в&amp;nbsp;игровой форме повторить пройденный материал.
&lt;/p&gt;

&lt;h2&gt;
	Несколько советов о&amp;nbsp;рисуночном конспекте 
&lt;/h2&gt;

&lt;p&gt;
	Мы&amp;nbsp;рекомендуем организовать урок таким образом, чтобы ученики вели записи в&amp;nbsp;тетрадях. Для этого после каждого информационного блока предусмотрены паузы на&amp;nbsp;создание &amp;laquo;рисуночного конспекта&amp;raquo;. Во&amp;nbsp;время урока учитель делает записи и&amp;nbsp;схематичные рисунки на&amp;nbsp;доске, а&amp;nbsp;ученики&amp;nbsp;&amp;mdash; в&amp;nbsp;тетрадях. Лучше всего ввести и&amp;nbsp;закрепить правило: &amp;laquo;Что на&amp;nbsp;доске, то&amp;nbsp;и&amp;nbsp;в&amp;nbsp;тетради&amp;raquo;.
&lt;/p&gt;

&lt;p&gt;
	При этом рисунки ученика не&amp;nbsp;обязательно должны полностью совпадать с&amp;nbsp;рисунками учителя. Если ученик придумает свой символ, это стоит приветствовать (конечно, если его рисунок отражает смысл явления или понятия). Но&amp;nbsp;рисунок учителя на&amp;nbsp;доске всё&amp;nbsp;же очень важен: большинство учеников постараются повторить именно его. 
&lt;/p&gt;

&lt;p&gt;
	Пусть вас не&amp;nbsp;смущает, если не&amp;nbsp;получается что-то нарисовать. Не&amp;nbsp;страшно признаться ученикам, что ваши художественные способности невелики. Обычно фраза &amp;laquo;Да, я&amp;nbsp;рисую плохо, но&amp;nbsp;вы&amp;nbsp;в&amp;nbsp;тетрадях нарисуйте хорошо&amp;raquo; решает эту проблему. Можно еще прибавить что-нибудь вроде: &amp;laquo;Мне когда-то не&amp;nbsp;так повезло с&amp;nbsp;учителем рисования, как вам&amp;raquo;. Если в&amp;nbsp;классе есть художественно одаренный ребенок, к&amp;nbsp;его помощи тоже можно прибегать: приглашайте его рисовать на&amp;nbsp;доске нужное изображение. 
&lt;/p&gt;

&lt;p&gt;
	Если дети пока еще плохо пишут, то&amp;nbsp;заставлять их&amp;nbsp;делать полные записи не&amp;nbsp;нужно. Конспект ученика может быть полностью рисуночным.
&lt;/p&gt;

&lt;p&gt;
	Для подготовки к&amp;nbsp;созданию такого конспекта мы&amp;nbsp;рекомендуем использовать методику &amp;laquo;Трехсекундного рисунка&amp;raquo; (&lt;a href='https://youtu.be/3XTeSonxuQo'&gt;фрагмент урока&lt;/a&gt; с&amp;nbsp;демонстрацией этой методики).
&lt;/p&gt;

&lt;p&gt; 
	Игру в&amp;nbsp;&amp;laquo;Три секунды&amp;raquo; удобно проводить за&amp;nbsp;5&amp;ndash;7 минут до&amp;nbsp;конца урока. Предлагайте ученикам в&amp;nbsp;числе прочего рисовать те&amp;nbsp;предметы или понятия, которые понадобятся в&amp;nbsp;следующий раз.
&lt;/p&gt;

&lt;p&gt;
	Рисунки конспекта раскрашивать не&amp;nbsp;обязательно: цвет не&amp;nbsp;несет информации. Но&amp;nbsp;если ученик рисует быстро, разрешите ему раскрашивать нарисованное, чтобы не&amp;nbsp;ждать остальных без дела. 
&lt;/p&gt;

&lt;h2&gt;
	Заключение
&lt;/h2&gt;

&lt;p&gt;
	Наша цель&amp;nbsp;&amp;mdash; предоставить необходимый минимум материалов для структурированного преподавания курса &amp;laquo;Окружающий мир&amp;raquo; в&amp;nbsp;1&amp;nbsp;классе. Мы&amp;nbsp;надеемся, что вы&amp;nbsp;отнесетесь творчески к&amp;nbsp;нашим рекомендациям, будете дополнять и&amp;nbsp;изменять их&amp;nbsp;в&amp;nbsp;зависимости от&amp;nbsp;конкретного класса, уровня знаний, а&amp;nbsp;также психологического состояния учеников.
&lt;/p&gt;
</pre>
</div>
<div changecount="3" created="201702051642" environment="55" environment0="1" modified="201706151505" modifier="YourName" tags="[[Окружающий мир]] unit" title="Над курсом работали">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
&lt;/p&gt;&lt;table class="borderless"&gt;&lt;tbody&gt;&lt;tr class="evenRow"&gt;&lt;td&gt;Автор						&lt;/td&gt;&lt;td&gt;Роман Борисович Соловьёв&lt;/td&gt;&lt;/tr&gt;&lt;tr class="oddRow"&gt;&lt;td&gt;Научные редакторы			&lt;/td&gt;&lt;td&gt;Сергей Феликсович Хрибар, к.&amp;nbsp;и.&amp;nbsp;н.&lt;br&gt;Марина Владимировна Куликова, к.&amp;nbsp;б.&amp;nbsp;н.&lt;br&gt;Маргарита Михайловна Атрощенко, к.&amp;nbsp;б.&amp;nbsp;н.&lt;br&gt;Инна Михайловна Есенова&lt;br&gt;
(сотрудники &lt;a class="externalLink" href="http://www.gbmt.ru/ru/index.php" title="" target="_blank"&gt;Государственного Биологического музея им.&amp;nbsp;К.&amp;nbsp;А.&amp;nbsp;Тимирязева&lt;/a&gt;)&lt;br&gt;Пётр Васильевич Александров, к.&amp;nbsp;г.-м.&amp;nbsp;н.&lt;br&gt;Тимофей Владимирович Орлов, к.&amp;nbsp;г.-м.&amp;nbsp;&lt;br&gt;Елена Моисеевна Гурвич, к.&amp;nbsp;г.-м.&amp;nbsp;н.&lt;br&gt;Павел Юрьевич Плечов, д.&amp;nbsp;г.-м.&amp;nbsp;н., директор &lt;a class="externalLink" href="https://www.fmm.ru/" title="" target="_blank"&gt;Минералогического музея имени А.&amp;nbsp;Е.&amp;nbsp;Ферсмана&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class="evenRow"&gt;&lt;td&gt;Редактор&lt;/td&gt;&lt;td&gt;Анна Булгакова&lt;/td&gt;&lt;/tr&gt;&lt;tr class="evenRow"&gt;&lt;td&gt;Дизайнер			&lt;/td&gt;&lt;td&gt;Полина Лосева&lt;/td&gt;&lt;/tr&gt;&lt;tr class="oddRow"&gt;&lt;td&gt;Иллюстраторы&lt;/td&gt;&lt;td&gt;Полина Леоненко&lt;br&gt;Екатерина Пысларь&lt;br&gt;Любовь Макарова&lt;br&gt;Анастасия Голикова&lt;br&gt;Александра Тэвдой-Бурмули&lt;/td&gt;&lt;/tr&gt;&lt;tr class="evenRow"&gt;&lt;td&gt;Аниматоры&lt;/td&gt;&lt;td&gt;Демир Куулар&lt;br&gt;Вероника Веселова&lt;/td&gt;&lt;/tr&gt;&lt;tr class="oddRow"&gt;&lt;td&gt;Съёмка и&amp;nbsp;монтаж				&lt;/td&gt;&lt;td&gt;Даулет Жанайдаров&lt;br&gt;Влас Липовецкий&lt;/td&gt;&lt;/tr&gt;&lt;tr class="evenRow"&gt;&lt;td&gt;Дизайн конспектов для 1&amp;nbsp;класса&lt;/td&gt;&lt;td&gt;Кира Слепченкова&lt;br&gt;Вероника Кириенко&lt;/td&gt;&lt;/tr&gt;&lt;tr class="oddRow"&gt;&lt;td&gt;Вёрстка методичек&lt;/td&gt;&lt;td&gt;Мария Матвеева&lt;/td&gt;&lt;/tr&gt;&lt;tr class="evenRow"&gt;&lt;td&gt;Интерактивные задания&lt;/td&gt;&lt;td&gt;Роман Лисков&lt;br&gt;Михаил Киселёв&lt;br&gt;Григорий Зеленский&lt;br&gt;Кирилл Шайдулин&lt;br&gt;Андрей Мартынов&lt;br&gt;Алексей Кулыгин&lt;br&gt;Ольга Поддельская&lt;br&gt;Зураб Николайшвили&lt;/td&gt;&lt;/tr&gt;&lt;tr class="oddRow"&gt;&lt;td&gt;Разработка платформы		&lt;/td&gt;&lt;td&gt;Яков Литвин&lt;/td&gt;&lt;/tr&gt;&lt;tr class="evenRow"&gt;&lt;td&gt;Музыкальная заставка			&lt;/td&gt;&lt;td&gt;Роман Куперман&lt;/td&gt;&lt;/tr&gt;&lt;tr class="oddRow"&gt;&lt;td&gt;Озвучивание					&lt;/td&gt;&lt;td&gt;Григорий Громов&lt;br&gt;Михаил Гантман&lt;br&gt;Сергей Рубашкин&lt;br&gt;Алёна Аникина&lt;br&gt;Станислав Иванов&lt;/td&gt;&lt;/tr&gt;&lt;tr class="evenRow"&gt;&lt;td&gt;Запись звука					&lt;/td&gt;&lt;td&gt;Виктор Кириллов&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;p&gt;Курс произведён фондом «Дети и наука» по заказу Центра педагогического мастерства.&lt;/p&gt;
&lt;table class="logos"&gt;&lt;tbody&gt;&lt;tr class="evenRow"&gt;&lt;td align="center"&gt;&lt;a href="http://childrenscience.ru" target="_blank"&gt;&lt;img src="images/logo_small.svg" style="width: 200px; margin-right: 30px;"/&gt;&lt;/a&gt;&lt;/td&gt;&lt;td align="center"&gt;&lt;a href="http://cpm.dogm.mos.ru/" target="_blank"&gt;&lt;img src="http://cpm.dogm.mos.ru/upload/iblock/59b/logo2015_240kh92.jpg" style="width: 200px;"/&gt;&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;p&gt;
!%/</pre>
</div>
<div changecount="3" created="201701131849" modified="201706191704" modifier="YourName" ordercounter="1" tags="course" title="Окружающий мир. 1й класс">
<pre>&lt;&lt;courseAdminPanel&gt;&gt;/%
|Автор			||
|Аудитория		||
|Картинка в шапке	|./environment/headeroms_01.jpg|
|courseId			|environment|
|visibleName		|Окружающий мир. 1 класс|
!!!Описание
&lt;p&gt;1&amp;nbsp;класс нашего курса посвящен миру живой природы. На&amp;nbsp;уроках ребята узнают о&amp;nbsp;Четырех Царствах, побывают в&amp;nbsp;Городе Лишайников и&amp;nbsp;на&amp;nbsp;Остове Вирусов.
&lt;/p&gt;
&lt;p&gt;
Если у&amp;nbsp;вас возникли вопросы или комментарии, пишите нам на&amp;nbsp;&lt;a href="mailto:okrumir@yandex.ru"&gt;okrumir@yandex.ru&lt;/a&gt;
&lt;/p&gt;
&lt;h2&gt;
&lt;a href="javascript:;" onclick="onClickTiddlerLink(event)" class="tiddlyLink tiddlyLinkExisting" refresh="link" tiddlylink="Окружающий мир"&gt;Весь курс&lt;/a&gt;
&lt;/h2&gt;
!!!In title
!%/</pre>
</div>
<div changecount="2" created="201701162256" environment="2" modified="201701162256" modifier="Яков Литвин" oms="1" tags="[[Окружающий мир. 1й класс]] unit" title="1. Знакомство с&amp;nbsp;предметом">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
На&amp;nbsp;первом уроке мы&amp;nbsp;познакомимся с&amp;nbsp;предметом &amp;laquo;Окружающий мир&amp;raquo;. Этот предмет изучает так много разных вещей, что в&amp;nbsp;них можно запутаться. Мы&amp;nbsp;обсудим, как разделить их&amp;nbsp;на&amp;nbsp;части и&amp;nbsp;в&amp;nbsp;каком порядке изучать.
!%/</pre>
</div>
<div changecount="2" created="201701162304" environment="12" modified="201701162304" modifier="Яков Литвин" oms="11" tags="[[Окружающий мир. 1й класс]] unit" title="10. Насекомые">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Зачем пчеле волосатые ноги? Чем разрисованы крылья бабочки? Почему гусеницы превращаются в&amp;nbsp;куколок, а&amp;nbsp;люди нет? Что ест божья коровка? Какая польза от&amp;nbsp;комаров? На&amp;nbsp;уроке мы&amp;nbsp;ответим на&amp;nbsp;все эти вопросы.
!%/</pre>
</div>
<div changecount="2" created="201701162304" environment="13" modified="201701162304" modifier="Яков Литвин" oms="12" tags="[[Окружающий мир. 1й класс]] unit" title="11. Иглокожие">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
В&amp;nbsp;последнем районе беспозвоночных животных, который мы&amp;nbsp;посетим, проживают морские звёзды и&amp;nbsp;их&amp;nbsp;родственники.
!%/</pre>
</div>
<div changecount="2" created="201701162304" environment="14" modified="201701162304" modifier="Яков Литвин" oms="13" tags="[[Окружающий мир. 1й класс]] unit" title="12. Позвоночные. Рыбы">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Мы&amp;nbsp;переходим к&amp;nbsp;позвоночным животным. Сначала обсудим, куда мы&amp;nbsp;попали и&amp;nbsp;с&amp;nbsp;кем нам предстоит познакомиться. А&amp;nbsp;затем поговорим о&amp;nbsp;рыбах: что у&amp;nbsp;них общего, чем они питаются, какую пользу приносят людям?
!%/</pre>
</div>
<div changecount="2" created="201701162304" environment="15" modified="201701162304" modifier="Яков Литвин" oms="14" tags="[[Окружающий мир. 1й класс]] unit" title="13. Земноводные">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
От&amp;nbsp;рыб мы&amp;nbsp;переходим к&amp;nbsp;земноводным&amp;nbsp;&amp;mdash; родственника лягушки. Давайте разберёмся, удобно&amp;nbsp;ли это: жить и&amp;nbsp;на&amp;nbsp;суше, и&amp;nbsp;в&amp;nbsp;воде?
!%/</pre>
</div>
<div changecount="2" created="201701162304" environment="16" modified="201701162304" modifier="Яков Литвин" oms="15" tags="[[Окружающий мир. 1й класс]] unit" title="14. Пресмыкающиеся">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Пресмыкающиеся&amp;nbsp;&amp;mdash; это родственники ящерицы. Правда, на&amp;nbsp;вид они мало похожи друг на&amp;nbsp;друга. У&amp;nbsp;одних совсем нет ног. У&amp;nbsp;других кости растут не&amp;nbsp;только внутри, но&amp;nbsp;и&amp;nbsp;снаружи тела. А&amp;nbsp;третьи умеют менять свой цвет, когда захотят.
!%/</pre>
</div>
<div changecount="2" created="201701162304" environment="17" modified="201701162304" modifier="Яков Литвин" oms="16" tags="[[Окружающий мир. 1й класс]] unit" title="15. Птицы">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
На&amp;nbsp;этом уроке мы&amp;nbsp;обсудим, зачем утке плоский клюв, а&amp;nbsp;павлину&amp;nbsp;&amp;mdash; разноцветный хвост, и&amp;nbsp;почему длинные ласточкины крылья не&amp;nbsp;подойдут воробью. А&amp;nbsp;ещё поговорим о&amp;nbsp;жизни перелётных птиц и&amp;nbsp;о&amp;nbsp;пользе, которую они приносят человеку.
!%/</pre>
</div>
<div changecount="3" created="201701162305" environment="18" modified="201701162305" modifier="Яков Литвин" oms="17" tags="[[Окружающий мир. 1й класс]] unit" title="16. Млекопитающие, часть&amp;nbsp;1">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Мы&amp;nbsp;переходим к&amp;nbsp;зверям, или млекопитающим. Первый урок по&amp;nbsp;этой теме посвящён родственникам мыши&amp;nbsp;&amp;mdash; грызунам, а&amp;nbsp;ещё тем, кого иногда с&amp;nbsp;грызунами путают. Мы&amp;nbsp;расскажем, чем зайцы отличаются от&amp;nbsp;кроликов, зачем бобр грызёт деревья и&amp;nbsp;стоит&amp;nbsp;ли заводить дома ежа.
!%/</pre>
</div>
<div changecount="3" created="201701162305" environment="19" modified="201701162305" modifier="Яков Литвин" oms="18" tags="[[Окружающий мир. 1й класс]] unit" title="17. Млекопитающие, часть&amp;nbsp;2">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Чем хорошо ходить на&amp;nbsp;цыпочках? Чем плохо быть самым большим? Как отрастить пять рук? Кто из&amp;nbsp;зверей самый близкий родственник человека? Разбираемся с&amp;nbsp;этими вопросами в&amp;nbsp;последнем уроке о&amp;nbsp;царстве животных.
!%/</pre>
</div>
<div changecount="6" created="201701162305" environment="21" modified="201701162305" modifier="Яков Литвин" oms="20" tags="[[Окружающий мир. 1й класс]] unit" title="18. Признаки растений">
<pre>|visibleName|18. Знакомство с&amp;nbsp;растениями|
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Мы&amp;nbsp;переходим в&amp;nbsp;новое царство&amp;nbsp;&amp;mdash; к&amp;nbsp;растениям! Давайте обсудим, чем жители этого царства отличаются от&amp;nbsp;остальных.
!%/</pre>
</div>
<div changecount="2" created="201701162305" environment="22" modified="201701162305" modifier="Яков Литвин" oms="21" tags="[[Окружающий мир. 1й класс]] unit" title="19. Строение растения">
<pre>|visibleName|19. Строение растений|
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Разбираемся, из&amp;nbsp;каких основных частей состоят растения и&amp;nbsp;зачем им&amp;nbsp;эти части нужны.
!%/</pre>
</div>
<div changecount="2" created="201701162256" environment="3" modified="201701162256" modifier="Яков Литвин" oms="2" tags="[[Окружающий мир. 1й класс]] unit" title="2. Чем живое отличается от&amp;nbsp;неживого">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Мы&amp;nbsp;разделили всю природу на&amp;nbsp;мир живого и&amp;nbsp;мир неживого. Но&amp;nbsp;если по&amp;nbsp;виду нам неясно, что перед нами: живой организм или неживой предмет,&amp;nbsp;&amp;mdash; как быть? Есть четыре главных признака, которыми обладает всё живое.
!%/</pre>
</div>
<div changecount="2" created="201701162305" environment="23" modified="201701162305" modifier="Яков Литвин" oms="22" tags="[[Окружающий мир. 1й класс]] unit" title="20. Водоросли и&amp;nbsp;мхи">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Первые растения, с&amp;nbsp;которыми мы&amp;nbsp;познакомимся ближе,&amp;nbsp;&amp;mdash; это водоросли и&amp;nbsp;мхи. Вы&amp;nbsp;узнаете, чем полезны людям мхи, что вкусного можно сделать из&amp;nbsp;водорослей и&amp;nbsp;относятся&amp;nbsp;ли к&amp;nbsp;ним кувшинки.
!%/</pre>
</div>
<div changecount="2" created="201701162305" environment="24" modified="201701162305" modifier="Яков Литвин" oms="23" tags="[[Окружающий мир. 1й класс]] unit" title="21. Папоротники и&amp;nbsp;хвойные">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Сколько человек может поместиться на&amp;nbsp;пне? Что необычного в&amp;nbsp;листьях папоротника? Какое растение похоже на&amp;nbsp;чей-то хвостик (и&amp;nbsp;даже называется похоже)? Отвечаем во&amp;nbsp;второй части рассказа о&amp;nbsp;нецветковых растениях.
!%/</pre>
</div>
<div changecount="2" created="201701162305" environment="25" modified="201701162305" modifier="Яков Литвин" oms="24" tags="[[Окружающий мир. 1й класс]] unit" title="22. Цветковые деревья и&amp;nbsp;кустарники">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Мы&amp;nbsp;обсудим, почему у&amp;nbsp;одних деревьев цветки крупные и&amp;nbsp;душистые, а&amp;nbsp;у&amp;nbsp;других еле заметные. И&amp;nbsp;познакомимся с&amp;nbsp;самыми частыми в&amp;nbsp;наших краях деревьями и&amp;nbsp;кустарниками.
!%/</pre>
</div>
<div changecount="2" created="201701162306" environment="26" modified="201701162306" modifier="Яков Литвин" oms="25" tags="[[Окружающий мир. 1й класс]] unit" title="23. Цветковые травы">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Наше путешествие по&amp;nbsp;царству растений заканчивается. Давайте напоследок заглянем к&amp;nbsp;цветковым травянистым растениям и&amp;nbsp;найдём среди них чемпионов: у&amp;nbsp;кого из&amp;nbsp;них самые крупные цветки? У&amp;nbsp;кого самые незаметные? А&amp;nbsp;кого люди больше всего ценят за&amp;nbsp;красоту и&amp;nbsp;аромат?
!%/</pre>
</div>
<div changecount="2" created="201701162308" environment="28" modified="201701162308" modifier="Яков Литвин" oms="27" tags="[[Окружающий мир. 1й класс]] unit" title="24. Чем полезны и&amp;nbsp;опасны животные для человека">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
С&amp;nbsp;давних времён животные приносят людям самую разную пользу: кормят, лечат, одевают, помогают перевозить грузы. Но&amp;nbsp;есть и&amp;nbsp;опасности, связанные с&amp;nbsp;животными: они могут укусить, ужалить, заразить человека болезнью, испортить урожай. И&amp;nbsp;всё-таки пользы гораздо больше, чем опасностей!
!%/</pre>
</div>
<div changecount="3" created="201701162308" environment="29" modified="201701162308" modifier="Яков Литвин" oms="28" tags="[[Окружающий мир. 1й класс]] unit" title="25. Чем полезны и&amp;nbsp;опасны растения для человека">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Мы&amp;nbsp;обсудили, что для человека значат животные, а&amp;nbsp;теперь так&amp;nbsp;же разберём, какую пользу приносят человеку растения и&amp;nbsp;какие опасности они могут в&amp;nbsp;себе скрывать.
!%/</pre>
</div>
<div changecount="2" created="201701162308" environment="30" modified="201701162308" modifier="Яков Литвин" oms="29" tags="[[Окружающий мир. 1й класс]] unit" title="26. Культурные злаки. Пшеница">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Некоторые растения люди специально выращивают, чтобы получать от&amp;nbsp;них ещё больше пользы. Прежде всего, злаки. А&amp;nbsp;главный злак для нашей страны&amp;nbsp;&amp;mdash; пшеница. Мы&amp;nbsp;обсудим, как её&amp;nbsp;выращивают и&amp;nbsp;какие блюда из&amp;nbsp;неё готовят.
!%/</pre>
</div>
<div changecount="2" created="201701162308" environment="31" modified="201701162308" modifier="Яков Литвин" oms="30" tags="[[Окружающий мир. 1й класс]] unit" title="27. Другие культурные злаки">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Что такое &amp;laquo;мамалыга&amp;raquo;? Можно&amp;nbsp;ли из&amp;nbsp;злаков сделать бумагу? Чем сено отличается от&amp;nbsp;соломы? Мы&amp;nbsp;ответим на&amp;nbsp;эти вопросы и&amp;nbsp;обсудим, какие ещё злаки, кроме пшеницы, выращивают люди.
!%/</pre>
</div>
<div changecount="2" created="201701162309" environment="32" modified="201701162309" modifier="Яков Литвин" oms="31" tags="[[Окружающий мир. 1й класс]] unit" title="28. Овощи">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Вторая важная группа культурных растений&amp;nbsp;&amp;mdash; это овощи. Мы&amp;nbsp;обсудим, за&amp;nbsp;кем из&amp;nbsp;них ухаживать проще, а&amp;nbsp;за&amp;nbsp;кем хлопотнее, и&amp;nbsp;вспомним блюда, которые из&amp;nbsp;них готовят.
!%/</pre>
</div>
<div changecount="2" created="201701162309" environment="33" modified="201701162309" modifier="Яков Литвин" oms="32" tags="[[Окружающий мир. 1й класс]] unit" title="29. Фрукты и&amp;nbsp;другие культурные растения">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Это урок посвящён культурным растениям, которые не&amp;nbsp;относятся ни&amp;nbsp;к&amp;nbsp;злакам, ни&amp;nbsp;к&amp;nbsp;овощам. Мы&amp;nbsp;обсудим, как выбирают место для яблоневого сада, как из&amp;nbsp;растений получают ткани, какие растения помогают нам выздороветь, а&amp;nbsp;какие вредят здоровью.
!%/</pre>
</div>
<div changecount="2" created="201701162256" environment="4" modified="201701162256" modifier="Яков Литвин" oms="3" tags="[[Окружающий мир. 1й класс]] unit" title="3. Царства живой природы">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Учёные делят живую природу на&amp;nbsp;царства. Давайте разберёмся, кто живёт в&amp;nbsp;этих царствах, и&amp;nbsp;нарисуем их&amp;nbsp;на&amp;nbsp;карте мира живого.
!%/</pre>
</div>
<div changecount="3" created="201701162309" environment="34" modified="201701162309" modifier="Яков Литвин" oms="33" tags="[[Окружающий мир. 1й класс]] unit" title="30. Животноводство. Еда">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Этот урок посвящён животным, которых люди выращивают для еды. Мы&amp;nbsp;расскажем, чем кормят кур и&amp;nbsp;свиней и&amp;nbsp;какой путь проходит молоко от&amp;nbsp;коровьего вымени до&amp;nbsp;нашего стола.
!%/</pre>
</div>
<div changecount="3" created="201701162309" environment="35" modified="201701162309" modifier="Яков Литвин" oms="34" tags="[[Окружающий мир. 1й класс]] unit" title="31. Животноводство. Одежда и&amp;nbsp;транспорт">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Люди разводят животных не&amp;nbsp;только ради пищи: на&amp;nbsp;этом уроке мы&amp;nbsp;вспомним тех, кто помогает нам согреваться в&amp;nbsp;мороз, перемещаться и&amp;nbsp;перевозить грузы. А&amp;nbsp;ещё разберёмся, что такое породы и&amp;nbsp;зачем они нужны.
!%/</pre>
</div>
<div changecount="2" created="201701162310" environment="37" modified="201701162310" modifier="Яков Литвин" oms="36" tags="[[Окружающий мир. 1й класс]] unit" title="32. Знакомство с&amp;nbsp;грибами">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Мы&amp;nbsp;переходим в&amp;nbsp;новое царство&amp;nbsp;&amp;mdash; царство грибов! И&amp;nbsp;на&amp;nbsp;первом уроке поговорим о&amp;nbsp;том, что это за&amp;nbsp;организмы и&amp;nbsp;почему их&amp;nbsp;нельзя отнести ни&amp;nbsp;к&amp;nbsp;растениям, ни&amp;nbsp;к&amp;nbsp;животным.
!%/</pre>
</div>
<div changecount="2" created="201701162310" environment="38" modified="201701162310" modifier="Яков Литвин" oms="37" tags="[[Окружающий мир. 1й класс]] unit" title="33. Чем полезны грибы для человека">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Оказывается, грибной суп&amp;nbsp;&amp;mdash; это не&amp;nbsp;главное, что грибы дают людям. Они помогают нам печь хлеб и&amp;nbsp;получать уксус, поддерживать здоровье витаминами и&amp;nbsp;лечиться от&amp;nbsp;опасных болезней антибиотиками.
!%/</pre>
</div>
<div changecount="3" created="201701162310" environment="39" modified="201701162310" modifier="Яков Литвин" oms="38" tags="[[Окружающий мир. 1й класс]] unit" title="34. Чем опасны грибы для человека">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Грибы живут не&amp;nbsp;только в&amp;nbsp;почве. Одни поселяются в&amp;nbsp;листьях растений, другие&amp;nbsp;&amp;mdash; в&amp;nbsp;продуктах, а&amp;nbsp;третьи&amp;nbsp;&amp;mdash; в&amp;nbsp;человеческой коже! И&amp;nbsp;растения, и&amp;nbsp;продукты, и&amp;nbsp;люди от&amp;nbsp;этого страдают. Мы&amp;nbsp;обсудим, как не&amp;nbsp;заболеть грибковой болезнью и&amp;nbsp;не&amp;nbsp;пострадать от&amp;nbsp;ядовитых грибов.
!%/</pre>
</div>
<div changecount="2" created="201701162310" environment="40" modified="201701162310" modifier="Яков Литвин" oms="39" tags="[[Окружающий мир. 1й класс]] unit" title="35. Роль грибов в&amp;nbsp;природе">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
На&amp;nbsp;этом уроке вы&amp;nbsp;узнаете, что за&amp;nbsp;невидимые лесные дворники убирают опавшие листья и&amp;nbsp;тела умерших животных и&amp;nbsp;почему подберёзовики так любят расти под берёзами.
!%/</pre>
</div>
<div changecount="2" created="201701162310" environment="42" modified="201701162310" modifier="Яков Литвин" oms="41" tags="[[Окружающий мир. 1й класс]] unit" title="36. Знакомство с&amp;nbsp;бактериями">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Мы&amp;nbsp;переходим в&amp;nbsp;последнее царство мира живого&amp;nbsp;&amp;mdash; царство бактерий. Его крошечные жители поставили сразу несколько мировых рекордов. На&amp;nbsp;этом уроке мы&amp;nbsp;перечислим их&amp;nbsp;и&amp;nbsp;наградим бактерий заслуженными медалями.
!%/</pre>
</div>
<div changecount="2" created="201701162311" environment="43" modified="201701162311" modifier="Яков Литвин" oms="42" tags="[[Окружающий мир. 1й класс]] unit" title="37. Чем полезны и&amp;nbsp;опасны бактерии для человека">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Одни бактерии вызывают болезни, а&amp;nbsp;другие помогают их&amp;nbsp;лечить. Одни портят наши продукты, а&amp;nbsp;другие, наоборот, делают их&amp;nbsp;ещё вкуснее!
!%/</pre>
</div>
<div changecount="2" created="201701162311" environment="44" modified="201701162311" modifier="Яков Литвин" oms="43" tags="[[Окружающий мир. 1й класс]] unit" title="38. Роль бактерий в&amp;nbsp;природе">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Вы&amp;nbsp;уже знаете, что бактерии прибираются в&amp;nbsp;природе вместе с&amp;nbsp;грибами. Но&amp;nbsp;это не&amp;nbsp;единственная их&amp;nbsp;роль в&amp;nbsp;природе.
!%/</pre>
</div>
<div changecount="2" created="201701162311" environment="45" modified="201701162311" modifier="Яков Литвин" oms="44" tags="[[Окружающий мир. 1й класс]] unit" title="39. Лишайники">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
На&amp;nbsp;нашем острове осталась ещё одна точка, в&amp;nbsp;которой мы&amp;nbsp;пока не&amp;nbsp;были&amp;nbsp;&amp;mdash; Город лишайников. На&amp;nbsp;этом уроке мы&amp;nbsp;зайдём в&amp;nbsp;него и&amp;nbsp;узнаем, как лишайники устроены, чем они полезны людям и&amp;nbsp;что означает научное слово &amp;laquo;симбиоз&amp;raquo;.
!%/</pre>
</div>
<div changecount="2" created="201701162302" environment="6" modified="201701162302" modifier="Яков Литвин" oms="5" tags="[[Окружающий мир. 1й класс]] unit" title="4. Признаки животных">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Наше путешествие по&amp;nbsp;миру живого начнётся с&amp;nbsp;царства животных. Давайте разберёмся, что общего у&amp;nbsp;жителей этого царства.
!%/</pre>
</div>
<div changecount="2" created="201701162311" environment="46" modified="201701162311" modifier="Яков Литвин" oms="45" tags="[[Окружающий мир. 1й класс]] unit" title="40. Вирусы">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Что это за&amp;nbsp;организмы, да&amp;nbsp;и&amp;nbsp;организмы&amp;nbsp;ли это вообще? Где они на&amp;nbsp;нашей карте? Ведь мы&amp;nbsp;уже обошли все царства и&amp;nbsp;даже город лишайников!
!%/</pre>
</div>
<div changecount="2" created="201701162312" environment="48" modified="201701162312" modifier="Яков Литвин" oms="47" tags="[[Окружающий мир. 1й класс]] unit" title="41. Природные сообщества">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
На&amp;nbsp;нашей карте организмы разделены на&amp;nbsp;царства. Но&amp;nbsp;ведь в&amp;nbsp;природе они перемешаны! Мы&amp;nbsp;начинаем разговор о&amp;nbsp;природных сообществах: о&amp;nbsp;том, какие растения, животные, бактерии и&amp;nbsp;грибы живут вместе и&amp;nbsp;как они зависят друг от&amp;nbsp;друга.
!%/</pre>
</div>
<div changecount="2" created="201701162312" environment="49" modified="201701162312" modifier="Яков Литвин" oms="48" tags="[[Окружающий мир. 1й класс]] unit" title="42. Состав, структура и&amp;nbsp;польза лесных сообществ">
<pre>|visibleName|42. Сообщество леса|
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Лес&amp;nbsp;&amp;mdash; это одно из&amp;nbsp;природных сообществ. Ведь он&amp;nbsp;состоит не&amp;nbsp;только из&amp;nbsp;деревьев: в&amp;nbsp;нём много других растений, в&amp;nbsp;нём живут птицы и&amp;nbsp;звери, растут грибы. Мы&amp;nbsp;поговорим о&amp;nbsp;том, из&amp;nbsp;каких этажей состоит лес, какие леса бывают и&amp;nbsp;чем они полезны для человека.
!%/</pre>
</div>
<div changecount="2" created="201701162312" environment="50" modified="201701162312" modifier="Яков Литвин" oms="49" tags="[[Окружающий мир. 1й класс]] unit" title="43. Охрана лесных сообществ">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Как мы&amp;nbsp;выяснили на&amp;nbsp;прошлом уроке, леса приносят большую пользу. Поэтому люди стараются защитить их&amp;nbsp;от&amp;nbsp;опасностей. Что это за&amp;nbsp;опасности и&amp;nbsp;как с&amp;nbsp;ними бороться, мы&amp;nbsp;и&amp;nbsp;обсудим на&amp;nbsp;уроке.
!%/</pre>
</div>
<div changecount="2" created="201701162312" environment="51" modified="201701162312" modifier="Яков Литвин" oms="50" tags="[[Окружающий мир. 1й класс]] unit" title="44. Сообщество луга">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Как и&amp;nbsp;лес, лег&amp;nbsp;&amp;mdash; это сложно устроенное сообщество со&amp;nbsp;своими этажами и&amp;nbsp;цепями питания.
!%/</pre>
</div>
<div changecount="2" created="201701162312" environment="52" modified="201701162312" modifier="Яков Литвин" oms="51" tags="[[Окружающий мир. 1й класс]] unit" title="45. Сообщество озера">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Мы&amp;nbsp;познакомимся с&amp;nbsp;ещё одним типом природных сообществ и&amp;nbsp;обсудим, что общего у&amp;nbsp;всех водных жителей, какими способами можно охотиться в&amp;nbsp;озере и&amp;nbsp;почему озёра важны для людей.
!%/</pre>
</div>
<div changecount="2" created="201701162312" environment="53" modified="201701162312" modifier="Яков Литвин" oms="52" tags="[[Окружающий мир. 1й класс]] unit" title="46. Охрана природы">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Человек с&amp;nbsp;давних времён берёт у&amp;nbsp;природы&amp;nbsp;то, что ему нужно. Например, вспахивает поле там, где был лес, и&amp;nbsp;луговые жители остаются без дома. Мы&amp;nbsp;обсудим, как учёные и&amp;nbsp;инженеры стараются защитить природу и&amp;nbsp;как в&amp;nbsp;этом деле можете поучаствовать&amp;nbsp;вы.
!%/</pre>
</div>
<div changecount="2" created="201701162312" environment="54" modified="201701162312" modifier="Яков Литвин" oms="53" tags="[[Окружающий мир. 1й класс]] unit" title="47. Летние задания">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Летом изучать окружающий мир лучше всего. Правда, летом нет уроков, зато есть задание на&amp;nbsp;каникулы.
Мы&amp;nbsp;предложим несколько вариантов, а&amp;nbsp;вы&amp;nbsp;выберите самый интересный!
!%/</pre>
</div>
<div changecount="2" created="201701162302" environment="7" modified="201701162302" modifier="Яков Литвин" oms="6" tags="[[Окружающий мир. 1й класс]] unit" title="5. Медузы и&amp;nbsp;губки">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Царство животных делится на&amp;nbsp;две большие части. Мы&amp;nbsp;начнём с&amp;nbsp;беспозвоночных животных&amp;nbsp;&amp;mdash; то&amp;nbsp;есть с&amp;nbsp;тех, у&amp;nbsp;кого нет внутреннего скелета. К&amp;nbsp;ним относятся самые древние жители царства животных: медузы и&amp;nbsp;их&amp;nbsp;родственники.
!%/</pre>
</div>
<div changecount="2" created="201701162302" environment="8" modified="201701162302" modifier="Яков Литвин" oms="7" tags="[[Окружающий мир. 1й класс]] unit" title="6. Черви">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Дождевого червя видели все. А&amp;nbsp;знакомы&amp;nbsp;ли вы&amp;nbsp;с&amp;nbsp;червями, похожими на&amp;nbsp;ленты, листики и&amp;nbsp;птичьи перья?
!%/</pre>
</div>
<div changecount="2" created="201701162302" environment="9" modified="201701162302" modifier="Яков Литвин" oms="8" tags="[[Окружающий мир. 1й класс]] unit" title="7. Моллюски">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Моллюски бывают очень разными: одни медленно ползают по&amp;nbsp;суше, другие стремительно плавают по&amp;nbsp;морю.
!%/</pre>
</div>
<div changecount="2" created="201701162302" environment="10" modified="201701162302" modifier="Яков Литвин" oms="9" tags="[[Окружающий мир. 1й класс]] unit" title="8. Членистоногие. Ракообразные">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Членистоногие&amp;nbsp;&amp;mdash; самые разнообразные животные. Мы&amp;nbsp;поговорим о&amp;nbsp;четырех группах членистоногих: ракообразных, паукообразных, многоножках и&amp;nbsp;насекомых. Но&amp;nbsp;для начала давайте разберемся, что у&amp;nbsp;всех них общего и&amp;nbsp;почему их&amp;nbsp;так назвали: &amp;laquo;членисто-ногие&amp;raquo;.
!%/</pre>
</div>
<div changecount="5" created="201701162304" environment="11" modified="201701242330" modifier="Яков Литвин" oms="10" tags="[[Окружающий мир. 1й класс]] unit" title="9. Паукообразные и&amp;nbsp;многоножки">
<pre>|visibleName||
&lt;&lt;lessonAdminPanel&gt;&gt;/%
!!!Описание
Мы&amp;nbsp;обсудим, опасны&amp;nbsp;ли пауки и&amp;nbsp;их&amp;nbsp;родственники, как они выглядят, чем питаются и&amp;nbsp;кто из&amp;nbsp;них живёт в&amp;nbsp;нашей стране. А&amp;nbsp;ещё поговорим о&amp;nbsp;многоножках, которые тоже относятся к&amp;nbsp;членистоногим.
!%/</pre>
</div>
<div changecount="3" created="201701162310" environment="41" modifier="Яков Литвин" oms="40" tags="[[Окружающий мир. 1й класс]] [[заголовок 1 надуровня]]" title="Бактерии, лишайники и&amp;nbsp;вирусы">
<pre>|visibleName||
</pre>
</div>
<div changecount="1" created="201701162256" environment="1" modifier="Яков Литвин" oms="0" tags="[[Окружающий мир. 1й класс]] [[заголовок 1 надуровня]]" title="Введение">
<pre>|visibleName||
</pre>
</div>
<div changecount="1" created="201701162309" environment="36" modifier="Яков Литвин" oms="35" tags="[[Окружающий мир. 1й класс]] [[заголовок 1 надуровня]]" title="Грибы">
<pre>|visibleName||
</pre>
</div>
<div changecount="1" created="201701162257" environment="5" modifier="Яков Литвин" oms="4" tags="[[Окружающий мир. 1й класс]] [[заголовок 1 надуровня]]" title="Животные">
<pre>|visibleName||
</pre>
</div>
<div changecount="1" created="201701162305" environment="20" modifier="Яков Литвин" oms="19" tags="[[Окружающий мир. 1й класс]] [[заголовок 1 надуровня]]" title="Растения">
<pre>|visibleName||
</pre>
</div>
<div changecount="1" created="201701162307" environment="27" modifier="Яков Литвин" oms="26" tags="[[Окружающий мир. 1й класс]] [[заголовок 1 надуровня]]" title="Сельское хозяйство">
<pre>|visibleName||
</pre>
</div>
<div changecount="1" created="201701162311" environment="47" modifier="Яков Литвин" oms="46" tags="[[Окружающий мир. 1й класс]] [[заголовок 1 надуровня]]" title="Сообщества">
<pre>|visibleName||
</pre>
</div>
<div changecount="3" created="201701241350" modified="201701241351" modifier="Яков Литвин" ordercounter="0" tags="[[1. Знакомство с&amp;nbsp;предметом]] unitStep" title="1.1 Знакомство с&amp;nbsp;предметом">
<pre>|тип шага|video|
|ссылка на контент шага|https://youtu.be/i4eAYYOf-Jk|
|visibleName|Знакомство с&amp;nbsp;предметом|
</pre>
</div>
<div changecount="1" created="201701302021" modified="201701302021" modifier="Яков Литвин" ordercounter="1" tags="[[1. Знакомство с&amp;nbsp;предметом]] unitStep" title="1.2">
<pre>|ссылка на контент шага|./environment/task_01-2/index.html|
|тип шага|task|
|visibleName|Живое и&amp;nbsp;неживое|
</pre>
</div>
<div changecount="2" created="201701290439" modified="201701290439" modifier="Яков Литвин" ordercounter="2" tags="[[1. Знакомство с&amp;nbsp;предметом]] unitStep" title="1.3">
<pre>|ссылка на контент шага|./environment/JPG/text_01_1.jpg|
|тип шага|pager|
|visibleName|Что изучает окружающий мир|
</pre>
</div>
<div changecount="3" created="201701290445" modified="201701290445" modifier="Яков Литвин" ordercounter="3" tags="[[1. Знакомство с&amp;nbsp;предметом]] unitStep" title="1.4">
<pre>|ссылка на контент шага|./environment/JPG/text_01_2.jpg|
|тип шага|pager|
|visibleName|Живое и&amp;nbsp;неживое|
</pre>
</div>
<div changecount="1" created="201701300302" modified="201701300302" modifier="Яков Литвин" tags="[[1. Знакомство с&amp;nbsp;предметом]] attachment" title="1k">
<pre>|visibleName|Конспект для ученика|
|ссылка на материал|./environment/PDF/01-Знакомство_с_предметом-Конспект.pdf|
|занимает памяти|779 Кб|
</pre>
</div>
<div changecount="1" created="201701301158" modified="201701301158" modifier="Яков Литвин" tags="[[1. Знакомство с&amp;nbsp;предметом]] attachment" title="1m">
<pre>|ссылка на материал|./environment/PDF_2/01-Знакомство_с_предметом-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|64 Кб|
</pre>
</div>
<div changecount="1" created="201701241955" modified="201701241955" modifier="Яков Литвин" ordercounter="0" tags="[[10. Насекомые]] unitStep" title="10.1 Насекомые">
<pre>|visibleName|Насекомые|
|ссылка на контент шага|https://youtu.be/CaJW0o915GM|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701271346" modified="201701271346" modifier="Яков Литвин" ordercounter="1" tags="[[10. Насекомые]] unitStep" title="10.2">
<pre>|visibleName|Насекомые|
|ссылка на контент шага|./environment/task_10-4/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701290459" modified="201701290459" modifier="Яков Литвин" ordercounter="2" tags="[[10. Насекомые]] unitStep" title="10.3">
<pre>|ссылка на контент шага|./environment/JPG/text_10_1.jpg|
|тип шага|pager|
|visibleName|Строение насекомых|
</pre>
</div>
<div changecount="1" created="201701290459" modified="201701290459" modifier="Яков Литвин" ordercounter="3" tags="[[10. Насекомые]] unitStep" title="10.4">
<pre>|ссылка на контент шага|./environment/JPG/text_10_2.jpg|
|тип шага|pager|
|visibleName|Жизнь насекомых|
</pre>
</div>
<div changecount="1" created="201701290500" modified="201701290500" modifier="Яков Литвин" ordercounter="4" tags="[[10. Насекомые]] unitStep" title="10.5">
<pre>|ссылка на контент шага|./environment/JPG/text_10_3.jpg|
|тип шага|pager|
|visibleName|Бабочки и&amp;nbsp;жуки|
</pre>
</div>
<div changecount="1" created="201701290500" modified="201701290500" modifier="Яков Литвин" ordercounter="5" tags="[[10. Насекомые]] unitStep" title="10.6">
<pre>|ссылка на контент шага|./environment/JPG/text_10_4.jpg|
|тип шага|pager|
|visibleName|Осы, муравьи, мухи, комары|
</pre>
</div>
<div changecount="1" created="201701300312" modified="201701300312" modifier="Яков Литвин" tags="[[10. Насекомые]] attachment" title="10k">
<pre>|ссылка на материал|./environment/PDF/10-Насекомые-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|1,3 Мб|
</pre>
</div>
<div changecount="1" created="201701301201" modified="201701301201" modifier="Яков Литвин" tags="[[10. Насекомые]] attachment" title="10m">
<pre>|ссылка на материал|./environment/PDF_2/10-Насекомые-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|232 Кб|
</pre>
</div>
<div changecount="1" created="201701241958" modified="201701241958" modifier="Яков Литвин" ordercounter="0" tags="[[11. Иглокожие]] unitStep" title="11.1 Иглокожие">
<pre>|visibleName|Иглокожие|
|тип шага|video|
|ссылка на контент шага|https://youtu.be/FKgZSnd9I3g|
</pre>
</div>
<div changecount="1" created="201701301055" modified="201701301055" modifier="Яков Литвин" ordercounter="1" tags="[[11. Иглокожие]] unitStep" title="11.2">
<pre>|visibleName|У кого сколько ног?|
|ссылка на контент шага|./environment/task_11-2/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="2" created="201701271347" modified="201701271347" modifier="Яков Литвин" ordercounter="2" tags="[[11. Иглокожие]] unitStep" title="11.3">
<pre>|ссылка на контент шага|./environment/task_11-5/index.html|
|тип шага|task|
|visibleName|Иглокожие|
</pre>
</div>
<div changecount="2" created="201701290501" modified="201701290501" modifier="Яков Литвин" ordercounter="3" tags="[[11. Иглокожие]] unitStep" title="11.4">
<pre>|ссылка на контент шага|./environment/JPG/text_11_1.jpg|
|тип шага|pager|
|visibleName|Морские звёзды и&amp;nbsp;ежи|
</pre>
</div>
<div changecount="2" created="201701290501" modified="201701290501" modifier="Яков Литвин" ordercounter="4" tags="[[11. Иглокожие]] unitStep" title="11.5">
<pre>|ссылка на контент шага|./environment/JPG/text_11_2.jpg|
|тип шага|pager|
|visibleName|Офиуры, голотурии и&amp;nbsp;морские лилии|
</pre>
</div>
<div changecount="1" created="201701300312" modified="201701300312" modifier="Яков Литвин" tags="[[11. Иглокожие]] attachment" title="11k">
<pre>|ссылка на материал|./environment/PDF/11-Иглокожие-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|1,3 Мб|
</pre>
</div>
<div changecount="1" created="201701301201" modified="201701301201" modifier="Яков Литвин" tags="[[11. Иглокожие]] attachment" title="11m">
<pre>|ссылка на материал|./environment/PDF_2/11-Иглокожие-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|132 Кб|
</pre>
</div>
<div changecount="1" created="201701241959" modified="201701241959" modifier="Яков Литвин" ordercounter="0" tags="[[12. Позвоночные. Рыбы]] unitStep" title="12.1 Позвоночные. Рыбы">
<pre>|visibleName|Позвоночные. Рыбы|
|ссылка на контент шага|https://youtu.be/0qjZOukHeJg|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701261805" modified="201701261805" modifier="Яков Литвин" ordercounter="1" tags="[[12. Позвоночные. Рыбы]] unitStep" title="12.2">
<pre>|ссылка на контент шага|./environment/task_12-3/index.html|
|тип шага|task|
|visibleName|Польза рыб|
</pre>
</div>
<div changecount="1" created="201701290501" modified="201701290501" modifier="Яков Литвин" ordercounter="2" tags="[[12. Позвоночные. Рыбы]] unitStep" title="12.3">
<pre>|ссылка на контент шага|./environment/JPG/text_12_1.jpg|
|тип шага|pager|
|visibleName|Позвоночные|
</pre>
</div>
<div changecount="1" created="201701290501" modified="201701290501" modifier="Яков Литвин" ordercounter="3" tags="[[12. Позвоночные. Рыбы]] unitStep" title="12.4">
<pre>|ссылка на контент шага|./environment/JPG/text_12_2.jpg|
|тип шага|pager|
|visibleName|Рыбы|
</pre>
</div>
<div changecount="1" created="201701300312" modified="201701300312" modifier="Яков Литвин" tags="[[12. Позвоночные. Рыбы]] attachment" title="12k">
<pre>|ссылка на материал|./environment/PDF/12-Позвоночные_Рыбы-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|2,3 Мб|
</pre>
</div>
<div changecount="1" created="201701301201" modified="201701301202" modifier="Яков Литвин" tags="[[12. Позвоночные. Рыбы]] attachment" title="12m">
<pre>|ссылка на материал|./environment/PDF_2/12-Позвоночные_Рыбы-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|116 Кб|
</pre>
</div>
<div changecount="1" created="201701242000" modified="201701242000" modifier="Яков Литвин" ordercounter="0" tags="[[13. Земноводные]] unitStep" title="13.1 Земноводные">
<pre>|visibleName|Земноводные|
|ссылка на контент шага|https://youtu.be/zoQZdmagScw|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701261805" modified="201701261805" modifier="Яков Литвин" ordercounter="1" tags="[[13. Земноводные]] unitStep" title="13.2">
<pre>|visibleName|Накорми лягушку|
|ссылка на контент шага|./environment/task_13-1/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701271349" modified="201701271349" modifier="Яков Литвин" ordercounter="2" tags="[[13. Земноводные]] unitStep" title="13.3">
<pre>|visibleName|Земноводные|
|ссылка на контент шага|./environment/task_13-3/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701290502" modified="201701290502" modifier="Яков Литвин" ordercounter="3" tags="[[13. Земноводные]] unitStep" title="13.4">
<pre>|ссылка на контент шага|./environment/JPG/text_13_1.jpg|
|тип шага|pager|
|visibleName|Кто такие земноводные|
</pre>
</div>
<div changecount="1" created="201701290502" modified="201701290502" modifier="Яков Литвин" ordercounter="4" tags="[[13. Земноводные]] unitStep" title="13.5">
<pre>|ссылка на контент шага|./environment/JPG/text_13_2.jpg|
|тип шага|pager|
|visibleName|Разнообразие земноводных|
</pre>
</div>
<div changecount="1" created="201701300313" modified="201701300313" modifier="Яков Литвин" tags="[[13. Земноводные]] attachment" title="13k">
<pre>|ссылка на материал|./environment/PDF/13-Земноводные-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|1,2 Мб|
</pre>
</div>
<div changecount="1" created="201701301202" modified="201701301202" modifier="Яков Литвин" tags="[[13. Земноводные]] attachment" title="13m">
<pre>|ссылка на материал|./environment/PDF_2/13-Земноводные-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|140 Кб|
</pre>
</div>
<div changecount="1" created="201701242001" modified="201701242001" modifier="Яков Литвин" ordercounter="0" tags="[[14. Пресмыкающиеся]] unitStep" title="14.1 Пресмыкающиеся">
<pre>|visibleName|Пресмыкающиеся|
|ссылка на контент шага|https://youtu.be/J2Bguipq7-w|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701271349" modified="201701271349" modifier="Яков Литвин" ordercounter="1" tags="[[14. Пресмыкающиеся]] unitStep" title="14.2">
<pre>|ссылка на контент шага|./environment/task_14-1/index.html|
|visibleName|Пресмыкающиеся|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701290502" modified="201701290502" modifier="Яков Литвин" ordercounter="2" tags="[[14. Пресмыкающиеся]] unitStep" title="14.3">
<pre>|ссылка на контент шага|./environment/JPG/text_14_1.jpg|
|тип шага|pager|
|visibleName|Ящерицы, крокодилы и&amp;nbsp;змеи|
</pre>
</div>
<div changecount="1" created="201701290503" modified="201701290503" modifier="Яков Литвин" ordercounter="3" tags="[[14. Пресмыкающиеся]] unitStep" title="14.4">
<pre>|ссылка на контент шага|./environment/JPG/text_14_2.jpg|
|тип шага|pager|
|visibleName|Хамелеоны и&amp;nbsp;черепахи|
</pre>
</div>
<div changecount="1" created="201701300313" modified="201701300314" modifier="Яков Литвин" tags="[[14. Пресмыкающиеся]] attachment" title="14k">
<pre>|ссылка на материал|./environment/PDF/14-Пресмыкающиеся-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|720 Кб|
</pre>
</div>
<div changecount="1" created="201701301202" modified="201701301202" modifier="Яков Литвин" tags="[[14. Пресмыкающиеся]] attachment" title="14m">
<pre>|ссылка на материал|./environment/PDF_2/14-Пресмыкающиеся-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|126 Кб|
</pre>
</div>
<div changecount="1" created="201701261806" modified="201701261806" modifier="Яков Литвин" ordercounter="1" tags="[[15. Птицы]] unitStep" title="15.1">
<pre>|ссылка на контент шага|./environment/task_15-1/index.html|
|тип шага|task|
|visibleName|Признаки птиц|
</pre>
</div>
<div changecount="1" created="201701242002" modified="201701242002" modifier="Яков Литвин" ordercounter="0" tags="[[15. Птицы]] unitStep" title="15.1 Птицы">
<pre>|visibleName|Птицы|
|ссылка на контент шага|https://youtu.be/_Xd2FzY_cG8|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701271350" modified="201701271350" modifier="Яков Литвин" ordercounter="2" tags="[[15. Птицы]] unitStep" title="15.2">
<pre>|ссылка на контент шага|./environment/task_15-7/index.html|
|тип шага|task|
|visibleName|Воробей и&amp;nbsp;его родственники|
</pre>
</div>
<div changecount="1" created="201701290503" modified="201701290503" modifier="Яков Литвин" ordercounter="3" tags="[[15. Птицы]] unitStep" title="15.3">
<pre>|ссылка на контент шага|./environment/JPG/text_15_1.jpg|
|тип шага|pager|
|visibleName|Признаки птиц|
</pre>
</div>
<div changecount="1" created="201701290503" modified="201701290503" modifier="Яков Литвин" ordercounter="4" tags="[[15. Птицы]] unitStep" title="15.4">
<pre>|ссылка на контент шага|./environment/JPG/text_15_2.jpg|
|тип шага|pager|
|visibleName|Родственники воробьёв и&amp;nbsp;кур|
</pre>
</div>
<div changecount="1" created="201701290503" modified="201701290503" modifier="Яков Литвин" ordercounter="5" tags="[[15. Птицы]] unitStep" title="15.5">
<pre>|ссылка на контент шага|./environment/JPG/text_15_3.jpg|
|тип шага|pager|
|visibleName|Хищные и&amp;nbsp;быстрые|
</pre>
</div>
<div changecount="1" created="201701290503" modified="201701290504" modifier="Яков Литвин" ordercounter="6" tags="[[15. Птицы]] unitStep" title="15.6">
<pre>|ссылка на контент шага|./environment/JPG/text_15_4.jpg|
|тип шага|pager|
|visibleName|Птицы, связанные с&amp;nbsp;водой|
</pre>
</div>
<div changecount="1" created="201701300314" modified="201701300314" modifier="Яков Литвин" tags="[[15. Птицы]] attachment" title="15k">
<pre>|ссылка на материал|./environment/PDF/15-Птицы-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|2,4 Мб|
</pre>
</div>
<div changecount="1" created="201701301203" modified="201701301203" modifier="Яков Литвин" tags="[[15. Птицы]] attachment" title="15m">
<pre>|ссылка на материал|./environment/PDF_2/15-Птицы-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|69 Кб|
</pre>
</div>
<div changecount="1" created="201701242002" modified="201701242002" modifier="Яков Литвин" ordercounter="0" tags="[[16. Млекопитающие, часть&amp;nbsp;1]] unitStep" title="16.1 Млекопитающие, часть&amp;nbsp;1">
<pre>|visibleName|Млекопитающие, часть&amp;nbsp;1|
|ссылка на контент шага|https://youtu.be/8vwVStzf11I|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701261806" modified="201701261806" modifier="Яков Литвин" ordercounter="1" tags="[[16. Млекопитающие, часть&amp;nbsp;1]] unitStep" title="16.2">
<pre>|ссылка на контент шага|./environment/task_16-1/index.html|
|тип шага|task|
|visibleName|Признаки птиц и&amp;nbsp;зверей|
</pre>
</div>
<div changecount="1" created="201701261806" modified="201701261806" modifier="Яков Литвин" ordercounter="2" tags="[[16. Млекопитающие, часть&amp;nbsp;1]] unitStep" title="16.3">
<pre>|ссылка на контент шага|./environment/task_16-3/index.html|
|тип шага|task|
|visibleName|Звери на&amp;nbsp;обеде|
</pre>
</div>
<div changecount="1" created="201701290504" modified="201701290504" modifier="Яков Литвин" ordercounter="3" tags="[[16. Млекопитающие, часть&amp;nbsp;1]] unitStep" title="16.4">
<pre>|ссылка на контент шага|./environment/JPG/text_16_1.jpg|
|тип шага|pager|
|visibleName|Признаки млекопитающих|
</pre>
</div>
<div changecount="1" created="201701290504" modified="201701290504" modifier="Яков Литвин" ordercounter="4" tags="[[16. Млекопитающие, часть&amp;nbsp;1]] unitStep" title="16.5">
<pre>|ссылка на контент шага|./environment/JPG/text_16_2.jpg|
|тип шага|pager|
|visibleName|Грызуны|
</pre>
</div>
<div changecount="1" created="201701290505" modified="201701290505" modifier="Яков Литвин" ordercounter="5" tags="[[16. Млекопитающие, часть&amp;nbsp;1]] unitStep" title="16.6">
<pre>|ссылка на контент шага|./environment/JPG/text_16_3.jpg|
|тип шага|pager|
|visibleName|Зайцы, кролики и&amp;nbsp;летучие мыши|
</pre>
</div>
<div changecount="1" created="201701300314" modified="201701300314" modifier="Яков Литвин" tags="[[16. Млекопитающие, часть&amp;nbsp;1]] attachment" title="16k">
<pre>|ссылка на материал|./environment/PDF/16-Млекопитающие_часть_1-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|792 Кб|
</pre>
</div>
<div changecount="1" created="201701301204" modified="201701301204" modifier="Яков Литвин" tags="[[16. Млекопитающие, часть&amp;nbsp;1]] attachment" title="16m">
<pre>|ссылка на материал|./environment/PDF_2/16-Млекопитающие_часть_1-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|119 Кб|
</pre>
</div>
<div changecount="1" created="201701242003" modified="201701242003" modifier="Яков Литвин" ordercounter="0" tags="[[17. Млекопитающие, часть&amp;nbsp;2]] unitStep" title="17.1 Млекопитающие, часть&amp;nbsp;2">
<pre>|visibleName|Млекопитающие, часть&amp;nbsp;2|
|ссылка на контент шага|https://youtu.be/wvmMLAO9xv4|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701261807" modified="201701261807" modifier="Яков Литвин" ordercounter="1" tags="[[17. Млекопитающие, часть&amp;nbsp;2]] unitStep" title="17.2">
<pre>|visibleName|Рыбы и&amp;nbsp;китообразные|
|ссылка на контент шага|./environment/task_17-4/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701261807" modified="201701261807" modifier="Яков Литвин" ordercounter="2" tags="[[17. Млекопитающие, часть&amp;nbsp;2]] unitStep" title="17.3">
<pre>|visibleName|Млекопитающие|
|ссылка на контент шага|./environment/task_17-5/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701290505" modified="201701290505" modifier="Яков Литвин" ordercounter="3" tags="[[17. Млекопитающие, часть&amp;nbsp;2]] unitStep" title="17.4">
<pre>|ссылка на контент шага|./environment/JPG/text_17_1.jpg|
|тип шага|pager|
|visibleName|Копытные|
</pre>
</div>
<div changecount="1" created="201701290505" modified="201701290505" modifier="Яков Литвин" ordercounter="4" tags="[[17. Млекопитающие, часть&amp;nbsp;2]] unitStep" title="17.5">
<pre>|ссылка на контент шага|./environment/JPG/text_17_2.jpg|
|тип шага|pager|
|visibleName|Хищные и&amp;nbsp;китообразные|
</pre>
</div>
<div changecount="1" created="201701300315" modified="201701300315" modifier="Яков Литвин" tags="[[17. Млекопитающие, часть&amp;nbsp;2]] attachment" title="17k">
<pre>|ссылка на материал|./environment/PDF/17-Млекопитающие_часть_2-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|961 Кб|
</pre>
</div>
<div changecount="1" created="201701301204" modified="201701301204" modifier="Яков Литвин" tags="[[17. Млекопитающие, часть&amp;nbsp;2]] attachment" title="17m">
<pre>|ссылка на материал|./environment/PDF_2/17-Млекопитающие_часть_2-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|153 Кб|
</pre>
</div>
<div changecount="2" created="201701242004" modified="201701242004" modifier="Яков Литвин" ordercounter="0" tags="[[18. Признаки растений]] unitStep" title="18.1 Признаки растений">
<pre>|visibleName|Знакомство с&amp;nbsp;растениями|
|ссылка на контент шага|https://youtu.be/jcWjjpew7E4|
|тип шага|video|
</pre>
</div>
<div changecount="2" created="201701261809" modified="201701261809" modifier="Яков Литвин" ordercounter="1" tags="[[18. Признаки растений]] unitStep" title="18.2">
<pre>|visibleName|Признаки растений|
|ссылка на контент шага|./environment/task_18-1/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701261809" modified="201701261809" modifier="Яков Литвин" ordercounter="2" tags="[[18. Признаки растений]] unitStep" title="18.3">
<pre>|visibleName|Фотосинтез|
|ссылка на контент шага|./environment/task_18-2/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701290513" modified="201701290513" modifier="Яков Литвин" ordercounter="3" tags="[[18. Признаки растений]] unitStep" title="18.4">
<pre>|ссылка на контент шага|./environment/JPG/text_18_1.jpg|
|тип шага|pager|
|visibleName|Признаки растений|
</pre>
</div>
<div changecount="1" created="201701290513" modified="201701290513" modifier="Яков Литвин" ordercounter="4" tags="[[18. Признаки растений]] unitStep" title="18.5">
<pre>|ссылка на контент шага|./environment/JPG/text_18_2.jpg|
|тип шага|pager|
|visibleName|Фотосинтез|
</pre>
</div>
<div changecount="1" created="201701300315" modified="201701300316" modifier="Яков Литвин" tags="[[18. Признаки растений]] attachment" title="18k">
<pre>|ссылка на материал|./environment/PDF/18-Знакомство_с_растениями-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|740 Кб|
</pre>
</div>
<div changecount="1" created="201701301204" modified="201701301204" modifier="Яков Литвин" tags="[[18. Признаки растений]] attachment" title="18m">
<pre>|ссылка на материал|./environment/PDF_2/18-Знакомство_с_растениями-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|231 Кб|
</pre>
</div>
<div changecount="1" created="201701242005" modified="201701242005" modifier="Яков Литвин" ordercounter="0" tags="[[19. Строение растения]] unitStep" title="19.1 Строение растения">
<pre>|visibleName|Строение растений|
|ссылка на контент шага|https://youtu.be/q8w7NC7vcFc|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701301057" modified="201701301057" modifier="Яков Литвин" ordercounter="1" tags="[[19. Строение растения]] unitStep" title="19.2">
<pre>|ссылка на контент шага|./environment/task_19-1/index.html|
|тип шага|task|
|visibleName|Строение растений|
</pre>
</div>
<div changecount="1" created="201701301057" modified="201701301057" modifier="Яков Литвин" ordercounter="2" tags="[[19. Строение растения]] unitStep" title="19.3">
<pre>|ссылка на контент шага|./environment/task_19-2/index.html|
|тип шага|task|
|visibleName|Строение растений|
</pre>
</div>
<div changecount="2" created="201701261810" modified="201701261810" modifier="Яков Литвин" ordercounter="3" tags="[[19. Строение растения]] unitStep" title="19.4">
<pre>|ссылка на контент шага|./environment/task_19-3/index.html|
|visibleName|Жизненные формы растений|
|тип шага|task|
</pre>
</div>
<div changecount="2" created="201701290514" modified="201701290514" modifier="Яков Литвин" ordercounter="4" tags="[[19. Строение растения]] unitStep" title="19.5">
<pre>|ссылка на контент шага|./environment/JPG/text_19_1.jpg|
|тип шага|pager|
|visibleName|Строение растений|
</pre>
</div>
<div changecount="2" created="201701290514" modified="201701290514" modifier="Яков Литвин" ordercounter="5" tags="[[19. Строение растения]] unitStep" title="19.6">
<pre>|ссылка на контент шага|./environment/JPG/text_19_2.jpg|
|тип шага|pager|
|visibleName|Жизненные формы растений|
</pre>
</div>
<div changecount="1" created="201701300316" modified="201701300316" modifier="Яков Литвин" tags="[[19. Строение растения]] attachment" title="19k">
<pre>|ссылка на материал|./environment/PDF/19-Строение_растений-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|541 Кб|
</pre>
</div>
<div changecount="1" created="201701301205" modified="201701301205" modifier="Яков Литвин" tags="[[19. Строение растения]] attachment" title="19m">
<pre>|ссылка на материал|./environment/PDF_2/19-Строение_растений-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|148 Кб|
</pre>
</div>
<div changecount="2" created="201701241942" modified="201701241942" modifier="Яков Литвин" ordercounter="0" tags="[[2. Чем живое отличается от&amp;nbsp;неживого]] unitStep" title="2.1 Чем живое отличается от&amp;nbsp;неживого">
<pre>|ссылка на контент шага|https://youtu.be/wxo17Q5K5sY|
|тип шага|video|
|visibleName|Чем живое отличается от&amp;nbsp;неживого|
</pre>
</div>
<div changecount="1" created="201701271018" modified="201701271018" modifier="Яков Литвин" ordercounter="1" tags="[[2. Чем живое отличается от&amp;nbsp;неживого]] unitStep" title="2.2">
<pre>|ссылка на контент шага|./environment/task_02-1/index.html|
|тип шага|task|
|visibleName|Признаки живого|
</pre>
</div>
<div changecount="3" created="201701261751" modified="201701261751" modifier="Яков Литвин" ordercounter="2" tags="[[2. Чем живое отличается от&amp;nbsp;неживого]] unitStep" title="2.3 Чем живое отличается от&amp;nbsp;неживого">
<pre>|visibleName|Живое, неживое и&amp;nbsp;мёртвое|
|ссылка на контент шага|./environment/task_02-3/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701290453" modified="201701290453" modifier="Яков Литвин" ordercounter="3" tags="[[2. Чем живое отличается от&amp;nbsp;неживого]] unitStep" title="2.4">
<pre>|ссылка на контент шага|./environment/JPG/text_02_1.jpg|
|тип шага|pager|
|visibleName|Признаки живого|
</pre>
</div>
<div changecount="1" created="201701290453" modified="201701290453" modifier="Яков Литвин" ordercounter="4" tags="[[2. Чем живое отличается от&amp;nbsp;неживого]] unitStep" title="2.5">
<pre>|ссылка на контент шага|./environment/JPG/text_02_2.jpg|
|тип шага|pager|
|visibleName|Как пользоваться признаками живого|
</pre>
</div>
<div changecount="1" created="201701300305" modified="201701300306" modifier="Яков Литвин" tags="[[2. Чем живое отличается от&amp;nbsp;неживого]] attachment" title="2k">
<pre>|занимает памяти|686 Кб|
|ссылка на материал|./environment/PDF/02-Чем_живое_отличается_от_неживого-Конспект.pdf|
|visibleName|Конспект для ученика|
</pre>
</div>
<div changecount="1" created="201701301158" modified="201701301158" modifier="Яков Литвин" tags="[[2. Чем живое отличается от&amp;nbsp;неживого]] attachment" title="2m">
<pre>|ссылка на материал|./environment/PDF_2/02-Чем_живое_отличается_от_неживого-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|191 Кб|
</pre>
</div>
<div changecount="1" created="201701242006" modified="201701242006" modifier="Яков Литвин" ordercounter="0" tags="[[20. Водоросли и&amp;nbsp;мхи]] unitStep" title="20.1 Водоросли и&amp;nbsp;мхи">
<pre>|visibleName|Водоросли и&amp;nbsp;мхи|
|ссылка на контент шага|https://youtu.be/nAPy6tc6uUg|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701302022" modified="201701302022" modifier="Яков Литвин" ordercounter="1" tags="[[20. Водоросли и&amp;nbsp;мхи]] unitStep" title="20.2">
<pre>|ссылка на контент шага|./environment/task_20-2/index.html|
|тип шага|task|
|visibleName|Водоросли и&amp;nbsp;мхи|
</pre>
</div>
<div changecount="2" created="201701290515" modified="201701290515" modifier="Яков Литвин" ordercounter="2" tags="[[20. Водоросли и&amp;nbsp;мхи]] unitStep" title="20.3">
<pre>|ссылка на контент шага|./environment/JPG/text_20_1.jpg|
|тип шага|pager|
|visibleName|Водоросли|
</pre>
</div>
<div changecount="2" created="201701290515" modified="201701290515" modifier="Яков Литвин" ordercounter="3" tags="[[20. Водоросли и&amp;nbsp;мхи]] unitStep" title="20.4">
<pre>|ссылка на контент шага|./environment/JPG/text_20_2.jpg|
|тип шага|pager|
|visibleName|Мхи|
</pre>
</div>
<div changecount="1" created="201701300316" modified="201701300316" modifier="Яков Литвин" tags="[[20. Водоросли и&amp;nbsp;мхи]] attachment" title="20k">
<pre>|ссылка на материал|./environment/PDF/20-Водоросли_и_мхи-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|994 Кб|
</pre>
</div>
<div changecount="1" created="201701301205" modified="201701301205" modifier="Яков Литвин" tags="[[20. Водоросли и&amp;nbsp;мхи]] attachment" title="20m">
<pre>|ссылка на материал|./environment/PDF_2/20-Водоросли_и_мхи-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|165 Кб|
</pre>
</div>
<div changecount="1" created="201701242007" modified="201701242007" modifier="Яков Литвин" ordercounter="0" tags="[[21. Папоротники и&amp;nbsp;хвойные]] unitStep" title="21.1 Папоротники и&amp;nbsp;хвойные">
<pre>|visibleName|Папоротники и&amp;nbsp;хвойные|
|ссылка на контент шага|https://youtu.be/ZbmxGvY06Nw|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701261811" modified="201701261811" modifier="Яков Литвин" ordercounter="1" tags="[[21. Папоротники и&amp;nbsp;хвойные]] unitStep" title="21.2">
<pre>|visibleName|Нецветковые растения|
|ссылка на контент шага|./environment/task_21-1/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701261811" modified="201701261811" modifier="Яков Литвин" ordercounter="2" tags="[[21. Папоротники и&amp;nbsp;хвойные]] unitStep" title="21.3">
<pre>|visibleName|Польза нецветковых растений|
|ссылка на контент шага|./environment/task_21-2/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701290515" modified="201701290515" modifier="Яков Литвин" ordercounter="3" tags="[[21. Папоротники и&amp;nbsp;хвойные]] unitStep" title="21.4">
<pre>|ссылка на контент шага|./environment/JPG/text_21_1.jpg|
|тип шага|pager|
|visibleName|Папоротники и&amp;nbsp;хвощи|
</pre>
</div>
<div changecount="1" created="201701290515" modified="201701290515" modifier="Яков Литвин" ordercounter="4" tags="[[21. Папоротники и&amp;nbsp;хвойные]] unitStep" title="21.5">
<pre>|ссылка на контент шага|./environment/JPG/text_21_2.jpg|
|тип шага|pager|
|visibleName|Хвойные|
</pre>
</div>
<div changecount="1" created="201701300317" modified="201701300317" modifier="Яков Литвин" tags="[[21. Папоротники и&amp;nbsp;хвойные]] attachment" title="21k">
<pre>|ссылка на материал|./environment/PDF/21-Папоротники_и_хвойные-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|1,3 Мб|
</pre>
</div>
<div changecount="1" created="201701301206" modified="201701301206" modifier="Яков Литвин" tags="[[21. Папоротники и&amp;nbsp;хвойные]] attachment" title="21m">
<pre>|ссылка на материал|./environment/PDF_2/21-Папоротники_и_хвойные-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|238 Кб|
</pre>
</div>
<div changecount="1" created="201701242008" modified="201701242008" modifier="Яков Литвин" ordercounter="0" tags="[[22. Цветковые деревья и&amp;nbsp;кустарники]] unitStep" title="22.1 Цветковые деревья и&amp;nbsp;кустарники">
<pre>|visibleName|Цветковые деревья и&amp;nbsp;кустарники|
|ссылка на контент шага|https://youtu.be/8s8sOIJw8zM|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701261812" modified="201701261812" modifier="Яков Литвин" ordercounter="1" tags="[[22. Цветковые деревья и&amp;nbsp;кустарники]] unitStep" title="22.2">
<pre>|ссылка на контент шага|./environment/task_22-1/index.html|
|тип шага|task|
|visibleName|Цветковые деревья и&amp;nbsp;кустарники|
</pre>
</div>
<div changecount="1" created="201701261812" modified="201701261812" modifier="Яков Литвин" ordercounter="2" tags="[[22. Цветковые деревья и&amp;nbsp;кустарники]] unitStep" title="22.3">
<pre>|ссылка на контент шага|./environment/task_22-3/index.html|
|тип шага|task|
|visibleName|Чьи это цветки?|
</pre>
</div>
<div changecount="1" created="201701261812" modified="201701261812" modifier="Яков Литвин" ordercounter="3" tags="[[22. Цветковые деревья и&amp;nbsp;кустарники]] unitStep" title="22.4">
<pre>|ссылка на контент шага|./environment/task_22-5/index.html|
|тип шага|task|
|visibleName|Опыление|
</pre>
</div>
<div changecount="1" created="201701290516" modified="201701290516" modifier="Яков Литвин" ordercounter="4" tags="[[22. Цветковые деревья и&amp;nbsp;кустарники]] unitStep" title="22.5">
<pre>|ссылка на контент шага|./environment/JPG/text_22_1.jpg|
|тип шага|pager|
|visibleName|Цветковые деревья|
</pre>
</div>
<div changecount="1" created="201701290516" modified="201701290516" modifier="Яков Литвин" ordercounter="5" tags="[[22. Цветковые деревья и&amp;nbsp;кустарники]] unitStep" title="22.6">
<pre>|ссылка на контент шага|./environment/JPG/text_22_2.jpg|
|тип шага|pager|
|visibleName|Цветковые кустарники|
</pre>
</div>
<div changecount="1" created="201701300317" modified="201701300317" modifier="Яков Литвин" tags="[[22. Цветковые деревья и&amp;nbsp;кустарники]] attachment" title="22k">
<pre>|ссылка на материал|./environment/PDF/22-Цветковые_деревья_и_кустарники-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|1,4 Мб|
</pre>
</div>
<div changecount="1" created="201701301206" modified="201701301207" modifier="Яков Литвин" tags="[[22. Цветковые деревья и&amp;nbsp;кустарники]] attachment" title="22m">
<pre>|ссылка на материал|./environment/PDF_2/22-Цветковые_деревья_и_кустарники-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|321 Кб|
</pre>
</div>
<div changecount="1" created="201701242009" modified="201701242009" modifier="Яков Литвин" ordercounter="0" tags="[[23. Цветковые травы]] unitStep" title="23.1 Цветковые травы">
<pre>|visibleName|Цветковые травы|
|ссылка на контент шага|https://youtu.be/H1RTSX8ElQs|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701271351" modified="201701271351" modifier="Яков Литвин" ordercounter="1" tags="[[23. Цветковые травы]] unitStep" title="23.2">
<pre>|ссылка на контент шага|./environment/task_23-3/index.html|
|тип шага|task|
|visibleName|Цветковые травы|
</pre>
</div>
<div changecount="1" created="201701290517" modified="201701290517" modifier="Яков Литвин" ordercounter="2" tags="[[23. Цветковые травы]] unitStep" title="23.3">
<pre>|ссылка на контент шага|./environment/JPG/text_23_1.jpg|
|тип шага|pager|
|visibleName|Цветковые травы|
</pre>
</div>
<div changecount="1" created="201701290517" modified="201701290517" modifier="Яков Литвин" ordercounter="3" tags="[[23. Цветковые травы]] unitStep" title="23.4">
<pre>|ссылка на контент шага|./environment/JPG/text_23_2.jpg|
|тип шага|pager|
|visibleName|Соцветия|
</pre>
</div>
<div changecount="1" created="201701300317" modified="201701300318" modifier="Яков Литвин" tags="[[23. Цветковые травы]] attachment" title="23k">
<pre>|ссылка на материал|./environment/PDF/23-Цветковые_травы-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|850 Кб|
</pre>
</div>
<div changecount="1" created="201701301207" modified="201701301207" modifier="Яков Литвин" tags="[[23. Цветковые травы]] attachment" title="23m">
<pre>|ссылка на материал|./environment/PDF_2/23-Цветковые_травы-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|223 Кб|
</pre>
</div>
<div changecount="1" created="201701242010" modified="201701242010" modifier="Яков Литвин" ordercounter="0" tags="[[24. Чем полезны и&amp;nbsp;опасны животные для человека]] unitStep" title="24.1 Чем полезны и&amp;nbsp;опасны животные для человека">
<pre>|visibleName|Чем полезны и&amp;nbsp;опасны животные для человека|
|ссылка на контент шага|https://youtu.be/CArTzIcF5uk|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701261813" modified="201701261813" modifier="Яков Литвин" ordercounter="1" tags="[[24. Чем полезны и&amp;nbsp;опасны животные для человека]] unitStep" title="24.2">
<pre>|visibleName|Польза животных|
|ссылка на контент шага|./environment/task_24-1/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701290517" modified="201701290517" modifier="Яков Литвин" ordercounter="2" tags="[[24. Чем полезны и&amp;nbsp;опасны животные для человека]] unitStep" title="24.3">
<pre>|ссылка на контент шага|./environment/JPG/text_24_1.jpg|
|тип шага|pager|
|visibleName|Польза от&amp;nbsp;животных: еда и&amp;nbsp;лекарства|
</pre>
</div>
<div changecount="1" created="201701290517" modified="201701290517" modifier="Яков Литвин" ordercounter="3" tags="[[24. Чем полезны и&amp;nbsp;опасны животные для человека]] unitStep" title="24.4">
<pre>|ссылка на контент шага|./environment/JPG/text_24_2.jpg|
|тип шага|pager|
|visibleName|Польза от&amp;nbsp;животных: одежда и&amp;nbsp;транспорт|
</pre>
</div>
<div changecount="1" created="201701290517" modified="201701290517" modifier="Яков Литвин" ordercounter="4" tags="[[24. Чем полезны и&amp;nbsp;опасны животные для человека]] unitStep" title="24.5">
<pre>|ссылка на контент шага|./environment/JPG/text_24_3.jpg|
|тип шага|pager|
|visibleName|Чем опасны животные для человека|
</pre>
</div>
<div changecount="1" created="201701290517" modified="201701290517" modifier="Яков Литвин" ordercounter="5" tags="[[24. Чем полезны и&amp;nbsp;опасны животные для человека]] unitStep" title="24.6">
<pre>|ссылка на контент шага|./environment/JPG/text_24_4.jpg|
|тип шага|pager|
|visibleName|Как избежать опасности|
</pre>
</div>
<div changecount="1" created="201701300318" modified="201701300318" modifier="Яков Литвин" tags="[[24. Чем полезны и&amp;nbsp;опасны животные для человека]] attachment" title="24k">
<pre>|ссылка на материал|./environment/PDF/24-Чем_полезны_и_опасны_животные_для_человека-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|1,5 Мб|
</pre>
</div>
<div changecount="1" created="201701301207" modified="201701301207" modifier="Яков Литвин" tags="[[24. Чем полезны и&amp;nbsp;опасны животные для человека]] attachment" title="24m">
<pre>|ссылка на материал|./environment/PDF_2/24-Чем_полезны_и_опасны_животные_для_человека-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|356 Кб|
</pre>
</div>
<div changecount="1" created="201701242011" modified="201701242011" modifier="Яков Литвин" ordercounter="0" tags="[[25. Чем полезны и&amp;nbsp;опасны растения для человека]] unitStep" title="25.1 Чем полезны и&amp;nbsp;опасны растения для человека">
<pre>|visibleName|Чем полезны и&amp;nbsp;опасны растения для человека|
|ссылка на контент шага|https://youtu.be/esv4Z7aZN_g|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701261814" modified="201701261814" modifier="Яков Литвин" ordercounter="1" tags="[[25. Чем полезны и&amp;nbsp;опасны растения для человека]] unitStep" title="25.2">
<pre>|ссылка на контент шага|./environment/task_25-2/index.html|
|тип шага|task|
|visibleName|Польза животных и&amp;nbsp;растений|
</pre>
</div>
<div changecount="1" created="201701290518" modified="201701290518" modifier="Яков Литвин" ordercounter="2" tags="[[25. Чем полезны и&amp;nbsp;опасны растения для человека]] unitStep" title="25.3">
<pre>|ссылка на контент шага|./environment/JPG/text_25_1.jpg|
|тип шага|pager|
|visibleName|Польза растений: кислород, еда и&amp;nbsp;лекарства|
</pre>
</div>
<div changecount="1" created="201701290519" modified="201701290519" modifier="Яков Литвин" ordercounter="3" tags="[[25. Чем полезны и&amp;nbsp;опасны растения для человека]] unitStep" title="25.4">
<pre>|ссылка на контент шага|./environment/JPG/text_25_2.jpg|
|тип шага|pager|
|visibleName|Польза растений: корм и&amp;nbsp;материалы|
</pre>
</div>
<div changecount="1" created="201701290519" modified="201701290519" modifier="Яков Литвин" ordercounter="4" tags="[[25. Чем полезны и&amp;nbsp;опасны растения для человека]] unitStep" title="25.5">
<pre>|ссылка на контент шага|./environment/JPG/text_25_3.jpg|
|тип шага|pager|
|visibleName|Чем опасны растения для человека|
</pre>
</div>
<div changecount="1" created="201701300323" modified="201701300323" modifier="Яков Литвин" tags="[[25. Чем полезны и&amp;nbsp;опасны растения для человека]] attachment" title="25k">
<pre>|visibleName|Конспект для ученика|
|ссылка на материал|./environment/PDF/25-Чем полезны_и_опасны_растения_для_человека-Конспект.pdf|
|занимает памяти|1 Мб|
</pre>
</div>
<div changecount="1" created="201701301209" modified="201701301209" modifier="Яков Литвин" tags="[[25. Чем полезны и&amp;nbsp;опасны растения для человека]] attachment" title="25m">
<pre>|ссылка на материал|./environment/PDF_2/25-Чем полезны_и_опасны_растения_для_человека-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|290 Кб|
</pre>
</div>
<div changecount="1" created="201701242254" modified="201701242254" modifier="Яков Литвин" ordercounter="0" tags="[[26. Культурные злаки. Пшеница]] unitStep" title="26.1 Культурные злаки. Пшеница">
<pre>|visibleName|Культурные злаки. Пшеница|
|ссылка на контент шага|https://youtu.be/abqDB7mnJXs|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701261814" modified="201701261814" modifier="Яков Литвин" ordercounter="1" tags="[[26. Культурные злаки. Пшеница]] unitStep" title="26.2">
<pre>|visibleName|Сельскохозяйственные приспособления|
|ссылка на контент шага|./environment/task_26-3/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701290519" modified="201701290519" modifier="Яков Литвин" ordercounter="2" tags="[[26. Культурные злаки. Пшеница]] unitStep" title="26.3">
<pre>|ссылка на контент шага|./environment/JPG/text_26_1.jpg|
|тип шага|pager|
|visibleName|Что такое сельское хозяйство|
</pre>
</div>
<div changecount="1" created="201701290519" modified="201701290519" modifier="Яков Литвин" ordercounter="3" tags="[[26. Культурные злаки. Пшеница]] unitStep" title="26.4">
<pre>|ссылка на контент шага|./environment/JPG/text_26_2.jpg|
|тип шага|pager|
|visibleName|Пшеницы|
</pre>
</div>
<div changecount="1" created="201701300319" modified="201701300319" modifier="Яков Литвин" tags="[[26. Культурные злаки. Пшеница]] attachment" title="26k">
<pre>|ссылка на материал|./environment/PDF/26-Культурные_злаки_Пшеница-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|570 Кб|
</pre>
</div>
<div changecount="1" created="201701301209" modified="201701301209" modifier="Яков Литвин" tags="[[26. Культурные злаки. Пшеница]] attachment" title="26m">
<pre>|ссылка на материал|./environment/PDF_2/26-Культурные_злаки_Пшеница-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|274 Кб|
</pre>
</div>
<div changecount="1" created="201701242255" modified="201701242255" modifier="Яков Литвин" ordercounter="0" tags="[[27. Другие культурные злаки]] unitStep" title="27.1 Другие культурные злаки">
<pre>|visibleName|Другие культурные злаки|
|ссылка на контент шага|https://youtu.be/MNhHgKm6b9Y|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701261815" modified="201701261815" modifier="Яков Литвин" ordercounter="1" tags="[[27. Другие культурные злаки]] unitStep" title="27.2">
<pre>|ссылка на контент шага|./environment/task_27-1/index.html|
|тип шага|task|
|visibleName|Злаки|
</pre>
</div>
<div changecount="1" created="201701300114" modified="201701300114" modifier="Яков Литвин" ordercounter="2" tags="[[27. Другие культурные злаки]] unitStep" title="27.3">
<pre>|ссылка на контент шага|./environment/JPG/text_27_1.jpg|
|тип шага|pager|
|visibleName|Другие культурные злаки|
</pre>
</div>
<div changecount="1" created="201701300114" modified="201701300114" modifier="Яков Литвин" ordercounter="3" tags="[[27. Другие культурные злаки]] unitStep" title="27.4">
<pre>|ссылка на контент шага|./environment/JPG/text_27_2.jpg|
|тип шага|pager|
|visibleName|Сено и&amp;nbsp;солома|
</pre>
</div>
<div changecount="1" created="201701300319" modified="201701300319" modifier="Яков Литвин" tags="[[27. Другие культурные злаки]] attachment" title="27k">
<pre>|ссылка на материал|./environment/PDF/27-Другие_культурные_злаки-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|660 Кб|
</pre>
</div>
<div changecount="1" created="201701301210" modified="201701301210" modifier="Яков Литвин" tags="[[27. Другие культурные злаки]] attachment" title="27m">
<pre>|ссылка на материал|./environment/PDF_2/27-Другие_культурные_злаки-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|218 Кб|
</pre>
</div>
<div changecount="1" created="201701242255" modified="201701242255" modifier="Яков Литвин" ordercounter="0" tags="[[28. Овощи]] unitStep" title="28.1 Овощи">
<pre>|visibleName|Овощи|
|ссылка на контент шага|https://youtu.be/xLMfmV1LLqs|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701261815" modified="201701261815" modifier="Яков Литвин" ordercounter="1" tags="[[28. Овощи]] unitStep" title="28.2">
<pre>|visibleName|Консервы|
|ссылка на контент шага|./environment/task_28-5/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701300115" modified="201701300115" modifier="Яков Литвин" ordercounter="2" tags="[[28. Овощи]] unitStep" title="28.3">
<pre>|ссылка на контент шага|./environment/JPG/text_28_1.jpg|
|тип шага|pager|
|visibleName|Картофель и&amp;nbsp;капуста|
</pre>
</div>
<div changecount="1" created="201701300115" modified="201701300115" modifier="Яков Литвин" ordercounter="3" tags="[[28. Овощи]] unitStep" title="28.4">
<pre>|ссылка на контент шага|./environment/JPG/text_28_2.jpg|
|тип шага|pager|
|visibleName|Корнеплоды и&amp;nbsp;бобовые|
</pre>
</div>
<div changecount="1" created="201701300319" modified="201701300319" modifier="Яков Литвин" tags="[[28. Овощи]] attachment" title="28k">
<pre>|ссылка на материал|./environment/PDF/28-Овощи-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|553 Кб|
</pre>
</div>
<div changecount="1" created="201701301210" modified="201701301210" modifier="Яков Литвин" tags="[[28. Овощи]] attachment" title="28m">
<pre>|ссылка на материал|./environment/PDF_2/28-Овощи-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|954 Кб|
</pre>
</div>
<div changecount="1" created="201701242256" modified="201701242256" modifier="Яков Литвин" ordercounter="0" tags="[[29. Фрукты и&amp;nbsp;другие культурные растения]] unitStep" title="29.1 Фрукты и&amp;nbsp;другие культурные растения">
<pre>|visibleName|Фрукты и&amp;nbsp;другие культурные растения|
|ссылка на контент шага|https://youtu.be/gtz8CRtRq4c|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701261816" modified="201701261816" modifier="Яков Литвин" ordercounter="1" tags="[[29. Фрукты и&amp;nbsp;другие культурные растения]] unitStep" title="29.2">
<pre>|ссылка на контент шага|./environment/task_29-1/index.html|
|тип шага|task|
|visibleName|Овощи и&amp;nbsp;фрукты|
</pre>
</div>
<div changecount="1" created="201703061633" modified="201703061633" modifier="Яков Литвин" ordercounter="2" tags="[[29. Фрукты и&amp;nbsp;другие культурные растения]] unitStep" title="29.3">
<pre>|тип шага|task|
|visibleName|Из чего это сделано?|
|ссылка на контент шага|./environment/task_29-2/index.html|
</pre>
</div>
<div changecount="2" created="201701300115" modified="201701300115" modifier="Яков Литвин" ordercounter="3" tags="[[29. Фрукты и&amp;nbsp;другие культурные растения]] unitStep" title="29.4">
<pre>|ссылка на контент шага|./environment/JPG/text_29_1.jpg|
|тип шага|pager|
|visibleName|Яблоки|
</pre>
</div>
<div changecount="2" created="201701300117" modified="201701300117" modifier="Яков Литвин" ordercounter="4" tags="[[29. Фрукты и&amp;nbsp;другие культурные растения]] unitStep" title="29.5">
<pre>|ссылка на контент шага|./environment/JPG/text_29_2.jpg|
|тип шага|pager|
|visibleName|Косточковые и&amp;nbsp;цитрусы|
</pre>
</div>
<div changecount="2" created="201701300117" modified="201701300117" modifier="Яков Литвин" ordercounter="5" tags="[[29. Фрукты и&amp;nbsp;другие культурные растения]] unitStep" title="29.6">
<pre>|ссылка на контент шага|./environment/JPG/text_29_3.jpg|
|тип шага|pager|
|visibleName|Прядильные растения|
</pre>
</div>
<div changecount="2" created="201701300117" modified="201701300117" modifier="Яков Литвин" ordercounter="6" tags="[[29. Фрукты и&amp;nbsp;другие культурные растения]] unitStep" title="29.7">
<pre>|ссылка на контент шага|./environment/JPG/text_29_4.jpg|
|тип шага|pager|
|visibleName|Другие культурные растения|
</pre>
</div>
<div changecount="1" created="201701300320" modified="201701300320" modifier="Яков Литвин" tags="[[29. Фрукты и&amp;nbsp;другие культурные растения]] attachment" title="29k">
<pre>|ссылка на материал|./environment/PDF/29-Фрукты_и_другие_культурные_растения-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|1,1 Мб|
</pre>
</div>
<div changecount="1" created="201701301210" modified="201701301211" modifier="Яков Литвин" tags="[[29. Фрукты и&amp;nbsp;другие культурные растения]] attachment" title="29m">
<pre>|ссылка на материал|./environment/PDF_2/29-Фрукты_и_другие_культурные_растения-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|227 Кб|
</pre>
</div>
<div changecount="2" created="201701241943" modified="201701241943" modifier="Яков Литвин" ordercounter="0" tags="[[3. Царства живой природы]] unitStep" title="3.1 Царства живой природы">
<pre>|тип шага|video|
|ссылка на контент шага|https://youtu.be/dHVwzwoTWQE|
|visibleName|Царства живой природы|
</pre>
</div>
<div changecount="1" created="201701271343" modified="201701271343" modifier="Яков Литвин" ordercounter="1" tags="[[3. Царства живой природы]] unitStep" title="3.2">
<pre>|ссылка на контент шага|./environment/task_03-1/index.html|
|тип шага|task|
|visibleName|Царства живой природы|
</pre>
</div>
<div changecount="1" created="201701290454" modified="201701290454" modifier="Яков Литвин" ordercounter="2" tags="[[3. Царства живой природы]] unitStep" title="3.3">
<pre>|ссылка на контент шага|./environment/JPG/text_03_1.jpg|
|тип шага|pager|
|visibleName|Царства живой природы|
</pre>
</div>
<div changecount="1" created="201701300308" modified="201701300308" modifier="Яков Литвин" tags="[[3. Царства живой природы]] attachment" title="3k">
<pre>|ссылка на материал|./environment/PDF/03-Царства_живой_природы-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|345 Кб|
</pre>
</div>
<div changecount="1" created="201701301159" modified="201701301159" modifier="Яков Литвин" tags="[[3. Царства живой природы]] attachment" title="3m">
<pre>|ссылка на материал|./environment/PDF_2/03-Царства_живой_природы-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|116 Кб|
</pre>
</div>
<div changecount="1" created="201701242257" modified="201701242257" modifier="Яков Литвин" ordercounter="0" tags="[[30. Животноводство. Еда]] unitStep" title="30.1 Животноводство. Еда">
<pre>|visibleName|Животноводство. Еда|
|ссылка на контент шага|https://youtu.be/LSaz6xvu-OY|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701281137" modified="201701281137" modifier="Яков Литвин" ordercounter="1" tags="[[30. Животноводство. Еда]] unitStep" title="30.2">
<pre>|ссылка на контент шага|./environment/task_30-1/index.html|
|тип шага|task|
|visibleName|Уход за&amp;nbsp;животными|
</pre>
</div>
<div changecount="3" created="201701300130" modified="201701300130" modifier="Яков Литвин" ordercounter="3" tags="[[30. Животноводство. Еда]] unitStep" title="30.3">
<pre>|ссылка на контент шага|./environment/JPG/text_30_1.jpg|
|тип шага|pager|
|visibleName|Коровы, козы и&amp;nbsp;овцы|
</pre>
</div>
<div changecount="3" created="201701300130" modified="201701300130" modifier="Яков Литвин" ordercounter="4" tags="[[30. Животноводство. Еда]] unitStep" title="30.4">
<pre>|ссылка на контент шага|./environment/JPG/text_30_2.jpg|
|тип шага|pager|
|visibleName|Птицы, свиньи и&amp;nbsp;пчёлы|
</pre>
</div>
<div changecount="1" created="201701300320" modified="201701300320" modifier="Яков Литвин" tags="[[30. Животноводство. Еда]] attachment" title="30k">
<pre>|ссылка на материал|./environment/PDF/30-Животноводство_Еда-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|487 Кб|
</pre>
</div>
<div changecount="1" created="201701301211" modified="201701301211" modifier="Яков Литвин" tags="[[30. Животноводство. Еда]] attachment" title="30m">
<pre>|ссылка на материал|./environment/PDF_2/30-Животноводство_Еда-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|114 Кб|
</pre>
</div>
<div changecount="1" created="201701242258" modified="201701242258" modifier="Яков Литвин" ordercounter="0" tags="[[31. Животноводство. Одежда и&amp;nbsp;транспорт]] unitStep" title="31.1 Животноводство. Одежда и&amp;nbsp;транспорт">
<pre>|visibleName|Животноводство. Одежда и&amp;nbsp;транспорт|
|ссылка на контент шага|https://youtu.be/PoXeRMyXTw4|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701302245" modified="201701302245" modifier="Яков Литвин" ordercounter="1" tags="[[31. Животноводство. Одежда и&amp;nbsp;транспорт]] unitStep" title="31.2">
<pre>|visibleName|Животноводство|
|ссылка на контент шага|./environment/task_30-2/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="2" created="201701300131" modified="201701300131" modifier="Яков Литвин" ordercounter="2" tags="[[31. Животноводство. Одежда и&amp;nbsp;транспорт]] unitStep" title="31.3">
<pre>|ссылка на контент шага|./environment/JPG/text_31_1.jpg|
|тип шага|pager|
|visibleName|Породы животных|
</pre>
</div>
<div changecount="1" created="201701300320" modified="201701300320" modifier="Яков Литвин" tags="[[31. Животноводство. Одежда и&amp;nbsp;транспорт]] attachment" title="31k">
<pre>|ссылка на материал|./environment/PDF/31-Животноводство_Одежда_и_транспорт-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|243 Кб|
</pre>
</div>
<div changecount="1" created="201701301211" modified="201701301211" modifier="Яков Литвин" tags="[[31. Животноводство. Одежда и&amp;nbsp;транспорт]] attachment" title="31m">
<pre>|ссылка на материал|./environment/PDF_2/31-Животноводство_Одежда_и_транспорт-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|155 Кб|
</pre>
</div>
<div changecount="1" created="201701242258" modified="201701242259" modifier="Яков Литвин" ordercounter="0" tags="[[32. Знакомство с&amp;nbsp;грибами]] unitStep" title="32.1 Знакомство с&amp;nbsp;грибами">
<pre>|visibleName|Знакомство с&amp;nbsp;грибами|
|ссылка на контент шага|https://youtu.be/zzG41LQ9z6w|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701281140" modified="201701281140" modifier="Яков Литвин" ordercounter="1" tags="[[32. Знакомство с&amp;nbsp;грибами]] unitStep" title="32.2">
<pre>|visibleName|Помоги кроту|
|ссылка на контент шага|./environment/task_31-2/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701300148" modified="201701300148" modifier="Яков Литвин" ordercounter="2" tags="[[32. Знакомство с&amp;nbsp;грибами]] unitStep" title="32.3">
<pre>|ссылка на контент шага|./environment/JPG/text_32_1.jpg|
|тип шага|pager|
|visibleName|Как устроены грибы|
</pre>
</div>
<div changecount="1" created="201701300148" modified="201701300148" modifier="Яков Литвин" ordercounter="3" tags="[[32. Знакомство с&amp;nbsp;грибами]] unitStep" title="32.4">
<pre>|ссылка на контент шага|./environment/JPG/text_32_2.jpg|
|тип шага|pager|
|visibleName|Признаки грибов|
</pre>
</div>
<div changecount="1" created="201701300321" modified="201701300321" modifier="Яков Литвин" tags="[[32. Знакомство с&amp;nbsp;грибами]] attachment" title="32k">
<pre>|ссылка на материал|./environment/PDF/32-Знакомство_с_грибами-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|310 Кб|
</pre>
</div>
<div changecount="1" created="201701301212" modified="201701301212" modifier="Яков Литвин" tags="[[32. Знакомство с&amp;nbsp;грибами]] attachment" title="32m">
<pre>|ссылка на материал|./environment/PDF_2/32-Знакомство_с_грибами-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|145 Кб|
</pre>
</div>
<div changecount="1" created="201701242259" modified="201701242259" modifier="Яков Литвин" ordercounter="0" tags="[[33. Чем полезны грибы для человека]] unitStep" title="33.1 Чем полезны грибы для человека">
<pre>|visibleName|Чем полезны грибы для человека|
|ссылка на контент шага|https://youtu.be/cAIKHIFiPdE|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701271352" modified="201701271352" modifier="Яков Литвин" ordercounter="1" tags="[[33. Чем полезны грибы для человека]] unitStep" title="33.2">
<pre>|visibleName|Полезные грибы|
|ссылка на контент шага|./environment/task_32-1/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="2" created="201701300205" modified="201701300205" modifier="Яков Литвин" ordercounter="2" tags="[[33. Чем полезны грибы для человека]] unitStep" title="33.3">
<pre>|ссылка на контент шага|./environment/JPG/text_33_1.jpg|
|тип шага|pager|
|visibleName|Дрожжи|
</pre>
</div>
<div changecount="1" created="201701300206" modified="201701300206" modifier="Яков Литвин" ordercounter="3" tags="[[33. Чем полезны грибы для человека]] unitStep" title="33.4">
<pre>|ссылка на контент шага|./environment/JPG/text_33_2.jpg|
|тип шага|pager|
|visibleName|Съедобные грибы|
</pre>
</div>
<div changecount="1" created="201701300206" modified="201701300206" modifier="Яков Литвин" ordercounter="4" tags="[[33. Чем полезны грибы для человека]] unitStep" title="33.5">
<pre>|ссылка на контент шага|./environment/JPG/text_33_3.jpg|
|тип шага|pager|
|visibleName|Другая польза грибов|
</pre>
</div>
<div changecount="1" created="201701300321" modified="201701300321" modifier="Яков Литвин" tags="[[33. Чем полезны грибы для человека]] attachment" title="33k">
<pre>|ссылка на материал|./environment/PDF/33-Чем_полезны_грибы_для_человека-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|1 Мб|
</pre>
</div>
<div changecount="1" created="201701301212" modified="201701301212" modifier="Яков Литвин" tags="[[33. Чем полезны грибы для человека]] attachment" title="33m">
<pre>|ссылка на материал|./environment/PDF_2/33-Чем_полезны_грибы_для_человека-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|108 Кб|
</pre>
</div>
<div changecount="1" created="201701242300" modified="201701242300" modifier="Яков Литвин" ordercounter="0" tags="[[34. Чем опасны грибы для человека]] unitStep" title="34.1 Чем опасны грибы для человека">
<pre>|visibleName|Чем опасны грибы для человека|
|ссылка на контент шага|https://youtu.be/FXOwz0dDRLk|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701261820" modified="201701261820" modifier="Яков Литвин" ordercounter="1" tags="[[34. Чем опасны грибы для человека]] unitStep" title="34.2">
<pre>|visibleName|Грибковые болезни растений|
|ссылка на контент шага|./environment/task_33-1/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="3" created="201701300208" modified="201701300208" modifier="Яков Литвин" ordercounter="2" tags="[[34. Чем опасны грибы для человека]] unitStep" title="34.3">
<pre>|ссылка на контент шага|./environment/JPG/text_34_1.jpg|
|тип шага|pager|
|visibleName|Опасные грибы|
</pre>
</div>
<div changecount="3" created="201701300208" modified="201701300208" modifier="Яков Литвин" ordercounter="3" tags="[[34. Чем опасны грибы для человека]] unitStep" title="34.4">
<pre>|ссылка на контент шага|./environment/JPG/text_34_2.jpg|
|тип шага|pager|
|visibleName|Грибковые болезни|
</pre>
</div>
<div changecount="1" created="201701300322" modified="201701300322" modifier="Яков Литвин" tags="[[34. Чем опасны грибы для человека]] attachment" title="34k">
<pre>|ссылка на материал|./environment/PDF/34-Чем_опасны_грибы_для_человека-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|1,1 Мб|
</pre>
</div>
<div changecount="1" created="201701301212" modified="201701301212" modifier="Яков Литвин" tags="[[34. Чем опасны грибы для человека]] attachment" title="34m">
<pre>|ссылка на материал|./environment/PDF_2/34-Чем_опасны_грибы_для_человека-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|199 Кб|
</pre>
</div>
<div changecount="1" created="201701242301" modified="201701242301" modifier="Яков Литвин" ordercounter="0" tags="[[35. Роль грибов в&amp;nbsp;природе]] unitStep" title="35.1 Роль грибов в&amp;nbsp;природе">
<pre>|visibleName|Роль грибов в&amp;nbsp;природе|
|ссылка на контент шага|https://youtu.be/L-fR98l5LFQ|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701301102" modified="201701301102" modifier="Яков Литвин" ordercounter="1" tags="[[35. Роль грибов в&amp;nbsp;природе]] unitStep" title="35.2">
<pre>|ссылка на контент шага|./environment/task_34-3/index.html|
|тип шага|task|
|visibleName|Грибы|
</pre>
</div>
<div changecount="2" created="201701300209" modified="201701300209" modifier="Яков Литвин" ordercounter="2" tags="[[35. Роль грибов в&amp;nbsp;природе]] unitStep" title="35.3">
<pre>|ссылка на контент шага|./environment/JPG/text_35_1.jpg|
|тип шага|pager|
|visibleName|Грибы-дворники|
</pre>
</div>
<div changecount="2" created="201701300209" modified="201701300209" modifier="Яков Литвин" ordercounter="3" tags="[[35. Роль грибов в&amp;nbsp;природе]] unitStep" title="35.4">
<pre>|ссылка на контент шага|./environment/JPG/text_35_2.jpg|
|тип шага|pager|
|visibleName|Дружба гриба и&amp;nbsp;дерева|
</pre>
</div>
<div changecount="3" created="201701300322" modified="201701300322" modifier="Яков Литвин" tags="[[35. Роль грибов в&amp;nbsp;природе]] attachment" title="35k">
<pre>|ссылка на материал|./environment/PDF/35-Роль_грибов_в_природе-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|514 Кб|
</pre>
</div>
<div changecount="1" created="201701301213" modified="201701301213" modifier="Яков Литвин" tags="[[35. Роль грибов в&amp;nbsp;природе]] attachment" title="35m">
<pre>|ссылка на материал|./environment/PDF_2/35-Роль_грибов_в_природе-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|223 Кб|
</pre>
</div>
<div changecount="1" created="201701242302" modified="201701242302" modifier="Яков Литвин" ordercounter="0" tags="[[36. Знакомство с&amp;nbsp;бактериями]] unitStep" title="36.1 Знакомство с&amp;nbsp;бактериями">
<pre>|visibleName|Знакомство с&amp;nbsp;бактериями|
|ссылка на контент шага|https://youtu.be/oozNZlsulEg|
|тип шага|video|
</pre>
</div>
<div changecount="2" created="201701271353" modified="201701271353" modifier="Яков Литвин" ordercounter="1" tags="[[36. Знакомство с&amp;nbsp;бактериями]] unitStep" title="36.2">
<pre>|visibleName|Достижения бактерий|
|ссылка на контент шага|./environment/task_35-1/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="3" created="201701261919" modified="201701261919" modifier="Яков Литвин" ordercounter="2" tags="[[36. Знакомство с&amp;nbsp;бактериями]] unitStep" title="36.3">
<pre>|visibleName|Формы бактерий|
|ссылка на контент шага|./environment/task_35-3/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701300210" modified="201701300210" modifier="Яков Литвин" ordercounter="3" tags="[[36. Знакомство с&amp;nbsp;бактериями]] unitStep" title="36.4">
<pre>|ссылка на контент шага|./environment/JPG/text_36_1.jpg|
|тип шага|pager|
|visibleName|Достижения бактерий, часть&amp;nbsp;1|
</pre>
</div>
<div changecount="1" created="201701300210" modified="201701300210" modifier="Яков Литвин" ordercounter="4" tags="[[36. Знакомство с&amp;nbsp;бактериями]] unitStep" title="36.5">
<pre>|ссылка на контент шага|./environment/JPG/text_36_2.jpg|
|тип шага|pager|
|visibleName|Достижения бактерий, часть&amp;nbsp;2|
</pre>
</div>
<div changecount="1" created="201701300210" modified="201701300210" modifier="Яков Литвин" ordercounter="5" tags="[[36. Знакомство с&amp;nbsp;бактериями]] unitStep" title="36.6">
<pre>|ссылка на контент шага|./environment/JPG/text_36_3.jpg|
|тип шага|pager|
|visibleName|Формы бактерий|
</pre>
</div>
<div changecount="1" created="201701300323" modified="201701300323" modifier="Яков Литвин" tags="[[36. Знакомство с&amp;nbsp;бактериями]] attachment" title="36k">
<pre>|ссылка на материал|./environment/PDF/36-Знакомство_с_бактериями-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|1 Мб|
</pre>
</div>
<div changecount="1" created="201701301213" modified="201701301213" modifier="Яков Литвин" tags="[[36. Знакомство с&amp;nbsp;бактериями]] attachment" title="36m">
<pre>|ссылка на материал|./environment/PDF_2/36-Знакомство_с_бактериями-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|155 Кб|
</pre>
</div>
<div changecount="1" created="201701242302" modified="201701242302" modifier="Яков Литвин" ordercounter="0" tags="[[37. Чем полезны и&amp;nbsp;опасны бактерии для человека]] unitStep" title="37.1 Чем полезны и&amp;nbsp;опасны бактерии для человека">
<pre>|visibleName|Чем полезны и&amp;nbsp;опасны бактерии для человека|
|ссылка на контент шага|https://youtu.be/uGuddSqHWIo|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701261821" modified="201701261821" modifier="Яков Литвин" ordercounter="1" tags="[[37. Чем полезны и&amp;nbsp;опасны бактерии для человека]] unitStep" title="37.2">
<pre>|ссылка на контент шага|./environment/task_36-2/index.html|
|тип шага|task|
|visibleName|Польза бактерий|
</pre>
</div>
<div changecount="1" created="201701300211" modified="201701300211" modifier="Яков Литвин" ordercounter="2" tags="[[37. Чем полезны и&amp;nbsp;опасны бактерии для человека]] unitStep" title="37.3">
<pre>|ссылка на контент шага|./environment/JPG/text_37_1.jpg|
|тип шага|pager|
|visibleName|Бактерии-повара и&amp;nbsp;бактерии-дворники|
</pre>
</div>
<div changecount="1" created="201701300211" modified="201701300211" modifier="Яков Литвин" ordercounter="3" tags="[[37. Чем полезны и&amp;nbsp;опасны бактерии для человека]] unitStep" title="37.4">
<pre>|ссылка на контент шага|./environment/JPG/text_37_2.jpg|
|тип шага|pager|
|visibleName|Бактерии-соседи и&amp;nbsp;бактерии-фармацевты|
</pre>
</div>
<div changecount="1" created="201701300211" modified="201701300211" modifier="Яков Литвин" ordercounter="4" tags="[[37. Чем полезны и&amp;nbsp;опасны бактерии для человека]] unitStep" title="37.5">
<pre>|ссылка на контент шага|./environment/JPG/text_37_3.jpg|
|тип шага|pager|
|visibleName|Чем опасны бактерии для человека|
</pre>
</div>
<div changecount="1" created="201701300324" modified="201701300324" modifier="Яков Литвин" tags="[[37. Чем полезны и&amp;nbsp;опасны бактерии для человека]] attachment" title="37k">
<pre>|ссылка на материал|./environment/PDF/37-Чем_полезны_и_опасны_бактерии_для_человека-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|899 Кб|
</pre>
</div>
<div changecount="1" created="201701301214" modified="201701301214" modifier="Яков Литвин" tags="[[37. Чем полезны и&amp;nbsp;опасны бактерии для человека]] attachment" title="37m">
<pre>|ссылка на материал|./environment/PDF_2/37-Чем_полезны_и_опасны_бактерии_для_человека-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|258 Кб|
</pre>
</div>
<div changecount="1" created="201701242303" modified="201701242303" modifier="Яков Литвин" ordercounter="0" tags="[[38. Роль бактерий в&amp;nbsp;природе]] unitStep" title="38.1 Роль бактерий в&amp;nbsp;природе">
<pre>|visibleName|Роль бактерий в&amp;nbsp;природе|
|ссылка на контент шага|https://youtu.be/NkgkdygFI1I|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701261822" modified="201701261822" modifier="Яков Литвин" ordercounter="1" tags="[[38. Роль бактерий в&amp;nbsp;природе]] unitStep" title="38.2">
<pre>|visibleName|Роли грибов и&amp;nbsp;бактерий|
|ссылка на контент шага|./environment/task_37-1/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701301107" modified="201701301107" modifier="Яков Литвин" ordercounter="2" tags="[[38. Роль бактерий в&amp;nbsp;природе]] unitStep" title="38.3">
<pre>|ссылка на контент шага|./environment/task_37-3/index.html|
|тип шага|task|
|visibleName|Бактерии|
</pre>
</div>
<div changecount="2" created="201701300213" modified="201701300213" modifier="Яков Литвин" ordercounter="3" tags="[[38. Роль бактерий в&amp;nbsp;природе]] unitStep" title="38.4">
<pre>|ссылка на контент шага|./environment/JPG/text_38_1.jpg|
|тип шага|pager|
|visibleName|Роль бактерий в&amp;nbsp;природе|
</pre>
</div>
<div changecount="2" created="201701300213" modified="201701300213" modifier="Яков Литвин" ordercounter="4" tags="[[38. Роль бактерий в&amp;nbsp;природе]] unitStep" title="38.5">
<pre>|ссылка на контент шага|./environment/JPG/text_38_2.jpg|
|тип шага|pager|
|visibleName|Цианобактерии|
</pre>
</div>
<div changecount="1" created="201701300324" modified="201701300324" modifier="Яков Литвин" tags="[[38. Роль бактерий в&amp;nbsp;природе]] attachment" title="38k">
<pre>|ссылка на материал|./environment/PDF/38-Роль_бактерий_в_природе-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|486 Кб|
</pre>
</div>
<div changecount="1" created="201701301214" modified="201701301214" modifier="Яков Литвин" tags="[[38. Роль бактерий в&amp;nbsp;природе]] attachment" title="38m">
<pre>|ссылка на материал|./environment/PDF_2/38-Роль_бактерий_в_природе-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|222 Кб|
</pre>
</div>
<div changecount="1" created="201701242304" modified="201701242304" modifier="Яков Литвин" ordercounter="0" tags="[[39. Лишайники]] unitStep" title="39.1 Лишайники">
<pre>|visibleName|Лишайники|
|ссылка на контент шага|https://youtu.be/rWhQy_Tbz0M|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701261822" modified="201701261822" modifier="Яков Литвин" ordercounter="1" tags="[[39. Лишайники]] unitStep" title="39.2">
<pre>|visibleName|Польза лишайников|
|ссылка на контент шага|./environment/task_38-2/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701261823" modified="201701261823" modifier="Яков Литвин" ordercounter="2" tags="[[39. Лишайники]] unitStep" title="39.3">
<pre>|visibleName|Симбиоз|
|ссылка на контент шага|./environment/task_38-4/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701300214" modified="201701300214" modifier="Яков Литвин" ordercounter="3" tags="[[39. Лишайники]] unitStep" title="39.4">
<pre>|ссылка на контент шага|./environment/JPG/text_39_1.jpg|
|тип шага|pager|
|visibleName|Кто такие лишайники|
</pre>
</div>
<div changecount="1" created="201701300214" modified="201701300214" modifier="Яков Литвин" ordercounter="4" tags="[[39. Лишайники]] unitStep" title="39.5">
<pre>|ссылка на контент шага|./environment/JPG/text_39_2.jpg|
|тип шага|pager|
|visibleName|Жизненные формы лишайников|
</pre>
</div>
<div changecount="1" created="201701300214" modified="201701300214" modifier="Яков Литвин" ordercounter="5" tags="[[39. Лишайники]] unitStep" title="39.6">
<pre>|ссылка на контент шага|./environment/JPG/text_39_3.jpg|
|тип шага|pager|
|visibleName|Значение лишайников|
</pre>
</div>
<div changecount="1" created="201701300324" modified="201701300324" modifier="Яков Литвин" tags="[[39. Лишайники]] attachment" title="39k">
<pre>|ссылка на материал|./environment/PDF/39-Лишайники-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|1,1 Мб|
</pre>
</div>
<div changecount="1" created="201701301215" modified="201701301215" modifier="Яков Литвин" tags="[[39. Лишайники]] attachment" title="39m">
<pre>|ссылка на материал|./environment/PDF_2/39-Лишайники-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|267 Кб|
</pre>
</div>
<div changecount="2" created="201701241944" modified="201701241944" modifier="Яков Литвин" ordercounter="0" tags="[[4. Признаки животных]] unitStep" title="4.1 Признаки животных">
<pre>|ссылка на контент шага|https://youtu.be/V0gTe0W3_DU|
|visibleName|Признаки животных|
|тип шага|video|
</pre>
</div>
<div changecount="2" created="201701301054" modified="201701301054" modifier="Яков Литвин" ordercounter="1" tags="[[4. Признаки животных]] unitStep" title="4.2">
<pre>|ссылка на контент шага|./environment/task_04-1/index.html|
|тип шага|task|
|visibleName|Признаки животных|
</pre>
</div>
<div changecount="2" created="201701261759" modified="201701261759" modifier="Яков Литвин" ordercounter="2" tags="[[4. Признаки животных]] unitStep" title="4.3 Признаки животных">
<pre>|visibleName|Признаки животных и&amp;nbsp;признаки живого|
|ссылка на контент шага|./environment/task_04-2/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="2" created="201701290455" modified="201701290455" modifier="Яков Литвин" ordercounter="3" tags="[[4. Признаки животных]] unitStep" title="4.4">
<pre>|ссылка на контент шага|./environment/JPG/text_04_1.jpg|
|тип шага|pager|
|visibleName|Признаки животных|
</pre>
</div>
<div changecount="1" created="201701300308" modified="201701300308" modifier="Яков Литвин" tags="[[4. Признаки животных]] attachment" title="4k">
<pre>|ссылка на материал|./environment/PDF/04-Признаки_животных-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|118 Кб|
</pre>
</div>
<div changecount="1" created="201701301159" modified="201701301159" modifier="Яков Литвин" tags="[[4. Признаки животных]] attachment" title="4m">
<pre>|ссылка на материал|./environment/PDF_2/04-Признаки_животных-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|172 Кб|
</pre>
</div>
<div changecount="1" created="201701242305" modified="201701242305" modifier="Яков Литвин" ordercounter="0" tags="[[40. Вирусы]] unitStep" title="40.1 Вирусы">
<pre>|visibleName|Вирусы|
|ссылка на контент шага|https://youtu.be/TE5pxlE7JAY|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701261825" modified="201701261825" modifier="Яков Литвин" ordercounter="1" tags="[[40. Вирусы]] unitStep" title="40.2">
<pre>|ссылка на контент шага|./environment/task_39-1/index.html|
|тип шага|task|
|visibleName|Признаки вирусов|
</pre>
</div>
<div changecount="1" created="201701300216" modified="201701300216" modifier="Яков Литвин" ordercounter="2" tags="[[40. Вирусы]] unitStep" title="40.3">
<pre>|ссылка на контент шага|./environment/JPG/text_40_1.jpg|
|тип шага|pager|
|visibleName|Признаки вирусов|
</pre>
</div>
<div changecount="1" created="201701300216" modified="201701300216" modifier="Яков Литвин" ordercounter="3" tags="[[40. Вирусы]] unitStep" title="40.4">
<pre>|ссылка на контент шага|./environment/JPG/text_40_2.jpg|
|тип шага|pager|
|visibleName|Жизнь вируса|
</pre>
</div>
<div changecount="1" created="201701300216" modified="201701300216" modifier="Яков Литвин" ordercounter="4" tags="[[40. Вирусы]] unitStep" title="40.5">
<pre>|ссылка на контент шага|./environment/JPG/text_40_3.jpg|
|тип шага|pager|
|visibleName|Чем вирусы опасны и&amp;nbsp;полезны для человека|
</pre>
</div>
<div changecount="1" created="201701300324" modified="201701300325" modifier="Яков Литвин" tags="[[40. Вирусы]] attachment" title="40k">
<pre>|ссылка на материал|./environment/PDF/40-Вирусы-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|762 Кб|
</pre>
</div>
<div changecount="1" created="201701301215" modified="201701301215" modifier="Яков Литвин" tags="[[40. Вирусы]] attachment" title="40m">
<pre>|ссылка на материал|./environment/PDF_2/40-Вирусы-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|236 Кб|
</pre>
</div>
<div changecount="1" created="201701242305" modified="201701242305" modifier="Яков Литвин" ordercounter="0" tags="[[41. Природные сообщества]] unitStep" title="41.1 Природные сообщества">
<pre>|visibleName|Природные сообщества|
|ссылка на контент шага|https://youtu.be/jEz1DZaGzQA|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701311012" modified="201701311012" modifier="Яков Литвин" ordercounter="1" tags="[[41. Природные сообщества]] unitStep" title="41.2">
<pre>|тип шага|task|
|ссылка на контент шага|./environment/task_40-2/index.html|
|visibleName|Пищевая цепь|
</pre>
</div>
<div changecount="2" created="201701301629" modified="201701301629" modifier="Яков Литвин" ordercounter="2" tags="[[41. Природные сообщества]] unitStep" title="41.3">
<pre>|ссылка на контент шага|./environment/JPG/text_41_1.jpg|
|тип шага|pager|
|visibleName|Что такое сообщество|
</pre>
</div>
<div changecount="2" created="201701301630" modified="201701301630" modifier="Яков Литвин" ordercounter="3" tags="[[41. Природные сообщества]] unitStep" title="41.4">
<pre>|ссылка на контент шага|./environment/JPG/text_41_2.jpg|
|тип шага|pager|
|visibleName|Цепи питания|
</pre>
</div>
<div changecount="1" created="201701301155" modified="201701301155" modifier="Яков Литвин" tags="[[41. Природные сообщества]] attachment" title="41k">
<pre>|ссылка на материал|./environment/PDF/41-Природные_сообщества-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|2,8 Мб|
</pre>
</div>
<div changecount="1" created="201701301215" modified="201701301216" modifier="Яков Литвин" tags="[[41. Природные сообщества]] attachment" title="41m">
<pre>|ссылка на материал|./environment/PDF_2/41-Природные_сообщества-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|97 Кб|
</pre>
</div>
<div changecount="1" created="201701242306" modified="201701242306" modifier="Яков Литвин" ordercounter="0" tags="[[42. Состав, структура и&amp;nbsp;польза лесных сообществ]] unitStep" title="42.1 Состав, структура и&amp;nbsp;польза лесных сообществ">
<pre>|visibleName|Сообщество леса|
|ссылка на контент шага|https://youtu.be/3daxU073ljU|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701261826" modified="201701261826" modifier="Яков Литвин" ordercounter="1" tags="[[42. Состав, структура и&amp;nbsp;польза лесных сообществ]] unitStep" title="42.2">
<pre>|visibleName|Виды лесов|
|ссылка на контент шага|./environment/task_41-1/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701301632" modified="201701301632" modifier="Яков Литвин" ordercounter="2" tags="[[42. Состав, структура и&amp;nbsp;польза лесных сообществ]] unitStep" title="42.3">
<pre>|visibleName|Лесные этажи|
|ссылка на контент шага|./environment/JPG/text_42_1.jpg|
|тип шага|pager|
</pre>
</div>
<div changecount="1" created="201701301632" modified="201701301632" modifier="Яков Литвин" ordercounter="3" tags="[[42. Состав, структура и&amp;nbsp;польза лесных сообществ]] unitStep" title="42.4">
<pre>|visibleName|Виды лесов|
|ссылка на контент шага|./environment/JPG/text_42_2.jpg|
|тип шага|pager|
</pre>
</div>
<div changecount="1" created="201701301633" modified="201701301633" modifier="Яков Литвин" ordercounter="4" tags="[[42. Состав, структура и&amp;nbsp;польза лесных сообществ]] unitStep" title="42.5">
<pre>|visibleName|Чем леса полезны для человека|
|ссылка на контент шага|./environment/JPG/text_42_3jpg|
|тип шага|pager|
</pre>
</div>
<div changecount="1" created="201701301155" modified="201701301156" modifier="Яков Литвин" tags="[[42. Состав, структура и&amp;nbsp;польза лесных сообществ]] attachment" title="42k">
<pre>|ссылка на материал|./environment/PDF/42-Сообщество_леса-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|1,3 Мб|
</pre>
</div>
<div changecount="1" created="201701301216" modified="201701301216" modifier="Яков Литвин" tags="[[42. Состав, структура и&amp;nbsp;польза лесных сообществ]] attachment" title="42m">
<pre>|ссылка на материал|./environment/PDF_2/42-Сообщество_леса-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|179 Кб|
</pre>
</div>
<div changecount="1" created="201701242307" modified="201701242307" modifier="Яков Литвин" ordercounter="0" tags="[[43. Охрана лесных сообществ]] unitStep" title="43.1 Охрана лесных сообществ">
<pre>|visibleName|Охрана лесных сообществ|
|ссылка на контент шага|https://youtu.be/4iRtLTFJ5uE|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701271355" modified="201701271355" modifier="Яков Литвин" ordercounter="1" tags="[[43. Охрана лесных сообществ]] unitStep" title="43.2">
<pre>|visibleName|Специалисты по&amp;nbsp;лесу|
|ссылка на контент шага|./environment/task_42-3/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701301634" modified="201701301635" modifier="Яков Литвин" ordercounter="2" tags="[[43. Охрана лесных сообществ]] unitStep" title="43.3">
<pre>|ссылка на контент шага|./environment/JPG/text_43_1.jpg|
|тип шага|pager|
|visibleName|Охрана лесов от&amp;nbsp;огня|
</pre>
</div>
<div changecount="1" created="201701301635" modified="201701301636" modifier="Яков Литвин" ordercounter="3" tags="[[43. Охрана лесных сообществ]] unitStep" title="43.4">
<pre>|ссылка на контент шага|./environment/JPG/text_43_2.jpg|
|тип шага|pager|
|visibleName|Охрана лесов от&amp;nbsp;насекомых и&amp;nbsp;от&amp;nbsp;охотников|
</pre>
</div>
<div changecount="1" created="201701301156" modified="201701301156" modifier="Яков Литвин" tags="[[43. Охрана лесных сообществ]] attachment" title="43k">
<pre>|ссылка на материал|./environment/PDF/43-Охрана_лесных_сообществ-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|500 Кб|
</pre>
</div>
<div changecount="1" created="201701301216" modified="201701301216" modifier="Яков Литвин" tags="[[43. Охрана лесных сообществ]] attachment" title="43m">
<pre>|ссылка на материал|./environment/PDF_2/43-Охрана_лесных_сообществ-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|145 Кб|
</pre>
</div>
<div changecount="1" created="201701242307" modified="201701242307" modifier="Яков Литвин" ordercounter="0" tags="[[44. Сообщество луга]] unitStep" title="44.1 Сообщество луга">
<pre>|visibleName|Сообщество луга|
|ссылка на контент шага|https://youtu.be/6PHNL0KJBL0|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701271355" modified="201701271355" modifier="Яков Литвин" ordercounter="1" tags="[[44. Сообщество луга]] unitStep" title="44.2">
<pre>|visibleName|Растения луга|
|ссылка на контент шага|./environment/task_43-1/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701301637" modified="201701301637" modifier="Яков Литвин" ordercounter="2" tags="[[44. Сообщество луга]] unitStep" title="44.3">
<pre>|visibleName|Сообщество луга|
|ссылка на контент шага|./environment/JPG/text_44_1.jpg|
|тип шага|pager|
</pre>
</div>
<div changecount="1" created="201701301156" modified="201701301156" modifier="Яков Литвин" tags="[[44. Сообщество луга]] attachment" title="44k">
<pre>|ссылка на материал|./environment/PDF/44-Сообщество_луга-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|367 Кб|
</pre>
</div>
<div changecount="1" created="201701301217" modified="201701301217" modifier="Яков Литвин" tags="[[44. Сообщество луга]] attachment" title="44m">
<pre>|ссылка на материал|./environment/PDF_2/44-Сообщество_луга-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|192 Кб|
</pre>
</div>
<div changecount="1" created="201701242308" modified="201701242308" modifier="Яков Литвин" ordercounter="0" tags="[[45. Сообщество озера]] unitStep" title="45.1 Сообщество озера">
<pre>|visibleName|Сообщество озера|
|ссылка на контент шага|https://youtu.be/xu2AHVhX9Vc|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701261826" modified="201701261826" modifier="Яков Литвин" ordercounter="1" tags="[[45. Сообщество озера]] unitStep" title="45.2">
<pre>|ссылка на контент шага|./environment/task_44-1/index.html|
|тип шага|task|
|visibleName|Обитатели озера|
</pre>
</div>
<div changecount="1" created="201701301655" modified="201701301655" modifier="Яков Литвин" ordercounter="2" tags="[[45. Сообщество озера]] unitStep" title="45.3">
<pre>|visibleName|Сообщество озера|
|ссылка на контент шага|./environment/JPG/text_45_1.jpg|
|тип шага|pager|
</pre>
</div>
<div changecount="1" created="201701301157" modified="201701301157" modifier="Яков Литвин" tags="[[45. Сообщество озера]] attachment" title="45k">
<pre>|ссылка на материал|./environment/PDF/45-Сообщество_озера-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|393 Кб|
</pre>
</div>
<div changecount="1" created="201701301217" modified="201701301217" modifier="Яков Литвин" tags="[[45. Сообщество озера]] attachment" title="45m">
<pre>|ссылка на материал|./environment/PDF_2/45-Сообщество_озера-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|95 Кб|
</pre>
</div>
<div changecount="1" created="201701242309" modified="201701242309" modifier="Яков Литвин" ordercounter="0" tags="[[46. Охрана природы]] unitStep" title="46.1 Охрана природы">
<pre>|visibleName|Охрана природы|
|ссылка на контент шага|https://youtu.be/a2tMGjsIIDY|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701301111" modified="201701301111" modifier="Яков Литвин" ordercounter="1" tags="[[46. Охрана природы]] unitStep" title="46.2">
<pre>|visibleName|Класс волчат|
|ссылка на контент шага|./environment/task_45-1/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701301116" modified="201701301116" modifier="Яков Литвин" ordercounter="2" tags="[[46. Охрана природы]] unitStep" title="46.3">
<pre>|visibleName|Охрана природы|
|ссылка на контент шага|./environment/task_45-2/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701301657" modified="201701301657" modifier="Яков Литвин" ordercounter="3" tags="[[46. Охрана природы]] unitStep" title="46.4">
<pre>|ссылка на контент шага|./environment/JPG/text_46_1.jpg|
|тип шага|pager|
|visibleName|Охрана природы|
</pre>
</div>
<div changecount="1" created="201701301657" modified="201701301657" modifier="Яков Литвин" ordercounter="4" tags="[[46. Охрана природы]] unitStep" title="46.5">
<pre>|ссылка на контент шага|./environment/JPG/text_46_2.jpg|
|тип шага|pager|
|visibleName|Красная книга|
</pre>
</div>
<div changecount="1" created="201701301157" modified="201701301157" modifier="Яков Литвин" tags="[[46. Охрана природы]] attachment" title="46k">
<pre>|ссылка на материал|./environment/PDF/46-Охрана_природы-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|549 Кб|
</pre>
</div>
<div changecount="1" created="201701301218" modified="201701301218" modifier="Яков Литвин" tags="[[46. Охрана природы]] attachment" title="46m">
<pre>|ссылка на материал|./environment/PDF_2/46-Охрана_природы-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|108 Кб|
</pre>
</div>
<div changecount="2" created="201701242309" modified="201701242309" modifier="Яков Литвин" ordercounter="0" tags="[[47. Летние задания]] unitStep" title="47.1 Летние задания">
<pre>|ссылка на контент шага|https://youtu.be/Y5fs8-Qw_cY|
|visibleName|Летние задания|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701301659" modified="201701301659" modifier="Яков Литвин" ordercounter="1" tags="[[47. Летние задания]] unitStep" title="47.2">
<pre>|ссылка на контент шага|./environment/JPG/text_47_1.jpg|
|тип шага|pager|
|visibleName|Наблюдение за&amp;nbsp;животными|
</pre>
</div>
<div changecount="1" created="201701301659" modified="201701301659" modifier="Яков Литвин" ordercounter="2" tags="[[47. Летние задания]] unitStep" title="47.3">
<pre>|ссылка на контент шага|./environment/JPG/text_47_2.jpg|
|тип шага|pager|
|visibleName|Коллекции сухих плодов и&amp;nbsp;камней|
</pre>
</div>
<div changecount="1" created="201701301659" modified="201701301659" modifier="Яков Литвин" ordercounter="3" tags="[[47. Летние задания]] unitStep" title="47.4">
<pre>|ссылка на контент шага|./environment/JPG/text_47_3.jpg|
|тип шага|pager|
|visibleName|Коллекция почвы|
</pre>
</div>
<div changecount="1" created="201701301659" modified="201701301659" modifier="Яков Литвин" ordercounter="4" tags="[[47. Летние задания]] unitStep" title="47.5">
<pre>|ссылка на контент шага|./environment/JPG/text_47_4.jpg|
|тип шага|pager|
|visibleName|Гербарий|
</pre>
</div>
<div changecount="1" created="201701301157" modified="201701301157" modifier="Яков Литвин" tags="[[47. Летние задания]] attachment" title="47k">
<pre>|ссылка на материал|./environment/PDF/47-Летние_задания-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|1,2 Мб|
</pre>
</div>
<div changecount="1" created="201701301218" modified="201701301218" modifier="Яков Литвин" tags="[[47. Летние задания]] attachment" title="47m">
<pre>|ссылка на материал|./environment/PDF_2/47-Летние_задания-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|120 Кб|
</pre>
</div>
<div changecount="2" created="201701241948" modified="201701241948" modifier="Яков Литвин" ordercounter="0" tags="[[5. Медузы и&amp;nbsp;губки]] unitStep" title="5.1 Медузы и&amp;nbsp;губки">
<pre>|ссылка на контент шага|https://youtu.be/IHeDbGVZX5o|
|тип шага|video|
|visibleName|Медузы и&amp;nbsp;губки|
</pre>
</div>
<div changecount="1" created="201701261759" modified="201701261759" modifier="Яков Литвин" ordercounter="1" tags="[[5. Медузы и&amp;nbsp;губки]] unitStep" title="5.2 Медузы и&amp;nbsp;губки">
<pre>|visibleName|Медуза и&amp;nbsp;актиния|
|ссылка на контент шага|./environment/task_05-2/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701300221" modified="201701300221" modifier="Яков Литвин" ordercounter="2" tags="[[5. Медузы и&amp;nbsp;губки]] unitStep" title="5.3">
<pre>|ссылка на контент шага|./environment/JPG/text_05_1.jpg|
|тип шага|pager|
|visibleName|Как устроено царство животных|
</pre>
</div>
<div changecount="2" created="201701290455" modified="201701290455" modifier="Яков Литвин" ordercounter="3" tags="[[5. Медузы и&amp;nbsp;губки]] unitStep" title="5.4">
<pre>|ссылка на контент шага|./environment/JPG/text_05_2.jpg|
|тип шага|pager|
|visibleName|Медузы и&amp;nbsp;кораллы|
</pre>
</div>
<div changecount="2" created="201701290455" modified="201701290455" modifier="Яков Литвин" ordercounter="4" tags="[[5. Медузы и&amp;nbsp;губки]] unitStep" title="5.5">
<pre>|ссылка на контент шага|./environment/JPG/text_05_3.jpg|
|тип шага|pager|
|visibleName|Актинии и&amp;nbsp;губки|
</pre>
</div>
<div changecount="1" created="201701300308" modified="201701300308" modifier="Яков Литвин" tags="[[5. Медузы и&amp;nbsp;губки]] attachment" title="5k">
<pre>|ссылка на материал|./environment/PDF/05-Медузы_и_губки-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|1,1 Мб|
</pre>
</div>
<div changecount="1" created="201701301159" modified="201701301159" modifier="Яков Литвин" tags="[[5. Медузы и&amp;nbsp;губки]] attachment" title="5m">
<pre>|ссылка на материал|./environment/PDF_2/05-Медузы_и_губки-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|237 Кб|
</pre>
</div>
<div changecount="3" created="201701222306" modified="201701222306" modifier="Яков Литвин" ordercounter="0" tags="[[6. Черви]] unitStep" title="6.1 Черви">
<pre>|visibleName|Черви|
|ссылка на контент шага|https://youtu.be/kHNNFU1W6-A|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701261801" modified="201701261801" modifier="Яков Литвин" ordercounter="1" tags="[[6. Черви]] unitStep" title="6.2 Черви">
<pre>|visibleName|Черви|
|ссылка на контент шага|./environment/task_06-1/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="2" created="201701261801" modified="201701261801" modifier="Яков Литвин" ordercounter="2" tags="[[6. Черви]] unitStep" title="6.3 Черви">
<pre>|ссылка на контент шага|./environment/task_06-3/index.html|
|тип шага|task|
|visibleName|Дождевые черви|
</pre>
</div>
<div changecount="1" created="201701290456" modified="201701290456" modifier="Яков Литвин" ordercounter="3" tags="[[6. Черви]] unitStep" title="6.4">
<pre>|ссылка на контент шага|./environment/JPG/text_06_1.jpg|
|тип шага|pager|
|visibleName|Морские и&amp;nbsp;дождевые черви|
</pre>
</div>
<div changecount="1" created="201701290456" modified="201701290456" modifier="Яков Литвин" ordercounter="4" tags="[[6. Черви]] unitStep" title="6.5">
<pre>|ссылка на контент шага|./environment/JPG/text_06_2.jpg|
|тип шага|pager|
|visibleName|Глисты|
</pre>
</div>
<div changecount="1" created="201701300310" modified="201701300310" modifier="Яков Литвин" tags="[[6. Черви]] attachment" title="6k">
<pre>|ссылка на материал|./environment/PDF/06-Черви-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|1,2 Мб|
</pre>
</div>
<div changecount="1" created="201701301200" modified="201701301200" modifier="Яков Литвин" tags="[[6. Черви]] attachment" title="6m">
<pre>|ссылка на материал|./environment/PDF_2/06-Черви-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|175 Кб|
</pre>
</div>
<div changecount="2" created="201701241951" modified="201701241951" modifier="Яков Литвин" ordercounter="0" tags="[[7. Моллюски]] unitStep" title="7.1 Моллюски">
<pre>|ссылка на контент шага|https://youtu.be/U0JYjOyNu_U|
|тип шага|video|
|visibleName|Моллюски|
</pre>
</div>
<div changecount="1" created="201701261802" modified="201701261802" modifier="Яков Литвин" ordercounter="1" tags="[[7. Моллюски]] unitStep" title="7.2">
<pre>|ссылка на контент шага|./environment/task_07-2/index.html|
|тип шага|task|
|visibleName|Двустворчатый моллюск|
</pre>
</div>
<div changecount="1" created="201701281135" modified="201701281135" modifier="Яков Литвин" ordercounter="2" tags="[[7. Моллюски]] unitStep" title="7.3">
<pre>|visibleName|Школа моллюсков|
|ссылка на контент шага|./environment/task_07-5/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701290457" modified="201701290457" modifier="Яков Литвин" ordercounter="3" tags="[[7. Моллюски]] unitStep" title="7.4">
<pre>|ссылка на контент шага|./environment/JPG/text_07_1.jpg|
|тип шага|pager|
|visibleName|Брюхоногие и&amp;nbsp;двустворчатые|
</pre>
</div>
<div changecount="1" created="201701290457" modified="201701290457" modifier="Яков Литвин" ordercounter="4" tags="[[7. Моллюски]] unitStep" title="7.5">
<pre>|ссылка на контент шага|./environment/JPG/text_07_2.jpg|
|тип шага|pager|
|visibleName|Головоногие|
</pre>
</div>
<div changecount="1" created="201701300311" modified="201701300311" modifier="Яков Литвин" tags="[[7. Моллюски]] attachment" title="7k">
<pre>|ссылка на материал|./environment/PDF/07-Моллюски-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|1,5 Мб|
</pre>
</div>
<div changecount="1" created="201701301200" modified="201701301200" modifier="Яков Литвин" tags="[[7. Моллюски]] attachment" title="7m">
<pre>|ссылка на материал|./environment/PDF_2/07-Моллюски-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|112 Кб|
</pre>
</div>
<div changecount="2" created="201701241952" modified="201701241952" modifier="Яков Литвин" ordercounter="0" tags="[[8. Членистоногие. Ракообразные]] unitStep" title="8.1 Членистоногие. Ракообразные">
<pre>|visibleName|Членистоногие. Ракообразные|
|ссылка на контент шага|https://youtu.be/hwJwsLWcQtE|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201701261803" modified="201701261803" modifier="Яков Литвин" ordercounter="1" tags="[[8. Членистоногие. Ракообразные]] unitStep" title="8.2">
<pre>|visibleName|Рак-отшельник|
|ссылка на контент шага|./environment/task_08-4/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701271344" modified="201701271344" modifier="Яков Литвин" ordercounter="2" tags="[[8. Членистоногие. Ракообразные]] unitStep" title="8.3">
<pre>|visibleName|Ракообразные|
|ссылка на контент шага|./environment/task_08-6/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701290458" modified="201701290458" modifier="Яков Литвин" ordercounter="3" tags="[[8. Членистоногие. Ракообразные]] unitStep" title="8.4">
<pre>|ссылка на контент шага|./environment/JPG/text_08_1.jpg|
|тип шага|pager|
|visibleName|Кто относится к&amp;nbsp;членистоногим|
</pre>
</div>
<div changecount="1" created="201701290458" modified="201701290458" modifier="Яков Литвин" ordercounter="4" tags="[[8. Членистоногие. Ракообразные]] unitStep" title="8.5">
<pre>|ссылка на контент шага|./environment/JPG/text_08_2.jpg|
|тип шага|pager|
|visibleName|Ноги членистоногих|
</pre>
</div>
<div changecount="1" created="201701290458" modified="201701290458" modifier="Яков Литвин" ordercounter="5" tags="[[8. Членистоногие. Ракообразные]] unitStep" title="8.6">
<pre>|ссылка на контент шага|./environment/JPG/text_08_3.jpg|
|тип шага|pager|
|visibleName|Краб, креветка и&amp;nbsp;рак-отшельник|
</pre>
</div>
<div changecount="1" created="201701290458" modified="201701290458" modifier="Яков Литвин" ordercounter="6" tags="[[8. Членистоногие. Ракообразные]] unitStep" title="8.7">
<pre>|ссылка на контент шага|./environment/JPG/text_08_4.jpg|
|тип шага|pager|
|visibleName|Раки и&amp;nbsp;дафнии|
</pre>
</div>
<div changecount="1" created="201701300311" modified="201701300311" modifier="Яков Литвин" tags="[[8. Членистоногие. Ракообразные]] attachment" title="8k">
<pre>|ссылка на материал|./environment/PDF/08-Членистоногие_Ракообразные-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|1,5 Мб|
</pre>
</div>
<div changecount="1" created="201701301200" modified="201701301200" modifier="Яков Литвин" tags="[[8. Членистоногие. Ракообразные]] attachment" title="8m">
<pre>|ссылка на материал|./environment/PDF_2/08-Членистоногие_Ракообразные-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|182 Кб|
</pre>
</div>
<div changecount="3" created="201701241953" modified="201701242332" modifier="Яков Литвин" ordercounter="0" tags="[[9. Паукообразные и&amp;nbsp;многоножки]] unitStep" title="9.1 Паукообразные и&amp;nbsp;многоножки">
<pre>|visibleName|Паукообразные и&amp;nbsp;многоножки|
|ссылка на контент шага|https://youtu.be/d8tdgkQ6MUU|
|тип шага|video|
</pre>
</div>
<div changecount="3" created="201701271346" modified="201701271346" modifier="Яков Литвин" ordercounter="1" tags="[[9. Паукообразные и&amp;nbsp;многоножки]] unitStep" title="9.2">
<pre>|ссылка на контент шага|./environment/task_09-2/index.html|
|visibleName|Паукообразные и&amp;nbsp;многоножки|
|тип шага|task|
</pre>
</div>
<div changecount="2" created="201701261804" modified="201701261804" modifier="Яков Литвин" ordercounter="2" tags="[[9. Паукообразные и&amp;nbsp;многоножки]] unitStep" title="9.3">
<pre>|visibleName|Кто что ест?|
|ссылка на контент шага|./environment/task_09-3/index.html|
|тип шага|task|
</pre>
</div>
<div changecount="1" created="201701290459" modified="201701290459" modifier="Яков Литвин" ordercounter="3" tags="[[9. Паукообразные и&amp;nbsp;многоножки]] unitStep" title="9.4">
<pre>|ссылка на контент шага|./environment/JPG/text_09_1.jpg|
|тип шага|pager|
|visibleName|Пауки|
</pre>
</div>
<div changecount="1" created="201701290459" modified="201701290459" modifier="Яков Литвин" ordercounter="4" tags="[[9. Паукообразные и&amp;nbsp;многоножки]] unitStep" title="9.5">
<pre>|ссылка на контент шага|./environment/JPG/text_09_2.jpg|
|тип шага|pager|
|visibleName|Родственники пауков и&amp;nbsp;многоножки|
</pre>
</div>
<div changecount="1" created="201701300311" modified="201701300311" modifier="Яков Литвин" tags="[[9. Паукообразные и&amp;nbsp;многоножки]] attachment" title="9k">
<pre>|ссылка на материал|./environment/PDF/09-Паукообразные_и_многоножки-Конспект.pdf|
|visibleName|Конспект для ученика|
|занимает памяти|926 Кб|
</pre>
</div>
<div changecount="1" created="201701301200" modified="201701301201" modifier="Яков Литвин" tags="[[9. Паукообразные и&amp;nbsp;многоножки]] attachment" title="9m">
<pre>|ссылка на материал|./environment/PDF_2/09-Паукообразные_и_многоножки-Методичка.pdf|
|visibleName|Методический материал для учителя|
|занимает памяти|177 Кб|
</pre>
</div>
<div changecount="2" created="201706151500" modified="201706191648" modifier="YourName" ordercounter="2" tags="course" title="Окружающий мир. 2 класс">
<pre>&lt;&lt;courseAdminPanel&gt;&gt;/%
|Автор			||
|Аудитория		||
|Картинка в шапке	|./environment2/headeroms_02.jpg|
|courseId			|	environment2|
!!!Описание
&lt;p&gt;Материал курса в&amp;nbsp;разработке. Следите за&amp;nbsp;ежемесячными обновлениями.
Если у&amp;nbsp;вас возникли вопросы по&amp;nbsp;курсу, пишите нам на&amp;nbsp;&lt;a href="mailto:okrumir@yandex.ru"&gt;okrumir@yandex.ru&lt;/a&gt;
&lt;/p&gt; &lt;h2&gt;
&lt;a href="javascript:;" onclick="onClickTiddlerLink(event)" class="tiddlyLink tiddlyLinkExisting" refresh="link" tiddlylink="Окружающий мир"&gt;Весь курс&lt;/a&gt;&lt;/h2&gt;
!!!In title
!%/</pre>
</div>
<div changecount="4" created="201706151702" environment2="0" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_01">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|1. Понятие тела и&amp;nbsp;вещества |
!!!Описание
!%/</pre>
</div>
<div changecount="4" created="201706151703" environment2="1" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_02">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|2. Свойства веществ|
!!!Описание
!%/</pre>
</div>
<div changecount="4" created="201706151703" environment2="2" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_03">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|3. Два царства веществ. Добыча нефти |
!!!Описание
!%/</pre>
</div>
<div changecount="4" created="201706151703" environment2="3" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_04">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|4. Нефть. Польза|
!!!Описание
!%/</pre>
</div>
<div changecount="4" created="201706151703" environment2="4" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_05">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|5. Прочие органические полезные ископаемые. Уголь |
!!!Описание
!%/</pre>
</div>
<div changecount="4" created="201706151703" environment2="5" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_06">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|6. Добыча угля|
!!!Описание
!%/</pre>
</div>
<div changecount="4" created="201706151703" environment2="6" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_07">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|7. Царство неорганических веществ. Железо|
!!!Описание
!%/</pre>
</div>
<div changecount="4" created="201706151703" environment2="7" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_08">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|8. Разнообразие металлов|
!!!Описание
!%/</pre>
</div>
<div changecount="4" created="201706151703" environment2="8" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_09">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|9. Виды камней. Магматические, осадочные, метаморфические|
!!!Описание
!%/</pre>
</div>
<div changecount="4" created="201706151703" environment2="9" modified="201706151720" modifier="YourName" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_10">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|10. Простые камни|
!!!Описание
!%/</pre>
</div>
<div changecount="3" created="201706151703" environment2="10" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_11">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|11. Драгоценные камни|
!!!Описание
!%/</pre>
</div>
<div changecount="3" created="201706151703" environment2="11" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_12">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|12. Поделочные камни|
!!!Описание
!%/</pre>
</div>
<div changecount="3" created="201706151703" environment2="12" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_13">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|13. Руды|
!!!Описание
!%/</pre>
</div>
<div changecount="3" created="201706151703" environment2="13" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_14">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|14. Производство чугуна и&amp;nbsp;стали|
!!!Описание
!%/</pre>
</div>
<div changecount="3" created="201706151703" environment2="14" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_15">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|15. Применение камней|
!!!Описание
!%/</pre>
</div>
<div changecount="3" created="201706151703" environment2="15" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_16">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|16. Стекло|
!!!Описание
!%/</pre>
</div>
<div changecount="3" created="201706151703" environment2="16" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_17">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|17. Цемент|
!!!Описание
!%/</pre>
</div>
<div changecount="3" created="201706151703" environment2="17" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_18">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|18. Окаменелости|
!!!Описание
!%/</pre>
</div>
<div changecount="3" created="201706151703" environment2="18" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_19">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|19. Образование почвы|
!!!Описание
!%/</pre>
</div>
<div changecount="3" created="201706151703" environment2="19" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_20">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|20. Состав и&amp;nbsp;свойства почвы|
!!!Описание
!%/</pre>
</div>
<div changecount="3" created="201706151703" environment2="20" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_21">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|21. Введение в&amp;nbsp;топографию. Зачем нужны карты и&amp;nbsp;планы?|
!!!Описание
!%/</pre>
</div>
<div changecount="3" created="201706151703" environment2="21" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_22">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|22. Язык карт и&amp;nbsp;планов. Город и&amp;nbsp;пригород |
!!!Описание
!%/</pre>
</div>
<div changecount="3" created="201706151703" environment2="22" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_23">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|23. Язык карт и&amp;nbsp;планов. Прочие объекты|
!!!Описание
!%/</pre>
</div>
<div changecount="3" created="201706151703" environment2="23" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_24">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|24. Река и&amp;nbsp;её&amp;nbsp;части|
!!!Описание
!%/</pre>
</div>
<div changecount="3" created="201706151703" environment2="24" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_25">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|25. Рельеф на&amp;nbsp;картах. Холмы и&amp;nbsp;котловины|
!!!Описание
!%/</pre>
</div>
<div changecount="3" created="201706151703" environment2="25" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_26">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|26. Стороны горизонта|
!!!Описание
!%/</pre>
</div>
<div changecount="3" created="201706151703" environment2="26" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_27">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|27. Природные зоны России, часть1|
!!!Описание
!%/</pre>
</div>
<div changecount="3" created="201706151703" environment2="27" tags="[[Окружающий мир. 2 класс]] unit" title="environment2_28">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|28. Природные зоны России, часть&amp;nbsp;2|
!!!Описание
!%/</pre>
</div>
<div changecount="3" created="201706151500" environment3="0" modified="201706191651" modifier="YourName" ordercounter="3" tags="course" title="Окружающий мир. 3 класс">
<pre>&lt;&lt;courseAdminPanel&gt;&gt;/%
|Автор			||
|Аудитория		||
|Картинка в шапке	|./environment3/headeroms_03.jpg|
|courseId			|	environment3|
!!!Описание
&lt;p&gt;Материал курса в&amp;nbsp;разработке. Следите за&amp;nbsp;ежемесячными обновлениями.
Если у&amp;nbsp;вас возникли вопросы по&amp;nbsp;курсу, пишите нам на&amp;nbsp;&lt;a href="mailto:okrumir@yandex.ru"&gt;okrumir@yandex.ru&lt;/a&gt;
&lt;/p&gt; &lt;h2&gt;
&lt;a href="javascript:;" onclick="onClickTiddlerLink(event)" class="tiddlyLink tiddlyLinkExisting" refresh="link" tiddlylink="Окружающий мир"&gt;Весь курс&lt;/a&gt;
&lt;h2&gt;
!!!In title
!%/</pre>
</div>
<div created="201706151734" environment3="1" tags="[[Окружающий мир. 3 класс]] unit" title="environment3_01">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|1. Введение в&amp;nbsp;биологию человека. Части тела|
!!!Описание
!%/</pre>
</div>
<div created="201706151735" environment3="2" tags="[[Окружающий мир. 3 класс]] unit" title="environment3_02">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|2. Кость и&amp;nbsp;сустав|
!!!Описание
!%/</pre>
</div>
<div created="201706151735" environment3="3" tags="[[Окружающий мир. 3 класс]] unit" title="environment3_03">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|3. Наши главные кости|
!!!Описание
!%/</pre>
</div>
<div created="201706151735" environment3="4" tags="[[Окружающий мир. 3 класс]] unit" title="environment3_04">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|4. Болезни опорной системы|
!!!Описание
!%/</pre>
</div>
<div created="201706151735" environment3="5" tags="[[Окружающий мир. 3 класс]] unit" title="environment3_05">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|5. Строение и&amp;nbsp;работа мышц|
!!!Описание
!%/</pre>
</div>
<div created="201706151735" environment3="6" tags="[[Окружающий мир. 3 класс]] unit" title="environment3_06">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|6. Наши главные мышцы|
!!!Описание
!%/</pre>
</div>
<div created="201706151735" environment3="7" tags="[[Окружающий мир. 3 класс]] unit" title="environment3_07">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|7. Повреждения двигательной системы|
!!!Описание
!%/</pre>
</div>
<div created="201706151735" environment3="8" tags="[[Окружающий мир. 3 класс]] unit" title="environment3_08">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|8. Кровеносная система. Кровь|
!!!Описание
!%/</pre>
</div>
<div created="201706151735" environment3="9" tags="[[Окружающий мир. 3 класс]] unit" title="environment3_09">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|9. Сердце и&amp;nbsp;сосуды|
!!!Описание
!%/</pre>
</div>
<div created="201706151735" environment3="10" tags="[[Окружающий мир. 3 класс]] unit" title="environment3_10">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|10. Круги кровообращения|
!!!Описание
!%/</pre>
</div>
<div created="201706151735" environment3="11" tags="[[Окружающий мир. 3 класс]] unit" title="environment3_11">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|11. Повреждения кровеносной системы|
!!!Описание
!%/</pre>
</div>
<div created="201706151735" environment3="12" tags="[[Окружающий мир. 3 класс]] unit" title="environment3_12">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|12. Дыхательная система|
!!!Описание
!%/</pre>
</div>
<div created="201706151735" environment3="13" tags="[[Окружающий мир. 3 класс]] unit" title="environment3_13">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|13. Болезни дыхательной системы|
!!!Описание
!%/</pre>
</div>
<div created="201706151735" environment3="14" tags="[[Окружающий мир. 3 класс]] unit" title="environment3_14">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|14. Пищеварительная система. Что и&amp;nbsp;зачем мы&amp;nbsp;едим|
!!!Описание
!%/</pre>
</div>
<div created="201706151735" environment3="15" tags="[[Окружающий мир. 3 класс]] unit" title="environment3_15">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|15. Что происходит во&amp;nbsp;рту|
!!!Описание
!%/</pre>
</div>
<div created="201706151735" environment3="16" tags="[[Окружающий мир. 3 класс]] unit" title="environment3_16">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|16. Желудок и&amp;nbsp;кишечник|
!!!Описание
!%/</pre>
</div>
<div created="201706151735" environment3="17" tags="[[Окружающий мир. 3 класс]] unit" title="environment3_17">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|17. Болезни пищеварительной системы|
!!!Описание
!%/</pre>
</div>
<div created="201706151735" environment3="18" tags="[[Окружающий мир. 3 класс]] unit" title="environment3_18">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|18. Выделительная система|
!!!Описание
!%/</pre>
</div>
<div created="201706151735" environment3="19" tags="[[Окружающий мир. 3 класс]] unit" title="environment3_19">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|19. Нервная система|
!!!Описание
!%/</pre>
</div>
<div created="201706151735" environment3="20" tags="[[Окружающий мир. 3 класс]] unit" title="environment3_20">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|20. Органы чувств|
!!!Описание
!%/</pre>
</div>
<div created="201706151735" environment3="21" tags="[[Окружающий мир. 3 класс]] unit" title="environment3_21">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|21. Гигиена. Шесть систем организма|
!!!Описание
!%/</pre>
</div>
<div created="201706151735" environment3="22" tags="[[Окружающий мир. 3 класс]] unit" title="environment3_22">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|22. Гигиена. Нервная система и&amp;nbsp;органы чувств|
!!!Описание
!%/</pre>
</div>
<div created="201706151735" environment3="23" tags="[[Окружающий мир. 3 класс]] unit" title="environment3_23">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|23. Космос, часть 1|
!!!Описание
!%/</pre>
</div>
<div created="201706151735" environment3="24" tags="[[Окружающий мир. 3 класс]] unit" title="environment3_24">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|24. Космос, часть 2|
!!!Описание
!%/</pre>
</div>
<div created="201706151735" environment3="25" tags="[[Окружающий мир. 3 класс]] unit" title="environment3_25">
<pre>&lt;&lt;lessonAdminPanel&gt;&gt;/%
|visibleName|25. Космос, часть&amp;nbsp;3|
!!!Описание
!%/</pre>
</div>
<div changecount="1" created="201706161715" modified="201706161715" modifier="YourName" ordercounter="1" tags="environment3_01 unitStep" title="environment3_01_02">
<pre>|visibleName|Части тела|
|ссылка на контент шага|./environment3/jpg/environment3_01_01.jpg|
|тип шага|pager|
</pre>
</div>
<div changecount="1" created="201706161715" modified="201706161715" modifier="YourName" ordercounter="2" tags="environment3_01 unitStep" title="environment3_01_03">
<pre>|visibleName|Системы органов|
|ссылка на контент шага|./environment3/jpg/environment3_01_02.jpg|
|тип шага|pager|
</pre>
</div>
<div changecount="1" created="201706161718" modified="201706161718" modifier="YourName" tags="environment3_01 attachment" title="environment3_01_k">
<pre>|ссылка на материал|./environment3/pdf/environment3_01_k.pdf|
|занимает памяти|868 Кб|
|visibleName|Конспект|
</pre>
</div>
<div changecount="1" created="201706161724" modified="201706161724" modifier="YourName" ordercounter="0" tags="environment3_02 unitStep" title="environment3_02_01">
<pre>|visibleName|Кость и&amp;nbsp;сустав|
|тип шага|video|
|ссылка на контент шага|https://youtu.be/Lsj7cLqFvgc|
</pre>
</div>
<div changecount="1" created="201706161724" modified="201706161724" modifier="YourName" ordercounter="1" tags="environment3_02 unitStep" title="environment3_02_02">
<pre>|visibleName|Опорная система. Строение кости|
|тип шага|pager|
|ссылка на контент шага|./environment3/jpg/environment3_02_01.jpg|
</pre>
</div>
<div changecount="1" created="201706161724" modified="201706161724" modifier="YourName" ordercounter="2" tags="environment3_02 unitStep" title="environment3_02_03">
<pre>|visibleName|Соединения костей|
|тип шага|pager|
|ссылка на контент шага|./environment3/jpg/environment3_02_02.jpg|
</pre>
</div>
<div changecount="1" created="201706161725" modified="201706161725" modifier="YourName" tags="environment3_02 attachment" title="environment3_02_k">
<pre>|visibleName|Конспект|
|занимает памяти|636 Кб|
|ссылка на материал|./environment3/pdf/environment3_02_k.pdf|
</pre>
</div>
<div changecount="1" created="201706161728" modified="201706161728" modifier="YourName" ordercounter="0" tags="environment3_03 unitStep" title="environment3_03_01">
<pre>|visibleName|Наши главные кости|
|ссылка на контент шага|https://youtu.be/IZPKIdf3wc4|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201706161728" modified="201706161728" modifier="YourName" ordercounter="1" tags="environment3_03 unitStep" title="environment3_03_02">
<pre>|visibleName|Наши главные кости|
|ссылка на контент шага|./environment3/jpg/environment3_03_01.jpg|
|тип шага|pager|
</pre>
</div>
<div changecount="1" created="201706161728" modified="201706161728" modifier="YourName" ordercounter="2" tags="environment3_03 unitStep" title="environment3_03_03">
<pre>|visibleName|Череп и позвоночник|
|ссылка на контент шага|./environment3/jpg/environment3_03_02.jpg|
|тип шага|pager|
</pre>
</div>
<div changecount="2" created="201706161729" modified="201706161729" modifier="YourName" tags="environment3_03 attachment" title="environment3_03_k">
<pre>|ссылка на материал|./environment3/pdf/environment3_03_k.pdf|
|занимает памяти|663 Кб|
|visibleName|Конспект|
</pre>
</div>
<div changecount="1" created="201706161737" modified="201706161737" modifier="YourName" ordercounter="0" tags="environment3_04 unitStep" title="environment3_04_01">
<pre>|visibleName|Болезни опорной системы|
|тип шага|video|
|ссылка на контент шага|https://youtu.be/FpkjBT9-PEQ|
</pre>
</div>
<div changecount="1" created="201706161737" modified="201706161737" modifier="YourName" ordercounter="1" tags="environment3_04 unitStep" title="environment3_04_02">
<pre>|visibleName|Переломы|
|тип шага|pager|
|ссылка на контент шага|./environment3/jpg/environment3_04_01.jpg|
</pre>
</div>
<div changecount="1" created="201706161737" modified="201706161737" modifier="YourName" ordercounter="2" tags="environment3_04 unitStep" title="environment3_04_03">
<pre>|visibleName|Вывихи. Сколиоз|
|тип шага|pager|
|ссылка на контент шага|./environment3/jpg/environment3_04_02.jpg|
</pre>
</div>
<div changecount="1" created="201706161738" modified="201706161738" modifier="YourName" tags="environment3_04 attachment" title="environment3_04_k">
<pre>|ссылка на материал|./environment3/pdf/environment3_04_k.pdf|
|visibleName|Конспект|
|занимает памяти|772 Кб|
</pre>
</div>
<div changecount="1" created="201706161740" modified="201706161740" modifier="YourName" ordercounter="0" tags="environment3_05 unitStep" title="environment3_05_01">
<pre>|visibleName|Строение и&amp;nbsp;работа мышц|
|ссылка на контент шага|https://youtu.be/j1ezeDiT-OI|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201706161740" modified="201706161740" modifier="YourName" ordercounter="1" tags="environment3_05 unitStep" title="environment3_05_02">
<pre>|visibleName|Строение и&amp;nbsp;работа мышц|
|ссылка на контент шага|./environment3/jpg/environment3_05_01.jpg|
|тип шага|pager|
</pre>
</div>
<div changecount="1" created="201706161740" modified="201706161740" modifier="YourName" tags="environment3_05 attachment" title="environment3_05_k">
<pre>|visibleName|Конспект|
|занимает памяти|404 Кб|
|ссылка на материал|./environment3/pdf/environment3_05_k.pdf|
</pre>
</div>
<div changecount="1" created="201706161746" modified="201706161746" modifier="YourName" ordercounter="0" tags="environment3_06 unitStep" title="environment3_06_01">
<pre>|visibleName|Наши главные мышцы|
|ссылка на контент шага|https://youtu.be/zNnPgQt7Nks|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201706161746" modified="201706161746" modifier="YourName" ordercounter="1" tags="environment3_06 unitStep" title="environment3_06_02">
<pre>|visibleName|Наши главные мышцы. Вид спереди|
|ссылка на контент шага|./environment3/jpg/environment3_06_01.jpg|
|тип шага|pager|
</pre>
</div>
<div changecount="1" created="201706161747" modified="201706161747" modifier="YourName" ordercounter="2" tags="environment3_06 unitStep" title="environment3_06_03">
<pre>|visibleName|Наши главные мышцы. Вид сзади|
|ссылка на контент шага|./environment3/jpg/environment3_06_02.jpg|
|тип шага|pager|
</pre>
</div>
<div changecount="1" created="201706161747" modified="201706161747" modifier="YourName" tags="environment3_06 attachment" title="environment3_06_k">
<pre>|visibleName|Конспект|
|занимает памяти|990 Кб|
|ссылка на материал|./environment3/pdf/environment3_06_k.pdf|
</pre>
</div>
<div changecount="1" created="201706161749" modified="201706161749" modifier="YourName" ordercounter="0" tags="environment3_07 unitStep" title="environment3_07_01">
<pre>|visibleName|Повреждения двигательной системы|
|тип шага|video|
|ссылка на контент шага|https://youtu.be/EaKkFykAIT4|
</pre>
</div>
<div changecount="1" created="201706161749" modified="201706161749" modifier="YourName" ordercounter="1" tags="environment3_07 unitStep" title="environment3_07_02">
<pre>|visibleName|Растяжения и ушибы|
|ссылка на контент шага|./environment3/jpg/environment3_07_01.jpg|
|тип шага|pager|
</pre>
</div>
<div changecount="1" created="201706161749" modified="201706161749" modifier="YourName" ordercounter="2" tags="environment3_07 unitStep" title="environment3_07_03">
<pre>|visibleName|Как накладывать повязки|
|ссылка на контент шага|./environment3/jpg/environment3_07_02.jpg|
|тип шага|pager|
</pre>
</div>
<div changecount="1" created="201706161750" modified="201706161750" modifier="YourName" tags="environment3_07 attachment" title="environment3_07_k">
<pre>|visibleName|Конспект|
|ссылка на материал|./environment3/pdf/environment3_07_k.pdf|
|занимает памяти|804 Кб|
</pre>
</div>
<div changecount="1" created="201706161804" modified="201706161804" modifier="YourName" ordercounter="0" tags="environment3_08 unitStep" title="environment3_08_01">
<pre>|ссылка на контент шага|https://youtu.be/TXt6ZYhhFuw|
|visibleName|Кровеносная система. Кровь|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201706161804" modified="201706161804" modifier="YourName" ordercounter="1" tags="environment3_08 unitStep" title="environment3_08_02">
<pre>|ссылка на контент шага|./environment3/jpg/environment3_08_01.jpg|
|visibleName|Кровь. Часть&amp;nbsp;1|
|тип шага|pager|
</pre>
</div>
<div changecount="1" created="201706161805" modified="201706161805" modifier="YourName" ordercounter="2" tags="environment3_08 unitStep" title="environment3_08_03">
<pre>|ссылка на контент шага|./environment3/jpg/environment3_08_02.jpg|
|visibleName|Кровь. Часть&amp;nbsp;2|
|тип шага|pager|
</pre>
</div>
<div changecount="1" created="201706161804" modified="201706161804" modifier="YourName" tags="environment3_08 attachment" title="environment3_08_k">
<pre>|visibleName|Конспект|
|ссылка на материал|./environment3/pdf/environment3_08_k.pdf|
|занимает памяти|1,4 Мб|
</pre>
</div>
<div changecount="1" created="201706191906" modified="201706191906" modifier="Яков Литвин" ordercounter="0" tags="environment3_09 unitStep" title="environment3_09_01">
<pre>|ссылка на контент шага|https://youtu.be/igECiX6oN5E|
|тип шага|video|
|visibleName|Сердце и&amp;nbsp;сосуды|
</pre>
</div>
<div changecount="1" created="201706161807" modified="201706161807" modifier="YourName" ordercounter="1" tags="environment3_09 unitStep" title="environment3_09_02">
<pre>|ссылка на контент шага|./environment3/jpg/environment3_09_01.jpg|
|тип шага|pager|
|visibleName|Сердце|
</pre>
</div>
<div changecount="1" created="201706161807" modified="201706161807" modifier="YourName" ordercounter="2" tags="environment3_09 unitStep" title="environment3_09_03">
<pre>|ссылка на контент шага|./environment3/jpg/environment3_09_02.jpg|
|тип шага|pager|
|visibleName|Сосуды|
</pre>
</div>
<div changecount="1" created="201706161807" modified="201706161807" modifier="YourName" tags="environment3_09 attachment" title="environment3_09_k">
<pre>|ссылка на материал|./environment3/pdf/environment3_09_k.pdf|
|занимает памяти|631 Кб|
|visibleName|Конспект|
</pre>
</div>
<div changecount="1" created="201706161810" modified="201706161810" modifier="YourName" ordercounter="1" tags="environment3_10 unitStep" title="environment3_10_02">
<pre>|visibleName|Круги кровообращения|
|ссылка на контент шага|./environment3/jpg/environment3_10_01.jpg|
|тип шага|pager|
</pre>
</div>
<div changecount="1" created="201706161810" modified="201706161810" modifier="YourName" ordercounter="2" tags="environment3_10 unitStep" title="environment3_10_03">
<pre>|visibleName|Капилляры|
|ссылка на контент шага|./environment3/jpg/environment3_10_02.jpg|
|тип шага|pager|
</pre>
</div>
<div changecount="1" created="201706161811" modified="201706161811" modifier="YourName" tags="environment3_10 attachment" title="environment3_10_k">
<pre>|visibleName|Конспект|
|ссылка на материал|./environment3/pdf/environment3_10_k.pdf|
|занимает памяти|542 Кб|
</pre>
</div>
<div changecount="1" created="201706161813" modified="201706161813" modifier="YourName" ordercounter="0" tags="environment3_11 unitStep" title="environment3_11_01">
<pre>|ссылка на контент шага|https://youtu.be/wJaxbDiRA7Q|
|тип шага|video|
|visibleName|Повреждения кровеносной системы|
</pre>
</div>
<div changecount="1" created="201706161814" modified="201706161814" modifier="YourName" ordercounter="0" tags="environment3_12 unitStep" title="environment3_12_01">
<pre>|visibleName|Дыхательная система|
|ссылка на контент шага|https://youtu.be/1dn2Fdqat5o|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201706161815" modified="201706161815" modifier="YourName" ordercounter="0" tags="environment3_13 unitStep" title="environment3_13_01">
<pre>|тип шага|video|
|visibleName|Болезни дыхательной системы|
|ссылка на контент шага|https://youtu.be/F2rtSAhWMcA|
</pre>
</div>
<div changecount="1" created="201706161815" modified="201706161815" modifier="YourName" ordercounter="1" tags="environment3_13 unitStep" title="environment3_13_02">
<pre>|тип шага|pager|
|visibleName|Болезни дыхательной системы|
|ссылка на контент шага|./environment3/jpg/environment3_13_01.jpg|
</pre>
</div>
<div changecount="1" created="201706161815" modified="201706161815" modifier="YourName" ordercounter="2" tags="environment3_13 unitStep" title="environment3_13_03">
<pre>|тип шага|pager|
|visibleName|Горчичники|
|ссылка на контент шага|./environment3/jpg/environment3_13_02.jpg|
</pre>
</div>
<div changecount="1" created="201706161815" modified="201706161815" modifier="YourName" tags="environment3_13 attachment" title="environment3_13_k">
<pre>|visibleName|Конспект|
|занимает памяти|788 Кб|
|ссылка на материал|./environment3/pdf/environment3_13_k.pdf|
</pre>
</div>
<div changecount="1" created="201706161818" modified="201706161818" modifier="YourName" ordercounter="0" tags="environment3_14 unitStep" title="environment3_14_01">
<pre>|тип шага|video|
|visibleName|Пищеварительная система. Что и&amp;nbsp;зачем мы&amp;nbsp;едим|
|ссылка на контент шага|https://youtu.be/65QjoX17wWE|
</pre>
</div>
<div changecount="1" created="201706161819" modified="201706161819" modifier="YourName" ordercounter="0" tags="environment3_15 unitStep" title="environment3_15_01">
<pre>|visibleName|Что происходит во&amp;nbsp;рту|
|ссылка на контент шага|https://youtu.be/5Jas_rwYsmQ|
|тип шага|video|
</pre>
</div>
<div changecount="1" created="201706161820" modified="201706161820" modifier="YourName" ordercounter="0" tags="environment3_16 unitStep" title="environment3_16_01">
<pre>|visibleName|Желудок и&amp;nbsp;кишечник|
|тип шага|video|
|ссылка на контент шага|https://youtu.be/OSCShUF8Mu4|
</pre>
</div>
<div changecount="1" created="201706161820" modified="201706161820" modifier="YourName" ordercounter="0" tags="environment3_17 unitStep" title="environment3_17_01">
<pre>|visibleName|Болезни пищеварительной системы|
|ссылка на контент шага|https://youtu.be/kXsZcVuVbb0 |
|тип шага|video|
</pre>
</div>
<div changecount="2" created="201706151500" modified="201706191647" modifier="YourName" ordercounter="4" tags="course" title="Окружающий мир. 4 класс">
<pre>&lt;&lt;courseAdminPanel&gt;&gt;/%
|Автор			||
|Аудитория		||
|Картинка в шапке	||
|courseId			|	environment4|
!!!Описание
&lt;p&gt;Материал курса в&amp;nbsp;разработке. Следите за&amp;nbsp;ежемесячными обновлениями.
Если у&amp;nbsp;вас возникли вопросы по&amp;nbsp;курсу, пишите нам на&amp;nbsp;&lt;a href="mailto:okrumir@yandex.ru"&gt;okrumir@yandex.ru&lt;/a&gt;
&lt;/p&gt; &lt;h2&gt;
&lt;a href="javascript:;" onclick="onClickTiddlerLink(event)" class="tiddlyLink tiddlyLinkExisting" refresh="link" tiddlylink="Окружающий мир"&gt;Весь курс&lt;/a&gt;&lt;/h2&gt;
!!!In title
!%/</pre>
</div>
<div changecount="66" content-type="text/javascript" created="201510260639" modified="201510271034" modifier="Yakov Litvin" ordermytweaks="4" statecomment="references для секций, сегментов реализованы; {{PoG{реализовать для tw-записей, содержащих {{{]}}} в имени, расширить {{{references}}} -- отображать в скобках секцию/сегмент; описать решение в [[issue|https://github.com/TiddlyWiki/tiddlywiki/issues/175]]}}}" tags="systemConfig [[YL core tweaks]] viewing" title="BetterReferencesPlugin">
<pre>/***
|Version|1.0|
|Short status|&lt;&lt;insertEditable container:"@stateComment" size:max cell&gt;&gt;|
tests: [[BRP 1]], [[BRP 2]], [[BRP 3]]
***/
//{{{
var orig_BRP_changed = Tiddler.prototype.changed;
// this recalcs links according to config.textPrimitives.tiddlerAnyLinkRegExp and
// config.textPrimitives.tiddlerForcedLinkRegExp , so temporarily hijack them
Tiddler.prototype.changed = function()
{
	var brackettedLinkRE = config.textPrimitives.brackettedLink,
//	    titledBrackettedLinkRE = config.textPrimitives.titledBrackettedLink,
	    sectionOrSliceAddition =
		"(?:(?:(?:"+config.textPrimitives.sliceSeparator+"[^\\|\\n\\]]+)|"+ //::
		   "(?:"+config.textPrimitives.sectionSeparator+"[^\\n\\]]+))?)",   //##
	    tiddlerForcedLinkRegExp = config.textPrimitives.tiddlerForcedLinkRegExp,
	    tiddlerAnyLinkRegExp    = config.textPrimitives.tiddlerAnyLinkRegExp;
	
	// hijack REs
	config.textPrimitives.brackettedLink = "\\[\\[([^\\]]+?)"+ // extra "?" is important here
		sectionOrSliceAddition+
		"\\]\\]";
		// core definition: "\\[\\[([^\\]]+)\\]\\]";

//	config.textPrimitives.titledBrackettedLink = "\\[\\[([^\\[\\]\\|]+)\\|([^\\[\\]\\|]+?)"+
//		sectionOrSliceAddition+
//		"\\]\\]";
		// core definition: "\\[\\[([^\\[\\]\\|]+)\\|([^\\[\\]\\|]+)\\]\\]";
	// recalc, as in the core:
	config.textPrimitives.tiddlerForcedLinkRegExp = new RegExp("(?:" +
		config.textPrimitives.titledBrackettedLink + ")|(?:" +
		config.textPrimitives.brackettedLink + ")|(?:" +
		config.textPrimitives.urlPattern + ")","mg");
	config.textPrimitives.tiddlerAnyLinkRegExp = new RegExp("("+
		config.textPrimitives.wikiLink + ")|(?:" +
		config.textPrimitives.titledBrackettedLink + ")|(?:" +
		config.textPrimitives.brackettedLink + ")|(?:" +
		config.textPrimitives.urlPattern + ")","mg");
	
	var result = orig_BRP_changed.apply(this,arguments);
	
	// unhijack REs
	config.textPrimitives.brackettedLink = brackettedLinkRE;
//	config.textPrimitives.titledBrackettedLink = titledBrackettedLinkRE;
	// recalc again
	config.textPrimitives.tiddlerForcedLinkRegExp = new RegExp("(?:" +
		config.textPrimitives.titledBrackettedLink + ")|(?:" +
		config.textPrimitives.brackettedLink + ")|(?:" +
		config.textPrimitives.urlPattern + ")","mg");
	config.textPrimitives.tiddlerAnyLinkRegExp = new RegExp("("+
		config.textPrimitives.wikiLink + ")|(?:" +
		config.textPrimitives.titledBrackettedLink + ")|(?:" +
		config.textPrimitives.brackettedLink + ")|(?:" +
		config.textPrimitives.urlPattern + ")","mg");

	return result; // in fact, there's no result, this is for possible future extensions
};
//}}}</pre>
</div>
<div changecount="16" content-type="text/javascript" created="201506051309" modified="201509050844" modifier="Yakov Litvin" ordermytweaks="5" statecomment="готов; {{PoG{*реализовать autoescaping .. отступами; упомянуть решение -- fix для [[ошибки|Проблема с параметрами макросов, содержащими сдвоенную {-скобку]] при использовании параметров макроса, содержащих {{{{{}}}, -- [[на stackoverflow|http://stackoverflow.com/questions/27697574/which-match-among-several-alternatives-will-a-regexp-provide]]; .oO чем грозит overwriting и нужны ли/достаточно ли {{{Requires}}}}}}" tags="[[YL core tweaks]] systemConfig viewing" title="ConsistentMacroParamsPlugin">
<pre>/***
|Description|This plugin fixes a couple of macro params issues:&lt;br&gt;1) fixes macro error in some cases when a named param has {{{{{}}}-containing value;&lt;br&gt;2) makes "escaped" ' and " in macro params be really escaped (examples: {{{"some \"value\""}}} is parsed as {{{some "value"}}} and {{{'that\'s nice'}}} becomes {{{that's nice}}})|
|Version|1.0|
|Short status|&lt;&lt;insertEditable container:"@stateComment" size:max cell&gt;&gt;|
|Author|Yakov Litvin|
***/
//{{{
// fix the error rising for macros with '{{'-containing named param's value
String.prototype.readMacroParams = function(notAllowEval)
{
	// YL tweak: don't use "noNames"
	var p = this.parseParams("_default",null,!notAllowEval);
	var t, n = [];
	for(t = 1; t &lt; p.length; t++)
		n.push(p[t].value);
	return n;
};

// implement escaping of ' and " in macro params
String.prototype.parseParams = function(defaultName,defaultValue,allowEval,noNames,cascadeDefaults)
{
	var parseToken = function(match,p) {
		var n;
		if(match[p]) // Double quoted
			// YL tweak: substitute escaped \" with "
			n = match[p].replace(/\\"/g,'"');
		else if(match[p+1]) // Single quoted
			// YL tweak: substitute escaped \' with '
			n = match[p+1].replace(/\\'/g,"'");
		else if(match[p+2]) // Double-square-bracket quoted
			n = match[p+2];
		else if(match[p+3]) // Double-brace quoted
			try {
				n = match[p+3];
				if(allowEval &amp;&amp; config.evaluateMacroParameters != "none") {
					if(config.evaluateMacroParameters == "restricted") {
						if(window.restrictedEval)
							n = window.restrictedEval(n);
					} else
						n = window.eval(n);
				}
			} catch(ex) {
				throw "Unable to evaluate {{" + match[p+3] + "}}: " + exceptionText(ex);
			}
		else if(match[p+4]) // Unquoted
			n = match[p+4];
		else if(match[p+5]) // empty quote
			n = "";
		return n;
	};
	var r = [{}];
	var dblQuote = "(?:\"((?:(?:\\\\\")|[^\"])+)\")";
	var sngQuote = "(?:'((?:(?:\\\\\')|[^'])+)')";
	var dblSquare = "(?:\\[\\[((?:\\s|\\S)*?)\\]\\])";
	var dblBrace = "(?:\\{\\{((?:\\s|\\S)*?)\\}\\})";
	var unQuoted = noNames ? "([^\"'\\s]\\S*)" : "([^\"':\\s][^\\s:]*)";
	var emptyQuote = "((?:\"\")|(?:''))";
	var skipSpace = "(?:\\s*)";
	var token = "(?:" + dblQuote + "|" + sngQuote + "|" + dblSquare + "|" + dblBrace + "|" + unQuoted + "|" + emptyQuote + ")";
	var re = noNames ? new RegExp(token,"mg") : new RegExp(skipSpace + token + skipSpace + "(?:(\\:)" + skipSpace + token + ")?","mg");
	var match;
	do {
		match = re.exec(this);
		if(match) {
			var n = parseToken(match,1);
			if(noNames) {
				r.push({ name:"", value:n });
			} else {
				var v = parseToken(match,8);
				if(v == null &amp;&amp; defaultName) {
					v = n;
					n = defaultName;
				} else if(v == null &amp;&amp; defaultValue) {
					v = defaultValue;
				}
				r.push({ name:n, value:v });
				if(cascadeDefaults) {
					defaultName = n;
					defaultValue = v;
				}
			}
		}
	} while(match);
	
	// Summarise parameters into first element
	var t;
	for(t = 1; t &lt; r.length; t++)
		if(r[0][r[t].name])
			r[0][r[t].name].push(r[t].value);
		else
			r[0][r[t].name] = [r[t].value];
	return r;
};
//}}}</pre>
</div>
<div changecount="311" created="201610051048" creator="Яков Литвин" modified="201706192232" modifier="Яков Литвин" tags="systemConfig" title="CustomSettingsPlugin">
<pre>//{{{
// --- theme switching -------------------------------------
var usedOnline = window.location.protocol != "file:";
var usedWithBackEnd = !!window.saveOnlineChanges;
var visitorThemeName = "WebTheme";
var authorThemeName  = "AuthorTheme";
readOnly = usedOnline &amp;&amp; !usedWithBackEnd;

// theme setting helpers
story.setVisitorTheme = function() {
	story.switchTheme(visitorThemeName);
	//# test (online auto-setting, including web config.options.txtTheme is saved)
};
story.setAuthorTheme = function() {
	story.switchTheme(authorThemeName);
	//# test (online auto-setting, including web config.options.txtTheme is saved)
};
story.toggleRoleTheme = function() {
	if(config.options.txtTheme == visitorThemeName)
		story.setAuthorTheme();
	else
		story.setVisitorTheme();
};

// set theme on startup
if(usedOnline &amp;&amp; !usedWithBackEnd) {

	var ensureTheme = function(){
		if(config.options.txtTheme != visitorThemeName)
			story.setVisitorTheme();
	}
	setInterval(ensureTheme,100);
} else {
	var ensureTheme = function(){
		if(config.options.txtTheme != authorThemeName)
			story.setAuthorTheme();
	}
	story.setAuthorTheme();
//# dirty hacky way:
	setTimeout(ensureTheme,100);
	setTimeout(ensureTheme,200);
	setTimeout(ensureTheme,300);
	setTimeout(ensureTheme,400);
	setTimeout(ensureTheme,500);
	setTimeout(ensureTheme,600);
}

// enable theme switching by pressing ctrl+shift+t
jQuery(document).on('keydown',function(e){
	if(usedOnline &amp;&amp; !usedWithBackEnd) return;
	if((e.which == 222 /*'*/ || e.which == 0) &amp;&amp; e.ctrlKey &amp;&amp; e.shiftKey) {
		story.toggleRoleTheme();
		if(e.preventDefault)
			e.preventDefault();
		return false;
	}
});

// display different tiddlers for an author and a visitor:
story.orig_displayDefaultTiddlers = story.displayDefaultTiddlers;
story.displayDefaultTiddlers = function()
{
	if(usedOnline &amp;&amp; !usedWithBackEnd)
		this.displayTiddlers(null, store.filterTiddlers(store.getTiddlerText("WebDefaultTiddlers")||""));
	else
		this.orig_displayDefaultTiddlers();
};

// disable including for visitors (prevent error message to appear)
config.options.chkUseInclude = !usedOnline;// || usedWithBackEnd;

// --- helpers ---------------------------------------------
function updateQueryParameter(uri, key, value) {
	var re = new RegExp("([?&amp;])" + key + "=.*?(&amp;|#|$)", "i");
	if (uri.match(re))
		return uri.replace(re, '$1' + key + "=" + value + '$2');
	else {
		var hash =  '';
		if( uri.indexOf('#') !== -1 ){
			hash = uri.replace(/.*#/, '#');
			uri = uri.replace(/#.*/, '');
		}
		var separator = uri.indexOf('?') !== -1 ? "&amp;" : "?";    
		return uri + separator + key + "=" + value + hash;
	}
};
Tiddler.prototype.getVisibleName = function(sliceName,anotherDefault)
{
	return this.getSlice(sliceName || "visibleName") || anotherDefault || this.title;
};

// 
if(config.options.txtUnitStep === undefined)
	config.options.txtUnitStep = 0;
if(config.options.txtLessonNumber === undefined)
	config.options.txtLessonNumber = 0;

// --- unit step macros ------------------------------------
config.macros.unitStep =
{
	getUnitSteps: function(tiddler) {
		var tag = tiddler.title,
		    steps = store.filterTiddlers("set: tag["+tag+"] AND tag[unitStep]");
		return config.macros.itemMenu.sortByCounter(steps/*, fieldName*/);
	},
	handler: function(place,macroName,params,wikifier,paramString,tiddler)
	{
		var singleStepMode = paramString.contains("singleStepMode");

		// lesson steps and current step
		var steps = this.getUnitSteps(tiddler);

		if(singleStepMode)
			steps = [tiddler];


		// header (navigation)
		var header = createTiddlyElement(place,"div","","lessonNavigation","",{role:'navigation'});

		var hrefToMain = "http://cpm.dogm.mos.ru/";
		var linkToMain = hrefToMain ? createExternalLink(header,hrefToMain) :
			jQuery('&lt;a class="noLink"&gt;&lt;/a&gt;').appendTo(header)[0];
		createTiddlyElement(linkToMain,"div","","logo-sign");

		// link to course contents (if not available, doesn't do anything)
		var getObjectTag = function(tiddler,objectTag) {
			if(!tiddler || !tiddler.tags)
				return null;
			var i, tag;
			for(i = 0; i &lt; tiddler.tags.length; i++) {
				tag = store.fetchTiddler(tiddler.tags[i]);
				if(tag &amp;&amp; tag.tags.contains(objectTag))
					return tag;
			}
			return null;
		};
		var i, attachedToLesson, theCourse;
		if(tiddler.tags.contains("alternativeUnit")) {
			attachedToLesson = getObjectTag(tiddler,"unit");
			theCourse = getObjectTag(attachedToLesson,"course");
		} else
			theCourse = getObjectTag(tiddler,"course");

		var title = tiddler.getVisibleName();
		if(theCourse) {
			var linkToContents = createTiddlyLink(header,theCourse.title);
			jQuery(linkToContents).html(title).addClass("linkToContents");
		} else
			jQuery("&lt;a class='noLinkToContents'&gt;"+title+"&lt;/a&gt;")
				.appendTo(header);

		var navLink, type;
		if(steps.length &gt; 1)
		  for(let j = 0; j &lt; steps.length; j++) // not compatible with elder browsers
		  {
			navLink = createTiddlyElement(header,"a","","stepLink");
			jQuery(navLink).on('click',function(){
				config.options.txtUnitStep = j;
				refreshStep();
			});
			if(type = steps[j].getSlice("тип шага"))
				createTiddlyElement(navLink,"div","",type);
			else
				createTiddlyText(navLink,"шаг "+j);
		  }


		// wrapper, 3 columns and buttons (backward/forward)
		//# when back/forth buttons are added to the first/last steps, alternativeUnit s should be taken into accout
		var wrapper = createTiddlyElement(place,"div","","unitStep"),
		    leftColumn = createTiddlyElement(wrapper,"div","","goPrevContainer"),
		    contentColumn = createTiddlyElement(wrapper,"div","", "unitStepContentContainer"),
		    rightColumn = createTiddlyElement(wrapper,"div","","goNextContainer");

		if(steps.length == 0)
			return;
			//# display something indicating that the lesson is empty for now

		var backContainer = createTiddlyElement(leftColumn,"div","","backContainer");
		var backButton = createTiddlyElement(backContainer,"div","","backward");
		jQuery(leftColumn).on('click',function(){
			config.options.txtUnitStep--;
			refreshStep();
		});
		var forthContainer = createTiddlyElement(rightColumn,"div","","forthContainer");
		var forwardButton = createTiddlyElement(forthContainer,"div","","forward");
		jQuery(rightColumn).on('click',function(){
			config.options.txtUnitStep++;
			refreshStep();
		});

		var refreshStep = function()
		{
			// refresh content
			jQuery(contentColumn).empty();

			// dirty fix for the inconsistent values of config.options.txtUnitStep
			if(config.options.txtUnitStep &gt; steps.length-1)
				config.options.txtUnitStep = steps.length-1;

			var step = steps[config.options.txtUnitStep];
			var contentUrl = step ? step.getSlice("ссылка на контент шага") : "";
			var specifiedHeight = step.getSlice("contentHeight");
			if(specifiedHeight) specifiedHeight = parseInt(specifiedHeight);

			if(contentUrl) {
				var isImage = /\.(png|jpg|jpeg|gif)(\?.*)?$/i.exec(contentUrl);
				var isVideo = /(?:youtube\.com)|(?:youtu\.be)|(?:^[-\w]+$)/i.exec(contentUrl)
					|| step.getSlice("тип шага") == "video";
				if(isVideo) {
/* deal with the following urls:
 *
 * https://www.youtube.com/watch?v=34c2GNgBpfE
 *   https://www.youtube.com/embed/34c2GNgBpfE &lt;- canonical one, turn them into this form
 *		  https://youtu.be/34c2GNgBpfE
 *				   34c2GNgBpfE
 */
				    var youtubeIdRE = /((?:youtube\.com\/watch\?v=)|(?:youtube\.com\/embed\/)|(?:youtu\.be\/))?([-\w]+)((\?.*)|(\&amp;.*)|$)/,
					youtubeIdMatch = youtubeIdRE.exec(contentUrl),
					youtubeId = youtubeIdMatch ? youtubeIdMatch[2]:"";
				    if(youtubeId)
					contentUrl = "https://www.youtube.com/embed/"+ youtubeId;
				//  if(!contentUrl)
				//	contentUrl = ""; // set url for video dummy here

				    // disable autoplay, remove "related" from YouTube videos
				    contentUrl = updateQueryParameter(contentUrl, "autoplay", 0);
				    contentUrl = updateQueryParameter(contentUrl,"rel",0);
				}
				
				if(isImage)
					jQuery("&lt;img src='"+contentUrl+"' /&gt;")
						.addClass("contentImage")
						.appendTo(contentColumn);
				else {
					var iframe = createTiddlyElement(contentColumn,"iframe","", "contentIframe","",{
						src: contentUrl,
						frameborder: 0,
						scrolling: "no",
						was_reloaded: false
					});

					if(/\.html$/.exec(contentUrl))
						iframe.onload = function(){
							this.height = specifiedHeight || (this.contentWindow.document.body.offsetHeight +50);
							if(!this.was_reloaded) //optional?
							{
								this.was_reloaded = true;
								try {
									this.contentDocument.location.reload();
								}catch(ex){}
							}
						}
						// +50 is a dirty hack; no idea why needed
					else
						// for video mostly
						iframe.height = iframe.offsetWidth * 9/16;
				}
			}
			//contentColumn.heigh = contentColumn.firstChild.offsetHeight; //# set via CSS instead
			//# implement ?? for no-contentUrl case

			// refresh navigation arrows
			if(config.options.txtUnitStep == 0)
				jQuery(backContainer).hide();
			else
				jQuery(backContainer).show();
			if(config.options.txtUnitStep == steps.length-1)
				jQuery(forthContainer).hide();
			else
				jQuery(forthContainer).show();

			//# highlight the link to the opened step in the nav bar
			jQuery(".currentStep").removeClass("currentStep");
			jQuery(".stepLink:eq("+config.options.txtUnitStep+")") .addClass("currentStep");
		}
		refreshStep();
	},
};
config.macros.lesson =
{
	getAttachments: function(tiddler) {
		var tag = tiddler.title,
		    atts = store.filterTiddlers("set: tag["+tag+"] AND tag[attachment]");
		return config.macros.itemMenu.sortByCounter(atts/*, fieldName*/);
	}
};
config.macros.unitStepFooter =
{
	handler: function(place,macroName,params,wikifier,paramString,tiddler) {
		//# implement
	}
};
config.macros.lessonAdminPanel =
{
	handler: function(place,macroName,params,wikifier,paramString,tiddler)
	{
		// parametric transclusion is useful for more fluid development
		wikify('&lt;&lt;tiddler [[LessonAdminPanel]] with:[['+tiddler.title+']] noedit&gt;&gt;',place,null,tiddler);
	}
};

// --- course macros ------------------------------------
config.macros.fillCourseHeader = {
	handler: function(place,macroName,params,wikifier,paramString,tiddler)
	{
		var imgUrl = tiddler.getSlice("Картинка в шапке","");
		if(imgUrl)
			jQuery('#course-header').css("background",
				'linear-gradient(to right,rgba(0,0,0,0.4), rgba(0,0,0,0) 80%) no-repeat left, url("'+imgUrl+'") no-repeat center');

		jQuery("#main_content #course-header")
		  .empty()
		  .append(
		   '&lt;h2 id="course-name"&gt;'+	tiddler.getVisibleName()	+'&lt;/h2&gt;'+
		   '&lt;h4 id="course-author"&gt;'+	tiddler.getSlice("Автор","")	+'&lt;/h4&gt;'+
		   '&lt;h4 id="course-audience"&gt;'+	tiddler.getSlice("Аудитория","")+'&lt;/h4&gt;'+
		   (tiddler.getSection("In title",""))
		  );
	}
};
config.macros.fillCourseContents = {
	getCourseContents: function(course)
	{
		if(!course) return null;
		//# may be add getting course tiddler if course is the title or courseId
		var tids = store.filterTiddlers("[tag["+course.title+"]] [not[tag[hide]]"),
		    courseId = course.getSlice("courseId","");
		return config.macros.itemMenu.sortByCounter(tids, courseId);
	},
	getCourseLessons: function(course)
	{
		var contents = this.getCourseContents(course), i;
		if(!contents) return null;
		for(i = 0; i &lt; contents.length; i++)
			if(!contents[i].tags.contains("unit"))
				contents.splice(i--,1);
		return contents;
	},
	handler: function(place,macroName,params,wikifier,paramString,courseTiddler)
	{
		var lessons = this.getCourseLessons(courseTiddler),
		    contents = this.getCourseContents(courseTiddler);

		var getIndentIndex = function(itemTiddler) {
			if(itemTiddler.tags.contains("unit")) return 0;
			if(itemTiddler.tags.contains("заголовок 1 надуровня")) return 1;
			if(itemTiddler.tags.contains("заголовок 2 надуровня")) return 2;
		},
		    maxIndentIndex = 0;
		for(n = 0; n &lt; contents.length; n++)
			if(getIndentIndex(contents[n]) &gt; maxIndentIndex)
				maxIndentIndex = getIndentIndex(contents[n]);

		var $courseContentsColumn = jQuery("#lessons-list"),
		    $lessonContentsColumn = jQuery("#lesson-content");

		$courseContentsColumn.empty();
		// add the "about course" link (implement in refresher)
		jQuery('&lt;a class="lesson-name h4"&gt;О курсе&lt;/a&gt;')
			.on('click',function(){
				config.options.txtLessonNumber = 0;
				selectLesson();
			}).appendTo($courseContentsColumn)
			.wrap('&lt;div class="lesson" /&gt;');
		// add per lesson links
		for(let i = 0; i &lt; contents.length; i++) {
			let item = contents[i], isLesson = item.tags.contains("unit");
			let mute = isLesson &amp;&amp; !store.getTaggedTiddlers(item.title).length &amp;&amp; !item.getSection("Описание");
			let levelClass = isLesson ? 'h4' :
				(item.tags.contains("заголовок 1 надуровня")? 'h3' : 'h2');
			let indentClass = "indent-"+(maxIndentIndex - getIndentIndex(item));

			jQuery('&lt;a class="lesson-name '+levelClass+' '+indentClass+(mute ? ' mute' : '')+'"&gt;'
					+contents[i].getVisibleName()+'&lt;/a&gt;')
				.on('click',function(){
					if(mute) return;
					if(isLesson) {
						config.options.txtLessonNumber = lessons.indexOf(item)+1;
						selectLesson();
					} else if(levelClass == 'h3')
						openAccordionSectionAfter(this);
console.log("clicked");
				}).appendTo($courseContentsColumn)
				.wrap('&lt;div class="lesson" /&gt;');
		}
		var openAccordionSectionAfter = function(titleElement) {

			// a bad hack to implement an "accordion"
			if(jQuery('.h3').length)
				jQuery('.h4:not(:first)').css('display', 'none');
			if(titleElement)
				jQuery(titleElement).parent().nextUntil(':has(&gt;.h3)').children() .css('display', 'block');
			var lastItem = jQuery('.h4').last()[0];
			if(lastItem.text == "Над курсом работали") jQuery(lastItem).css('display', 'block');
			//# scroll into view
		};
		openAccordionSectionAfter(); // hide all

		var selectLesson = function() {
			// (re)set selection
			jQuery('.lesson-active').removeClass("lesson-active");
			var lessonNumber = config.options.txtLessonNumber-1,
			    lessonNumberAmongContents = lessonNumber == -1 ? 0 :
				contents.indexOf(lessons[lessonNumber])+1;
			jQuery(".lesson-name").eq(lessonNumberAmongContents).addClass("lesson-active");

			$lessonContentsColumn.empty();
			var $lessonContentsWrapper = jQuery('&lt;div&gt;').appendTo($lessonContentsColumn);
			window.elementToKeepIntoView = $lessonContentsWrapper[0];
			jQuery(window).scroll();
			if(config.options.txtLessonNumber == 0) {
			// show "about course"
				let description = courseTiddler.getSection("Описание");
				if(description)
					$lessonContentsWrapper.append('&lt;p&gt;'+description+ '&lt;/p&gt;');
				/*if(lessons.length)
				  jQuery('&lt;a class="btn btn-primary"&gt;Начать курс&lt;/a&gt;')
					.on('click',function(){
						config.options.txtUnitStep = 0;
						story.displayTiddler(this,lessons[0]);
					})
					.appendTo($lessonContentsWrapper)
				 */
				//# hr and teacher description
			} else {
			// show lesson
				var lessonNumber = config.options.txtLessonNumber - 1;
				if(lessonNumber &gt;= lessons.length) lessonNumber = 0; // fixes a bug taking place when we jump from a course to another one that has fewer lessons
				var lesson   = lessons[lessonNumber],
				    title    = lesson.title,
				    visibleTitle = lesson.getVisibleName(),
				    lessonDescription = lesson.getSection("Описание"),
				    steps    = config.macros.unitStep.getUnitSteps(lesson),
				    ruTypes  = {
					pager: "Конспект",
					task:  "Задание",
					test:  "Тест",
					video: "Видео",
				    },
				    showSteps = (steps.length &gt; 1) || (courseTiddler.title != "Неорганическая химия"),
				    goLabel   = showSteps ? "Пройти занятие" : "Посмотреть",
				    isGoButtonNeeded = !courseTiddler.getSlice("hideStartUnitButton");
//# add to course admin panel
				$lessonContentsWrapper
					.append('&lt;h2&gt;'+visibleTitle+'&lt;/h2&gt;')
					//# number in h2/"Занятие #" as h5
					.append('&lt;p&gt;'+lessonDescription+'&lt;/p&gt;')
					.append((steps.length &amp;&amp; isGoButtonNeeded) ?
						jQuery('&lt;a class="btn btn-primary"&gt;'+goLabel+'&lt;/a&gt;')
						  .on('click',function(){
							config.options.txtUnitStep = 0;
							story.displayTiddler(this,title);
						  })
						: '')
					.append('&lt;ol id="lesson-steps"/&gt;')

				if(showSteps)
				  for(let i = 0; i &lt; steps.length; i++) {
					let type = steps[i].getSlice("тип шага"),
					    ruType = ruTypes[type];
					jQuery('&lt;a&gt;')
						.appendTo("#lesson-steps")
						.wrap('&lt;li&gt;').wrap('&lt;p&gt;')
						.on('click',function(){
							config.options.txtUnitStep = i;
							story.displayTiddler(this,title);
						})
						//.append('&lt;div class="pull-left '+type+'"/&gt;')
						.append(jQuery('&lt;img/&gt;',{
							class:  "pull-left",
							src:    "images/"+(type=="pager" ? "text" : type)+".svg", // типы, исп-ные до того, отл-ся от тех, что у Виктора
							width:  "24px",
							height: "24px"
						}))
						.append('&lt;span class="lesson-label"&gt;'+steps[i].getVisibleName()+'&lt;/span&gt;&lt;br&gt;'+
							'&lt;small&gt;'+ruType+'&lt;/small&gt;')
						//# " - 5:99" (video length)
				  }

				var attachments = config.macros.lesson.getAttachments( lesson ),
				    attName, attUrl, isPdf, attSize;
				for(let i = 0; i &lt; attachments.length; i++)
				{
					attName = attachments[i].getVisibleName();
					attUrl  = attachments[i].getSlice("ссылка на материал");
					isPdf   = /.pdf/i.exec(attUrl);
					attSize = attachments[i].getSlice("занимает памяти");
					jQuery('&lt;a href="'+attUrl+'" target="_blank" /&gt;')
						.appendTo($lessonContentsWrapper)
						.wrap('&lt;p&gt;')
						.append('&lt;img src="images/dwnld_solid.svg" class="attachment-icon"&gt;'+
							'&lt;span class="attachment-label"&gt;'+attName+'&lt;/span&gt;' +
							(isPdf ? ' &lt;img src="images/pdf.svg" class="pdf-attachment-icon"&gt;' : '') +
							(!attSize ? '' : (isPdf ? ' &lt;span class="file-size"&gt;'+attSize+'&lt;/span&gt;' : ' (&lt;span class="file-size"&gt;'+attSize+'&lt;/span&gt;)'))
						);
				}
			}
		};

		// pick the step (by default "about course")
		selectLesson();
	}
};
window.prevScroll = 0;
jQuery(window).scroll(function()
{
	var menuEl = window.elementToKeepIntoView;
	if(!menuEl) return;
	var container = menuEl.parentElement;
	if(!container) return;
	var height = menuEl.offsetHeight,
	    windowHeight = findWindowHeight(),
	    scrollDown = window.prevScroll &lt; findScrollY(),
	    scrollUp   = window.prevScroll &gt; findScrollY();

	menuEl.style.position = "relative";

	var topLimitByContainer = 0, topLimitByWindow = findScrollY() - findPosY(container) -50,
//# get rid of magic value: it's the container's padding-top in px
	    bottomLimitByContainer = container.offsetHeight -80, //jQuery(container).innerHeight() ?
//# get rid of magic value: it's the container's padding-top + padding-bottom in px
	    bottomLimitByWindow = topLimitByWindow + findWindowHeight() -20,
//# get rid of magic value: presumably, it's the header's margin-top in px

	    //re = /(\-?\d+(?:\.\d+)?)\s?px/i,
	    getPixels = function(value) {
		if(!value) return 0;
		//var match = re.exec(value);
		//if(!match) return parseInt(value);
		return parseInt(value);//match[1]);	//test with non-px values (are they stored in .style.top?)
	    },
	    menuElTopCss = getPixels(menuEl.style.top);

	if(!scrollDown &amp;&amp; !scrollUp)
		menuEl.style.top = topLimitByWindow + "px"; //attach top to window top
	if(scrollDown) {
		if(height &lt; windowHeight) {
			if(menuElTopCss &lt; topLimitByWindow) // top edge is higher than that of window
				menuEl.style.top = topLimitByWindow + "px"; //top to top
		} else
			if(menuElTopCss + height &lt; bottomLimitByWindow) // bottom edge higher than that of window
				menuEl.style.top = (bottomLimitByWindow - height) + "px"; //bottom to bottom
	}
	if(scrollUp) {
		if(height &lt; windowHeight)
			menuEl.style.top = topLimitByWindow + "px"; //attach top to window top
		else
			if(menuElTopCss &gt; topLimitByWindow) // top edge lower than that of window
				menuEl.style.top = topLimitByWindow + "px"; //attach top to window top
	}

//# deal with selectLesson 46 (ends up below the bottom of the container)
//  somehow in the  menuElTopCss + height &gt; bottomLimitByContainer  check below  height == 0
//  that's true for each selectLesson firing scroll: height == 0

	// ensure we're inside the container
	menuElTopCss = getPixels(menuEl.style.top);
	if(menuElTopCss &lt; topLimitByContainer)
		menuEl.style.top = topLimitByContainer + "px";
console.log("height: "+height);
	if(menuElTopCss + height &gt; bottomLimitByContainer)
		menuEl.style.top = (bottomLimitByContainer - height) + "px";

//# make scrolling smoother

	window.prevScroll = findScrollY();
});

config.macros.courseAdminPanel = {
	handler: function(place,macroName,params,wikifier,paramString,tiddler) {
		if(!tiddler) return;

		// parametric transclusion is useful for more fluid development
		wikify('&lt;&lt;tiddler [[CourseAdminPanel]] with:[['+tiddler.title+']] noedit&gt;&gt;',place,null,tiddler);
	}
};

// --- common macros ------------------------------------
// make common topLineMenu and footer? use config.macros.siteTopMenu?
//}}}</pre>
</div>
<div changecount="22" content-type="text/javascript" created="201604172206" modified="201604172225" modifier="Yakov Litvin" ordermytweaks="1" statecomment="former NDashPlugin, {{PoG{to be extended (mdash) and to substitute it}}}" tags="systemConfig [[YL core tweaks]] viewing" title="DashesFormattersPlugin">
<pre>/***
|''Name''|DashesFormattersPlugin|
|''Version''|0.1|
|Short status|&lt;&lt;insertEditable container:"@stateComment" size:max cell&gt;&gt;|
test: a -- b, c --- d, --ef--
----
gh &amp;mdash;
***/
//{{{
for(var i = 0; i &lt; config.formatters.length; i++)
	if(config.formatters[i].name == "mdash") {		
		config.formatters[i].name = "ndash";
		config.formatters[i].handler = function(w) {
			createTiddlyElement(w.output,"span").innerHTML = "&amp;ndash;";
		};
	};
/*config.formatters.splice(i,0,{
	name: "mdash",
	match: "---",
	handler: function(w)
	{
		createTiddlyElement(w.output,"span").innerHTML = "&amp;mdash;";
	}
});*/
//}}}</pre>
</div>
<div changecount="12" created="201212281214" creator="Titan" modified="201302162313" modifier="Yakov Litvin" tags="systemConfig" title="ExtendedSlicesPlugin">
<pre>/***
|Version|1.4|
{{PoGc{дописать метаданные!}}} Пока у плагина нет документации и т.п., он базируется в репозитории напару с ~GridPlugin
* в версии 1.2 исправлен тот факт, что ":" включался в slice name
* в версии 1.3 изменено поведение в отношении начальных/конечных пробелов/табуляций вокруг slice name
* в версии 1.4 исправлено поведение, когда пробелы в конце "второго столбца" добавляются в slice value
* когда пробел обязательно заменять на \x20? можно ли тут обойтись без этого?
***/
//{{{
TiddlyWiki.prototype.slicesRE = /(?:^([\'\/]{0,2})~?([\.\w]+)\:\1[\t\x20]*([^\n]+)[\t\x20]*$)|(?:^\|\x20?([\'\/]{0,2})~?([^\|\s\:\~\'\/]|(?:[^\|\s~\'\/][^\|\n\f\r]*[^\|\s\:\'\/]))\:?\4[\x20\t]*\|[\t\x20]*([^\n\t\x20](?:[^\n]*[^\n\t\x20])?)[\t\x20]*\|$)/gm;
store.slices = {};
//}}}</pre>
</div>
<div changecount="19" created="201305032221" creator="Yakov Litvin" modified="201701291519" modifier="Яков Литвин" tags="systemConfig" title="ExtraFiltersPlugin">
<pre>/***
|''Version''|1.4|
|''Requires''|UpToDateFiltersPlugin|
|~|requires http://yakovl.bplaced.net/TW/ExtraFilters.html#UpToDateFiltersPlugin only if TW core version is 2.6.1 or below|
|''Source''|http://yakovl.bplaced.net/TW/ExtraFilters.html#ExtraFiltersPlugin|
|''Documentation''|http://yakovl.bplaced.net/TW/ExtraFilters.html#ExtraFiltersPluginInfo|
|''Author''|Yakov Litvin|
|''Licence''|[[BSD-like open source license|http://yakovl.bplaced.net/TW/ExtraFilters.html#%5B%5BYakov%20Litvin%20Public%20Licence%5D%5D]] |
***/
//{{{
if(!config.filters.all)
	config.filters.all = function(results,match) { // v1.0
		this.forEachTiddler(function(tName,tiddler){
			results.pushUnique(tiddler);
		});
		return results;
	};
config.filters.and = function(results,match) { // v1.0

	// parse the argument as "filterName[filterParam"
	var dividingRE = /([^\[\]]+)\[([^\]]*)/,
	    filterParts = dividingRE.exec(match[3]);
	if(filterParts) {
		var filterName  = filterParts[1],
		    filterParam = filterParts[2];
	} else
		throw("\"and\" filter: wrong syntax");

	// create the set of filtered tiddlers
	var filter = "[" + filterName + "[" + filterParam + "]]",
	    tids = this.filterTiddlers(filter),
	    newResult = [];

	// collect tiddlers present among both "results" and filtered tiddlers
	for(var i = 0; i &lt; results.length; i++)
		for(var j = 0; j &lt; tids.length; j++)
			if(results[i] == tids[j])
				newResult.push(tids[j]);

	return newResult;
};
config.filters.not = function(results,match) { // v1.0

	// parse the argument as "filterName[filterParam"
	var dividingRE = /([^\[\]]*)\[([^\]]*)/,
	    filterParts = dividingRE.exec(match[3]);
	if(filterParts) {
		var filterName  = filterParts[1],
		    filterParam = filterParts[2];
	} else
		throw("\"not\" filter: wrong syntax");

	// create the set of filtered tiddlers
	var filter = "[" + filterName + "[" + filterParam + "]]",
	    tids = this.filterTiddlers(filter);

	// collect tiddlers present among "results", but not among filtered tiddlers
	for(var i = 0; i &lt; results.length; i++)
		for(var j = 0; j &lt; tids.length; j++)
			if(results[i] == tids[j]) {
				results.splice(i,1);
				i--;
				tids.splice(j,1);
				break;
			}

	return results;
};
config.filters.tagTree = function(results, match)
{
	results = results || [];

	var depthRE = /^(\d),(.+)$/, depthMatch = depthRE.exec(match[3]),
	    depth = depthMatch ? parseInt(depthMatch[1]) : -1, currentDepth = 0,
	    root = depthMatch ? depthMatch[2] : match[3], tags = [root], prevLength,
	    i, tagTags, j;

	var rootTid = store.fetchTiddler(root);
	if(rootTid) results.pushUnique(rootTid);

	// get tags, tags of tags etc ;
	// for optimization, push to results inline
	do {
		prevLength = tags.length;
		for(i = 0; i &lt; prevLength; i++) //may be optimized by starting from i = ..
		{
			tagTags = store.getTaggedTiddlers(tags[i]);
			for(j = 0; j &lt; tagTags.length; j++) {
				tags.pushUnique(tagTags[j].title);

				// optimized place to push:
				results.pushUnique(tagTags[j]);
			}
		}
		currentDepth++;
	} while (tags.length &gt; prevLength &amp;&amp; currentDepth != depth);

	return results;
};
config.filters.unclassified = function(results,match) { // v1.0

	var category = match[3],
	    instances = this.getTaggedTiddlers(category);

	// filter out tiddlers tagged with instances
	for(var i = 0; i &lt; results.length; i++)
		for(var j = 0; j &lt; instances.length; j++)

			if(results[i].isTagged(instances[j].title)) {
				results.splice(i,1);
				i--;
				break;
			}

	return results;
};
config.filters.taggedOnly =
config.filters.oTag = function(results, match) { // v1.0

	// parse param
	var add = true, arg = match[3], i;
	switch(arg.substr(0,1)) {
		case "+":
			// "add" is "true" already
			arg = arg.substr(1);
			break;
		case "-":
			add = false;
			arg = arg.substr(1);
			break;
	}

	var isTaggedOnly = function(tiddler,arg) {

		return (tiddler.tags.length == 1) &amp;&amp; (!arg || arg == tiddler.tags[0])
	};

	if(add) {
		var tiddlers = this.reverseLookup();
		for(i = 0; i &lt; tiddlers.length; i++)
			if(isTaggedOnly(tiddlers[i],arg))
				results.pushUnique(tiddlers[i]);
	} else {
		for(i = 0; i &lt; results.length; i++)
			if(!isTaggedOnly(results[i],arg))
				results.splice(i--,1);
	}

	return results;
};
config.filters.hasPart = function (results, match) { // v1.1

	// parse the argument
	var arg = match[3], reText, re, type, isBad, title;

	switch(arg.substr(0,2)) {
		case "##":
		case "::":
			isBad = function(title) {
				return store.getTiddlerText(title + arg) ? false : true;
			};
			break
		case "@@":
			isBad = function(title) {
				return store.getValue(title, arg.substr(2)) ? false : true;
			};
			break
		case "r@": // regExp (for tiddler.text) mode
		case "R@":
		case "t@": // title mode
		case "T@":
			reText = store.getTiddlerText(arg.substr(2));
			type = arg.substr(0,1);
			if(!reText)
				if(type == "r" || type == "t")
					return results; // "forgiving mode", nothing is filtered out in this case
				else
					throw("RegExp for filtering is not found in " + arg.substr(2));

			// no break here
		case "r[":
		case "R[":
		case "t[":
		case "T[":
			if(!reText) {
				reText = arg.substr(2);
				type = arg.substr(0,1);
			}

			if(type == "r" || type == "t") {
				try {
					re = new RegExp(reText);
				} catch(e) {
					return results; // "forgiving mode"
				}
			} else
				re = new RegExp(reText);

			if(type == "r" || type == "R")
				isBad = function(title) {
					return results[i].text.match(re) ? false : true;
				};
			else
				isBad = function(title) {
					return title.match(re) ? false : true;
				};
			break
		default:
			return results;
	}

	// filter out corresponding tiddlers
	for(var i = 0; i &lt; results.length; i++) {

		title = results[i].title;

		if(isBad(title)) {
			results.splice(i,1);
			i--;
		}
	};
	return results;
};
config.filters.sortByText = function (results, match) { // v1.1

	// parse the argument
	var arg = match[3],
	    ascending = +1;
	switch(arg.substr(0,1)) {
		case "-":
			ascending = -1;
			arg = arg.substr(1);
			break;
		case "+":
			arg = arg.substr(1);
			break;
	}

	// use the rest of the argument to get corresponding section/slice
	var partSuffix = (arg.substr(0,2) == "::" || arg.substr(0,2) == "##") ?
			arg : "";

	var self = this;
	var compareText = function(t1,t2) {
		var text1 = self.getTiddlerText(t1.title + partSuffix),
		    text2 = self.getTiddlerText(t2.title + partSuffix);
		if(text1 &amp;&amp; text2)
			return text1.localeCompare(text2);
		if(text1)
			return -1;
		if(text2)
			return 1;
		return 0;
	};

	return results.sort(compareText);
};
orig_sortFilter = config.filters.sort;
config.filters.sort = function(results,match) { // sort: random, v1.0

	if(match[3] === "*random") {

		var auxiliaryArray = [],
		    size = results.length;
		var swap = function(i, j) {
			var tmp1 = auxiliaryArray[i];
			auxiliaryArray[i] = auxiliaryArray[j];
			auxiliaryArray[j] = tmp1;
			var tmp2 = results[i];
			results[i] = results[j];
			results[j] = tmp2;
		};

		for(var i = 0; i &lt; size; i++)
			auxiliaryArray.push(Math.random());

		for(var j = 0; j &lt; size; j++)
			for(var i = 0; i &lt; size - j; i++)
				if(auxiliaryArray[i] &lt; auxiliaryArray[i+1])
					swap(i,i+1);
		return results;
	} else
		return orig_sortFilter.apply(this, arguments);
};
config.filters.from = function(results,match) { // v1.0
	var filter = this.getTiddlerText(match[3],""),
	    tiddlers = this.filterTiddlers(filter);

	for(var i = 0; i &lt; tiddlers.length; i++)
		results.pushUnique(tiddlers[i]);

	return results;
};
//}}}</pre>
</div>
<div changecount="12" content-type="text/javascript" created="201411292031" creator="Yakov Litvin" modified="201509050845" modifier="Yakov Litvin" ordercommonparts="10" ordermytweaks="7" statecomment="готов, {{PoG{добавить метаданные}}}" tags="systemConfig [[YL core tweaks]] editing" title="FixFireFoxTabSwitchingPlugin">
<pre>/***
|Description|Makes ctrl+tab work for tab changing (when focused on an editarea) in ~FireFox (instead of inserting a tab symbol)|
|Version|1.0|
|Short status|&lt;&lt;insertEditable container:"@stateComment" size:max cell&gt;&gt;|
|Author|Yakov Litvin|
keep overwriting in mind! (hope this will move to the core soon)
***/
//{{{
Story.prototype.onTiddlerKeyPress = function(ev)
{
	var e = ev || window.event;
	clearMessage();
	var consume = false;
	var title = this.getAttribute("tiddler");
	var target = resolveTarget(e);
	switch(e.keyCode) {
	case 9: // Tab
		var ed = story.getTiddlerField(title,"text");
		if(target.tagName.toLowerCase() == "input" &amp;&amp; ed.value == config.views.editor.defaultText.format([title])) {
			// moving from input field and editor still contains default text, so select it
			ed.focus();
			ed.select();
			consume = true;
		}
		if(config.options.chkInsertTabs &amp;&amp; !e.ctrlKey &amp;&amp; target.tagName.toLowerCase() == "textarea") {
			replaceSelection(target,String.fromCharCode(9));
			consume = true;
		}
		if(config.isOpera)
			target.onblur = function() {
				this.focus();
				this.onblur = null;
			};
		break;
	case 13: // Ctrl-Enter
	case 10: // Ctrl-Enter on IE PC
	case 77: // Ctrl-Enter is "M" on some platforms
		if(e.ctrlKey) {
			blurElement(this);
			config.macros.toolbar.invokeCommand(this,"defaultCommand",e);
			consume = true;
		}
		break;
	case 27: // Escape
		blurElement(this);
		config.macros.toolbar.invokeCommand(this,"cancelCommand",e);
		consume = true;
		break;
	}
	e.cancelBubble = consume;
	if(consume) {
		if(e.stopPropagation) e.stopPropagation(); // Stop Propagation
		e.returnValue = true; // Cancel The Event in IE
		if(e.preventDefault ) e.preventDefault(); // Cancel The Event in Moz
	}
	return !consume;
};
//}}}</pre>
</div>
<div changecount="3" created="201606211323" creator="Yakov Litvin" modified="201607312036" modifier="Яков Литвин" tags="systemConfig" title="FloatingMainMenuPlugin">
<pre>/***
|Version|1.0|
{{DDnc{should be based elsewhere}}}
***/
//{{{
jQuery(window).on("scroll",function(){
	
	var menuElement = document.getElementById("mainMenu");
	if(!menuElement) return;
	var header = document.getElementsByClassName("header")[0],
	    headerBottom = header.offsetTop + header.offsetHeight - findScrollY(),
	    position = findScrollY() + Math.max(headerBottom,0)

	menuElement.style.top = position+"px";
});
//}}}</pre>
</div>
<div changecount="18" created="201505042132" creator="Yakov Litvin" modified="201702030000" modifier="Яков Литвин" tags="systemConfig" title="FoldTiddlerPlugin">
<pre>/***
|Description	|adds toolbar buttons that allow to "fold" tiddlers|
|Version	|1.0.5|
|Author		|Yakov Litvin|
|Forked from	|[[CollapseTiddlersPlugin|http://www.TiddlyTools.com/#CollapseTiddlersPlugin]] by Eric Shulman and previously Bradley Meck|
|Overwrites	|{{{Story.prototype.permaView}}}|
|~CoreVersion?	|{{DDn{??, &gt;=2.1}}}|
***/
//{{{
config.shadowTiddlers.CollapsedTemplate =
	"&lt;!--{{{--&gt;\
	&lt;div class='toolbar' macro='toolbar [[CollapsedToolbarCommands]]'&gt;&lt;/div&gt;\
	&lt;div class='title' macro='view title'&gt;&lt;/div&gt;\
	&lt;!--}}}--&gt;";
config.shadowTiddlers.CollapsedToolbarCommands =
	"closeTiddler closeOthers expandTiddler collapseOthers +editTiddler "+
	"jump &gt; fields permalink references deleteTiddler";

// hijack config.macros.toolbar.handler to add collapseTiddler and collapseOthers
config.options.chkAddFoldingButtons = (config.options.chkAddFoldingButtons === undefined) ? true : config.options.chkAddFoldingButtons;
config.foldTiddlers_orig_toolbarHandler = config.macros.toolbar.handler;
if(config.options.chkAddFoldingButtons)
	config.macros.toolbar.handler = function(place,macroName,params,wikifier,paramString,tiddler) {
	// warning: paramString is not changed as /currently/ it's not used by config.macros.toolbar.handler

		var i, doAdd = true,
		    mainCommandRegExp = /closeOthers/,
		    foldCommandRegExp  = /collapseTiddler/,
		    unfoldCommandRegExp = /expandTiddler/;

		// don't add in the folded condition (if expandTiddler is present)
		// or if collapseTiddler is already present (manually added to toolbar)
		for(i = 0; i &lt; params.length; i++)
			if(unfoldCommandRegExp.exec(params[i]) ||
			   foldCommandRegExp.exec(params[i])) {
				doAdd = false;
				break;
			}
		if(!doAdd)
			return config.foldTiddlers_orig_toolbarHandler.apply(this,arguments);
		
		for(i = 0; i &lt; params.length; i++)
			if(mainCommandRegExp.exec(params[i])) { // locate the "edit" command
				params.splice(i+1,0,"collapseTiddler","collapseOthers"); // add after "edit"
				break;
			}
		config.foldTiddlers_orig_toolbarHandler.apply(this,arguments);
	};
//}}}
//{{{
config.commands.collapseTiddler = {

	text: "fold",
	tooltip: "Collapse this tiddler",
	collapsedTemplate: "CollapsedTemplate",
	webCollapsedTemplate: "WebCollapsedTemplate",
	handler: function(event,src,title) {

		var e = story.findContainingTiddler(src); if (!e) return false;
		// don't fold tiddlers that are being edited!
		if(story.isDirty(e.getAttribute("tiddler"))) return false;
		var t = config.commands.collapseTiddler.getCollapsedTemplate();
		config.commands.collapseTiddler.saveTemplate(e);
		config.commands.collapseTiddler.display(title,t);
		e.setAttribute("folded","true");
		return false;
	},
	getCollapsedTemplate: function() {

		return (readOnly &amp;&amp; store.tiddlerExists(this.webCollapsedTemplate)) ?
			this.webCollapsedTemplate :
			this.collapsedTemplate
	},
	saveTemplate: function(e) {

		if (e.getAttribute("savedTemplate") == undefined)
			e.setAttribute("savedTemplate", e.getAttribute("template"));
	},
	// fold/unfold tiddler with suspend/resume of single/top/bottom-of-page mode
	display: function(title,t) {

		var opt = config.options;
		var saveSPM = opt.chkSinglePageMode;   opt.chkSinglePageMode = false;
		var saveTPM = opt.chkTopOfPageMode;    opt.chkTopOfPageMode = false;
		var saveBPM = opt.chkBottomOfPageMode; opt.chkBottomOfPageMode = false;
		story.displayTiddler(null,title,t);
		opt.chkBottomOfPageMode = saveBPM;
		opt.chkTopOfPageMode = saveTPM;
		opt.chkSinglePageMode = saveSPM;
	}
}

config.commands.expandTiddler = {

	text: "unfold",
	tooltip: "Expand this tiddler",
	handler: function(event,src,title)
	{
		var e = story.findContainingTiddler(src); if (!e) return false;
		var t = e.getAttribute("savedTemplate");
		config.commands.collapseTiddler.display(title,t);
		e.setAttribute("folded","false");
		return false;
	}
}

config.macros.collapseAll = {

	text: "collapse all",
	tooltip: "Collapse all tiddlers",
	handler: function(place,macroName,params,wikifier,paramString,tiddler){
		createTiddlyButton(place,this.text,this.tooltip,function(){
			story.forEachTiddler(function(title,tiddler)
			{
				if(story.isDirty(title)) return;
				var t = config.commands.collapseTiddler.getCollapsedTemplate();

				config.commands.collapseTiddler.saveTemplate(tiddler);
				config.commands.collapseTiddler.display(title,t);
				tiddler.folded = true;
			});
			return false;
		})
	}
}

config.macros.expandAll = {

	text: "expand all",
	tooltip: "Expand all tiddlers",
	handler: function(place,macroName,params,wikifier,paramString,tiddler){
		createTiddlyButton(place,this.text,this.tooltip,function(){
			story.forEachTiddler(function(title,tiddler){
				var t = config.commands.collapseTiddler.getCollapsedTemplate();
				if(tiddler.getAttribute("template")!=t) return; // re-display only if collapsed
				var t = tiddler.getAttribute("savedTemplate");
				config.commands.collapseTiddler.display(title,t);
				tiddler.folded = false;
			});
			return false;
		})
	}
}

config.commands.collapseOthers = {

	text: "focus",
	tooltip: "Expand this tiddler and collapse all others",
	handler: function(event,src,title) {
		var e = story.findContainingTiddler(src); if (!e) return false;
		story.forEachTiddler(function(title,tiddler) {
			if(story.isDirty(title)) return;
			var t = config.commands.collapseTiddler.getCollapsedTemplate();
			if (e == tiddler) t = e.getAttribute("savedTemplate");
			config.commands.collapseTiddler.saveTemplate(tiddler);
			config.commands.collapseTiddler.display(title,t);
			tiddler.folded = (e != tiddler);
		})
		return false;
	}
}

// {{{&lt;&lt;foldFirst&gt;&gt;}}} macro forces tiddler to be folded when *initially* displayed.
// Subsequent re-render does NOT re-fold tiddler, but closing/re-opening tiddler DOES cause it to fold first again.
config.macros.foldFirst = {
	handler: function(place,macroName,params,wikifier,paramString,tiddler) {

		var e = story.findContainingTiddler(place);
		if (e.getAttribute("foldedFirst") == "true") return; // already been folded once
		var title = e.getAttribute("tiddler")
		var t = config.commands.collapseTiddler.getCollapsedTemplate();
		config.commands.collapseTiddler.saveTemplate(e);
		config.commands.collapseTiddler.display(title,t);
		e.setAttribute("folded","true");
		e.setAttribute("foldedFirst","true"); // only when tiddler is first rendered
		return false;
	}
}
//}}}
//{{{
// [showFolded[n]] adds .openFolded = true to the last n tiddlers among results
config.filters.showFolded = function(results,match) {
	
	var number = parseInt(match[3]); // if NaN, the loop below just is not executed

	for(var i = 0; (i &lt; number) &amp;&amp; (results.length-1-i &gt;= 0); i++)
		results[results.length-1-i].openFolded = true;
	
	return results;
}
// hijack chooseTemplateForTiddler to open tiddlers with .openFolded folded
config.foldTiddlers_orig_chooseTemplateForTiddler = Story.prototype.chooseTemplateForTiddler;
Story.prototype.chooseTemplateForTiddler = function(title,template) {

	var t = store.fetchTiddler(title);
	if(t &amp;&amp; t.openFolded)
	{
		t.openFolded = false
		return "CollapsedTemplate";
	}
	
	return config.foldTiddlers_orig_chooseTemplateForTiddler.apply(this,arguments);
}
//# optionally change fold/unfold ~commands so that they change openFolded (the state is remembered during the session)

Story.prototype.isOpenedFolded = function(title) {
	
	var tiddlerElem = story.getTiddler(title);
	if(!tiddlerElem)
		return false;
	return tiddlerElem.getAttribute("template") == "CollapsedTemplate";
}
//# overwrite permaview to save which tiddlers are folded
//  use "filter" paramifier
Story.prototype.permaView = function()
{
	var links = [];
	this.forEachTiddler(function(title,element) {
		links.push(String.encodeTiddlyLink(title) +
			   (story.isOpenedFolded(title) ? " [showFolded[1]]" : ""));
	});
	var t = links.join(" ");
	t = t.replace(/\\/gm,"\\\\").replace(/"/gm,'\\"');
	if(t == "")
		t = "#";
	else
		t = encodeURIComponent('filter:"'+t+'"');
	if(window.location.hash != t)
		window.location.hash = t;
};

// unescape \" and \\ back..
var _unescape = function(value) {
	
	if(typeof value == "string")
		return value.replace(/\\"/gm,'"').replace(/\\\\/,'\\');
	return value;
};
// ..by hijacking invokeParamifier (certain paramifiers may be hijacked instead - probably enough to hijack only the "filter" one)
config.extensions.ftp_orig_invokeParamifier = invokeParamifier;
invokeParamifier = function(params,handler) {
	
	if(!params)
		return config.extensions.ftp_orig_invokeParamifier.apply(this,arguments);
	var paramifiers = params[0], name, i;
	for(name in paramifiers)
		for(i = 0; i &lt; paramifiers[name].length; i++)
			paramifiers[name][i] = _unescape(paramifiers[name][i]);
	for(i = 1; i &lt; params.length; i++)
		params[i].value = _unescape(params[i].value);

	return config.extensions.ftp_orig_invokeParamifier.apply(this,arguments);
};
//}}}</pre>
</div>
<div changecount="27" created="201309081219" creator="Yakov Litvin" modified="201611162306" modifier="Яков Литвин" tags="systemConfig" title="ForEachTiddlerPlugin">
<pre>/***
|''Name''|ForEachTiddlerPlugin|
|''Version''|1.3.1|
|''Forked from''|[[abego.ForEachTiddlerPlugin|http://tiddlywiki.abego-software.de/#ForEachTiddlerPlugin]], by Udo Borkowski|
|''Author''|Yakov Litvin|
|''CoreVersion''|2.6.2|
|~|Although 2.6.2 is theoretically minimal TW version required for the correct operation, tests showed that the plugin works in 2.6.0, too.|
***/
//{{{
(function(){

// Only install once
if (version.extensions.ForEachTiddlerPlugin) {
	alert("Warning: more than one copy of ForEachTiddlerPlugin is set to be launched");
	return;
} else
	version.extensions.ForEachTiddlerPlugin = {
		source: "[repository url here]",
		licence: "[licence url here]",
		copyright: "Copyright (c) Yakov Litvin, 2012-2015 [url of the meta page]"
	};

//============================================================================
// forEachTiddler Macro
//============================================================================

// ---------------------------------------------------------------------------
// Configurations and constants
// ---------------------------------------------------------------------------

config.macros.forEachTiddler =
{
	actions: {
		addToList: {},
		write: {}
	}
};

// ---------------------------------------------------------------------------
//  The forEachTiddler Macro Handler
// ---------------------------------------------------------------------------

config.macros.forEachTiddler.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	// --- Pre-parsing for up-to-date params ----------------

	var preParsedParams = this.getUpToDateParams(paramString);
	// for backward compability, "params" are used as well

	// --- Parsing ------------------------------------------

	var parsedParams = this.parseParams(preParsedParams,params);
	if (parsedParams.errorText) {
		this.handleError(place, parsedParams.errorText);
		return;
	}//else
		parsedParams.place = place;
		parsedParams.inTiddler = tiddler ? tiddler : getContainingTiddler(place);

	// --- "Static" processing ------------------------------

	// Choose the action
	var actionName = parsedParams.actionName;
	var action = this.actions[actionName]; // no this is always a "known" action

	// Create the element
	var element = document.createElement(action.element);
	jQuery(element).attr({ refresh: "macro", macroName: macroName }).data(parsedParams);
	place.appendChild(element);

	// --- "Dynamic" processing -----------------------------

	this.refresh(element);
};

config.macros.forEachTiddler.refresh = function(element)
{
	var parsedParams = jQuery(element).data(),
	    action = this.actions[parsedParams.actionName];

	jQuery(element).empty();
	try {
		var tiddlersAndContext = this.getTiddlersAndContext(parsedParams);

		// Perform the action
		action.handler(element, tiddlersAndContext.tiddlers,
				parsedParams.actionParameter, tiddlersAndContext.context);
	} catch (e) {
		this.handleError(place, e);
	}
};

config.macros.forEachTiddler.oldFashionParams = ["in", "filter", "where", "sortBy",
	"script", "write", "begin", "end", "none", "toFile", "withLineSeparator"
//# add to docs: new actions are to be added here or used in name:param notation only
];

config.macros.forEachTiddler.getUpToDateParams = function(paramString)
// turns stuff like "... where 'tiddler.title.length &lt; 20' ..."
//               to "... where:'tiddler.title.length &lt; 20' ..." and then applies parseParams,
// which allows to use params in an arbitrary order and other goodies of parsed params
{
	var paramPairRegExp = new RegExp("("+this.oldFashionParams.join("|")+")\\s+"+
			"("+ // adapted from String.prototype.parseParams
			'(?:"(?:(?:\\\\")|[^"])+")|'+		// double-quoted param
			"(?:'(?:(?:\\\\')|[^'])+')|"+		// quoted param
			"(?:\\[\\[(?:\\s|\\S)*?\\]\\])|"+	// [[...]]-wrapped
			"(?:\\{\\{(?:\\s|\\S)*?\\}\\})|"+	// {{...}}-wrapped
			"(?:[^\"':\\s][^\\s:]*)|"+		// non-wrapped
			"(?:\"\")|(?:'')"+			// empty '' or ""
			")","g");
	paramString =
		paramString.replace(paramPairRegExp,function($0,$1,$2){ return $1+":"+$2; });

	return paramString.parseParams("filter",null,true,false,true);
	// the first unnamed param is now considered as the 'filter' param
};

// Returns an object with properties "tiddlers" and "context".
// tiddlers holds the (sorted) tiddlers selected by the parameter,
// context the context of the execution of the macro.
//
// The action is not yet performed.
//
// @param parameter  holds the parameter of the macro as separate properties.
//				  The following properties are supported:
//
//						place
//						filter
//						whereClause
//						sortClause
//						sortAscending
//						actionName
//						actionParameter
//						scriptText
//						tiddlyWikiPath
//
//					All properties are optional.
//					For most actions the place property must be defined.
//
config.macros.forEachTiddler.getTiddlersAndContext = function(parameter)
{
	var context = config.macros.forEachTiddler.createContext(parameter.place, parameter.filter, parameter.whereClause, parameter.sortClause, parameter.sortAscending, parameter.actionName, parameter.actionParameter, parameter.scriptText, parameter.tiddlyWikiPath, parameter.inTiddler);

	var tiddlyWiki = parameter.tiddlyWikiPath ? this.loadTiddlyWiki(parameter.tiddlyWikiPath) : store;
	context["tiddlyWiki"] = tiddlyWiki;
	
	// Get the tiddlers, as defined by the filter and the whereClause
	var tiddlers = this.findTiddlers(parameter.filter, parameter.whereClause, context, tiddlyWiki);
	context["tiddlers"] = tiddlers;

	// Sort the tiddlers, when sorting is required.
	if (parameter.sortClause)
		this.sortTiddlers(tiddlers, parameter.sortClause, parameter.sortAscending, context);

	return {tiddlers: tiddlers, context: context};
};

// ---------------------------------------------------------------------------
//  The actions 
// ---------------------------------------------------------------------------

// Internal.
//
// --- The addToList Action -----------------------------------------------
//
config.macros.forEachTiddler.actions.addToList.element = "ul";
config.macros.forEachTiddler.actions.addToList.handler = function(place, tiddlers, parameter, context)
{
	for (var i = 0; i &lt; tiddlers.length; i++)
	{
		var tiddler = tiddlers[i];
		var listItem = document.createElement("li");
		place.appendChild(listItem);
		createTiddlyLink(listItem, tiddler.title, true);
	}
};

// Internal.
//
// --- The write Action ---------------------------------------------------
//
config.macros.forEachTiddler.actions.write.element = "span";
config.macros.forEachTiddler.actions.write.handler = function(place, tiddlers, parameter, context)
{
	var params = parameter[0].nonParsedParams;
	if(!parameter[0]["write"])
		return this.handleError(place, "Missing expression behind 'write'.");
	var textExpression = config.macros.forEachTiddler.paramEncode(getParam(parameter,["write"]));

	var getParamExpression = function(name)
	{
		if(params.contains(name) &amp;&amp; !parameter[0][name])
			throw "Missing text behind '%0'".format([name]);
		return config.macros.forEachTiddler.paramEncode(getParam(parameter,name));
	};
	var beginExpression = getParamExpression("begin");
	var   endExpression = getParamExpression("end");
	var  noneExpression = getParamExpression("none");

	var lineSeparator = undefined;
	if(params.contains("toFile") &amp;&amp; !parameter[0]["toFile"])
		return this.handleError(place, "Filename expected behind 'toFile' of 'write' action.");
	var filename = getParam(parameter,"toFile");
	filename = config.macros.forEachTiddler.paramEncode(filename);
	if(filename) {
		filename = config.macros.forEachTiddler.getLocalPath(filename);

		if(params.contains("withLineSeparator")&amp;&amp; !parameter[0]["withLineSeparator"])
			return this.handleError(place, "Line separator text expected behind 'withLineSeparator' of 'write' action.")
		lineSeparator = getParamExpression("withLineSeparator");
	}

	// Perform the action.
	var func = config.macros.forEachTiddler.getEvalTiddlerFunction(textExpression, context),
	    count = tiddlers.length,
	    text = "";
	if (count &gt; 0 &amp;&amp; beginExpression)
		text += config.macros.forEachTiddler.getEvalTiddlerFunction(beginExpression, context)(undefined, context, count, undefined);

	for (var i = 0; i &lt; count; i++) {
		var tiddler = tiddlers[i];
		text += func(tiddler, context, count, i);
	}

	if (count &gt; 0 &amp;&amp; endExpression)
		text += config.macros.forEachTiddler.getEvalTiddlerFunction(endExpression, context)(undefined, context, count, undefined);

	if (count == 0 &amp;&amp; noneExpression)
	{
		var beginAddition = beginExpression ? "("+beginExpression+")" : "",
		      endAddition =   endExpression ? "("+  endExpression+")" : "",
		     bothAddition = "("+beginAddition
				+((beginAddition &amp;&amp; endAddition) ? "+" : "")+endAddition+")";
		noneExpression = noneExpression
				.replace(/(?=\W|^)begin(?=\W|$)/,beginAddition)
				.replace(/(?=\W|^)end(?=\W|$)/,    endAddition)
				.replace(/(?=\W|^)same(?=\W|$)/,  bothAddition);
		text += config.macros.forEachTiddler.getEvalTiddlerFunction(noneExpression, context)(undefined, context, count, undefined);
	}

	if (filename) {
		if (lineSeparator !== undefined) {
			lineSeparator = lineSeparator.replace(/\\n/mg, "\n").replace(/\\r/mg, "\r");
			text = text.replace(/\n/mg,lineSeparator);
		}
		saveFile(filename, convertUnicodeToUTF8(text));
	} else
		wikify(text, place, null/* highlightRegExp */, context.inTiddler);
};


// ---------------------------------------------------------------------------
//  Helpers
// ---------------------------------------------------------------------------

config.macros.forEachTiddler.parseParams = function(preParsedParams,params)
{
	if(params.contains("in") &amp;&amp; !preParsedParams[0]["in"])
		return { errorText: "TiddlyWiki path expected behind 'in'." };
	var TWpath = getParam(preParsedParams,"in");

	if(params.contains("filter") &amp;&amp; !preParsedParams[0]["filter"])
		return { errorText: "No filter specified." };

	if(params.contains("where") &amp;&amp; !preParsedParams[0]["where"])
		return { errorText: "whereClause missing behind 'where'." };
	var where = getParam(preParsedParams,"where");

	var ascending = true;
	if(params.contains("sortBy") &amp;&amp; !preParsedParams[0]["sortBy"])
		return { errorText: "sortClause missing behind 'sortBy'." };
	var sortClause = getParam(preParsedParams,"sortBy");
	if(preParsedParams[0]["sortBy"] &amp;&amp; preParsedParams[0]["sortBy"].length &gt; 1)
		ascending = !(preParsedParams[0]["sortBy"][1] == "descending");

	if(params.contains("script") &amp;&amp; !preParsedParams[0]["script"])
		return { errorText: "scriptText is not specified." };
	var scriptText = getParam(preParsedParams,"script");

	var actionName = "addToList";
	for(var knownActionName in this.actions)
		if(preParsedParams[0][knownActionName]) {
			actionName = knownActionName;
			break;
		}
	// no error handling if there's an unknown action
	// because now the order is not important and actionName can have another position
	preParsedParams[0].nonParsedParams = params; // for parsing inside actions

	return {
		tiddlyWikiPath:	this.paramEncode(TWpath),
		filter:		getParam(preParsedParams,"filter"),
		whereClause:	this.paramEncode(where) || true,
		sortClause:	this.paramEncode(sortClause),
		sortAscending:	ascending,
		scriptText:	this.paramEncode(scriptText),
		actionName:	actionName,
		actionParameter:preParsedParams // not much need to cut out other params
	}
};

var getContainingTiddler = function(e)
{
	while(e &amp;&amp; !hasClass(e,"tiddler"))
		e = e.parentNode;
	var title = e ? e.getAttribute("tiddler") : null; 
	return title ? store.getTiddler(title) : null;
};


// Internal.
//
config.macros.forEachTiddler.createContext = function(placeParam, filterParam, whereClauseParam, sortClauseParam, sortAscendingParam, actionNameParam, actionParameterParam, scriptText, tiddlyWikiPathParam, inTiddlerParam) {
	return {
		place		: placeParam,
		filter		: filterParam,
		whereClause	: whereClauseParam,
		sortClause	: sortClauseParam,
		sortAscending	: sortAscendingParam,
		script		: scriptText,
		actionName	: actionNameParam,
		actionParameter	: actionParameterParam,
		tiddlyWikiPath	: tiddlyWikiPathParam,
		inTiddler	: inTiddlerParam, // the tiddler containing the &lt;&lt;forEachTiddler ...&gt;&gt; macro call.
		viewerTiddler	: getContainingTiddler(placeParam) //the tiddler showing the forEachTiddler result
	};
};


// Internal.
//
// Returns a TiddlyWiki with the tiddlers loaded from the TiddlyWiki of the given path.
//
config.macros.forEachTiddler.loadTiddlyWiki = function(path, idPrefix)
{
	if (!idPrefix)
		idPrefix = "store";

	var lenPrefix = idPrefix.length;
	
	// Read the content of the given file
	var content = loadFile(this.getLocalPath(path));
	if(content === null)
		throw "TiddlyWiki '"+path+"' not found.";
	
	var tiddlyWiki = new TiddlyWiki();

	if (!tiddlyWiki.importTiddlyWiki(content))
		throw "File '"+path+"' is not a TiddlyWiki.";
	tiddlyWiki.dirty = false;

	return tiddlyWiki;
};


// Internal.
//
// Returns a function that has a function body returning the given javaScriptExpression.
// The function has the parameters:
// 
//	 (tiddler, context, count, index)
//
config.macros.forEachTiddler.getEvalTiddlerFunction = function (javaScriptExpression, context) {
	var script = context["script"];
//	var functionText = "var theFunction = function(tiddler, context, count, index) { return "+javaScriptExpression+"}";
	var functionText = "var theFunction = function(tiddler, context, count, index) { "+(script ? script+";" : "")+"return "+javaScriptExpression+"}";
//	var fullText = (script ? script+";" : "")+functionText+";theFunction;";
	var fullText = functionText+";theFunction;";
	return eval(fullText);
};


// Internal.
//
config.macros.forEachTiddler.findTiddlers = function(filter, whereClause, context, tiddlyWiki) {
	var result = [];
	var func = config.macros.forEachTiddler.getEvalTiddlerFunction(whereClause, context);
	if(filter) {
		var tids = tiddlyWiki.filterTiddlers(filter);
		for(var i = 0; i &lt; tids.length; i++)
			if(func(tids[i], context, undefined, undefined))
				result.push(tids[i]);
	} else
		tiddlyWiki.forEachTiddler(function(title,tiddler) {
			if(func(tiddler, context, undefined, undefined))
				result.push(tiddler);
		});
	return result;
};


// Internal.
//
config.macros.forEachTiddler.sortAscending = function(tiddlerA, tiddlerB)
{
	return ((tiddlerA.forEachTiddlerSortValue == tiddlerB.forEachTiddlerSortValue)
			? 0
			: ((tiddlerA.forEachTiddlerSortValue &lt; tiddlerB.forEachTiddlerSortValue)
			   ? -1
			   : +1))
};

// Internal.
//
config.macros.forEachTiddler.sortDescending = function(tiddlerA, tiddlerB)
{
	return ((tiddlerA.forEachTiddlerSortValue == tiddlerB.forEachTiddlerSortValue)
			? 0
			: ((tiddlerA.forEachTiddlerSortValue &lt; tiddlerB.forEachTiddlerSortValue)
			   ? +1
			   : -1))
};

// Internal.
//
config.macros.forEachTiddler.sortTiddlers = function(tiddlers, sortClause, ascending, context) {
	// To avoid evaluating the sortClause whenever two items are compared 
	// we pre-calculate the sortValue for every item in the array and store it in a 
	// temporary property ("forEachTiddlerSortValue") of the tiddlers.
	var func = config.macros.forEachTiddler.getEvalTiddlerFunction(sortClause, context);
	var count = tiddlers.length;
	var i;
	for (i = 0; i &lt; count; i++) {
		var tiddler = tiddlers[i];
		tiddler.forEachTiddlerSortValue = func(tiddler,context, undefined, undefined);
	}

	// Do the sorting
	tiddlers.sort(ascending ? this.sortAscending : this.sortDescending);

	// Delete the temporary property that holds the sortValue.
	for (i = 0; i &lt; tiddlers.length; i++)
		delete tiddlers[i].forEachTiddlerSortValue;
};


// Internal.
//
// Creates an element that holds an error message
// 
config.macros.forEachTiddler.createErrorElement = function(place, exception) {
	var message = (exception.description) ? exception.description : exception.toString();
	return createTiddlyElement(place,"span",null,"forEachTiddlerError","&lt;&lt;forEachTiddler ...&gt;&gt;: "+message);
};

// Internal.
//
// @param place [may be null]
//
config.macros.forEachTiddler.handleError = function(place, exception)
{
	if(place)
		this.createErrorElement(place, exception);
	else
		throw exception;
};


// Internal.
//
// Encodes the given string.
//
// Replaces 
//	 "$))" to "&gt;&gt;"
//	 "$)" to "&gt;"
//
config.macros.forEachTiddler.paramEncode = function(s)
{
	if(!s) return s;
	var reGTGT = new RegExp("\\$\\)\\)","mg");
	var reGT = new RegExp("\\$\\)","mg");
	return s.replace(reGTGT, "&gt;&gt;").replace(reGT, "&gt;");
};
//# document the .paramEncode transformation of the params; or get rid of it?

// Internal.
//
// Returns the given original path (that is a file path, starting with "file:")
// as a path to a local file, in the systems native file format.
//
// Handles relative links, too.
//
config.macros.forEachTiddler.getLocalPath = function(originalPath) {
// code adapted from SharedTiddlersPlugin to handle relative paths

	var originalAbsolutePath = originalPath;
	if(originalAbsolutePath.search(/^((http(s)?)|(file)):/) != 0) {
	// no protocol prefix..

		if (originalAbsolutePath.search(/^(.\:\\)|(\\\\)|(\/)/) != 0){// is relative?
		// as Unix filesystem root is "/", urls starting with it are not considered as relative

			var currentUrl  = document.location.toString();
			var currentPath = (currentUrl.lastIndexOf("/") &gt; -1) ?
				currentUrl.substr(0, currentUrl.lastIndexOf("/") + 1) :
				currentUrl + "/";
			originalAbsolutePath = currentPath + originalAbsolutePath;
		} else
		// an "absolute" path to a local file. Prefix it with file://

			originalAbsolutePath = "file://" + originalAbsolutePath;

		// replace every \ by a /, to cover Windows style pathes
		originalAbsolutePath = originalAbsolutePath.replace(/\\/mg,"/");
	}
	return getLocalPath(originalAbsolutePath);
};


// ---------------------------------------------------------------------------
// Stylesheet Extensions (may be overridden by local StyleSheet)
// ---------------------------------------------------------------------------
//
setStylesheet(
	".forEachTiddlerError{color: #ffffff;background-color: #880000;}",
	"forEachTiddler");

// ---------------------------------------------------------------------------
// fet alias for the the forEachTiddler Macro
// ---------------------------------------------------------------------------

config.macros.fet = config.macros.forEachTiddler;

//============================================================================
// utilities for String and Tiddler objects useful in fet macros
//============================================================================

// Returns true if the string starts with the given prefix, false otherwise.
//
String.prototype.startsWith = function(prefix) {
	var n =  prefix.length;
	return (this.length &gt;= n) &amp;&amp; (this.slice(0, n) == prefix);
};

// Returns true if the string ends with the given suffix, false otherwise.
//
String.prototype.endsWith = function(suffix) {
	var n = suffix.length;
	return (this.length &gt;= n) &amp;&amp; (this.right(n) == suffix);
};

// Returns true when the string contains the given substring, false otherwise.
//
String.prototype.contains = function(substring) {
	return this.indexOf(substring) &gt;= 0;
};
})();

// Returns the slice value if it is present or defaultText otherwise
//
Tiddler.prototype.getSlice = function(sliceName,defaultText)
{
	var re = TiddlyWiki.prototype.slicesRE;
	re.lastIndex = 0;
	var m = re.exec(this.text);
	while(m) {
		if(m[2]) {
			if(m[2] == sliceName)
				return m[3];
		} else {
			if(m[5] == sliceName)
				return m[6];
		}
		m = re.exec(this.text);
	}
	return defaultText;
};

// Returns the section value if it is present or defaultText otherwise
//
Tiddler.prototype.getSection = function(sectionName,defaultText)
{
	var beginSectionRegExp = new RegExp("(^!{1,6}[ \t]*" + sectionName.escapeRegExp() + "[ \t]*\n)","mg"),
	    sectionTerminatorRegExp = /^!/mg;

	var match = beginSectionRegExp.exec(this.text), sectionText;
	if(match) {
		sectionText = this.text.substr(match.index+match[1].length);
		match = sectionTerminatorRegExp.exec(sectionText);
		if(match)
			sectionText = sectionText.substr(0,match.index-1); // don't include final \n
		return sectionText;
	}
	return defaultText;
};

var transText = function(tiddlerOrGetTiddlerTextArg, moreArguments)
{
	var title = (tiddlerOrGetTiddlerTextArg instanceof Tiddler) ? tiddlerOrGetTiddlerTextArg.title : tiddlerOrGetTiddlerTextArg;
	return "&lt;&lt;tiddler [[" + title + "]] "+ (moreArguments||"") +"&gt;&gt;"
};
//}}}</pre>
</div>
<div changecount="1" created="201611181339" creator="Яков Литвин" modifier="Яков Литвин" tags="systemConfig" title="FromPlaceToPlacePlugin">
<pre>/***
|''Name''|FromPlaceToPlacePlugin|
|''Description''|allows to substitute current tiddlers or page instead of opening tiddlers/pages in addition|
|''Documentation''|see below|
|''Type''|plugin|
|''Version''|1.2.0|
|''CoreVersion''|2.5.0|
|''Source''|http://yakovl.bplaced.net/TW/FPTP.html#FromPlaceToPlacePlugin|
|''Author''|Yakov Litvin|
|''Contact''|See the [[main plugin discussion thread|https://groups.google.com/forum/#!topic/tiddlywiki/bICRWy8qo8g]] and [[contacts|http://customize.tiddlyspace.com/#%5B%5BYakov%20Litvin%5D%5D]]|
|''Copyright''|Yakov Litvin, 2013|
|''Licence''|[[BSD-like open source license|http://yakovl.bplaced.net/TW/FPTP.html#%5B%5BYakov%20Litvin%20Public%20Licence%5D%5D]]|
!!!Introduction
In ~TiddlyWiki, links work "comulatively": when you click an internal link, you get +1 tiddler opened, external links open pages without closing ~TiddlyWiki (hence +1 browser tab). At times, this causes unnecessary "flooding" with opened things (tiddlers/pages). To solve this, FromPlaceToPlacePlugin was created.

It works in a simple way: it keeps the common functionality of the "click a link" action, but "hold meta key + click a link" causes "close and open" action:
* for internal links, this means "close the tiddler in which the link is placed and open the target tiddler"
* for external links, this means "open the page in the same browser tab"
!!!Installation &amp; usage
Aside the usual import/copy-and-add-{{{systemConfig}}}-tag action, you need to adjust the meta keys for internal and external links (and reload afterwards). To do this, change the "Config" section of this tiddler ({{{txtFromTiddlerToTiddlerKey}}} for internal and {{{txtFromPageToPageKey}}} for external links), if necessary. Note that:
* {{{shift}}} doesn't work well for external links in Opera: on shift+click it opens the link in a new tab, so this will result in two equal tabs opened (with Opera, I recommend {{{alt}}})
* {{{alt}}} doesn't work well with IE, so you probably would prefer {{{shift}}}
* each {{{alt}}}, {{{ctrl}}} and {{{shift}}} work (with the limitations above); any other value of an option deactivates corresponding feature
Once the meta keys are set and TW is reloaded, try to click links..
!!!Demo
* click this [[internal link|Introduction to FromPlaceToPlacePlugin]] while pressing {{{shift}}} (or whatever meta key you've set)
* click this [[external link|http://yakovl.bplaced.net/TW/STP/STP.html]] while holding {{{alt}}} key
!!!Additional notes
* this works even with implicit links (like those in the "references" popup)
* "external links" are links with the {{{externalLink}}} class, so links created with inline-html won't work unless the class is added
!!!Config
***/
//{{{
config.extensions.txtFromPageToPageKey = 'alt';         // each 'alt', 'ctrl' and 'shift' work
config.extensions.txtFromTiddlerToTiddlerKey = 'shift'; // each 'alt', 'ctrl' and 'shift' work
//}}}
/***
!!!Code
***/
//{{{
(function(){
if(version.extensions.FromPlaceToPlacePlugin)
	return;
version.extensions.FromPlaceToPlacePlugin = { major: 1, minor: 2, revision: 0, date: new Date(2013,10,24)};

var firedWhenKeyWasPressed = function(event,key) {

	return (event.shiftKey &amp;&amp; key == 'shift') ||
	       (event.ctrlKey &amp;&amp; key == 'ctrl') ||
	       (event.altKey &amp;&amp; key == 'alt');
}

//------------------------------------------------------------------------------------------------------------
// From tiddler to tiddler

// keep as a global variable for a possibility of introspection
orig_onClickTiddlerLink = onClickTiddlerLink;

// hijack
onClickTiddlerLink = function(ev) {

	var result,
	    sourceTid = story.findContainingTiddler(this),
	    event = ev || window.event,
	    key = config.extensions.txtFromTiddlerToTiddlerKey,
	    close = (firedWhenKeyWasPressed(event,key) &amp;&amp; sourceTid) ? true : false;

	// to "correct" page and zoomer position,
	// hide the "source" tiddler before opening the "target" and closing the "source"
	if(close)
		sourceTid.style.display = "none";
	result = orig_onClickTiddlerLink(event);
	if(close) {
		var tName = sourceTid.getAttribute("tiddler");
		story.closeTiddler(tName);
	}
	return result;
}

//------------------------------------------------------------------------------------------------------------
// From page to page
jQuery("body").delegate("a.externalLink", "click", function(ev) {

	var event = ev || window.event,
	    key = config.extensions.txtFromPageToPageKey,
	    close = firedWhenKeyWasPressed(event,key),
	    target = jQuery(this).attr("href");

	if(close) {
		window.location.assign(target);
		return false;
	}
});

})();
//}}}</pre>
</div>
<div changecount="1" created="201705291519" creator="Яков Литвин" modifier="Яков Литвин" tags="systemConfig" title="HandsontablePlugin">
<pre>/***
|''Name:''|HandsontablePlugin|
|''Description:''|Brings Handsontable spreadsheets into ~TiddlyWiki classic|
|''Author:''|Yakov Litvin|
|''Initial prototype:''|[[by Vincent Yeh|http://twve.tiddlyspot.com/#HandsontablePlugin]]|
|''Source:''|http://yakovl.bplaced.net/TW/Spreadsheets.html|
|''Type:''|plugin|
|''Version:''|0.3.1|
|''Status:''|Stable, useful enough to use in production, but needs some improvements|
|''License:''|MIT|
|''~CoreVersion:''|2.5.0|
{{DDnc{not documented yet: using with a set of tiddlers (filter, containers params, ..)}}}

!! Demo
Basically if you put this macro to your TW:
{{{
&lt;&lt;handsontable [[##some section name]]&gt;&gt;
}}}
you will get this little spreadsheet (try navigating with arrows and typing some stuff):/%
!some section name
{"data":[
	[""]
],
"options":{}}
!%/&lt;&lt;handsontable [[##some section name]]&gt;&gt;
and after creating some columns and rows and writing some data you may have something like this:
&lt;&lt;handsontable [[##another section name]]&gt;&gt;/%
!another section name
{"data":[
	["","Charly","Bob","Tom"],
	["Charly","–","1:1","3:0"],
	["Bob","1:1","–","0:3"],
	["Tom","0:3","3:0","–"]
],
"options":{}}
!%/You may also populate a table by copy-pasting some content from other tables, including spreadsheets. Data is stored automatically (see below for details). For other examples, see [[Handsontable Demo]].

!! Installation and usage
# Install this plugin (copy-paste it and tag with {{{systemConfig}}} or import; reload TW).
# Add a {{{handsontable}}} macro somewhere with params you see fit and start editing.
* if you use the old approach from Vincent's v0.0.1, you can adapt your data to the new format (macro + section for data and options, see below) or just copy-paste your data. In current version backward compability code is present, but it is deprecated and will be removed at some point.

!!! Macro syntax
the simplest syntax is the following:
{{{
&lt;&lt;handsontable [[##section name]]&gt;&gt;
}}}
this way, data and handsontable options will be stored in a section {{{section name}}} in the same tiddler as the macro. If the section doesn't exist, it will be created hidden (see data format for details). You can also store data in another tiddler by using
{{{
&lt;&lt;handsontable [[tiddler name##section name]]&gt;&gt;
}}}
to store it in a section or
{{{
&lt;&lt;handsontable [[tiddler name]]&gt;&gt;
}}}
to store it just as text of the {{{tiddler name}}} tiddler.

For more advanced usage, one would need to set handsontable options (see [[docs|http://docs.handsontable.com/Core.html]]):
{{{
&lt;&lt;handsontable [[...]] options:'{
	rowHeaders: true,
	...
}'&gt;&gt;
}}}
Note that options have the following priority: default ones (lowest, see below), from macro params, stored (highest, see below).

!!!Default options
In the version 0.3.1, the following handsontable options are set by default:
|{{{colHeaders: true}}}|headers are useful for manual resizing of columns (as of 05.2017, [[resizing can't be done without them|https://github.com/handsontable/handsontable/issues/4244]]) {{DDnc{don't look reasonably well}}}|
|{{{manualColumnResize: true}}}|enables manual resizing, {{DDn{sizes are not saved yet}}}|
|{{{contextMenu: true}}}|enables context menu {{DDnc{not all actions' results are saved}}}|
You may hard-code them in the {{{defaultOptions}}} property of {{{config.macros.handsontable}}}.

!!!wikifiedRenderer
To display cells' content wikified, you may use the {{{renderer}}} option with the pre-defined renderer {{{config.macros.handsontable.wikifiedRenderer}}} like this:
{{{
&lt;&lt;handsontable [[##section name]] options:'{
	renderer: this.wikifiedRenderer
}'
&gt;&gt;
}}}
{{DDnc{describe how to use for certain columns}}}

!!!Data format
Normally, you don't need to know the data storage format. However, it may be useful if you want to adapt handsontables created with the 0.0.1 version to the new version (use macros) or repair/convert some data.

Data and options are stored as JSON in the section/tiddler chosen in the first macro param:
{{{
!section
{data:[
	...
],
options:[
	...
]}
}}}
if the section doesn't exist it is created hidden in the end of the tiddler text:
{{{
.../%
!section
...
!%/
}}}
and if the text ends with {{{|}}}, extra linebreak is added (not to hurt a table in TW syntax):
{{{
...|
/%
!section
...
!%/
}}}

!! Changelog
* 0.3.1 (20.05.2017, by Yakov Litvin) – fixed setting dirty on displaying aggregated handsontable, fixed: allow to use ctrl+tab to switch browser tab from handsontable
* 0.3.0 (17.05.2017, by Yakov Litvin) – implemented rough prototype for editing granulated data (collected from a filtered set of tiddlers)
* 0.2.4 (15.05.2017, by Yakov Litvin) – fixed autoremoving empty columns/rows (prevented "jumping"/extra page scrolling, removing the only column/row)
* 0.2.3 (2.05.2017, by Yakov Litvin) – implemented autoinserting columns/rows when moving out of right/bottom boundaries when pressing right/down + autoremoving empty columns/rows when going back
* 0.2.2 (22.04.2017, by Yakov Litvin) – tested `wikifiedRenderer`, refactored options system, added `wikifiedRenderer` to the plugin
* 0.2.0 (06.04.2017, by Yakov Litvin) – added a macro that edits data and stores it in a tiddler/section, now ~InlineJavascriptPlugin is not necessary to use this
* 0.1.0 (02.03.2017, by Yakov Litvin) – local copies of handsontable (js and css) used (embedded into the plugin) instead of external ones loaded from web
* 0.0.1 (22.06.2015, by Vincent Yeh) – Born this day.
** Works __with or without a locally installed version__ of Handsontable.
*** If a local version is not installed, this plugin will load its on-line version (http://handsontable.com/dist/handsontable.full.min.js) and its stylesheet (http://handsontable.com/dist/handsontable.full.min.css).
** Updates wiki text upon content change using Handsontable.
** __Works with multiple tables__ in one tiddler if each table data is given a __unique variable name__.
** Tested only in normally loaded tiddlers.
!!Code
***/
// /%
/***
handsontable.min.js 0.31.0
downloaded from http://handsontable.com/dist/handsontable.full.min.js
which redirected to http://docs.handsontable.com/0.31.0/bower_components/handsontable/dist/handsontable.full.min.js
(The MIT License)

Copyright (c) 2012-2014 Marcin Warpechowski
Copyright (c) 2015 Handsoncode sp. z o.o. &lt;hello@handsoncode.net&gt;

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the 'Software'), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
***/
//{{{
!function(e){if("object"==typeof exports&amp;&amp;"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&amp;&amp;define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Handsontable=e()}}(function(){var e;return function e(t,n,o){function r(a,l){if(!n[a]){if(!t[a]){var u="function"==typeof require&amp;&amp;require;if(!l&amp;&amp;u)return u(a,!0);if(i)return i(a,!0);if(s[a]&amp;&amp;"undefined"!=typeof window[s[a]])return window[s[a]];var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[a]={exports:{}};t[a][0].call(d.exports,function(e){var n=t[a][1][e];return r(n?n:e)},d,d.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof require&amp;&amp;require,s=JSON.parse('{"zeroclipboard":"ZeroClipboard","moment":"moment","numbro":"numbro","pikaday":"Pikaday"}')||{},a=0;a&lt;o.length;a++)r(o[a]);return r}({1:[function(e,t,n){},{}],2:[function(e,t,n){window.jQuery&amp;&amp;!function(e){e.fn.handsontable=function(e){var t,n,o,r,i,s=this.first(),a=s.data("handsontable");if("string"!=typeof e)return i=e||{},a?a.updateSettings(i):(a=new Handsontable.Core(s[0],i),s.data("handsontable",a),a.init()),s;if(o=[],arguments.length&gt;1)for(t=1,n=arguments.length;t&lt;n;t++)o.push(arguments[t]);if(a){if("undefined"==typeof a[e])throw new Error("Handsontable do not provide action: "+e);r=a[e].apply(a,o),"destroy"===e&amp;&amp;s.removeData()}return r}}(window.jQuery)},{}],3:[function(e,t,n){"use strict";Object.defineProperties(n,{WalkontableBorder:{get:function(){return C}},__esModule:{value:!0}});var o,r,i,s,a,l,u=(o=e("helpers/dom/element"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}),c=u.getComputedStyle,d=u.getTrimmingContainer,h=u.innerWidth,f=u.innerHeight,p=u.offset,m=u.outerHeight,g=u.outerWidth,w=(r=e("helpers/dom/event"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).stopImmediatePropagation,v=(i=e("helpers/browser"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).isMobileBrowser,y=(s=e("eventManager"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).EventManager,b=(a=e("cell/coords"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).WalkontableCellCoords,C=((l=e("overlay/_base.js"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).WalkontableOverlay,function(e,t){t&amp;&amp;(this.eventManager=new y(e),this.instance=e,this.wot=e,this.settings=t,this.mouseDown=!1,this.main=null,this.top=null,this.left=null,this.bottom=null,this.right=null,this.topStyle=null,this.leftStyle=null,this.bottomStyle=null,this.rightStyle=null,this.cornerDefaultStyle={width:"5px",height:"5px",borderWidth:"2px",borderStyle:"solid",borderColor:"#FFF"},this.corner=null,this.cornerStyle=null,this.createBorders(t),this.registerListeners())});$traceurRuntime.createClass(C,{registerListeners:function(){var e=this;this.eventManager.addEventListener(document.body,"mousedown",function(){return e.onMouseDown()}),this.eventManager.addEventListener(document.body,"mouseup",function(){return e.onMouseUp()});for(var t=this,n=function(n,o){t.eventManager.addEventListener(t.main.childNodes[n],"mouseenter",function(t){return e.onMouseEnter(t,e.main.childNodes[n])})},o=0,r=this.main.childNodes.length;o&lt;r;o++)n(o,r)},onMouseDown:function(){this.mouseDown=!0},onMouseUp:function(){this.mouseDown=!1},onMouseEnter:function(e,t){function n(e){return e.clientY&lt;Math.floor(i.top)||(e.clientY&gt;Math.ceil(i.top+i.height)||(e.clientX&lt;Math.floor(i.left)||(e.clientX&gt;Math.ceil(i.left+i.width)||void 0)))}function o(e){n(e)&amp;&amp;(r.eventManager.removeEventListener(document.body,"mousemove",o),t.style.display="block")}if(this.mouseDown&amp;&amp;this.wot.getSetting("hideBorderOnMouseDownOver")){e.preventDefault(),w(e);var r=this,i=t.getBoundingClientRect();t.style.display="none",this.eventManager.addEventListener(document.body,"mousemove",o)}},createBorders:function(e){this.main=document.createElement("div");var t=["top","left","bottom","right","corner"],n=this.main.style;n.position="absolute",n.top=0,n.left=0;for(var o=0;o&lt;5;o++){var r=t[o],i=document.createElement("div");i.className="wtBorder "+(this.settings.className||""),this.settings[r]&amp;&amp;this.settings[r].hide&amp;&amp;(i.className+=" hidden"),n=i.style,n.backgroundColor=this.settings[r]&amp;&amp;this.settings[r].color?this.settings[r].color:e.border.color,n.height=this.settings[r]&amp;&amp;this.settings[r].width?this.settings[r].width+"px":e.border.width+"px",n.width=this.settings[r]&amp;&amp;this.settings[r].width?this.settings[r].width+"px":e.border.width+"px",this.main.appendChild(i)}this.top=this.main.childNodes[0],this.left=this.main.childNodes[1],this.bottom=this.main.childNodes[2],this.right=this.main.childNodes[3],this.topStyle=this.top.style,this.leftStyle=this.left.style,this.bottomStyle=this.bottom.style,this.rightStyle=this.right.style,this.corner=this.main.childNodes[4],this.corner.className+=" corner",this.cornerStyle=this.corner.style,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.height=this.cornerDefaultStyle.height,this.cornerStyle.border=[this.cornerDefaultStyle.borderWidth,this.cornerDefaultStyle.borderStyle,this.cornerDefaultStyle.borderColor].join(" "),v()&amp;&amp;this.createMultipleSelectorHandles(),this.disappear(),this.wot.wtTable.bordersHolder||(this.wot.wtTable.bordersHolder=document.createElement("div"),this.wot.wtTable.bordersHolder.className="htBorders",this.wot.wtTable.spreader.appendChild(this.wot.wtTable.bordersHolder)),this.wot.wtTable.bordersHolder.insertBefore(this.main,this.wot.wtTable.bordersHolder.firstChild)},createMultipleSelectorHandles:function(){this.selectionHandles={topLeft:document.createElement("DIV"),topLeftHitArea:document.createElement("DIV"),bottomRight:document.createElement("DIV"),bottomRightHitArea:document.createElement("DIV")};var e=10,t=40;this.selectionHandles.topLeft.className="topLeftSelectionHandle",this.selectionHandles.topLeftHitArea.className="topLeftSelectionHandle-HitArea",this.selectionHandles.bottomRight.className="bottomRightSelectionHandle",this.selectionHandles.bottomRightHitArea.className="bottomRightSelectionHandle-HitArea",this.selectionHandles.styles={topLeft:this.selectionHandles.topLeft.style,topLeftHitArea:this.selectionHandles.topLeftHitArea.style,bottomRight:this.selectionHandles.bottomRight.style,bottomRightHitArea:this.selectionHandles.bottomRightHitArea.style};var n={position:"absolute",height:t+"px",width:t+"px","border-radius":parseInt(t/1.5,10)+"px"};for(var o in n)n.hasOwnProperty(o)&amp;&amp;(this.selectionHandles.styles.bottomRightHitArea[o]=n[o],this.selectionHandles.styles.topLeftHitArea[o]=n[o]);var r={position:"absolute",height:e+"px",width:e+"px","border-radius":parseInt(e/1.5,10)+"px",background:"#F5F5FF",border:"1px solid #4285c8"};for(var i in r)r.hasOwnProperty(i)&amp;&amp;(this.selectionHandles.styles.bottomRight[i]=r[i],this.selectionHandles.styles.topLeft[i]=r[i]);this.main.appendChild(this.selectionHandles.topLeft),this.main.appendChild(this.selectionHandles.bottomRight),this.main.appendChild(this.selectionHandles.topLeftHitArea),this.main.appendChild(this.selectionHandles.bottomRightHitArea)},isPartRange:function(e,t){return!(!this.wot.selections.area.cellRange||e==this.wot.selections.area.cellRange.to.row&amp;&amp;t==this.wot.selections.area.cellRange.to.col)},updateMultipleSelectionHandlesPosition:function(e,t,n,o,r,i){var s=parseInt(this.selectionHandles.styles.topLeft.width,10),a=parseInt(this.selectionHandles.styles.topLeftHitArea.width,10);this.selectionHandles.styles.topLeft.top=parseInt(n-s,10)+"px",this.selectionHandles.styles.topLeft.left=parseInt(o-s,10)+"px",this.selectionHandles.styles.topLeftHitArea.top=parseInt(n-a/4*3,10)+"px",this.selectionHandles.styles.topLeftHitArea.left=parseInt(o-a/4*3,10)+"px",this.selectionHandles.styles.bottomRight.top=parseInt(n+i,10)+"px",this.selectionHandles.styles.bottomRight.left=parseInt(o+r,10)+"px",this.selectionHandles.styles.bottomRightHitArea.top=parseInt(n+i-a/4,10)+"px",this.selectionHandles.styles.bottomRightHitArea.left=parseInt(o+r-a/4,10)+"px",this.settings.border.multipleSelectionHandlesVisible&amp;&amp;this.settings.border.multipleSelectionHandlesVisible()?(this.selectionHandles.styles.topLeft.display="block",this.selectionHandles.styles.topLeftHitArea.display="block",this.isPartRange(e,t)?(this.selectionHandles.styles.bottomRight.display="none",this.selectionHandles.styles.bottomRightHitArea.display="none"):(this.selectionHandles.styles.bottomRight.display="block",this.selectionHandles.styles.bottomRightHitArea.display="block")):(this.selectionHandles.styles.topLeft.display="none",this.selectionHandles.styles.bottomRight.display="none",this.selectionHandles.styles.topLeftHitArea.display="none",this.selectionHandles.styles.bottomRightHitArea.display="none"),e==this.wot.wtSettings.getSetting("fixedRowsTop")||t==this.wot.wtSettings.getSetting("fixedColumnsLeft")?(this.selectionHandles.styles.topLeft.zIndex="9999",this.selectionHandles.styles.topLeftHitArea.zIndex="9999"):(this.selectionHandles.styles.topLeft.zIndex="",this.selectionHandles.styles.topLeftHitArea.zIndex="")},appear:function(e){if(!this.disabled){var t,n,o,r,i,s,a,l,u,w,y,C,_,R,M,S,E,O,T;T=this.wot.wtTable.getRenderedRowsCount();for(var k=0;k&lt;T;k++){var x=this.wot.wtTable.rowFilter.renderedToSource(k);if(x&gt;=e[0]&amp;&amp;x&lt;=e[2]){_=x;break}}for(var D=T-1;D&gt;=0;D--){var H=this.wot.wtTable.rowFilter.renderedToSource(D);if(H&gt;=e[0]&amp;&amp;H&lt;=e[2]){M=H;break}}T=this.wot.wtTable.getRenderedColumnsCount();for(var A=0;A&lt;T;A++){var P=this.wot.wtTable.columnFilter.renderedToSource(A);if(P&gt;=e[1]&amp;&amp;P&lt;=e[3]){R=P;break}}for(var N=T-1;N&gt;=0;N--){var L=this.wot.wtTable.columnFilter.renderedToSource(N);if(L&gt;=e[1]&amp;&amp;L&lt;=e[3]){S=L;break}}if(void 0===_||void 0===R)return void this.disappear();t=_!==M||R!==S,n=this.wot.wtTable.getCell(new b(_,R)),o=t?this.wot.wtTable.getCell(new b(M,S)):n,r=p(n),i=t?p(o):r,s=p(this.wot.wtTable.TABLE),l=r.top,y=i.top+m(o)-l,w=r.left,C=i.left+g(o)-w,a=l-s.top-1,u=w-s.left-1;var I=c(n);parseInt(I.borderTopWidth,10)&gt;0&amp;&amp;(a+=1,y=y&gt;0?y-1:0),parseInt(I.borderLeftWidth,10)&gt;0&amp;&amp;(u+=1,C=C&gt;0?C-1:0),this.topStyle.top=a+"px",this.topStyle.left=u+"px",this.topStyle.width=C+"px",this.topStyle.display="block",this.leftStyle.top=a+"px",this.leftStyle.left=u+"px",this.leftStyle.height=y+"px",this.leftStyle.display="block";var W=Math.floor(this.settings.border.width/2);this.bottomStyle.top=a+y-W+"px",this.bottomStyle.left=u+"px",this.bottomStyle.width=C+"px",this.bottomStyle.display="block",this.rightStyle.top=a+"px",this.rightStyle.left=u+C-W+"px",this.rightStyle.height=y+1+"px",this.rightStyle.display="block",v()||!this.hasSetting(this.settings.border.cornerVisible)||this.isPartRange(M,S)?this.cornerStyle.display="none":(this.cornerStyle.top=a+y-4+"px",this.cornerStyle.left=u+C-4+"px",this.cornerStyle.borderRightWidth=this.cornerDefaultStyle.borderWidth,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.display="none",E=d(this.wot.wtTable.TABLE),S===this.wot.getSetting("totalColumns")-1&amp;&amp;(O=o.offsetLeft+g(o)+parseInt(this.cornerDefaultStyle.width)/2&gt;=h(E),O&amp;&amp;(this.cornerStyle.left=Math.floor(u+C-3-parseInt(this.cornerDefaultStyle.width)/2)+"px",this.cornerStyle.borderRightWidth=0)),M===this.wot.getSetting("totalRows")-1&amp;&amp;(O=o.offsetTop+m(o)+parseInt(this.cornerDefaultStyle.height)/2&gt;=f(E),O&amp;&amp;(this.cornerStyle.top=Math.floor(a+y-3-parseInt(this.cornerDefaultStyle.height)/2)+"px",this.cornerStyle.borderBottomWidth=0)),this.cornerStyle.display="block"),v()&amp;&amp;this.updateMultipleSelectionHandlesPosition(_,R,a,u,C,y)}},disappear:function(){this.topStyle.display="none",this.leftStyle.display="none",this.bottomStyle.display="none",this.rightStyle.display="none",this.cornerStyle.display="none",v()&amp;&amp;(this.selectionHandles.styles.topLeft.display="none",this.selectionHandles.styles.bottomRight.display="none")},hasSetting:function(e){return"function"==typeof e?e():!!e}},{}),window.WalkontableBorder=C},{"cell/coords":6,eventManager:42,"helpers/browser":44,"helpers/dom/element":47,"helpers/dom/event":48,"overlay/_base.js":12}],4:[function(e,t,n){"use strict";Object.defineProperties(n,{WalkontableViewportColumnsCalculator:{get:function(){return r}},__esModule:{value:!0}});var o=new WeakMap,r=function(e,t,n,r,i,s,a){var l=void 0!==arguments[7]?arguments[7]:function(e){return e};o.set(this,{viewportWidth:e,scrollOffset:t,totalColumns:n,columnWidthFn:r,overrideFn:i,onlyFullyVisible:s,stretchingColumnWidthFn:l}),this.count=0,this.startColumn=null,this.endColumn=null,this.startPosition=null,this.stretchAllRatio=0,this.stretchLastWidth=0,this.stretch=a,this.totalTargetWidth=0,this.needVerifyLastColumnWidth=!0,this.stretchAllColumnsWidth=[],this.calculate()},i=r;$traceurRuntime.createClass(r,{calculate:function(){for(var e,t=0,n=!0,r=[],i=o.get(this),s=i.onlyFullyVisible,a=i.overrideFn,l=i.scrollOffset,u=i.totalColumns,c=i.viewportWidth,d=0;d&lt;u;d++){e=this._getColumnWidth(d),t&lt;=l&amp;&amp;!s&amp;&amp;(this.startColumn=d);var h=l&gt;0?c+1:c;if(t&gt;=l&amp;&amp;t+e&lt;=l+h&amp;&amp;(null==this.startColumn&amp;&amp;(this.startColumn=d),this.endColumn=d),r.push(t),t+=e,s||(this.endColumn=d),t&gt;=l+c){n=!1;break}}if(this.endColumn===u-1&amp;&amp;n)for(this.startColumn=this.endColumn;this.startColumn&gt;0;){var f=r[this.endColumn]+e-r[this.startColumn-1];if((f&lt;=c||!s)&amp;&amp;this.startColumn--,f&gt;c)break}null!==this.startColumn&amp;&amp;a&amp;&amp;a(this),this.startPosition=r[this.startColumn],void 0==this.startPosition&amp;&amp;(this.startPosition=null),null!==this.startColumn&amp;&amp;(this.count=this.endColumn-this.startColumn+1)},refreshStretching:function(e){if("none"!==this.stretch){this.totalTargetWidth=e;for(var t=o.get(this),n=t.totalColumns,r=0,i=0;i&lt;n;i++){var s=this._getColumnWidth(i),a=t.stretchingColumnWidthFn(void 0,i);"number"==typeof a?e-=a:r+=s}var l=e-r;if("all"===this.stretch&amp;&amp;l&gt;0)this.stretchAllRatio=e/r,this.stretchAllColumnsWidth=[],this.needVerifyLastColumnWidth=!0;else if("last"===this.stretch&amp;&amp;e!==1/0){var u=this._getColumnWidth(n-1),c=l+u;this.stretchLastWidth=c&gt;=0?c:u}}},getStretchedColumnWidth:function(e,t){var n=null;return"all"===this.stretch&amp;&amp;0!==this.stretchAllRatio?n=this._getStretchedAllColumnWidth(e,t):"last"===this.stretch&amp;&amp;0!==this.stretchLastWidth&amp;&amp;(n=this._getStretchedLastColumnWidth(e)),n},_getStretchedAllColumnWidth:function(e,t){var n=0,r=o.get(this),i=r.totalColumns;if(!this.stretchAllColumnsWidth[e]){var s=Math.round(t*this.stretchAllRatio),a=r.stretchingColumnWidthFn(s,e);void 0===a?this.stretchAllColumnsWidth[e]=s:this.stretchAllColumnsWidth[e]=isNaN(a)?this._getColumnWidth(e):a}if(this.stretchAllColumnsWidth.length===i&amp;&amp;this.needVerifyLastColumnWidth){this.needVerifyLastColumnWidth=!1;for(var l=0;l&lt;this.stretchAllColumnsWidth.length;l++)n+=this.stretchAllColumnsWidth[l];n!==this.totalTargetWidth&amp;&amp;(this.stretchAllColumnsWidth[this.stretchAllColumnsWidth.length-1]+=this.totalTargetWidth-n)}return this.stretchAllColumnsWidth[e]},_getStretchedLastColumnWidth:function(e){var t=o.get(this),n=t.totalColumns;return e===n-1?this.stretchLastWidth:null},_getColumnWidth:function(e){var t=o.get(this).columnWidthFn(e);return void 0===t&amp;&amp;(t=i.DEFAULT_WIDTH),t}},{get DEFAULT_WIDTH(){return 50}}),window.WalkontableViewportColumnsCalculator=r},{}],5:[function(e,t,n){"use strict";Object.defineProperties(n,{WalkontableViewportRowsCalculator:{get:function(){return r}},__esModule:{value:!0}});var o=new WeakMap,r=function(e,t,n,r,i,s,a){o.set(this,{viewportHeight:e,scrollOffset:t,totalRows:n,rowHeightFn:r,overrideFn:i,onlyFullyVisible:s,horizontalScrollbarHeight:a}),this.count=0,this.startRow=null,this.endRow=null,this.startPosition=null,this.calculate()},i=r;$traceurRuntime.createClass(r,{calculate:function(){for(var e=0,t=!0,n=[],r=o.get(this),s=r.onlyFullyVisible,a=r.overrideFn,l=r.rowHeightFn,u=r.scrollOffset,c=r.totalRows,d=r.viewportHeight,h=r.horizontalScrollbarHeight||0,f=0;f&lt;c;f++){var p=l(f);if(void 0===p&amp;&amp;(p=i.DEFAULT_HEIGHT),e&lt;=u&amp;&amp;!s&amp;&amp;(this.startRow=f),e&gt;=u&amp;&amp;e+p&lt;=u+d-h&amp;&amp;(null===this.startRow&amp;&amp;(this.startRow=f),this.endRow=f),n.push(e),e+=p,s||(this.endRow=f),e&gt;=u+d-h){t=!1;break}}if(this.endRow===c-1&amp;&amp;t)for(this.startRow=this.endRow;this.startRow&gt;0;){var m=n[this.endRow]+p-n[this.startRow-1];if((m&lt;=d-h||!s)&amp;&amp;this.startRow--,m&gt;=d-h)break}null!==this.startRow&amp;&amp;a&amp;&amp;a(this),this.startPosition=n[this.startRow],void 0==this.startPosition&amp;&amp;(this.startPosition=null),null!==this.startRow&amp;&amp;(this.count=this.endRow-this.startRow+1)}},{get DEFAULT_HEIGHT(){return 23}}),window.WalkontableViewportRowsCalculator=r},{}],6:[function(e,t,n){"use strict";Object.defineProperties(n,{WalkontableCellCoords:{get:function(){return o}},__esModule:{value:!0}});var o=function(e,t){"undefined"!=typeof e&amp;&amp;"undefined"!=typeof t?(this.row=e,this.col=t):(this.row=null,this.col=null)};$traceurRuntime.createClass(o,{isValid:function(e){return!(this.row&lt;0||this.col&lt;0)&amp;&amp;!(this.row&gt;=e.getSetting("totalRows")||this.col&gt;=e.getSetting("totalColumns"))},isEqual:function(e){return e===this||this.row===e.row&amp;&amp;this.col===e.col},isSouthEastOf:function(e){return this.row&gt;=e.row&amp;&amp;this.col&gt;=e.col},isNorthWestOf:function(e){return this.row&lt;=e.row&amp;&amp;this.col&lt;=e.col},isSouthWestOf:function(e){return this.row&gt;=e.row&amp;&amp;this.col&lt;=e.col},isNorthEastOf:function(e){return this.row&lt;=e.row&amp;&amp;this.col&gt;=e.col}},{}),window.WalkontableCellCoords=o},{}],7:[function(e,t,n){"use strict";Object.defineProperties(n,{WalkontableCellRange:{get:function(){return i}},__esModule:{value:!0}});var o,r=(o=e("cell/coords"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).WalkontableCellCoords,i=function(e,t,n){this.highlight=e,this.from=t,this.to=n},s=i;$traceurRuntime.createClass(i,{isValid:function(e){return this.from.isValid(e)&amp;&amp;this.to.isValid(e)},isSingle:function(){return this.from.row===this.to.row&amp;&amp;this.from.col===this.to.col},getHeight:function(){return Math.max(this.from.row,this.to.row)-Math.min(this.from.row,this.to.row)+1},getWidth:function(){return Math.max(this.from.col,this.to.col)-Math.min(this.from.col,this.to.col)+1},includes:function(e){var t=e,n=t.row,o=t.col,r=this.getTopLeftCorner(),i=this.getBottomRightCorner();return r.row&lt;=n&amp;&amp;i.row&gt;=n&amp;&amp;r.col&lt;=o&amp;&amp;i.col&gt;=o},includesRange:function(e){return this.includes(e.getTopLeftCorner())&amp;&amp;this.includes(e.getBottomRightCorner())},isEqual:function(e){return Math.min(this.from.row,this.to.row)==Math.min(e.from.row,e.to.row)&amp;&amp;Math.max(this.from.row,this.to.row)==Math.max(e.from.row,e.to.row)&amp;&amp;Math.min(this.from.col,this.to.col)==Math.min(e.from.col,e.to.col)&amp;&amp;Math.max(this.from.col,this.to.col)==Math.max(e.from.col,e.to.col)},overlaps:function(e){return e.isSouthEastOf(this.getTopLeftCorner())&amp;&amp;e.isNorthWestOf(this.getBottomRightCorner())},isSouthEastOf:function(e){return this.getTopLeftCorner().isSouthEastOf(e)||this.getBottomRightCorner().isSouthEastOf(e)},isNorthWestOf:function(e){return this.getTopLeftCorner().isNorthWestOf(e)||this.getBottomRightCorner().isNorthWestOf(e)},expand:function(e){var t=this.getTopLeftCorner(),n=this.getBottomRightCorner();return(e.row&lt;t.row||e.col&lt;t.col||e.row&gt;n.row||e.col&gt;n.col)&amp;&amp;(this.from=new r(Math.min(t.row,e.row),Math.min(t.col,e.col)),this.to=new r(Math.max(n.row,e.row),Math.max(n.col,e.col)),!0)},expandByRange:function(e){if(this.includesRange(e)||!this.overlaps(e))return!1;var t=this.getTopLeftCorner(),n=this.getBottomRightCorner(),o=(this.getTopRightCorner(),this.getBottomLeftCorner(),e.getTopLeftCorner()),i=e.getBottomRightCorner(),a=Math.min(t.row,o.row),l=Math.min(t.col,o.col),u=Math.max(n.row,i.row),c=Math.max(n.col,i.col),d=new r(a,l),h=new r(u,c),f=new s(d,d,h).isCorner(this.from,e),p=e.isEqual(new s(d,d,h));return f&amp;&amp;!p&amp;&amp;(this.from.col&gt;d.col&amp;&amp;(d.col=c,h.col=l),this.from.row&gt;d.row&amp;&amp;(d.row=u,h.row=a)),this.from=d,this.to=h,!0},getDirection:function(){return this.from.isNorthWestOf(this.to)?"NW-SE":this.from.isNorthEastOf(this.to)?"NE-SW":this.from.isSouthEastOf(this.to)?"SE-NW":this.from.isSouthWestOf(this.to)?"SW-NE":void 0},setDirection:function(e){var t,n,o,r;switch(e){case"NW-SE":t=[this.getTopLeftCorner(),this.getBottomRightCorner()],this.from=t[0],this.to=t[1],t;break;case"NE-SW":n=[this.getTopRightCorner(),this.getBottomLeftCorner()],this.from=n[0],this.to=n[1],n;break;case"SE-NW":o=[this.getBottomRightCorner(),this.getTopLeftCorner()],this.from=o[0],this.to=o[1],o;break;case"SW-NE":r=[this.getBottomLeftCorner(),this.getTopRightCorner()],this.from=r[0],this.to=r[1],r}},getTopLeftCorner:function(){return new r(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))},getBottomRightCorner:function(){return new r(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))},getTopRightCorner:function(){return new r(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))},getBottomLeftCorner:function(){return new r(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))},isCorner:function(e,t){return!!(t&amp;&amp;t.includes(e)&amp;&amp;(this.getTopLeftCorner().isEqual(new r(t.from.row,t.from.col))||this.getTopRightCorner().isEqual(new r(t.from.row,t.to.col))||this.getBottomLeftCorner().isEqual(new r(t.to.row,t.from.col))||this.getBottomRightCorner().isEqual(new r(t.to.row,t.to.col))))||(e.isEqual(this.getTopLeftCorner())||e.isEqual(this.getTopRightCorner())||e.isEqual(this.getBottomLeftCorner())||e.isEqual(this.getBottomRightCorner()))},getOppositeCorner:function(e,t){if(!(e instanceof r))return!1;if(t&amp;&amp;t.includes(e)){if(this.getTopLeftCorner().isEqual(new r(t.from.row,t.from.col)))return this.getBottomRightCorner();if(this.getTopRightCorner().isEqual(new r(t.from.row,t.to.col)))return this.getBottomLeftCorner();if(this.getBottomLeftCorner().isEqual(new r(t.to.row,t.from.col)))return this.getTopRightCorner();if(this.getBottomRightCorner().isEqual(new r(t.to.row,t.to.col)))return this.getTopLeftCorner()}return e.isEqual(this.getBottomRightCorner())?this.getTopLeftCorner():e.isEqual(this.getTopLeftCorner())?this.getBottomRightCorner():e.isEqual(this.getTopRightCorner())?this.getBottomLeftCorner():e.isEqual(this.getBottomLeftCorner())?this.getTopRightCorner():void 0},getBordersSharedWith:function(e){if(!this.includesRange(e))return[];var t={top:Math.min(this.from.row,this.to.row),bottom:Math.max(this.from.row,this.to.row),left:Math.min(this.from.col,this.to.col),right:Math.max(this.from.col,this.to.col)},n={top:Math.min(e.from.row,e.to.row),bottom:Math.max(e.from.row,e.to.row),left:Math.min(e.from.col,e.to.col),right:Math.max(e.from.col,e.to.col)},o=[];return t.top==n.top&amp;&amp;o.push("top"),t.right==n.right&amp;&amp;o.push("right"),t.bottom==n.bottom&amp;&amp;o.push("bottom"),t.left==n.left&amp;&amp;o.push("left"),o},getInner:function(){for(var e=this.getTopLeftCorner(),t=this.getBottomRightCorner(),n=[],o=e.row;o&lt;=t.row;o++)for(var i=e.col;i&lt;=t.col;i++)this.from.row===o&amp;&amp;this.from.col===i||this.to.row===o&amp;&amp;this.to.col===i||n.push(new r(o,i));return n},getAll:function(){for(var e=this.getTopLeftCorner(),t=this.getBottomRightCorner(),n=[],o=e.row;o&lt;=t.row;o++)for(var i=e.col;i&lt;=t.col;i++)e.row===o&amp;&amp;e.col===i?n.push(e):t.row===o&amp;&amp;t.col===i?n.push(t):n.push(new r(o,i));return n},forAll:function(e){for(var t=this.getTopLeftCorner(),n=this.getBottomRightCorner(),o=t.row;o&lt;=n.row;o++)for(var r=t.col;r&lt;=n.col;r++){var i=e(o,r);if(i===!1)return}}},{}),window.WalkontableCellRange=i},{"cell/coords":6}],8:[function(e,t,n){"use strict";Object.defineProperties(n,{Walkontable:{get:function(){return H}},__esModule:{value:!0}});var o,r,i,s,a,l,u,c,d,h,f,p,m,g,w=(o=e("helpers/dom/element"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}),v=w.addClass,y=w.fastInnerText,b=w.isVisible,C=w.removeClass,_=(r=e("helpers/object"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).objectEach,R=(i=e("helpers/string"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}),M=R.toUpperCaseFirst,S=R.randomString,E=(s=e("event"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).WalkontableEvent,O=(a=e("overlays"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).WalkontableOverlays,T=(l=e("scroll"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).WalkontableScroll,k=(u=e("settings"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).WalkontableSettings,x=(c=e("table"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}).WalkontableTable,D=(d=e("viewport"),d&amp;&amp;d.__esModule&amp;&amp;d||{default:d}).WalkontableViewport,H=((h=e("overlay/_base.js"),h&amp;&amp;h.__esModule&amp;&amp;h||{default:h}).WalkontableOverlay,(f=e("overlay/top.js"),f&amp;&amp;f.__esModule&amp;&amp;f||{default:f}).WalkontableTopOverlay,(p=e("overlay/left.js"),p&amp;&amp;p.__esModule&amp;&amp;p||{default:p}).WalkontableLeftOverlay,(m=e("overlay/debug.js"),m&amp;&amp;m.__esModule&amp;&amp;m||{default:m}).WalkontableDebugOverlay,(g=e("overlay/topLeftCorner.js"),g&amp;&amp;g.__esModule&amp;&amp;g||{default:g}).WalkontableTopLeftCornerOverlay,function(e){var t=[];if(this.guid="wt_"+S(),e.cloneSource?(this.cloneSource=e.cloneSource,this.cloneOverlay=e.cloneOverlay,this.wtSettings=e.cloneSource.wtSettings,this.wtTable=new x(this,e.table,e.wtRootElement),this.wtScroll=new T(this),this.wtViewport=e.cloneSource.wtViewport,this.wtEvent=new E(this),this.selections=this.cloneSource.selections):(this.wtSettings=new k(this,e),this.wtTable=new x(this,e.table),this.wtScroll=new T(this),this.wtViewport=new D(this),this.wtEvent=new E(this),this.selections=this.getSetting("selections"),this.wtOverlays=new O(this),this.exportSettingsAsClassNames()),this.wtTable.THEAD.childNodes.length&amp;&amp;this.wtTable.THEAD.childNodes[0].childNodes.length){for(var n=0,o=this.wtTable.THEAD.childNodes[0].childNodes.length;n&lt;o;n++)t.push(this.wtTable.THEAD.childNodes[0].childNodes[n].innerHTML);this.getSetting("columnHeaders").length||this.update("columnHeaders",[function(e,n){y(n,t[e])}])}this.drawn=!1,this.drawInterrupted=!1});$traceurRuntime.createClass(H,{draw:function(){var e=void 0!==arguments[0]&amp;&amp;arguments[0];return this.drawInterrupted=!1,e||b(this.wtTable.TABLE)?this.wtTable.draw(e):this.drawInterrupted=!0,this},getCell:function(e){var t=void 0!==arguments[1]&amp;&amp;arguments[1];if(!t)return this.wtTable.getCell(e);var n=this.wtSettings.getSetting("totalRows"),o=this.wtSettings.getSetting("fixedRowsTop"),r=this.wtSettings.getSetting("fixedRowsBottom"),i=this.wtSettings.getSetting("fixedColumnsLeft");if(e.row&lt;o&amp;&amp;e.col&lt;i)return this.wtOverlays.topLeftCornerOverlay.clone.wtTable.getCell(e);if(e.row&lt;o)return this.wtOverlays.topOverlay.clone.wtTable.getCell(e);if(e.col&lt;i&amp;&amp;e.row&gt;=n-r){if(this.wtOverlays.bottomLeftCornerOverlay&amp;&amp;this.wtOverlays.bottomLeftCornerOverlay.clone)return this.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.getCell(e)}else{if(e.col&lt;i)return this.wtOverlays.leftOverlay.clone.wtTable.getCell(e);if(e.row&lt;n&amp;&amp;e.row&gt;n-r&amp;&amp;this.wtOverlays.bottomOverlay&amp;&amp;this.wtOverlays.bottomOverlay.clone)return this.wtOverlays.bottomOverlay.clone.wtTable.getCell(e)}return this.wtTable.getCell(e)},update:function(e,t){return this.wtSettings.update(e,t)},scrollVertical:function(e){return this.wtOverlays.topOverlay.scrollTo(e),this.getSetting("onScrollVertically"),this},scrollHorizontal:function(e){return this.wtOverlays.leftOverlay.scrollTo(e),this.getSetting("onScrollHorizontally"),this},scrollViewport:function(e){return this.wtScroll.scrollViewport(e),this},getViewport:function(){return[this.wtTable.getFirstVisibleRow(),this.wtTable.getFirstVisibleColumn(),this.wtTable.getLastVisibleRow(),this.wtTable.getLastVisibleColumn()]},getOverlayName:function(){return this.cloneOverlay?this.cloneOverlay.type:"master"},isOverlayName:function(e){return!!this.cloneOverlay&amp;&amp;this.cloneOverlay.type===e},exportSettingsAsClassNames:function(){var e=this,t={rowHeaders:["array"],columnHeaders:["array"]},n=[],o=[];_(t,function(t,r){t.indexOf("array")&gt;-1&amp;&amp;e.getSetting(r).length&amp;&amp;o.push("ht"+M(r)),n.push("ht"+M(r))}),C(this.wtTable.wtRootElement.parentNode,n),v(this.wtTable.wtRootElement.parentNode,o)},getSetting:function(e,t,n,o,r){return this.wtSettings.getSetting(e,t,n,o,r)},hasSetting:function(e){return this.wtSettings.has(e)},destroy:function(){this.wtOverlays.destroy(),this.wtEvent.destroy()}},{}),window.Walkontable=H},{event:9,"helpers/dom/element":47,"helpers/object":53,"helpers/string":55,"overlay/_base.js":12,"overlay/debug.js":13,"overlay/left.js":14,"overlay/top.js":15,"overlay/topLeftCorner.js":16,overlays:17,scroll:18,settings:20,table:21,viewport:23}],9:[function(e,t,n){"use strict";function o(e){var t=this,n=m(e);this.instance=e;var o=[null,null];this.dblClickTimeout=[null,null];var r,i=function(e){var n=document.activeElement,r=f(h,e.realTarget),i=e.realTarget;if(i!==n&amp;&amp;r(0)!==n&amp;&amp;r(1)!==n){var s=t.parentCell(i);c(i,"corner")?t.instance.getSetting("onCellCornerMouseDown",e,i):s.TD&amp;&amp;t.instance.hasSetting("onCellMouseDown")&amp;&amp;t.instance.getSetting("onCellMouseDown",e,s.coords,s.TD,t.instance),2!==e.button&amp;&amp;s.TD&amp;&amp;(o[0]=s.TD,clearTimeout(t.dblClickTimeout[0]),t.dblClickTimeout[0]=setTimeout(function(){o[0]=null},1e3))}},s=function(e){t.instance.touchMoving=!0},a=function(e){n.addEventListener(this,"touchmove",s),t.checkIfTouchMove=setTimeout(function(){return t.instance.touchMoving===!0?(t.instance.touchMoving=void 0,void n.removeEventListener("touchmove",s,!1)):void i(e)},30)},l=function(e){var n,o,r;t.instance.hasSetting("onCellMouseOver")&amp;&amp;(n=t.instance.wtTable.TABLE,o=u(e.realTarget,["TD","TH"],n),r=t.instance.cloneSource||t.instance,o&amp;&amp;o!==r.lastMouseOver&amp;&amp;d(o,n)&amp;&amp;(r.lastMouseOver=o,t.instance.getSetting("onCellMouseOver",e,t.instance.wtTable.getCoords(o),o,t.instance)))},g=function(e){if(2!==e.button){var n=t.parentCell(e.realTarget);n.TD===o[0]&amp;&amp;n.TD===o[1]?(c(e.realTarget,"corner")?t.instance.getSetting("onCellCornerDblClick",e,n.coords,n.TD,t.instance):t.instance.getSetting("onCellDblClick",e,n.coords,n.TD,t.instance),o[0]=null,o[1]=null):n.TD===o[0]?(t.instance.getSetting("onCellMouseUp",e,n.coords,n.TD,t.instance),o[1]=n.TD,clearTimeout(t.dblClickTimeout[1]),t.dblClickTimeout[1]=setTimeout(function(){o[1]=null},500)):n.TD&amp;&amp;t.instance.hasSetting("onCellMouseUp")&amp;&amp;t.instance.getSetting("onCellMouseUp",e,n.coords,n.TD,t.instance)}},w=function(e){clearTimeout(r),e.preventDefault(),g(e)};if(n.addEventListener(this.instance.wtTable.holder,"mousedown",i),n.addEventListener(this.instance.wtTable.TABLE,"mouseover",l),n.addEventListener(this.instance.wtTable.holder,"mouseup",g),this.instance.wtTable.holder.parentNode.parentNode&amp;&amp;p()&amp;&amp;!t.instance.wtTable.isWorkingOnClone()){var v="."+this.instance.wtTable.holder.parentNode.className.split(" ").join(".");n.addEventListener(this.instance.wtTable.holder,"touchstart",function(e){t.instance.touchApplied=!0,d(e.target,v)&amp;&amp;a.call(e.target,e)}),n.addEventListener(this.instance.wtTable.holder,"touchend",function(e){t.instance.touchApplied=!1,d(e.target,v)&amp;&amp;w.call(e.target,e)}),t.instance.momentumScrolling||(t.instance.momentumScrolling={}),n.addEventListener(this.instance.wtTable.holder,"scroll",function(e){clearTimeout(t.instance.momentumScrolling._timeout),t.instance.momentumScrolling.ongoing||t.instance.getSetting("onBeforeTouchScroll"),t.instance.momentumScrolling.ongoing=!0,t.instance.momentumScrolling._timeout=setTimeout(function(){t.instance.touchApplied||(t.instance.momentumScrolling.ongoing=!1,t.instance.getSetting("onAfterMomentumScroll"))},200)})}n.addEventListener(window,"resize",function(){"none"!==t.instance.getSetting("stretchH")&amp;&amp;t.instance.draw()}),this.destroy=function(){clearTimeout(this.dblClickTimeout[0]),clearTimeout(this.dblClickTimeout[1]),n.destroy()}}Object.defineProperties(n,{WalkontableEvent:{get:function(){return o}},__esModule:{value:!0}});var r,i,s,a,l=(r=e("helpers/dom/element"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}),u=l.closestDown,c=l.hasClass,d=l.isChildOf,h=l.getParent,f=(i=e("helpers/function"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).partial,p=(s=e("helpers/browser"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).isMobileBrowser,m=(a=e("eventManager"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).eventManager;o.prototype.parentCell=function(e){var t={},n=this.instance.wtTable.TABLE,o=u(e,["TD","TH"],n);return o?(t.coords=this.instance.wtTable.getCoords(o),t.TD=o):c(e,"wtBorder")&amp;&amp;c(e,"current")?(t.coords=this.instance.selections.current.cellRange.highlight,t.TD=this.instance.wtTable.getCell(t.coords)):c(e,"wtBorder")&amp;&amp;c(e,"area")&amp;&amp;this.instance.selections.area.cellRange&amp;&amp;(t.coords=this.instance.selections.area.cellRange.to,t.TD=this.instance.wtTable.getCell(t.coords)),t},window.WalkontableEvent=o},{eventManager:42,"helpers/browser":44,"helpers/dom/element":47,"helpers/function":50}],10:[function(e,t,n){"use strict";Object.defineProperties(n,{
WalkontableColumnFilter:{get:function(){return o}},__esModule:{value:!0}});var o=function(e,t,n){this.offset=e,this.total=t,this.countTH=n};$traceurRuntime.createClass(o,{offsetted:function(e){return e+this.offset},unOffsetted:function(e){return e-this.offset},renderedToSource:function(e){return this.offsetted(e)},sourceToRendered:function(e){return this.unOffsetted(e)},offsettedTH:function(e){return e-this.countTH},unOffsettedTH:function(e){return e+this.countTH},visibleRowHeadedColumnToSourceColumn:function(e){return this.renderedToSource(this.offsettedTH(e))},sourceColumnToVisibleRowHeadedColumn:function(e){return this.unOffsettedTH(this.sourceToRendered(e))}},{}),window.WalkontableColumnFilter=o},{}],11:[function(e,t,n){"use strict";Object.defineProperties(n,{WalkontableRowFilter:{get:function(){return o}},__esModule:{value:!0}});var o=function(e,t,n){this.offset=e,this.total=t,this.countTH=n};$traceurRuntime.createClass(o,{offsetted:function(e){return e+this.offset},unOffsetted:function(e){return e-this.offset},renderedToSource:function(e){return this.offsetted(e)},sourceToRendered:function(e){return this.unOffsetted(e)},offsettedTH:function(e){return e-this.countTH},unOffsettedTH:function(e){return e+this.countTH},visibleColHeadedRowToSourceRow:function(e){return this.renderedToSource(this.offsettedTH(e))},sourceRowToVisibleColHeadedRow:function(e){return this.unOffsettedTH(this.sourceToRendered(e))}},{}),window.WalkontableRowFilter=o},{}],12:[function(e,t,n){"use strict";Object.defineProperties(n,{WalkontableOverlay:{get:function(){return p}},__esModule:{value:!0}});var o,r,i,s,a=(o=e("helpers/dom/element"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}),l=a.getScrollableElement,u=a.getTrimmingContainer,c=(r=e("helpers/object"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).defineGetter,d=(i=e("helpers/array"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).arrayEach,h=(s=e("eventManager"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).eventManager,f={},p=function(e){c(this,"wot",e,{writable:!1}),this.instance=this.wot,this.type="",this.mainTableScrollableElement=null,this.TABLE=this.wot.wtTable.TABLE,this.hider=this.wot.wtTable.hider,this.spreader=this.wot.wtTable.spreader,this.holder=this.wot.wtTable.holder,this.wtRootElement=this.wot.wtTable.wtRootElement,this.trimmingContainer=u(this.hider.parentNode.parentNode),this.areElementSizesAdjusted=!1,this.updateStateOfRendering()},m=p;$traceurRuntime.createClass(p,{updateStateOfRendering:function(){var e=this.needFullRender;this.needFullRender=this.shouldBeRendered();var t=e!==this.needFullRender;return t&amp;&amp;!this.needFullRender&amp;&amp;this.reset(),t},shouldBeRendered:function(){return!0},updateTrimmingContainer:function(){this.trimmingContainer=u(this.hider.parentNode.parentNode)},updateMainScrollableElement:function(){this.mainTableScrollableElement=l(this.wot.wtTable.TABLE)},makeClone:function(e){if(m.CLONE_TYPES.indexOf(e)===-1)throw new Error('Clone type "'+e+'" is not supported.');var t=document.createElement("DIV"),n=document.createElement("TABLE");t.className="ht_clone_"+e+" handsontable",t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.overflow="hidden",n.className=this.wot.wtTable.TABLE.className,t.appendChild(n),this.type=e,this.wot.wtTable.wtRootElement.parentNode.appendChild(t);var o=this.wot.getSetting("preventOverflow");return o===!0||"horizontal"===o&amp;&amp;this.type===m.CLONE_TOP||"vertical"===o&amp;&amp;this.type===m.CLONE_LEFT?this.mainTableScrollableElement=window:this.mainTableScrollableElement=l(this.wot.wtTable.TABLE),new Walkontable({cloneSource:this.wot,cloneOverlay:this,table:n})},refresh:function(){var e=void 0!==arguments[0]&amp;&amp;arguments[0],t=this.shouldBeRendered();this.clone&amp;&amp;(this.needFullRender||t)&amp;&amp;this.clone.draw(e),this.needFullRender=t},reset:function(){if(this.clone){var e=this.clone.wtTable.holder,t=this.clone.wtTable.hider,n=e.style,o=t.style,r=e.parentNode.style;d([n,o,r],function(e){e.width="",e.height=""})}},destroy:function(){h(this.clone).destroy()}},{get CLONE_TOP(){return"top"},get CLONE_BOTTOM(){return"bottom"},get CLONE_LEFT(){return"left"},get CLONE_TOP_LEFT_CORNER(){return"top_left_corner"},get CLONE_BOTTOM_LEFT_CORNER(){return"bottom_left_corner"},get CLONE_DEBUG(){return"debug"},get CLONE_TYPES(){return[m.CLONE_TOP,m.CLONE_BOTTOM,m.CLONE_LEFT,m.CLONE_TOP_LEFT_CORNER,m.CLONE_BOTTOM_LEFT_CORNER,m.CLONE_DEBUG]},registerOverlay:function(e,t){if(m.CLONE_TYPES.indexOf(e)===-1)throw new Error("Unsupported overlay ("+e+").");f[e]=t},createOverlay:function(e,t){return new f[e](t)},isOverlayTypeOf:function(e,t){return!(!e||!f[t])&amp;&amp;e instanceof f[t]}}),window.WalkontableOverlay=p},{eventManager:42,"helpers/array":43,"helpers/dom/element":47,"helpers/object":53}],13:[function(e,t,n){"use strict";Object.defineProperties(n,{WalkontableDebugOverlay:{get:function(){return a}},__esModule:{value:!0}});var o,r,i=(o=e("helpers/dom/element"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).addClass,s=(r=e("_base"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).WalkontableOverlay,a=function(e){$traceurRuntime.superConstructor(l).call(this,e),this.clone=this.makeClone(s.CLONE_DEBUG),this.clone.wtTable.holder.style.opacity=.4,this.clone.wtTable.holder.style.textShadow="0 0 2px #ff0000",i(this.clone.wtTable.holder.parentNode,"wtDebugVisible")},l=a;$traceurRuntime.createClass(a,{},{},s),window.WalkontableDebugOverlay=a,s.registerOverlay(s.CLONE_DEBUG,a)},{_base:12,"helpers/dom/element":47}],14:[function(e,t,n){"use strict";Object.defineProperties(n,{WalkontableLeftOverlay:{get:function(){return w}},__esModule:{value:!0}});var o,r,i=(o=e("helpers/dom/element"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}),s=i.addClass,a=i.getScrollbarWidth,l=i.getScrollLeft,u=i.getWindowScrollTop,c=i.hasClass,d=i.outerWidth,h=i.innerHeight,f=i.removeClass,p=i.setOverlayPosition,m=i.resetCssTransform,g=(r=e("_base"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).WalkontableOverlay,w=function(e){$traceurRuntime.superConstructor(v).call(this,e),this.clone=this.makeClone(g.CLONE_LEFT)},v=w;$traceurRuntime.createClass(w,{shouldBeRendered:function(){return!(!this.wot.getSetting("fixedColumnsLeft")&amp;&amp;!this.wot.getSetting("rowHeaders").length)},resetFixedPosition:function(){if(this.needFullRender&amp;&amp;this.wot.wtTable.holder.parentNode){var e=this.clone.wtTable.holder.parentNode,t=0,n=this.wot.getSetting("preventOverflow");if(this.trimmingContainer!==window||n&amp;&amp;"horizontal"===n)t=this.getScrollPosition(),m(e);else{var o,r,i=this.wot.wtTable.hider.getBoundingClientRect(),s=Math.ceil(i.left),a=Math.ceil(i.right);r=this.wot.wtTable.hider.style.top,r=""===r?0:r,o=s&lt;0&amp;&amp;a-e.offsetWidth&gt;0?-s:0,t=o,o+="px",p(e,o,r)}this.adjustHeaderBordersPosition(t),this.adjustElementsSize()}},setScrollPosition:function(e){this.mainTableScrollableElement===window?window.scrollTo(e,u()):this.mainTableScrollableElement.scrollLeft=e},onScroll:function(){this.wot.getSetting("onScrollVertically")},sumCellSizes:function(e,t){for(var n=0,o=this.wot.wtSettings.defaultColumnWidth;e&lt;t;)n+=this.wot.wtTable.getStretchedColumnWidth(e)||o,e++;return n},adjustElementsSize:function(){var e=void 0!==arguments[0]&amp;&amp;arguments[0];this.updateTrimmingContainer(),(this.needFullRender||e)&amp;&amp;(this.adjustRootElementSize(),this.adjustRootChildrenSize(),e||(this.areElementSizesAdjusted=!0))},adjustRootElementSize:function(){var e,t=this.wot.wtTable.holder,n=t.clientHeight===t.offsetHeight?0:a(),o=this.clone.wtTable.holder.parentNode,r=o.style,i=this.wot.getSetting("preventOverflow");if(this.trimmingContainer!==window||"vertical"===i){var s=this.wot.wtViewport.getWorkspaceHeight()-n;s=Math.min(s,h(this.wot.wtTable.wtRootElement)),r.height=s+"px"}else r.height="";this.clone.wtTable.holder.style.height=r.height,e=d(this.clone.wtTable.TABLE),r.width=(0===e?e:e+4)+"px"},adjustRootChildrenSize:function(){var e=a();this.clone.wtTable.hider.style.height=this.hider.style.height,this.clone.wtTable.holder.style.height=this.clone.wtTable.holder.parentNode.style.height,0===e&amp;&amp;(e=30),this.clone.wtTable.holder.style.width=parseInt(this.clone.wtTable.holder.parentNode.style.width,10)+e+"px"},applyToDOM:function(){var e=this.wot.getSetting("totalColumns");if(this.areElementSizesAdjusted||this.adjustElementsSize(),"number"==typeof this.wot.wtViewport.columnsRenderCalculator.startPosition)this.spreader.style.left=this.wot.wtViewport.columnsRenderCalculator.startPosition+"px";else{if(0!==e)throw new Error("Incorrect value of the columnsRenderCalculator");this.spreader.style.left="0"}this.spreader.style.right="",this.needFullRender&amp;&amp;this.syncOverlayOffset()},syncOverlayOffset:function(){"number"==typeof this.wot.wtViewport.rowsRenderCalculator.startPosition?this.clone.wtTable.spreader.style.top=this.wot.wtViewport.rowsRenderCalculator.startPosition+"px":this.clone.wtTable.spreader.style.top=""},scrollTo:function(e,t){var n=this.getTableParentOffset(),o=this.wot.cloneSource?this.wot.cloneSource:this.wot,r=o.wtTable.holder,i=0;t&amp;&amp;r.offsetWidth!==r.clientWidth&amp;&amp;(i=a()),t?(n+=this.sumCellSizes(0,e+1),n-=this.wot.wtViewport.getViewportWidth()):n+=this.sumCellSizes(this.wot.getSetting("fixedColumnsLeft"),e),n+=i,this.setScrollPosition(n)},getTableParentOffset:function(){var e=this.wot.getSetting("preventOverflow"),t=0;return e||this.trimmingContainer!==window||(t=this.wot.wtTable.holderOffset.left),t},getScrollPosition:function(){return l(this.mainTableScrollableElement)},adjustHeaderBordersPosition:function(e){var t=this.wot.wtTable.holder.parentNode,n=this.wot.getSetting("rowHeaders"),o=this.wot.getSetting("fixedColumnsLeft"),r=this.wot.getSetting("totalRows");if(r?f(t,"emptyRows"):s(t,"emptyRows"),o&amp;&amp;!n.length)s(t,"innerBorderLeft");else if(!o&amp;&amp;n.length){var i=c(t,"innerBorderLeft");e?s(t,"innerBorderLeft"):f(t,"innerBorderLeft"),(!i&amp;&amp;e||i&amp;&amp;!e)&amp;&amp;this.wot.wtOverlays.adjustElementsSize()}}},{},g),window.WalkontableLeftOverlay=w,g.registerOverlay(g.CLONE_LEFT,w)},{_base:12,"helpers/dom/element":47}],15:[function(e,t,n){"use strict";Object.defineProperties(n,{WalkontableTopOverlay:{get:function(){return w}},__esModule:{value:!0}});var o,r,i=(o=e("helpers/dom/element"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}),s=i.addClass,a=i.getScrollbarWidth,l=i.getScrollTop,u=i.getWindowScrollLeft,c=i.hasClass,d=i.outerHeight,h=i.innerWidth,f=i.removeClass,p=i.setOverlayPosition,m=i.resetCssTransform,g=(r=e("_base"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).WalkontableOverlay,w=function(e){$traceurRuntime.superConstructor(v).call(this,e),this.clone=this.makeClone(g.CLONE_TOP)},v=w;$traceurRuntime.createClass(w,{shouldBeRendered:function(){return!(!this.wot.getSetting("fixedRowsTop")&amp;&amp;!this.wot.getSetting("columnHeaders").length)},resetFixedPosition:function(){if(this.needFullRender&amp;&amp;this.wot.wtTable.holder.parentNode){var e=this.clone.wtTable.holder.parentNode,t=0,n=this.wot.getSetting("preventOverflow");if(this.trimmingContainer!==window||n&amp;&amp;"vertical"===n)t=this.getScrollPosition(),m(e);else{var o,r,i=this.wot.wtTable.hider.getBoundingClientRect(),s=Math.ceil(i.top),a=Math.ceil(i.bottom);o=this.wot.wtTable.hider.style.left,o=""===o?0:o,r=s&lt;0&amp;&amp;a-e.offsetHeight&gt;0?-s:0,t=r,r+="px",p(e,o,r)}this.adjustHeaderBordersPosition(t),this.adjustElementsSize()}},setScrollPosition:function(e){this.mainTableScrollableElement===window?window.scrollTo(u(),e):this.mainTableScrollableElement.scrollTop=e},onScroll:function(){this.wot.getSetting("onScrollHorizontally")},sumCellSizes:function(e,t){for(var n=0,o=this.wot.wtSettings.settings.defaultRowHeight;e&lt;t;){var r=this.wot.wtTable.getRowHeight(e);n+=void 0===r?o:r,e++}return n},adjustElementsSize:function(){var e=void 0!==arguments[0]&amp;&amp;arguments[0];this.updateTrimmingContainer(),(this.needFullRender||e)&amp;&amp;(this.adjustRootElementSize(),this.adjustRootChildrenSize(),e||(this.areElementSizesAdjusted=!0))},adjustRootElementSize:function(){var e,t=this.wot.wtTable.holder,n=t.clientWidth===t.offsetWidth?0:a(),o=this.clone.wtTable.holder.parentNode,r=o.style,i=this.wot.getSetting("preventOverflow");if(this.trimmingContainer!==window||"horizontal"===i){var s=this.wot.wtViewport.getWorkspaceWidth()-n;s=Math.min(s,h(this.wot.wtTable.wtRootElement)),r.width=s+"px"}else r.width="";this.clone.wtTable.holder.style.width=r.width,e=d(this.clone.wtTable.TABLE),r.height=(0===e?e:e+4)+"px"},adjustRootChildrenSize:function(){var e=a();this.clone.wtTable.hider.style.width=this.hider.style.width,this.clone.wtTable.holder.style.width=this.clone.wtTable.holder.parentNode.style.width,0===e&amp;&amp;(e=30),this.clone.wtTable.holder.style.height=parseInt(this.clone.wtTable.holder.parentNode.style.height,10)+e+"px"},applyToDOM:function(){var e=this.wot.getSetting("totalRows");if(this.areElementSizesAdjusted||this.adjustElementsSize(),"number"==typeof this.wot.wtViewport.rowsRenderCalculator.startPosition)this.spreader.style.top=this.wot.wtViewport.rowsRenderCalculator.startPosition+"px";else{if(0!==e)throw new Error("Incorrect value of the rowsRenderCalculator");this.spreader.style.top="0"}this.spreader.style.bottom="",this.needFullRender&amp;&amp;this.syncOverlayOffset()},syncOverlayOffset:function(){"number"==typeof this.wot.wtViewport.columnsRenderCalculator.startPosition?this.clone.wtTable.spreader.style.left=this.wot.wtViewport.columnsRenderCalculator.startPosition+"px":this.clone.wtTable.spreader.style.left=""},scrollTo:function(e,t){var n=this.getTableParentOffset(),o=this.wot.cloneSource?this.wot.cloneSource:this.wot,r=o.wtTable.holder,i=0;if(t&amp;&amp;r.offsetHeight!==r.clientHeight&amp;&amp;(i=a()),t){var s=this.wot.getSetting("fixedRowsBottom"),l=(this.wot.getSetting("fixedRowsTop"),this.wot.getSetting("totalRows"));n+=this.sumCellSizes(0,e+1),n-=this.wot.wtViewport.getViewportHeight()-this.sumCellSizes(l-s,l),n+=1}else n+=this.sumCellSizes(this.wot.getSetting("fixedRowsTop"),e);n+=i,this.setScrollPosition(n)},getTableParentOffset:function(){return this.mainTableScrollableElement===window?this.wot.wtTable.holderOffset.top:0},getScrollPosition:function(){return l(this.mainTableScrollableElement)},adjustHeaderBordersPosition:function(e){var t=this.wot.wtTable.holder.parentNode,n=this.wot.getSetting("totalColumns");if(n?f(t,"emptyColumns"):s(t,"emptyColumns"),0===this.wot.getSetting("fixedRowsTop")&amp;&amp;this.wot.getSetting("columnHeaders").length&gt;0){var o=c(t,"innerBorderTop");e||0===this.wot.getSetting("totalRows")?s(t,"innerBorderTop"):f(t,"innerBorderTop"),(!o&amp;&amp;e||o&amp;&amp;!e)&amp;&amp;this.wot.wtOverlays.adjustElementsSize()}if(0===this.wot.getSetting("rowHeaders").length){var r=this.clone.wtTable.THEAD.querySelectorAll("th:nth-of-type(2)");if(r)for(var i=0;i&lt;r.length;i++)r[i].style["border-left-width"]=0}}},{},g),window.WalkontableTopOverlay=w,g.registerOverlay(g.CLONE_TOP,w)},{_base:12,"helpers/dom/element":47}],16:[function(e,t,n){"use strict";Object.defineProperties(n,{WalkontableTopLeftCornerOverlay:{get:function(){return d}},__esModule:{value:!0}});var o,r,i=(o=e("helpers/dom/element"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}),s=i.outerHeight,a=i.outerWidth,l=i.setOverlayPosition,u=i.resetCssTransform,c=(r=e("_base"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).WalkontableOverlay,d=function(e){$traceurRuntime.superConstructor(h).call(this,e),this.clone=this.makeClone(c.CLONE_TOP_LEFT_CORNER)},h=d;$traceurRuntime.createClass(d,{shouldBeRendered:function(){return!(!this.wot.getSetting("fixedRowsTop")&amp;&amp;!this.wot.getSetting("columnHeaders").length||!this.wot.getSetting("fixedColumnsLeft")&amp;&amp;!this.wot.getSetting("rowHeaders").length)},resetFixedPosition:function(){if(this.updateTrimmingContainer(),this.wot.wtTable.holder.parentNode){var e=this.clone.wtTable.holder.parentNode,t=s(this.clone.wtTable.TABLE),n=a(this.clone.wtTable.TABLE),o=this.wot.getSetting("preventOverflow");if(this.trimmingContainer===window){var r=this.wot.wtTable.hider.getBoundingClientRect(),i=Math.ceil(r.top),c=Math.ceil(r.left),d=Math.ceil(r.bottom),h=Math.ceil(r.right),f="0",p="0";o&amp;&amp;"vertical"!==o||c&lt;0&amp;&amp;h-e.offsetWidth&gt;0&amp;&amp;(f=-c+"px"),o&amp;&amp;"horizontal"!==o||i&lt;0&amp;&amp;d-e.offsetHeight&gt;0&amp;&amp;(p=-i+"px"),l(e,f,p)}else u(e);e.style.height=(0===t?t:t+4)+"px",e.style.width=(0===n?n:n+4)+"px"}}},{},c),window.WalkontableTopLeftCornerOverlay=d,c.registerOverlay(c.CLONE_TOP_LEFT_CORNER,d)},{_base:12,"helpers/dom/element":47}],17:[function(e,t,n){"use strict";Object.defineProperties(n,{WalkontableOverlays:{get:function(){return w}},__esModule:{value:!0}});var o,r,i,s,a,l=(o=e("helpers/dom/element"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}),u=l.getScrollableElement,c=l.getScrollbarWidth,d=l.getScrollLeft,h=l.getScrollTop,f=(r=e("helpers/array"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).arrayEach,p=(i=e("helpers/unicode"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).isKey,m=(s=e("helpers/browser"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).isMobileBrowser,g=(a=e("eventManager"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).EventManager,w=function(e){this.wot=e,this.instance=this.wot,this.eventManager=new g(this.wot),this.wot.update("scrollbarWidth",c()),this.wot.update("scrollbarHeight",c()),this.scrollableElement=u(this.wot.wtTable.TABLE),this.prepareOverlays(),this.destroyed=!1,this.keyPressed=!1,this.spreaderLastSize={width:null,height:null},this.overlayScrollPositions={master:{top:0,left:0},top:{top:null,left:0},bottom:{top:null,left:0},left:{top:0,left:null}},this.pendingScrollCallbacks={master:{top:0,left:0},top:{left:0},bottom:{left:0},left:{top:0}},this.verticalScrolling=!1,this.horizontalScrolling=!1,this.delegatedScrollCallback=!1,this.registeredListeners=[],this.registerListeners()};$traceurRuntime.createClass(w,{prepareOverlays:function(){var e=!1;return this.topOverlay?e=this.topOverlay.updateStateOfRendering()||e:this.topOverlay=WalkontableOverlay.createOverlay(WalkontableOverlay.CLONE_TOP,this.wot),"undefined"==typeof WalkontableBottomOverlay&amp;&amp;(this.bottomOverlay={needFullRender:!1,updateStateOfRendering:function(){return!1}}),"undefined"==typeof WalkontableBottomLeftCornerOverlay&amp;&amp;(this.bottomLeftCornerOverlay={needFullRender:!1,updateStateOfRendering:function(){return!1}}),this.bottomOverlay?e=this.bottomOverlay.updateStateOfRendering()||e:this.bottomOverlay=WalkontableOverlay.createOverlay(WalkontableOverlay.CLONE_BOTTOM,this.wot),this.leftOverlay?e=this.leftOverlay.updateStateOfRendering()||e:this.leftOverlay=WalkontableOverlay.createOverlay(WalkontableOverlay.CLONE_LEFT,this.wot),this.topOverlay.needFullRender&amp;&amp;this.leftOverlay.needFullRender&amp;&amp;(this.topLeftCornerOverlay?e=this.topLeftCornerOverlay.updateStateOfRendering()||e:this.topLeftCornerOverlay=WalkontableOverlay.createOverlay(WalkontableOverlay.CLONE_TOP_LEFT_CORNER,this.wot)),this.bottomOverlay.needFullRender&amp;&amp;this.leftOverlay.needFullRender&amp;&amp;(this.bottomLeftCornerOverlay?e=this.bottomLeftCornerOverlay.updateStateOfRendering()||e:this.bottomLeftCornerOverlay=WalkontableOverlay.createOverlay(WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER,this.wot)),this.wot.getSetting("debug")&amp;&amp;!this.debug&amp;&amp;(this.debug=WalkontableOverlay.createOverlay(WalkontableOverlay.CLONE_DEBUG,this.wot)),e},refreshAll:function(){if(this.wot.drawn){if(!this.wot.wtTable.holder.parentNode)return void this.destroy();this.wot.draw(!0),this.verticalScrolling&amp;&amp;this.leftOverlay.onScroll(),this.horizontalScrolling&amp;&amp;this.topOverlay.onScroll(),this.verticalScrolling=!1,this.horizontalScrolling=!1}},registerListeners:function(){var e=this,t=this.topOverlay.mainTableScrollableElement,n=this.leftOverlay.mainTableScrollableElement,o=[];for(o.push([document.documentElement,"keydown",function(t){return e.onKeyDown(t)}]),o.push([document.documentElement,"keyup",function(){return e.onKeyUp()}]),o.push([document,"visibilitychange",function(){return e.onKeyUp()}]),o.push([t,"scroll",function(t){return e.onTableScroll(t)}]),t!==n&amp;&amp;o.push([n,"scroll",function(t){return e.onTableScroll(t)}]),this.topOverlay.needFullRender&amp;&amp;(o.push([this.topOverlay.clone.wtTable.holder,"scroll",function(t){return e.onTableScroll(t)}]),o.push([this.topOverlay.clone.wtTable.holder,"wheel",function(t){return e.onTableScroll(t)}])),this.bottomOverlay.needFullRender&amp;&amp;(o.push([this.bottomOverlay.clone.wtTable.holder,"scroll",function(t){return e.onTableScroll(t)}]),o.push([this.bottomOverlay.clone.wtTable.holder,"wheel",function(t){return e.onTableScroll(t)}])),this.leftOverlay.needFullRender&amp;&amp;(o.push([this.leftOverlay.clone.wtTable.holder,"scroll",function(t){return e.onTableScroll(t)}]),o.push([this.leftOverlay.clone.wtTable.holder,"wheel",function(t){return e.onTableScroll(t)}])),this.topLeftCornerOverlay&amp;&amp;this.topLeftCornerOverlay.needFullRender&amp;&amp;o.push([this.topLeftCornerOverlay.clone.wtTable.holder,"wheel",function(t){return e.onTableScroll(t)}]),this.bottomLeftCornerOverlay&amp;&amp;this.bottomLeftCornerOverlay.needFullRender&amp;&amp;o.push([this.bottomLeftCornerOverlay.clone.wtTable.holder,"wheel",function(t){return e.onTableScroll(t)}]),this.topOverlay.trimmingContainer!==window&amp;&amp;this.leftOverlay.trimmingContainer!==window&amp;&amp;o.push([window,"wheel",function(t){var n,o=t.wheelDeltaY||t.deltaY,r=t.wheelDeltaX||t.deltaX;e.topOverlay.clone.wtTable.holder.contains(t.realTarget)?n="top":e.bottomOverlay.clone&amp;&amp;e.bottomOverlay.clone.wtTable.holder.contains(t.realTarget)?n="bottom":e.leftOverlay.clone.wtTable.holder.contains(t.realTarget)?n="left":e.topLeftCornerOverlay&amp;&amp;e.topLeftCornerOverlay.clone&amp;&amp;e.topLeftCornerOverlay.clone.wtTable.holder.contains(t.realTarget)?n="topLeft":e.bottomLeftCornerOverlay&amp;&amp;e.bottomLeftCornerOverlay.clone&amp;&amp;e.bottomLeftCornerOverlay.clone.wtTable.holder.contains(t.realTarget)&amp;&amp;(n="bottomLeft"),("top"==n&amp;&amp;0!==o||"left"==n&amp;&amp;0!==r||"bottom"==n&amp;&amp;0!==o||("topLeft"===n||"bottomLeft"===n)&amp;&amp;(0!==o||0!==r))&amp;&amp;t.preventDefault()}]);o.length;){var r=o.pop();this.eventManager.addEventListener(r[0],r[1],r[2]),this.registeredListeners.push(r)}},deregisterListeners:function(){for(;this.registeredListeners.length;){var e=this.registeredListeners.pop();this.eventManager.removeEventListener(e[0],e[1],e[2])}},onTableScroll:function(e){if(!m()){var t=this.leftOverlay.mainTableScrollableElement,n=this.topOverlay.mainTableScrollableElement,o=e.target;this.keyPressed&amp;&amp;(n!==window&amp;&amp;o!==window&amp;&amp;!e.target.contains(n)||t!==window&amp;&amp;o!==window&amp;&amp;!e.target.contains(t))||("scroll"===e.type?this.syncScrollPositions(e):this.translateMouseWheelToScroll(e))}},onKeyDown:function(e){this.keyPressed=p(e.keyCode,"ARROW_UP|ARROW_RIGHT|ARROW_DOWN|ARROW_LEFT")},onKeyUp:function(){this.keyPressed=!1},translateMouseWheelToScroll:function(e){var t=this.topOverlay.clone.wtTable.holder,n=this.bottomOverlay.clone?this.bottomOverlay.clone.wtTable.holder:null,o=this.leftOverlay.clone.wtTable.holder,r=this.topLeftCornerOverlay&amp;&amp;this.topLeftCornerOverlay.clone?this.topLeftCornerOverlay.clone.wtTable.holder:null,i=this.bottomLeftCornerOverlay&amp;&amp;this.bottomLeftCornerOverlay.clone?this.bottomLeftCornerOverlay.clone.wtTable.holder:null,s=-.2,a=e.wheelDeltaY||-1*e.deltaY,l=e.wheelDeltaX||-1*e.deltaX,u=null,c={type:"wheel"},d=e.target,h=null;for(1===e.deltaMode&amp;&amp;(a*=120,l*=120);d!=document&amp;&amp;null!=d;){if(d.className.indexOf("wtHolder")&gt;-1){u=d;break}d=d.parentNode}return c.target=u,u===r||u===i?(this.syncScrollPositions(c,s*l,"x"),this.syncScrollPositions(c,s*a,"y")):(u===t||u===n?h=a:u===o&amp;&amp;(h=l),this.syncScrollPositions(c,s*h)),!1},syncScrollPositions:function(e){var t=void 0!==arguments[1]?arguments[1]:null,n=void 0!==arguments[2]?arguments[2]:null;if(!this.destroyed){if(0===arguments.length)return void this.syncScrollWithMaster();var o,r,i,s,a,l=this.leftOverlay.mainTableScrollableElement,u=this.topOverlay.mainTableScrollableElement,c=e.target,f=0,p=!1,m=!1,g=this.wot.getSetting("preventOverflow");this.topOverlay.needFullRender&amp;&amp;(o=this.topOverlay.clone.wtTable.holder),this.bottomOverlay.needFullRender&amp;&amp;(a=this.bottomOverlay.clone.wtTable.holder),this.leftOverlay.needFullRender&amp;&amp;(r=this.leftOverlay.clone.wtTable.holder),this.leftOverlay.needFullRender&amp;&amp;this.topOverlay.needFullRender&amp;&amp;(i=this.topLeftCornerOverlay.clone.wtTable.holder),this.leftOverlay.needFullRender&amp;&amp;this.bottomOverlay.needFullRender&amp;&amp;(s=this.bottomLeftCornerOverlay.clone.wtTable.holder),c===document&amp;&amp;(c=window),c===l||c===u?(f=d(g?this.scrollableElement:c),this.horizontalScrolling=!0,this.overlayScrollPositions.master.left=f,p=!0,this.pendingScrollCallbacks.master.left&gt;0?this.pendingScrollCallbacks.master.left--:(o&amp;&amp;o.scrollLeft!==f&amp;&amp;(null==t&amp;&amp;this.pendingScrollCallbacks.top.left++,o.scrollLeft=f,m=l!==window),a&amp;&amp;a.scrollLeft!==f&amp;&amp;(null==t&amp;&amp;this.pendingScrollCallbacks.bottom.left++,a.scrollLeft=f,m=l!==window)),f=h(c),this.verticalScrolling=!0,this.overlayScrollPositions.master.top=f,p=!0,this.pendingScrollCallbacks.master.top&gt;0?this.pendingScrollCallbacks.master.top--:r&amp;&amp;r.scrollTop!==f&amp;&amp;(null==t&amp;&amp;this.pendingScrollCallbacks.left.top++,r.scrollTop=f,m=u!==window)):c===a?(f=d(c),this.horizontalScrolling=!0,this.overlayScrollPositions.bottom.left=f,p=!0,this.pendingScrollCallbacks.bottom.left&gt;0?this.pendingScrollCallbacks.bottom.left--:(null==t&amp;&amp;this.pendingScrollCallbacks.master.left++,l.scrollLeft=f,o&amp;&amp;o.scrollLeft!==f&amp;&amp;(null==t&amp;&amp;this.pendingScrollCallbacks.top.left++,o.scrollLeft=f,m=u!==window)),null!==t&amp;&amp;(p=!0,u.scrollTop+=t)):c===o?(f=d(c),this.horizontalScrolling=!0,this.overlayScrollPositions.top.left=f,p=!0,this.pendingScrollCallbacks.top.left&gt;0?this.pendingScrollCallbacks.top.left--:(null==t&amp;&amp;this.pendingScrollCallbacks.master.left++,l.scrollLeft=f),null!==t&amp;&amp;(p=!0,u.scrollTop+=t),a&amp;&amp;a.scrollLeft!==f&amp;&amp;(null==t&amp;&amp;this.pendingScrollCallbacks.bottom.left++,a.scrollLeft=f,m=u!==window)):c===r?(f=h(c),this.overlayScrollPositions.left.top!==f&amp;&amp;(this.verticalScrolling=!0,this.overlayScrollPositions.left.top=f,p=!0,this.pendingScrollCallbacks.left.top&gt;0?this.pendingScrollCallbacks.left.top--:(null==t&amp;&amp;this.pendingScrollCallbacks.master.top++,u.scrollTop=f)),null!==t&amp;&amp;(p=!0,u.scrollLeft+=t)):c!==i&amp;&amp;c!==s||null!==t&amp;&amp;(p=!0,"x"===n?u.scrollLeft+=t:"y"===n&amp;&amp;(u.scrollTop+=t)),!this.keyPressed&amp;&amp;p&amp;&amp;"scroll"===e.type&amp;&amp;(this.delegatedScrollCallback?this.delegatedScrollCallback=!1:this.refreshAll(),m&amp;&amp;(this.delegatedScrollCallback=!0))}},syncScrollWithMaster:function(){var e=this.topOverlay.mainTableScrollableElement,t=e,n=t.scrollLeft,o=t.scrollTop;this.topOverlay.needFullRender&amp;&amp;(this.topOverlay.clone.wtTable.holder.scrollLeft=n),this.bottomOverlay.needFullRender&amp;&amp;(this.bottomOverlay.clone.wtTable.holder.scrollLeft=n),this.leftOverlay.needFullRender&amp;&amp;(this.leftOverlay.clone.wtTable.holder.scrollTop=o)},updateMainScrollableElements:function(){this.deregisterListeners(),this.leftOverlay.updateMainScrollableElement(),this.topOverlay.updateMainScrollableElement(),this.bottomOverlay.needFullRender&amp;&amp;this.bottomOverlay.updateMainScrollableElement(),this.scrollableElement=u(this.wot.wtTable.TABLE),this.registerListeners()},destroy:function(){this.eventManager.destroy(),this.topOverlay.destroy(),this.bottomOverlay.clone&amp;&amp;this.bottomOverlay.destroy(),this.leftOverlay.destroy(),this.topLeftCornerOverlay&amp;&amp;this.topLeftCornerOverlay.destroy(),this.bottomLeftCornerOverlay&amp;&amp;this.bottomLeftCornerOverlay.clone&amp;&amp;this.bottomLeftCornerOverlay.destroy(),this.debug&amp;&amp;this.debug.destroy(),this.destroyed=!0},refresh:function(){var e=void 0!==arguments[0]&amp;&amp;arguments[0];if(this.topOverlay.areElementSizesAdjusted&amp;&amp;this.leftOverlay.areElementSizesAdjusted){var t=this.wot.wtTable.wtRootElement.parentNode||this.wot.wtTable.wtRootElement,n=t.clientWidth,o=t.clientHeight;n===this.spreaderLastSize.width&amp;&amp;o===this.spreaderLastSize.height||(this.spreaderLastSize.width=n,this.spreaderLastSize.height=o,this.adjustElementsSize())}this.bottomOverlay.clone&amp;&amp;this.bottomOverlay.refresh(e),this.leftOverlay.refresh(e),this.topOverlay.refresh(e),this.topLeftCornerOverlay&amp;&amp;this.topLeftCornerOverlay.refresh(e),this.bottomLeftCornerOverlay&amp;&amp;this.bottomLeftCornerOverlay.clone&amp;&amp;this.bottomLeftCornerOverlay.refresh(e),this.debug&amp;&amp;this.debug.refresh(e)},adjustElementsSize:function(){var e=void 0!==arguments[0]&amp;&amp;arguments[0],t=this.wot.getSetting("totalColumns"),n=this.wot.getSetting("totalRows"),o=this.wot.wtViewport.getRowHeaderWidth(),r=this.wot.wtViewport.getColumnHeaderHeight(),i=this.wot.wtTable.hider.style;i.width=o+this.leftOverlay.sumCellSizes(0,t)+"px",i.height=r+this.topOverlay.sumCellSizes(0,n)+1+"px",this.topOverlay.adjustElementsSize(e),this.leftOverlay.adjustElementsSize(e),this.bottomOverlay.clone&amp;&amp;this.bottomOverlay.adjustElementsSize(e)},applyToDOM:function(){this.topOverlay.areElementSizesAdjusted&amp;&amp;this.leftOverlay.areElementSizesAdjusted||this.adjustElementsSize(),this.topOverlay.applyToDOM(),this.bottomOverlay.clone&amp;&amp;this.bottomOverlay.applyToDOM(),this.leftOverlay.applyToDOM()},getParentOverlay:function(e){if(!e)return null;var t=[this.topOverlay,this.leftOverlay,this.bottomOverlay,this.topLeftCornerOverlay,this.bottomLeftCornerOverlay],n=null;return f(t,function(t,o){t&amp;&amp;t.clone&amp;&amp;t.clone.wtTable.TABLE.contains(e)&amp;&amp;(n=t.clone)}),n}},{}),window.WalkontableOverlays=w},{eventManager:42,"helpers/array":43,"helpers/browser":44,"helpers/dom/element":47,"helpers/unicode":56}],18:[function(e,t,n){"use strict";Object.defineProperties(n,{WalkontableScroll:{get:function(){return p}},__esModule:{value:!0}});var o,r,i=(o=e("helpers/dom/element"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}),s=i.innerHeight,a=i.innerWidth,l=i.getScrollLeft,u=i.getScrollTop,c=i.offset,d=(r=e("helpers/number"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}),h=d.rangeEach,f=d.rangeEachReverse,p=function(e){this.wot=e,this.instance=e};$traceurRuntime.createClass(p,{scrollViewport:function(e){if(this.wot.drawn){var t=this._getVariables(),n=t.topOverlay,o=t.leftOverlay,r=t.totalRows,i=t.totalColumns,s=t.fixedRowsTop,a=t.fixedRowsBottom,l=t.fixedColumnsLeft;if(e.row&lt;0||e.row&gt;Math.max(r-1,0))throw new Error("row "+e.row+" does not exist");if(e.col&lt;0||e.col&gt;Math.max(i-1,0))throw new Error("column "+e.col+" does not exist");e.row&gt;=s&amp;&amp;e.row&lt;this.getFirstVisibleRow()?n.scrollTo(e.row):e.row&gt;this.getLastVisibleRow()&amp;&amp;e.row&lt;r-a&amp;&amp;n.scrollTo(e.row,!0),e.col&gt;=l&amp;&amp;e.col&lt;this.getFirstVisibleColumn()?o.scrollTo(e.col):e.col&gt;this.getLastVisibleColumn()&amp;&amp;o.scrollTo(e.col,!0)}},getFirstVisibleRow:function(){var e=this._getVariables(),t=e.topOverlay,n=e.wtTable,o=e.wtViewport,r=e.totalRows,i=e.fixedRowsTop,a=n.getFirstVisibleRow();if(t.mainTableScrollableElement===window){var l=c(n.wtRootElement),d=s(n.hider),h=s(window),p=u(window);if(l.top+d-h&lt;=p){var m=o.getColumnHeaderHeight();m+=t.sumCellSizes(0,i),f(r,1,function(e){if(m+=t.sumCellSizes(e-1,e),l.top+d-m&lt;=p)return a=e,!1})}}return a},getLastVisibleRow:function(){var e=this._getVariables(),t=e.topOverlay,n=e.wtTable,o=e.wtViewport,r=e.totalRows,i=n.getLastVisibleRow();if(t.mainTableScrollableElement===window){var a=c(n.wtRootElement),l=s(window),d=u(window);if(a.top&gt;d){var f=o.getColumnHeaderHeight();h(1,r,function(e){if(f+=t.sumCellSizes(e-1,e),a.top+f-d&gt;=l)return i=e-2,!1})}}return i},getFirstVisibleColumn:function(){var e=this._getVariables(),t=e.leftOverlay,n=e.wtTable,o=e.wtViewport,r=e.totalColumns,i=(e.fixedColumnsLeft,n.getFirstVisibleColumn());if(t.mainTableScrollableElement===window){var s=c(n.wtRootElement),u=a(n.hider),d=a(window),h=l(window);if(s.left+u-d&lt;=h){var p=o.getRowHeaderWidth();f(r,1,function(e){if(p+=t.sumCellSizes(e-1,e),s.left+u-p&lt;=h)return i=e,!1})}}return i},getLastVisibleColumn:function(){var e=this._getVariables(),t=e.leftOverlay,n=e.wtTable,o=e.wtViewport,r=e.totalColumns,i=n.getLastVisibleColumn();if(t.mainTableScrollableElement===window){var s=c(n.wtRootElement),u=a(window),d=l(window);if(s.left&gt;d){var f=o.getRowHeaderWidth();h(1,r,function(e){if(f+=t.sumCellSizes(e-1,e),s.left+f-d&gt;=u)return i=e-2,!1})}}return i},_getVariables:function(){var e=this.wot,t=e.wtOverlays.topOverlay,n=e.wtOverlays.leftOverlay,o=e.wtTable,r=e.wtViewport,i=e.getSetting("totalRows"),s=e.getSetting("totalColumns"),a=e.getSetting("fixedRowsTop"),l=e.getSetting("fixedRowsBottom"),u=e.getSetting("fixedColumnsLeft");return{topOverlay:t,leftOverlay:n,wtTable:o,wtViewport:r,totalRows:i,totalColumns:s,fixedRowsTop:a,fixedRowsBottom:l,fixedColumnsLeft:u}}},{}),window.WalkontableScroll=p},{"helpers/dom/element":47,"helpers/number":52}],19:[function(e,t,n){"use strict";Object.defineProperties(n,{WalkontableSelection:{get:function(){return d}},__esModule:{value:!0}});var o,r,i,s,a=(o=e("helpers/dom/element"),
o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).addClass,l=(r=e("border"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).WalkontableBorder,u=(i=e("cell/coords"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).WalkontableCellCoords,c=(s=e("cell/range"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).WalkontableCellRange,d=function(e,t){this.settings=e,this.cellRange=t||null,this.instanceBorders={}};$traceurRuntime.createClass(d,{getBorder:function(e){return this.instanceBorders[e.guid]?this.instanceBorders[e.guid]:void(this.instanceBorders[e.guid]=new l(e,this.settings))},isEmpty:function(){return null===this.cellRange},add:function(e){this.isEmpty()?this.cellRange=new c(e,e,e):this.cellRange.expand(e)},replace:function(e,t){if(!this.isEmpty()){if(this.cellRange.from.isEqual(e))return this.cellRange.from=t,!0;if(this.cellRange.to.isEqual(e))return this.cellRange.to=t,!0}return!1},clear:function(){this.cellRange=null},getCorners:function(){var e=this.cellRange.getTopLeftCorner(),t=this.cellRange.getBottomRightCorner();return[e.row,e.col,t.row,t.col]},addClassAtCoords:function(e,t,n,o){var r=e.wtTable.getCell(new u(t,n));"object"==typeof r&amp;&amp;a(r,o)},draw:function(e){if(this.isEmpty()){if(this.settings.border){var t=this.getBorder(e);t&amp;&amp;t.disappear()}}else{for(var n,o,r,i=e.wtTable.getRenderedRowsCount(),s=e.wtTable.getRenderedColumnsCount(),l=this.getCorners(),u=0;u&lt;s;u++)if(o=e.wtTable.columnFilter.renderedToSource(u),o&gt;=l[1]&amp;&amp;o&lt;=l[3]&amp;&amp;(r=e.wtTable.getColumnHeader(o))){var c=[];this.settings.highlightHeaderClassName&amp;&amp;c.push(this.settings.highlightHeaderClassName),this.settings.highlightColumnClassName&amp;&amp;c.push(this.settings.highlightColumnClassName),a(r,c)}for(var d=0;d&lt;i;d++){if(n=e.wtTable.rowFilter.renderedToSource(d),n&gt;=l[0]&amp;&amp;n&lt;=l[2]&amp;&amp;(r=e.wtTable.getRowHeader(n))){var h=[];this.settings.highlightHeaderClassName&amp;&amp;h.push(this.settings.highlightHeaderClassName),this.settings.highlightRowClassName&amp;&amp;h.push(this.settings.highlightRowClassName),a(r,h)}for(var f=0;f&lt;s;f++)o=e.wtTable.columnFilter.renderedToSource(f),n&gt;=l[0]&amp;&amp;n&lt;=l[2]&amp;&amp;o&gt;=l[1]&amp;&amp;o&lt;=l[3]?this.settings.className&amp;&amp;this.addClassAtCoords(e,n,o,this.settings.className):n&gt;=l[0]&amp;&amp;n&lt;=l[2]?this.settings.highlightRowClassName&amp;&amp;this.addClassAtCoords(e,n,o,this.settings.highlightRowClassName):o&gt;=l[1]&amp;&amp;o&lt;=l[3]&amp;&amp;this.settings.highlightColumnClassName&amp;&amp;this.addClassAtCoords(e,n,o,this.settings.highlightColumnClassName)}if(e.getSetting("onBeforeDrawBorders",l,this.settings.className),this.settings.border){var p=this.getBorder(e);p&amp;&amp;p.appear(l)}}}},{}),window.WalkontableSelection=d},{border:3,"cell/coords":6,"cell/range":7,"helpers/dom/element":47}],20:[function(e,t,n){"use strict";Object.defineProperties(n,{WalkontableSettings:{get:function(){return i}},__esModule:{value:!0}});var o,r=(o=e("helpers/dom/element"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).fastInnerText,i=function(e,t){var n=this;this.wot=e,this.instance=e,this.defaults={table:void 0,debug:!1,externalRowCalculator:!1,stretchH:"none",currentRowClassName:null,currentColumnClassName:null,preventOverflow:function(){return!1},data:void 0,fixedColumnsLeft:0,fixedRowsTop:0,fixedRowsBottom:0,minSpareRows:0,rowHeaders:function(){return[]},columnHeaders:function(){return[]},totalRows:void 0,totalColumns:void 0,cellRenderer:function(e,t,o){var i=n.getSetting("data",e,t);r(o,void 0===i||null===i?"":i)},columnWidth:function(e){},rowHeight:function(e){},defaultRowHeight:23,defaultColumnWidth:50,selections:null,hideBorderOnMouseDownOver:!1,viewportRowCalculatorOverride:null,viewportColumnCalculatorOverride:null,onCellMouseDown:null,onCellMouseOver:null,onCellMouseUp:null,onCellDblClick:null,onCellCornerMouseDown:null,onCellCornerDblClick:null,beforeDraw:null,onDraw:null,onBeforeDrawBorders:null,onScrollVertically:null,onScrollHorizontally:null,onBeforeTouchScroll:null,onAfterMomentumScroll:null,onBeforeStretchingColumnWidth:function(e){return e},onModifyRowHeaderWidth:null,scrollbarWidth:10,scrollbarHeight:10,renderAllRows:!1,groups:!1,rowHeaderWidth:null,columnHeaderHeight:null,headerClassName:null},this.settings={};for(var o in this.defaults)if(this.defaults.hasOwnProperty(o))if(void 0!==t[o])this.settings[o]=t[o];else{if(void 0===this.defaults[o])throw new Error('A required setting "'+o+'" was not provided');this.settings[o]=this.defaults[o]}};$traceurRuntime.createClass(i,{update:function(e,t){if(void 0===t)for(var n in e)e.hasOwnProperty(n)&amp;&amp;(this.settings[n]=e[n]);else this.settings[e]=t;return this.wot},getSetting:function(e,t,n,o,r){return"function"==typeof this.settings[e]?this.settings[e](t,n,o,r):void 0!==t&amp;&amp;Array.isArray(this.settings[e])?this.settings[e][t]:this.settings[e]},has:function(e){return!!this.settings[e]}},{}),window.WalkontableSettings=i},{"helpers/dom/element":47}],21:[function(e,t,n){"use strict";Object.defineProperties(n,{WalkontableTable:{get:function(){return S}},__esModule:{value:!0}});var o,r,i,s,a,l,u,c=(o=e("helpers/dom/element"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}),d=c.getStyle,h=c.getTrimmingContainer,f=c.hasClass,p=c.index,m=c.offset,g=c.removeClass,w=c.removeTextNodes,v=c.overlayContainsElement,y=c.closest,b=(r=e("helpers/function"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).isFunction,C=(i=e("cell/coords"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).WalkontableCellCoords,_=((s=e("cell/range"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).WalkontableCellRange,(a=e("filter/column"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).WalkontableColumnFilter),R=(l=e("filter/row"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).WalkontableRowFilter,M=(u=e("tableRenderer"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).WalkontableTableRenderer,S=function(e,t){var n=this;this.wot=e,this.instance=this.wot,this.TABLE=t,this.TBODY=null,this.THEAD=null,this.COLGROUP=null,this.tableOffset=0,this.holderOffset=0,w(this.TABLE),this.spreader=this.createSpreader(this.TABLE),this.hider=this.createHider(this.spreader),this.holder=this.createHolder(this.hider),this.wtRootElement=this.holder.parentNode,this.alignOverlaysWithTrimmingContainer(),this.fixTableDomTree(),this.colgroupChildrenLength=this.COLGROUP.childNodes.length,this.theadChildrenLength=this.THEAD.firstChild?this.THEAD.firstChild.childNodes.length:0,this.tbodyChildrenLength=this.TBODY.childNodes.length,this.rowFilter=null,this.columnFilter=null,this.correctHeaderWidth=!1;var o=this.wot.wtSettings.settings.rowHeaderWidth;this.wot.wtSettings.settings.rowHeaderWidth=function(){return n._modifyRowHeaderWidth(o)}};$traceurRuntime.createClass(S,{fixTableDomTree:function(){this.TBODY=this.TABLE.querySelector("tbody"),this.TBODY||(this.TBODY=document.createElement("tbody"),this.TABLE.appendChild(this.TBODY)),this.THEAD=this.TABLE.querySelector("thead"),this.THEAD||(this.THEAD=document.createElement("thead"),this.TABLE.insertBefore(this.THEAD,this.TBODY)),this.COLGROUP=this.TABLE.querySelector("colgroup"),this.COLGROUP||(this.COLGROUP=document.createElement("colgroup"),this.TABLE.insertBefore(this.COLGROUP,this.THEAD)),this.wot.getSetting("columnHeaders").length&amp;&amp;!this.THEAD.childNodes.length&amp;&amp;this.THEAD.appendChild(document.createElement("TR"))},createSpreader:function(e){var t,n=e.parentNode;return n&amp;&amp;1===n.nodeType&amp;&amp;f(n,"wtHolder")||(t=document.createElement("div"),t.className="wtSpreader",n&amp;&amp;n.insertBefore(t,e),t.appendChild(e)),t.style.position="relative",t},createHider:function(e){var t,n=e.parentNode;return n&amp;&amp;1===n.nodeType&amp;&amp;f(n,"wtHolder")||(t=document.createElement("div"),t.className="wtHider",n&amp;&amp;n.insertBefore(t,e),t.appendChild(e)),t},createHolder:function(e){var t,n=e.parentNode;return n&amp;&amp;1===n.nodeType&amp;&amp;f(n,"wtHolder")||(t=document.createElement("div"),t.style.position="relative",t.className="wtHolder",n&amp;&amp;n.insertBefore(t,e),this.isWorkingOnClone()||(t.parentNode.className+="ht_master handsontable"),t.appendChild(e)),t},alignOverlaysWithTrimmingContainer:function(){var e=h(this.wtRootElement);if(!this.isWorkingOnClone())if(this.holder.parentNode.style.position="relative",e===window){var t=this.wot.getSetting("preventOverflow");t||(this.holder.style.overflow="visible",this.wtRootElement.style.overflow="visible")}else this.holder.style.width=d(e,"width"),this.holder.style.height=d(e,"height"),this.holder.style.overflow=""},isWorkingOnClone:function(){return!!this.wot.cloneSource},draw:function(e){var t=this.wot,n=t.wtOverlays,o=t.wtViewport,r=this.instance.getSetting("totalRows"),i=this.wot.getSetting("rowHeaders").length,s=this.wot.getSetting("columnHeaders").length,a=!1;if(!this.isWorkingOnClone()&amp;&amp;(this.holderOffset=m(this.holder),e=o.createRenderCalculators(e),i&amp;&amp;!this.wot.getSetting("fixedColumnsLeft"))){var l=n.leftOverlay.getScrollPosition(),u=this.correctHeaderWidth;this.correctHeaderWidth=l&gt;0,u!==this.correctHeaderWidth&amp;&amp;(e=!1)}if(this.isWorkingOnClone()||(a=n.prepareOverlays()),e)this.isWorkingOnClone()||o.createVisibleCalculators(),n&amp;&amp;n.refresh(!0);else{this.isWorkingOnClone()?this.tableOffset=this.wot.cloneSource.wtTable.tableOffset:this.tableOffset=m(this.TABLE);var c;c=WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_DEBUG)||WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_TOP)||WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_TOP_LEFT_CORNER)?0:WalkontableOverlay.isOverlayTypeOf(this.instance.cloneOverlay,WalkontableOverlay.CLONE_BOTTOM)||WalkontableOverlay.isOverlayTypeOf(this.instance.cloneOverlay,WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER)?Math.max(r-this.wot.getSetting("fixedRowsBottom"),0):o.rowsRenderCalculator.startRow;var d;d=WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_DEBUG)||WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_LEFT)||WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_TOP_LEFT_CORNER)||WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER)?0:o.columnsRenderCalculator.startColumn,this.rowFilter=new R(c,r,s),this.columnFilter=new _(d,this.wot.getSetting("totalColumns"),i),this.alignOverlaysWithTrimmingContainer(),this._doDraw()}return this.refreshSelections(e),this.isWorkingOnClone()||(n.topOverlay.resetFixedPosition(),n.bottomOverlay.clone&amp;&amp;n.bottomOverlay.resetFixedPosition(),n.leftOverlay.resetFixedPosition(),n.topLeftCornerOverlay&amp;&amp;n.topLeftCornerOverlay.resetFixedPosition(),n.bottomLeftCornerOverlay&amp;&amp;n.bottomLeftCornerOverlay.clone&amp;&amp;n.bottomLeftCornerOverlay.resetFixedPosition()),a&amp;&amp;n.syncScrollWithMaster(),this.wot.drawn=!0,this},_doDraw:function(){var e=new M(this);e.render()},removeClassFromCells:function(e){for(var t=this.TABLE.querySelectorAll("."+e),n=0,o=t.length;n&lt;o;n++)g(t[n],e)},refreshSelections:function(e){if(this.wot.selections){var t=this.wot.selections.length;if(e)for(var n=0;n&lt;t;n++)this.wot.selections[n].settings.className&amp;&amp;this.removeClassFromCells(this.wot.selections[n].settings.className),this.wot.selections[n].settings.highlightHeaderClassName&amp;&amp;this.removeClassFromCells(this.wot.selections[n].settings.highlightHeaderClassName),this.wot.selections[n].settings.highlightRowClassName&amp;&amp;this.removeClassFromCells(this.wot.selections[n].settings.highlightRowClassName),this.wot.selections[n].settings.highlightColumnClassName&amp;&amp;this.removeClassFromCells(this.wot.selections[n].settings.highlightColumnClassName);for(var o=0;o&lt;t;o++)this.wot.selections[o].draw(this.wot,e)}},getCell:function(e){if(this.isRowBeforeRenderedRows(e.row))return-1;if(this.isRowAfterRenderedRows(e.row))return-2;var t=this.TBODY.childNodes[this.rowFilter.sourceToRendered(e.row)];return t?t.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(e.col)]:void 0},getColumnHeader:function(e){var t=void 0!==arguments[1]?arguments[1]:0,n=this.THEAD.childNodes[t];if(n)return n.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(e)]},getRowHeader:function(e){if(0===this.columnFilter.sourceColumnToVisibleRowHeadedColumn(0))return null;var t=this.TBODY.childNodes[this.rowFilter.sourceToRendered(e)];return t?t.childNodes[0]:void 0},getCoords:function(e){"TD"!==e.nodeName&amp;&amp;"TH"!==e.nodeName&amp;&amp;(e=y(e,["TD","TH"]));var t=e.parentNode,n=t.parentNode,o=p(t),r=e.cellIndex;return v(WalkontableOverlay.CLONE_TOP_LEFT_CORNER,e)||v(WalkontableOverlay.CLONE_TOP,e)?"THEAD"===n.nodeName&amp;&amp;(o-=n.childNodes.length):o=n===this.THEAD?this.rowFilter.visibleColHeadedRowToSourceRow(o):this.rowFilter.renderedToSource(o),r=v(WalkontableOverlay.CLONE_TOP_LEFT_CORNER,e)||v(WalkontableOverlay.CLONE_LEFT,e)?this.columnFilter.offsettedTH(r):this.columnFilter.visibleRowHeadedColumnToSourceColumn(r),new C(o,r)},getTrForRow:function(e){return this.TBODY.childNodes[this.rowFilter.sourceToRendered(e)]},getFirstRenderedRow:function(){return this.wot.wtViewport.rowsRenderCalculator.startRow},getFirstVisibleRow:function(){return this.wot.wtViewport.rowsVisibleCalculator.startRow},getFirstRenderedColumn:function(){return this.wot.wtViewport.columnsRenderCalculator.startColumn},getFirstVisibleColumn:function(){return this.wot.wtViewport.columnsVisibleCalculator.startColumn},getLastRenderedRow:function(){return this.wot.wtViewport.rowsRenderCalculator.endRow},getLastVisibleRow:function(){return this.wot.wtViewport.rowsVisibleCalculator.endRow},getLastRenderedColumn:function(){return this.wot.wtViewport.columnsRenderCalculator.endColumn},getLastVisibleColumn:function(){return this.wot.wtViewport.columnsVisibleCalculator.endColumn},isRowBeforeRenderedRows:function(e){return this.rowFilter&amp;&amp;this.rowFilter.sourceToRendered(e)&lt;0&amp;&amp;e&gt;=0},isRowAfterViewport:function(e){return this.rowFilter&amp;&amp;this.rowFilter.sourceToRendered(e)&gt;this.getLastVisibleRow()},isRowAfterRenderedRows:function(e){return this.rowFilter&amp;&amp;this.rowFilter.sourceToRendered(e)&gt;this.getLastRenderedRow()},isColumnBeforeViewport:function(e){return this.columnFilter&amp;&amp;this.columnFilter.sourceToRendered(e)&lt;0&amp;&amp;e&gt;=0},isColumnAfterViewport:function(e){return this.columnFilter&amp;&amp;this.columnFilter.sourceToRendered(e)&gt;this.getLastVisibleColumn()},isLastRowFullyVisible:function(){return this.getLastVisibleRow()===this.getLastRenderedRow()},isLastColumnFullyVisible:function(){return this.getLastVisibleColumn()===this.getLastRenderedColumn()},getRenderedColumnsCount:function(){var e=this.wot.wtViewport.columnsRenderCalculator.count,t=this.wot.getSetting("totalColumns");if(this.wot.isOverlayName(WalkontableOverlay.CLONE_DEBUG))e=t;else if(this.wot.isOverlayName(WalkontableOverlay.CLONE_LEFT)||this.wot.isOverlayName(WalkontableOverlay.CLONE_TOP_LEFT_CORNER)||this.wot.isOverlayName(WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER))return Math.min(this.wot.getSetting("fixedColumnsLeft"),t);return e},getRenderedRowsCount:function(){var e=this.wot.wtViewport.rowsRenderCalculator.count,t=this.wot.getSetting("totalRows");return this.wot.isOverlayName(WalkontableOverlay.CLONE_DEBUG)?e=t:this.wot.isOverlayName(WalkontableOverlay.CLONE_TOP)||this.wot.isOverlayName(WalkontableOverlay.CLONE_TOP_LEFT_CORNER)?e=Math.min(this.wot.getSetting("fixedRowsTop"),t):(this.wot.isOverlayName(WalkontableOverlay.CLONE_BOTTOM)||this.wot.isOverlayName(WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER))&amp;&amp;(e=Math.min(this.wot.getSetting("fixedRowsBottom"),t)),e},getVisibleRowsCount:function(){return this.wot.wtViewport.rowsVisibleCalculator.count},allRowsInViewport:function(){return this.wot.getSetting("totalRows")==this.getVisibleRowsCount()},getRowHeight:function(e){var t=this.wot.wtSettings.settings.rowHeight(e),n=this.wot.wtViewport.oversizedRows[e];return void 0!==n&amp;&amp;(t=void 0===t?n:Math.max(t,n)),t},getColumnHeaderHeight:function(e){var t=this.wot.wtSettings.settings.defaultRowHeight,n=this.wot.wtViewport.oversizedColumnHeaders[e];return void 0!==n&amp;&amp;(t=t?Math.max(t,n):n),t},getVisibleColumnsCount:function(){return this.wot.wtViewport.columnsVisibleCalculator.count},allColumnsInViewport:function(){return this.wot.getSetting("totalColumns")==this.getVisibleColumnsCount()},getColumnWidth:function(e){var t=this.wot.wtSettings.settings.columnWidth;return"function"==typeof t?t=t(e):"object"==typeof t&amp;&amp;(t=t[e]),t||this.wot.wtSettings.settings.defaultColumnWidth},getStretchedColumnWidth:function(e){var t=this.getColumnWidth(e),n=null==t?this.instance.wtSettings.settings.defaultColumnWidth:t,o=this.wot.wtViewport.columnsRenderCalculator;if(o){var r=o.getStretchedColumnWidth(e,n);r&amp;&amp;(n=r)}return n},_modifyRowHeaderWidth:function(e){var t=b(e)?e():null;return Array.isArray(t)?(t=$traceurRuntime.spread(t),t[t.length-1]=this._correctRowHeaderWidth(t[t.length-1])):t=this._correctRowHeaderWidth(t),t},_correctRowHeaderWidth:function(e){return"number"!=typeof e&amp;&amp;(e=this.wot.getSetting("defaultColumnWidth")),this.correctHeaderWidth&amp;&amp;e++,e}},{}),window.WalkontableTable=S},{"cell/coords":6,"cell/range":7,"filter/column":10,"filter/row":11,"helpers/dom/element":47,"helpers/function":50,tableRenderer:22}],22:[function(e,t,n){"use strict";function o(e,t){var n=document.createElement("TH");return t.insertBefore(n,e),t.removeChild(e),n}function r(e,t){var n=document.createElement("TD");return t.insertBefore(n,e),t.removeChild(e),n}Object.defineProperties(n,{WalkontableTableRenderer:{get:function(){return p}},__esModule:{value:!0}});var i,s=(i=e("helpers/dom/element"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}),a=s.addClass,l=s.empty,u=s.getScrollbarWidth,c=s.hasClass,d=s.innerHeight,h=s.outerWidth,f=!1,p=function(e){this.wtTable=e,this.wot=e.instance,this.instance=e.instance,this.rowFilter=e.rowFilter,this.columnFilter=e.columnFilter,this.TABLE=e.TABLE,this.THEAD=e.THEAD,this.TBODY=e.TBODY,this.COLGROUP=e.COLGROUP,this.rowHeaders=[],this.rowHeaderCount=0,this.columnHeaders=[],this.columnHeaderCount=0,this.fixedRowsTop=0,this.fixedRowsBottom=0};$traceurRuntime.createClass(p,{render:function(){if(!this.wtTable.isWorkingOnClone()){var e={};if(this.wot.getSetting("beforeDraw",!0,e),e.skipRender===!0)return}this.rowHeaders=this.wot.getSetting("rowHeaders"),this.rowHeaderCount=this.rowHeaders.length,this.fixedRowsTop=this.wot.getSetting("fixedRowsTop"),this.fixedRowsBottom=this.wot.getSetting("fixedRowsBottom"),this.columnHeaders=this.wot.getSetting("columnHeaders"),this.columnHeaderCount=this.columnHeaders.length;var t,n=this.wtTable.getRenderedColumnsCount(),o=this.wtTable.getRenderedRowsCount(),r=this.wot.getSetting("totalColumns"),i=this.wot.getSetting("totalRows"),s=!1;if((WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_BOTTOM)||WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER))&amp;&amp;(this.columnHeaders=[],this.columnHeaderCount=0),r&gt;=0&amp;&amp;(this.adjustAvailableNodes(),s=!0,this.renderColumnHeaders(),this.renderRows(i,o,n),this.wtTable.isWorkingOnClone()||(t=this.wot.wtViewport.getWorkspaceWidth(),this.wot.wtViewport.containerWidth=null),this.adjustColumnWidths(n),this.markOversizedColumnHeaders(),this.adjustColumnHeaderHeights()),s||this.adjustAvailableNodes(),this.removeRedundantRows(o),this.wtTable.isWorkingOnClone()&amp;&amp;!this.wot.isOverlayName(WalkontableOverlay.CLONE_BOTTOM)||this.markOversizedRows(),this.wtTable.isWorkingOnClone())this.wot.isOverlayName(WalkontableOverlay.CLONE_BOTTOM)&amp;&amp;this.wot.cloneSource.wtOverlays.adjustElementsSize();else{this.wot.wtViewport.createVisibleCalculators(),this.wot.wtOverlays.refresh(!1),this.wot.wtOverlays.applyToDOM();var a=h(this.wtTable.hider),l=h(this.wtTable.TABLE);if(0!==a&amp;&amp;l!==a&amp;&amp;this.adjustColumnWidths(n),t!==this.wot.wtViewport.getWorkspaceWidth()){this.wot.wtViewport.containerWidth=null;var u=this.wtTable.getFirstRenderedColumn(),c=this.wtTable.getLastRenderedColumn(),d=this.wot.getSetting("defaultColumnWidth"),f=this.wot.getSetting("rowHeaderWidth");if(f=this.instance.getSetting("onModifyRowHeaderWidth",f),null!=f)for(var p=0;p&lt;this.rowHeaderCount;p++){var m=Array.isArray(f)?f[p]:f;m=null==m?d:m,this.COLGROUP.childNodes[p].style.width=m+"px"}for(var g=u;g&lt;c;g++){var w=this.wtTable.getStretchedColumnWidth(g),v=this.columnFilter.sourceToRendered(g);this.COLGROUP.childNodes[v+this.rowHeaderCount].style.width=w+"px"}}this.wot.getSetting("onDraw",!0)}},removeRedundantRows:function(e){for(;this.wtTable.tbodyChildrenLength&gt;e;)this.TBODY.removeChild(this.TBODY.lastChild),this.wtTable.tbodyChildrenLength--},renderRows:function(e,t,n){for(var o,r,i=0,s=this.rowFilter.renderedToSource(i),a=this.wtTable.isWorkingOnClone();s&lt;e&amp;&amp;s&gt;=0&amp;&amp;(!f&amp;&amp;i&gt;1e3&amp;&amp;(f=!0,console.warn('Performance tip: Handsontable rendered more than 1000 visible rows. Consider limiting the number of rendered rows by specifying the table height and/or turning off the "renderAllRows" option.')),void 0===t||i!==t);){if(r=this.getOrCreateTrForRow(i,r),this.renderRowHeaders(s,r),this.adjustColumns(r,n+this.rowHeaderCount),o=this.renderCells(s,r,n),a&amp;&amp;!this.wot.isOverlayName(WalkontableOverlay.CLONE_BOTTOM)||this.resetOversizedRow(s),r.firstChild){var l=this.wot.wtTable.getRowHeight(s);l?(l--,r.firstChild.style.height=l+"px"):r.firstChild.style.height=""}i++,s=this.rowFilter.renderedToSource(i)}},resetOversizedRow:function(e){this.wot.getSetting("externalRowCalculator")||this.wot.wtViewport.oversizedRows&amp;&amp;this.wot.wtViewport.oversizedRows[e]&amp;&amp;(this.wot.wtViewport.oversizedRows[e]=void 0)},markOversizedRows:function(){if(!this.wot.getSetting("externalRowCalculator")){var e,t,n,o,r,i=this.instance.wtTable.TBODY.childNodes.length,s=i*this.instance.wtSettings.settings.defaultRowHeight,a=d(this.instance.wtTable.TBODY)-1;this.instance.getSetting("totalRows");if(s!==a||this.instance.getSetting("fixedRowsBottom"))for(;i;)i--,n=this.instance.wtTable.rowFilter.renderedToSource(i),e=this.instance.wtTable.getRowHeight(n),o=this.instance.wtTable.getTrForRow(n),r=o.querySelector("th"),t=r?d(r):d(o)-1,(!e&amp;&amp;this.instance.wtSettings.settings.defaultRowHeight&lt;t||e&lt;t)&amp;&amp;(this.instance.wtViewport.oversizedRows[n]=++t)}},markOversizedColumnHeaders:function(){var e=this.wot.getOverlayName();if(this.columnHeaderCount&amp;&amp;!this.wot.wtViewport.hasOversizedColumnHeadersMarked[e]&amp;&amp;!this.wtTable.isWorkingOnClone()){for(var t=this.wtTable.getRenderedColumnsCount(),n=0;n&lt;this.columnHeaderCount;n++)for(var o=-1*this.rowHeaderCount;o&lt;t;o++)this.markIfOversizedColumnHeader(o);this.wot.wtViewport.hasOversizedColumnHeadersMarked[e]=!0}},adjustColumnHeaderHeights:function(){for(var e=this.wot.getSetting("columnHeaders"),t=this.wot.wtTable.THEAD.childNodes,n=this.wot.wtViewport.oversizedColumnHeaders,o=0,r=e.length;o&lt;r;o++)if(n[o]){if(!t[o]||0===t[o].childNodes.length)return;t[o].childNodes[0].style.height=n[o]+"px"}},markIfOversizedColumnHeader:function(e){for(var t,n,o,r=this.wot.wtTable.columnFilter.renderedToSource(e),i=this.columnHeaderCount,s=this.wot.wtSettings.settings.defaultRowHeight,a=this.wot.getSetting("columnHeaderHeight")||[];i;)i--,t=this.wot.wtTable.getColumnHeaderHeight(i),n=this.wot.wtTable.getColumnHeader(r,i),n&amp;&amp;(o=d(n),(!t&amp;&amp;s&lt;o||t&lt;o)&amp;&amp;(this.wot.wtViewport.oversizedColumnHeaders[i]=o),Array.isArray(a)?null!=a[i]&amp;&amp;(this.wot.wtViewport.oversizedColumnHeaders[i]=a[i]):isNaN(a)||(this.wot.wtViewport.oversizedColumnHeaders[i]=a),this.wot.wtViewport.oversizedColumnHeaders[i]&lt;(a[i]||a)&amp;&amp;(this.wot.wtViewport.oversizedColumnHeaders[i]=a[i]||a))},renderCells:function(e,t,n){for(var o,i,s=0;s&lt;n;s++)i=this.columnFilter.renderedToSource(s),o=0===s?t.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(i)]:o.nextSibling,"TH"==o.nodeName&amp;&amp;(o=r(o,t)),c(o,"hide")||(o.className=""),o.removeAttribute("style"),this.wot.wtSettings.settings.cellRenderer(e,i,o);return o},adjustColumnWidths:function(e){var t=0,n=this.wot.cloneSource?this.wot.cloneSource:this.wot,o=n.wtTable.holder,r=this.wot.getSetting("defaultColumnWidth"),i=this.wot.getSetting("rowHeaderWidth");if(o.offsetHeight&lt;o.scrollHeight&amp;&amp;(t=u()),this.wot.wtViewport.columnsRenderCalculator.refreshStretching(this.wot.wtViewport.getViewportWidth()-t),i=this.instance.getSetting("onModifyRowHeaderWidth",i),null!=i)for(var s=0;s&lt;this.rowHeaderCount;s++){var a=Array.isArray(i)?i[s]:i;a=null==a?r:a,this.COLGROUP.childNodes[s].style.width=a+"px"}for(var l=0;l&lt;e;l++){var c=this.wtTable.getStretchedColumnWidth(this.columnFilter.renderedToSource(l));this.COLGROUP.childNodes[l+this.rowHeaderCount].style.width=c+"px"}},appendToTbody:function(e){this.TBODY.appendChild(e),this.wtTable.tbodyChildrenLength++},getOrCreateTrForRow:function(e,t){var n;return e&gt;=this.wtTable.tbodyChildrenLength?(n=this.createRow(),this.appendToTbody(n)):n=0===e?this.TBODY.firstChild:t.nextSibling,n.className&amp;&amp;n.removeAttribute("class"),n},createRow:function(){for(var e=document.createElement("TR"),t=0;t&lt;this.rowHeaderCount;t++)e.appendChild(document.createElement("TH"));return e},renderRowHeader:function(e,t,n){n.className="",n.removeAttribute("style"),this.rowHeaders[t](e,n,t)},renderRowHeaders:function(e,t){for(var n=t.firstChild,r=0;r&lt;this.rowHeaderCount;r++)n?"TD"==n.nodeName&amp;&amp;(n=o(n,t)):(n=document.createElement("TH"),t.appendChild(n)),this.renderRowHeader(e,r,n),n=n.nextSibling},adjustAvailableNodes:function(){this.adjustColGroups(),this.adjustThead()},renderColumnHeaders:function(){if(this.columnHeaderCount)for(var e=this.wtTable.getRenderedColumnsCount(),t=0;t&lt;this.columnHeaderCount;t++)for(var n=this.getTrForColumnHeaders(t),o=-1*this.rowHeaderCount;o&lt;e;o++){var r=this.columnFilter.renderedToSource(o);this.renderColumnHeader(t,r,n.childNodes[o+this.rowHeaderCount])}},adjustColGroups:function(){for(var e=this.wtTable.getRenderedColumnsCount();this.wtTable.colgroupChildrenLength&lt;e+this.rowHeaderCount;)this.COLGROUP.appendChild(document.createElement("COL")),this.wtTable.colgroupChildrenLength++;for(;this.wtTable.colgroupChildrenLength&gt;e+this.rowHeaderCount;)this.COLGROUP.removeChild(this.COLGROUP.lastChild),this.wtTable.colgroupChildrenLength--;this.rowHeaderCount&amp;&amp;a(this.COLGROUP.childNodes[0],"rowHeader")},adjustThead:function(){var e=this.wtTable.getRenderedColumnsCount(),t=this.THEAD.firstChild;if(this.columnHeaders.length){for(var n=0,o=this.columnHeaders.length;n&lt;o;n++){for(t=this.THEAD.childNodes[n],t||(t=document.createElement("TR"),this.THEAD.appendChild(t)),this.theadChildrenLength=t.childNodes.length;this.theadChildrenLength&lt;e+this.rowHeaderCount;)t.appendChild(document.createElement("TH")),this.theadChildrenLength++;for(;this.theadChildrenLength&gt;e+this.rowHeaderCount;)t.removeChild(t.lastChild),this.theadChildrenLength--}var r=this.THEAD.childNodes.length;if(r&gt;this.columnHeaders.length)for(var i=this.columnHeaders.length;i&lt;r;i++)this.THEAD.removeChild(this.THEAD.lastChild)}else t&amp;&amp;l(t)},getTrForColumnHeaders:function(e){return this.THEAD.childNodes[e]},renderColumnHeader:function(e,t,n){return n.className="",n.removeAttribute("style"),this.columnHeaders[e](t,n,e)},adjustColumns:function(e,t){for(var n=e.childNodes.length;n&lt;t;){var o=document.createElement("TD");e.appendChild(o),n++}for(;n&gt;t;)e.removeChild(e.lastChild),n--},removeRedundantColumns:function(e){for(;this.wtTable.tbodyChildrenLength&gt;e;)this.TBODY.removeChild(this.TBODY.lastChild),this.wtTable.tbodyChildrenLength--}},{}),window.WalkontableTableRenderer=p},{"helpers/dom/element":47}],23:[function(e,t,n){"use strict";Object.defineProperties(n,{WalkontableViewport:{get:function(){return b}},__esModule:{value:!0}});var o,r,i,s,a,l,u=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,c=(r=e("helpers/dom/element"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}),d=c.getScrollbarWidth,h=(c.getScrollTop,c.getStyle),f=c.offset,p=c.outerHeight,m=c.outerWidth,g=(i=e("helpers/object"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).objectEach,w=(s=e("eventManager"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).EventManager,v=(a=e("calculator/viewportColumns"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).WalkontableViewportColumnsCalculator,y=(l=e("calculator/viewportRows"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).WalkontableViewportRowsCalculator,b=function(e){var t=this;this.wot=e,this.instance=this.wot,this.oversizedRows=[],this.oversizedColumnHeaders=[],this.hasOversizedColumnHeadersMarked={},this.clientHeight=0,this.containerWidth=NaN,this.rowHeaderWidth=NaN,this.rowsVisibleCalculator=null,this.columnsVisibleCalculator=null,this.eventManager=new w(this.wot),this.eventManager.addEventListener(window,"resize",function(){t.clientHeight=t.getWorkspaceHeight()})};$traceurRuntime.createClass(b,{getWorkspaceHeight:function(){var e,t=this.instance.wtOverlays.topOverlay.trimmingContainer,n=0;return t===window?n=document.documentElement.clientHeight:(e=p(t),n=e&gt;0&amp;&amp;t.clientHeight&gt;0?t.clientHeight:1/0),n},getWorkspaceWidth:function(){var e,t,n=this.wot.getSetting("totalColumns"),o=this.instance.wtOverlays.leftOverlay.trimmingContainer,r=this.wot.getSetting("stretchH"),i=document.documentElement.offsetWidth,s=this.wot.getSetting("preventOverflow");return s?m(this.instance.wtTable.wtRootElement):(e=u.freezeOverlays?Math.min(i-this.getWorkspaceOffset().left,i):Math.min(this.getContainerFillWidth(),i-this.getWorkspaceOffset().left,i),o===window&amp;&amp;n&gt;0&amp;&amp;this.sumColumnWidths(0,n-1)&gt;e?document.documentElement.clientWidth:o!==window&amp;&amp;(t=h(this.instance.wtOverlays.leftOverlay.trimmingContainer,"overflow"),"scroll"==t||"hidden"==t||"auto"==t)?Math.max(e,o.clientWidth):"none"!==r&amp;&amp;r?e:Math.max(e,m(this.instance.wtTable.TABLE)))},hasVerticalScroll:function(){return this.getWorkspaceActualHeight()&gt;this.getWorkspaceHeight()},hasHorizontalScroll:function(){return this.getWorkspaceActualWidth()&gt;this.getWorkspaceWidth()},sumColumnWidths:function(e,t){for(var n=0;e&lt;t;)n+=this.wot.wtTable.getColumnWidth(e),e++;return n},getContainerFillWidth:function(){if(this.containerWidth)return this.containerWidth;var e,t,n=this.instance.wtTable.holder;return t=document.createElement("div"),t.style.width="100%",t.style.height="1px",n.appendChild(t),e=t.offsetWidth,this.containerWidth=e,n.removeChild(t),e},getWorkspaceOffset:function(){return f(this.wot.wtTable.TABLE)},getWorkspaceActualHeight:function(){return p(this.wot.wtTable.TABLE)},getWorkspaceActualWidth:function(){return m(this.wot.wtTable.TABLE)||m(this.wot.wtTable.TBODY)||m(this.wot.wtTable.THEAD)},getColumnHeaderHeight:function(){return isNaN(this.columnHeaderHeight)&amp;&amp;(this.columnHeaderHeight=p(this.wot.wtTable.THEAD)),this.columnHeaderHeight},getViewportHeight:function(){var e,t=this.getWorkspaceHeight();return t===1/0?t:(e=this.getColumnHeaderHeight(),e&gt;0&amp;&amp;(t-=e),t)},getRowHeaderWidth:function(){var e=this.instance.getSetting("rowHeaderWidth"),t=this.instance.getSetting("rowHeaders");if(e){this.rowHeaderWidth=0;for(var n=0,o=t.length;n&lt;o;n++)this.rowHeaderWidth+=e[n]||e}if(this.wot.cloneSource)return this.wot.cloneSource.wtViewport.getRowHeaderWidth();if(isNaN(this.rowHeaderWidth))if(t.length){var r=this.instance.wtTable.TABLE.querySelector("TH");this.rowHeaderWidth=0;for(var i=0,s=t.length;i&lt;s;i++)r?(this.rowHeaderWidth+=m(r),r=r.nextSibling):this.rowHeaderWidth+=50}else this.rowHeaderWidth=0;return this.rowHeaderWidth=this.instance.getSetting("onModifyRowHeaderWidth",this.rowHeaderWidth)||this.rowHeaderWidth,this.rowHeaderWidth},getViewportWidth:function(){var e,t=this.getWorkspaceWidth();return t===1/0?t:(e=this.getRowHeaderWidth(),e&gt;0?t-e:t)},createRowsCalculator:function(){var e,t,n,o,r,i,s,a=void 0!==arguments[0]&amp;&amp;arguments[0],l=this;return this.rowHeaderWidth=NaN,e=this.wot.wtSettings.settings.renderAllRows?1/0:this.getViewportHeight(),t=this.wot.wtOverlays.topOverlay.getScrollPosition()-this.wot.wtOverlays.topOverlay.getTableParentOffset(),t&lt;0&amp;&amp;(t=0),n=this.wot.getSetting("fixedRowsTop"),r=this.wot.getSetting("fixedRowsBottom"),s=this.wot.getSetting("totalRows"),n&amp;&amp;(i=this.wot.wtOverlays.topOverlay.sumCellSizes(0,n),t+=i,e-=i),r&amp;&amp;this.wot.wtOverlays.bottomOverlay.clone&amp;&amp;(i=this.wot.wtOverlays.bottomOverlay.sumCellSizes(s-r,s),e-=i),o=this.wot.wtTable.holder.clientHeight===this.wot.wtTable.holder.offsetHeight?0:d(),new y(e,t,this.wot.getSetting("totalRows"),function(e){return l.wot.wtTable.getRowHeight(e)},a?null:this.wot.wtSettings.settings.viewportRowCalculatorOverride,a,o)},createColumnsCalculator:function(){var e,t,n=void 0!==arguments[0]&amp;&amp;arguments[0],o=this,r=this.getViewportWidth();if(this.columnHeaderHeight=NaN,e=this.wot.wtOverlays.leftOverlay.getScrollPosition()-this.wot.wtOverlays.leftOverlay.getTableParentOffset(),
e&lt;0&amp;&amp;(e=0),t=this.wot.getSetting("fixedColumnsLeft")){var i=this.wot.wtOverlays.leftOverlay.sumCellSizes(0,t);e+=i,r-=i}return this.wot.wtTable.holder.clientWidth!==this.wot.wtTable.holder.offsetWidth&amp;&amp;(r-=d()),new v(r,e,this.wot.getSetting("totalColumns"),function(e){return o.wot.wtTable.getColumnWidth(e)},n?null:this.wot.wtSettings.settings.viewportColumnCalculatorOverride,n,this.wot.getSetting("stretchH"),function(e,t){return o.wot.getSetting("onBeforeStretchingColumnWidth",e,t)})},createRenderCalculators:function(){var e=void 0!==arguments[0]&amp;&amp;arguments[0];if(e){var t=this.createRowsCalculator(!0),n=this.createColumnsCalculator(!0);this.areAllProposedVisibleRowsAlreadyRendered(t)&amp;&amp;this.areAllProposedVisibleColumnsAlreadyRendered(n)||(e=!1)}return e||(this.rowsRenderCalculator=this.createRowsCalculator(),this.columnsRenderCalculator=this.createColumnsCalculator()),this.rowsVisibleCalculator=null,this.columnsVisibleCalculator=null,e},createVisibleCalculators:function(){this.rowsVisibleCalculator=this.createRowsCalculator(!0),this.columnsVisibleCalculator=this.createColumnsCalculator(!0)},areAllProposedVisibleRowsAlreadyRendered:function(e){return!!this.rowsVisibleCalculator&amp;&amp;(!(e.startRow&lt;this.rowsRenderCalculator.startRow||e.startRow===this.rowsRenderCalculator.startRow&amp;&amp;e.startRow&gt;0)&amp;&amp;!(e.endRow&gt;this.rowsRenderCalculator.endRow||e.endRow===this.rowsRenderCalculator.endRow&amp;&amp;e.endRow&lt;this.wot.getSetting("totalRows")-1))},areAllProposedVisibleColumnsAlreadyRendered:function(e){return!!this.columnsVisibleCalculator&amp;&amp;(!(e.startColumn&lt;this.columnsRenderCalculator.startColumn||e.startColumn===this.columnsRenderCalculator.startColumn&amp;&amp;e.startColumn&gt;0)&amp;&amp;!(e.endColumn&gt;this.columnsRenderCalculator.endColumn||e.endColumn===this.columnsRenderCalculator.endColumn&amp;&amp;e.endColumn&lt;this.wot.getSetting("totalColumns")-1))},resetHasOversizedColumnHeadersMarked:function(){g(this.hasOversizedColumnHeadersMarked,function(e,t,n){n[t]=void 0})}},{}),window.WalkontableViewport=b},{browser:24,"calculator/viewportColumns":4,"calculator/viewportRows":5,eventManager:42,"helpers/dom/element":47,"helpers/object":53}],24:[function(e,t,n){"use strict";function o(e,t){var n=new o.Core(e,t||{});return n.init(),n}var r,i,s,a,l,u,c,d,h,f,p,m,g,w,v,y,b,C,_,R,M,S,E,O;t.exports=o,o.utils={},r=e("shims/runtime"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r},i=e("es6collections"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i};var T=(s=e("pluginHooks"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).Hooks,k=(a=e("numbro"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).default,x=(l=e("moment"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).default;"object"==typeof window&amp;&amp;("undefined"==typeof window.numbro&amp;&amp;(window.numbro=k),"undefined"==typeof window.moment&amp;&amp;(window.moment=x)),o.hooks||(o.hooks=new T),o.utils.Hooks=T,u=e("core"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u},c=e("renderers/_cellDecorator"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c},d=e("cellTypes"),d&amp;&amp;d.__esModule&amp;&amp;d||{default:d},h=e("plugins/jqueryHandsontable"),h&amp;&amp;h.__esModule&amp;&amp;h||{default:h};var D=(f=e("helpers/array"),f&amp;&amp;f.__esModule&amp;&amp;f||{default:f}),H=(p=e("helpers/browser"),p&amp;&amp;p.__esModule&amp;&amp;p||{default:p}),A=(m=e("helpers/data"),m&amp;&amp;m.__esModule&amp;&amp;m||{default:m}),P=(g=e("helpers/date"),g&amp;&amp;g.__esModule&amp;&amp;g||{default:g}),N=(w=e("helpers/feature"),w&amp;&amp;w.__esModule&amp;&amp;w||{default:w}),L=(v=e("helpers/function"),v&amp;&amp;v.__esModule&amp;&amp;v||{default:v}),I=(y=e("helpers/mixed"),y&amp;&amp;y.__esModule&amp;&amp;y||{default:y}),W=(b=e("helpers/number"),b&amp;&amp;b.__esModule&amp;&amp;b||{default:b}),j=(C=e("helpers/object"),C&amp;&amp;C.__esModule&amp;&amp;C||{default:C}),V=(_=e("helpers/setting"),_&amp;&amp;_.__esModule&amp;&amp;_||{default:_}),B=(R=e("helpers/string"),R&amp;&amp;R.__esModule&amp;&amp;R||{default:R}),F=(M=e("helpers/unicode"),M&amp;&amp;M.__esModule&amp;&amp;M||{default:M}),z=(S=e("helpers/dom/element"),S&amp;&amp;S.__esModule&amp;&amp;S||{default:S}),Y=(E=e("helpers/dom/event"),E&amp;&amp;E.__esModule&amp;&amp;E||{default:E}),U=[D,H,A,P,N,L,I,W,j,V,B,F],G=[z,Y];o.buildDate="Tue Feb 14 2017 11:02:09 GMT+0100 (CET)",o.packageName="handsontable",o.version="0.31.0";var $="@@baseVersion";/^@@/.test($)||(o.baseVersion=$),o.plugins={};var K=(O=e("plugins"),O&amp;&amp;O.__esModule&amp;&amp;O||{default:O}).registerPlugin;o.plugins.registerPlugin=K,o.helper={},o.dom={},o.Dom=o.dom,D.arrayEach(U,function(e){D.arrayEach(Object.getOwnPropertyNames(e),function(t){"_"!==t.charAt(0)&amp;&amp;(o.helper[t]=e[t])})}),D.arrayEach(G,function(e){D.arrayEach(Object.getOwnPropertyNames(e),function(t){"_"!==t.charAt(0)&amp;&amp;(o.dom[t]=e[t])})})},{cellTypes:25,core:26,es6collections:"es6collections","helpers/array":43,"helpers/browser":44,"helpers/data":45,"helpers/date":46,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/feature":49,"helpers/function":50,"helpers/mixed":51,"helpers/number":52,"helpers/object":53,"helpers/setting":54,"helpers/string":55,"helpers/unicode":56,moment:"moment",numbro:"numbro",pluginHooks:60,plugins:61,"plugins/jqueryHandsontable":2,"renderers/_cellDecorator":118,"shims/runtime":125}],25:[function(e,t,n){"use strict";var o,r,i,s,a,l,u,c,d,h,f,p,m,g,w,v,y,b,C,_,R,M,S,E,O=(o=e("helpers/browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).isMobileBrowser,T=(r=e("editors"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).getEditorConstructor,k=(i=e("renderers"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).getRenderer,x=((s=e("editors/autocompleteEditor"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).AutocompleteEditor,(a=e("editors/checkboxEditor"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).CheckboxEditor,(l=e("editors/dateEditor"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).DateEditor,(u=e("editors/dropdownEditor"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).DropdownEditor,(c=e("editors/handsontableEditor"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}).HandsontableEditor,(d=e("editors/mobileTextEditor"),d&amp;&amp;d.__esModule&amp;&amp;d||{default:d}).MobileTextEditor,(h=e("editors/numericEditor"),h&amp;&amp;h.__esModule&amp;&amp;h||{default:h}).NumericEditor,(f=e("editors/passwordEditor"),f&amp;&amp;f.__esModule&amp;&amp;f||{default:f}).PasswordEditor,(p=e("editors/selectEditor"),p&amp;&amp;p.__esModule&amp;&amp;p||{default:p}).SelectEditor,(m=e("editors/textEditor"),m&amp;&amp;m.__esModule&amp;&amp;m||{default:m}).TextEditor,(g=e("renderers/autocompleteRenderer"),g&amp;&amp;g.__esModule&amp;&amp;g||{default:g}).AutocompleteRenderer,(w=e("renderers/checkboxRenderer"),w&amp;&amp;w.__esModule&amp;&amp;w||{default:w}).CheckboxRenderer,(v=e("renderers/htmlRenderer"),v&amp;&amp;v.__esModule&amp;&amp;v||{default:v}).HtmlRenderer,(y=e("renderers/numericRenderer"),y&amp;&amp;y.__esModule&amp;&amp;y||{default:y}).NumericRenderer,(b=e("renderers/passwordRenderer"),b&amp;&amp;b.__esModule&amp;&amp;b||{default:b}).PasswordRenderer,(C=e("renderers/textRenderer"),C&amp;&amp;C.__esModule&amp;&amp;C||{default:C}).TextRenderer,(_=e("validators/autocompleteValidator"),_&amp;&amp;_.__esModule&amp;&amp;_||{default:_}).AutocompleteValidator,(R=e("validators/dateValidator"),R&amp;&amp;R.__esModule&amp;&amp;R||{default:R}).DateValidator,(M=e("validators/timeValidator"),M&amp;&amp;M.__esModule&amp;&amp;M||{default:M}).TimeValidator,(S=e("validators/numericValidator"),S&amp;&amp;S.__esModule&amp;&amp;S||{default:S}).NumericValidator,(E=e("browser"),E&amp;&amp;E.__esModule&amp;&amp;E||{default:E}).default);x.AutocompleteCell={editor:T("autocomplete"),renderer:k("autocomplete"),validator:x.AutocompleteValidator},x.CheckboxCell={editor:T("checkbox"),renderer:k("checkbox")},x.TextCell={editor:T(O()?"mobile":"text"),renderer:k("text")},x.NumericCell={editor:T("numeric"),renderer:k("numeric"),validator:x.NumericValidator,dataType:"number"},x.DateCell={editor:T("date"),validator:x.DateValidator,renderer:k("autocomplete")},x.TimeCell={editor:T("text"),validator:x.TimeValidator,renderer:k("text")},x.HandsontableCell={editor:T("handsontable"),renderer:k("autocomplete")},x.PasswordCell={editor:T("password"),renderer:k("password"),copyable:!1},x.DropdownCell={editor:T("dropdown"),renderer:k("autocomplete"),validator:x.AutocompleteValidator},x.cellTypes={text:x.TextCell,date:x.DateCell,time:x.TimeCell,numeric:x.NumericCell,checkbox:x.CheckboxCell,autocomplete:x.AutocompleteCell,handsontable:x.HandsontableCell,password:x.PasswordCell,dropdown:x.DropdownCell},x.cellLookup={validator:{numeric:x.NumericValidator,autocomplete:x.AutocompleteValidator}}},{browser:24,editors:30,"editors/autocompleteEditor":32,"editors/checkboxEditor":33,"editors/dateEditor":34,"editors/dropdownEditor":35,"editors/handsontableEditor":36,"editors/mobileTextEditor":37,"editors/numericEditor":38,"editors/passwordEditor":39,"editors/selectEditor":40,"editors/textEditor":41,"helpers/browser":44,renderers:117,"renderers/autocompleteRenderer":119,"renderers/checkboxRenderer":120,"renderers/htmlRenderer":121,"renderers/numericRenderer":122,"renderers/passwordRenderer":123,"renderers/textRenderer":124,"validators/autocompleteValidator":133,"validators/dateValidator":134,"validators/numericValidator":135,"validators/timeValidator":136}],26:[function(e,t,n){"use strict";var o,r,i,s,a,l,u,c,d,h,f,p,m,g,w,v,y,b,C,_,R,M,S,E=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,O=(r=e("numbro"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).default,T=(i=e("helpers/dom/element"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}),k=T.addClass,x=T.empty,D=T.isChildOfWebComponentTable,H=T.removeClass,A=(s=e("helpers/setting"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).columnFactory,P=(a=e("helpers/function"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).isFunction,N=(l=e("helpers/mixed"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}),L=N.isDefined,I=N.isUndefined,W=(u=e("helpers/browser"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).isMobileBrowser,j=(c=e("dataMap"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}).DataMap,V=(d=e("editorManager"),d&amp;&amp;d.__esModule&amp;&amp;d||{default:d}).EditorManager,B=(h=e("eventManager"),h&amp;&amp;h.__esModule&amp;&amp;h||{default:h}).eventManager,F=(f=e("helpers/object"),f&amp;&amp;f.__esModule&amp;&amp;f||{default:f}),z=F.deepClone,Y=F.duckSchema,U=F.extend,G=F.isObject,$=F.isObjectEquals,K=F.deepObjectSize,X=(p=e("helpers/array"),p&amp;&amp;p.__esModule&amp;&amp;p||{default:p}),q=X.arrayFlatten,Z=X.arrayMap,J=(m=e("plugins"),m&amp;&amp;m.__esModule&amp;&amp;m||{default:m}).getPlugin,Q=(g=e("renderers"),g&amp;&amp;g.__esModule&amp;&amp;g||{default:g}).getRenderer,ee=(w=e("helpers/string"),w&amp;&amp;w.__esModule&amp;&amp;w||{default:w}).randomString,te=(v=e("helpers/number"),v&amp;&amp;v.__esModule&amp;&amp;v||{default:v}).rangeEach,ne=(y=e("tableView"),y&amp;&amp;y.__esModule&amp;&amp;y||{default:y}).TableView,oe=(b=e("dataSource"),b&amp;&amp;b.__esModule&amp;&amp;b||{default:b}).DataSource,re=(C=e("helpers/data"),C&amp;&amp;C.__esModule&amp;&amp;C||{default:C}),ie=re.translateRowsToColumns,se=re.cellMethodLookupFactory,ae=re.spreadsheetColumnLabel,le=(_=e("utils/recordTranslator"),_&amp;&amp;_.__esModule&amp;&amp;_||{default:_}).getTranslator,ue=(R=e("3rdparty/walkontable/src/cell/coords"),R&amp;&amp;R.__esModule&amp;&amp;R||{default:R}).WalkontableCellCoords,ce=(M=e("3rdparty/walkontable/src/cell/range"),M&amp;&amp;M.__esModule&amp;&amp;M||{default:M}).WalkontableCellRange,de=(S=e("3rdparty/walkontable/src/calculator/viewportColumns"),S&amp;&amp;S.__esModule&amp;&amp;S||{default:S}).WalkontableViewportColumnsCalculator;E.activeGuid=null,E.Core=function(e,t){function n(){var e=!1;return{validatorsInQueue:0,valid:!0,addValidatorToQueue:function(){this.validatorsInQueue++,e=!1},removeValidatorFormQueue:function(){this.validatorsInQueue=this.validatorsInQueue-1&lt;0?0:this.validatorsInQueue-1,this.checkIfQueueIsEmpty()},onQueueEmpty:function(e){},checkIfQueueIsEmpty:function(){0==this.validatorsInQueue&amp;&amp;0==e&amp;&amp;(e=!0,this.onQueueEmpty(this.valid))}}}function o(e,t,o){function r(){var n;e.length&amp;&amp;(n=E.hooks.run(p,"beforeChange",e,t),P(n)?console.warn("Your beforeChange callback returns a function. It's not supported since Handsontable 0.12.1 (and the returned function will not be executed)."):n===!1&amp;&amp;e.splice(0,e.length)),o()}var i=new n;i.onQueueEmpty=r;for(var s=e.length-1;s&gt;=0;s--)if(null===e[s])e.splice(s,1);else{var a=e[s][0],l=u.propToCol(e[s][1]),c=p.getCellMeta(a,l);if("numeric"===c.type&amp;&amp;"string"==typeof e[s][3]&amp;&amp;e[s][3].length&gt;0&amp;&amp;(/^-?[\d\s]*(\.|\,)?\d*$/.test(e[s][3])||c.format)){var d=e[s][3].length;I(c.language)?O.culture("en-US"):e[s][3].indexOf(".")===d-3&amp;&amp;e[s][3].indexOf(",")===-1?O.culture("en-US"):O.culture(c.language);O.cultureData(O.culture()).delimiters;O.validate(e[s][3])&amp;&amp;!isNaN(e[s][3])?e[s][3]=parseFloat(e[s][3]):e[s][3]=O().unformat(e[s][3])||e[s][3]}p.getCellValidator(c)&amp;&amp;(i.addValidatorToQueue(),p.validateCell(e[s][3],c,function(t,n){return function(o){if("boolean"!=typeof o)throw new Error("Validation error: result is not boolean");if(o===!1&amp;&amp;n.allowInvalid===!1){e.splice(t,1),n.valid=!0;var r=p.getCell(n.row,n.col);H(r,p.getSettings().invalidCellClassName),--t}i.removeValidatorFormQueue()}}(s,c),t))}i.checkIfQueueIsEmpty()}function r(e,t){var n=e.length-1;if(!(n&lt;0)){for(;0&lt;=n;n--){var o=!1;if(null!==e[n]){if(null!=e[n][2]||null!=e[n][3]){if(l.settings.allowInsertRow)for(;e[n][0]&gt;p.countRows()-1;){var r=u.createRow(void 0,void 0,t);if(0===r){o=!0;break}}if(!o){if("array"===p.dataType&amp;&amp;(!l.settings.columns||0===l.settings.columns.length)&amp;&amp;l.settings.allowInsertColumn)for(;u.propToCol(e[n][1])&gt;p.countCols()-1;)u.createCol(void 0,void 0,t);u.set(e[n][0],e[n][1],e[n][3])}}}else e.splice(n,1)}p.forceFullRender=!0,d.adjustRowsAndCols(),E.hooks.run(p,"beforeChangeRender",e,t),h.refreshBorders(null,!0),p.view.wt.wtOverlays.adjustElementsSize(),E.hooks.run(p,"afterChange",e,t||"edit");var i=p.getActiveEditor();i&amp;&amp;L(i.refreshValue)&amp;&amp;i.refreshValue()}}function i(e,t,n){return"object"==typeof e?e:[[e,t,n]]}function s(e){if(e.hasOwnProperty("type")){var t,n={};if("object"==typeof e.type)t=e.type;else if("string"==typeof e.type&amp;&amp;(t=E.cellTypes[e.type],void 0===t))throw new Error('You declared cell type "'+e.type+'" as a string that is not mapped to a known object. Cell type must be an object or a string mapped to an object in Handsontable.cellTypes');for(var o in t)t.hasOwnProperty(o)&amp;&amp;!e.hasOwnProperty(o)&amp;&amp;(n[o]=t[o]);return n}}function a(){throw new Error("This method cannot be called because this Handsontable instance has been destroyed")}var l,u,c,d,h,f,p=this,m=function(){},g=B(p),w=le(p);U(m.prototype,he.prototype),U(m.prototype,t),U(m.prototype,s(t)),this.rootElement=e,this.isHotTableEnv=D(this.rootElement),E.eventManager.isHotTableEnv=this.isHotTableEnv,this.container=document.createElement("DIV"),this.renderCall=!1,e.insertBefore(this.container,e.firstChild),this.guid="ht_"+ee(),c=new oe(p),this.rootElement.id&amp;&amp;"ht_"!==this.rootElement.id.substring(0,3)||(this.rootElement.id=this.guid),l={cellSettings:[],columnSettings:[],columnsSettingConflicts:["data","width"],settings:new m,selRange:null,isPopulated:null,scrollable:null,firstRun:!0},d={alter:function(e,t,n,o,r){function i(e,t,n,o){var r=function(){var e;return"array"===o?e=[]:"object"===o&amp;&amp;(e={}),e},i=Z(new Array(n),function(){return r()});i.unshift(t,0),e.splice.apply(e,i)}var s;switch(n=n||1,e){case"insert_row":var a=p.countSourceRows();if(p.getSettings().maxRows===a)return;t=L(t)?t:a,s=u.createRow(t,n,o),i(l.cellSettings,t,n,"array"),s&amp;&amp;(h.isSelected()&amp;&amp;l.selRange.from.row&gt;=t?(l.selRange.from.row=l.selRange.from.row+s,h.transformEnd(s,0)):h.refreshBorders());break;case"insert_col":s=u.createCol(t,n,o);for(var c=0,f=p.countSourceRows();c&lt;f;c++)l.cellSettings[c]&amp;&amp;i(l.cellSettings[c],t,n);if(s){if(Array.isArray(p.getSettings().colHeaders)){var m=[t,0];m.length+=s,Array.prototype.splice.apply(p.getSettings().colHeaders,m)}h.isSelected()&amp;&amp;l.selRange.from.col&gt;=t?(l.selRange.from.col=l.selRange.from.col+s,h.transformEnd(0,s)):h.refreshBorders()}break;case"remove_row":u.removeRow(t,n,o),l.cellSettings.splice(t,n);var g=p.countRows(),v=p.getSettings().fixedRowsTop;v&gt;=t+1&amp;&amp;(p.getSettings().fixedRowsTop-=Math.min(n,v-t));var y=p.getSettings().fixedRowsBottom;y&amp;&amp;t&gt;=g-y&amp;&amp;(p.getSettings().fixedRowsBottom-=Math.min(n,y)),d.adjustRowsAndCols(),h.refreshBorders();break;case"remove_col":var b=w.toPhysicalColumn(t);u.removeCol(t,n,o);for(var C=0,_=p.countSourceRows();C&lt;_;C++)l.cellSettings[C]&amp;&amp;l.cellSettings[C].splice(b,n);var R=p.getSettings().fixedColumnsLeft;R&gt;=t+1&amp;&amp;(p.getSettings().fixedColumnsLeft-=Math.min(n,R-t)),Array.isArray(p.getSettings().colHeaders)&amp;&amp;("undefined"==typeof b&amp;&amp;(b=-1),p.getSettings().colHeaders.splice(b,n)),d.adjustRowsAndCols(),h.refreshBorders();break;default:throw new Error('There is no such action "'+e+'"')}r||d.adjustRowsAndCols()},adjustRowsAndCols:function(){if(l.settings.minRows){var e=p.countRows();if(e&lt;l.settings.minRows)for(var t=0,n=l.settings.minRows;t&lt;n-e;t++)u.createRow(p.countRows(),1,"auto")}if(l.settings.minSpareRows){var o=p.countEmptyRows(!0);if(o&lt;l.settings.minSpareRows)for(;o&lt;l.settings.minSpareRows&amp;&amp;p.countSourceRows()&lt;l.settings.maxRows;o++)u.createRow(p.countRows(),1,"auto")}var r;if((l.settings.minCols||l.settings.minSpareCols)&amp;&amp;(r=p.countEmptyCols(!0)),l.settings.minCols&amp;&amp;!l.settings.columns&amp;&amp;p.countCols()&lt;l.settings.minCols)for(;p.countCols()&lt;l.settings.minCols;r++)u.createCol(p.countCols(),1,"auto");if(l.settings.minSpareCols&amp;&amp;!l.settings.columns&amp;&amp;"array"===p.dataType&amp;&amp;r&lt;l.settings.minSpareCols)for(;r&lt;l.settings.minSpareCols&amp;&amp;p.countCols()&lt;l.settings.maxCols;r++)u.createCol(p.countCols(),1,"auto");var i=p.countRows(),s=p.countCols();if(0!==i&amp;&amp;0!==s||h.deselect(),h.isSelected()){var a=!1,c=l.selRange.from.row,d=l.selRange.from.col,f=l.selRange.to.row,m=l.selRange.to.col;c&gt;i-1?(c=i-1,a=!0,f&gt;c&amp;&amp;(f=c)):f&gt;i-1&amp;&amp;(f=i-1,a=!0,c&gt;f&amp;&amp;(c=f)),d&gt;s-1?(d=s-1,a=!0,m&gt;d&amp;&amp;(m=d)):m&gt;s-1&amp;&amp;(m=s-1,a=!0,d&gt;m&amp;&amp;(d=m)),a&amp;&amp;p.selectCell(c,d,f,m)}p.view&amp;&amp;p.view.wt.wtOverlays.adjustElementsSize()},populateFromArray:function(e,t,n,o,r,i,s){var a,u,c,d,h=[],f={};if(u=t.length,0===u)return!1;var m,g,w,v;({row:null===n?null:n.row,col:null===n?null:n.col});switch(r){case"shift_down":for(m=n?n.col-e.col+1:0,g=n?n.row-e.row+1:0,t=ie(t),c=0,d=t.length,w=Math.max(d,m);c&lt;w;c++)if(c&lt;d){for(a=0,u=t[c].length;a&lt;g-u;a++)t[c].push(t[c][a%u]);t[c].unshift(e.col+c,e.row,0),p.spliceCol.apply(p,t[c])}else t[c%d][0]=e.col+c,p.spliceCol.apply(p,t[c%d]);break;case"shift_right":for(m=n?n.col-e.col+1:0,g=n?n.row-e.row+1:0,a=0,u=t.length,v=Math.max(u,g);a&lt;v;a++)if(a&lt;u){for(c=0,d=t[a].length;c&lt;m-d;c++)t[a].push(t[a][c%d]);t[a].unshift(e.row+a,e.col,0),p.spliceRow.apply(p,t[a])}else t[a%u][0]=e.row+a,p.spliceRow.apply(p,t[a%u]);break;case"overwrite":default:f.row=e.row,f.col=e.col;var y,b={row:n&amp;&amp;e?n.row-e.row+1:1,col:n&amp;&amp;e?n.col-e.col+1:1},C=0,_=0,R=!0,M=function(e){var n=void 0!==arguments[1]?arguments[1]:null,o=t[e%t.length];return null!==n?o[n%o.length]:o},S=t.length,E=n?n.row-e.row+1:0;for(u=n?E:Math.max(S,E),a=0;a&lt;u&amp;&amp;!(n&amp;&amp;f.row&gt;n.row&amp;&amp;E&gt;S||!l.settings.allowInsertRow&amp;&amp;f.row&gt;p.countRows()-1||f.row&gt;=l.settings.maxRows);a++){var O=a-C,T=M(O).length,k=n?n.col-e.col+1:0;if(d=n?k:Math.max(T,k),f.col=e.col,y=p.getCellMeta(f.row,f.col),"CopyPaste.paste"!==o&amp;&amp;"Autofill.autofill"!==o||!y.skipRowOnPaste){for(_=0,c=0;c&lt;d&amp;&amp;!(n&amp;&amp;f.col&gt;n.col&amp;&amp;k&gt;T||!l.settings.allowInsertColumn&amp;&amp;f.col&gt;p.countCols()-1||f.col&gt;=l.settings.maxCols);c++)if(y=p.getCellMeta(f.row,f.col),"CopyPaste.paste"!==o&amp;&amp;"Autofill.fill"!==o||!y.skipColumnOnPaste)if(y.readOnly)f.col++;else{var x=c-_,D=M(O,x),H=p.getDataAtCell(f.row,f.col),A={row:O,col:x};if("Autofill.fill"===o){var P=p.runHooks("beforeAutofillInsidePopulate",A,i,t,s,{},b);P&amp;&amp;(D=I(P.value)?D:P.value)}if(null!==D&amp;&amp;"object"==typeof D)if(null===H||"object"!=typeof H)R=!1;else{var N=Y(H[0]||H),L=Y(D[0]||D);$(N,L)?D=z(D):R=!1}else null!==H&amp;&amp;"object"==typeof H&amp;&amp;(R=!1);R&amp;&amp;h.push([f.row,f.col,D]),R=!0,f.col++}else _++,f.col++,d++;f.row++}else C++,f.row++,u++}p.setDataAtCell(h,null,null,o||"populateFromArray")}}},this.selection=h={inProgress:!1,selectedHeader:{cols:!1,rows:!1},setSelectedHeaders:function(){var e=void 0!==arguments[0]&amp;&amp;arguments[0],t=void 0!==arguments[1]&amp;&amp;arguments[1],n=void 0!==arguments[2]&amp;&amp;arguments[2];p.selection.selectedHeader.rows=e,p.selection.selectedHeader.cols=t,p.selection.selectedHeader.corner=n},begin:function(){p.selection.inProgress=!0},finish:function(){var e=p.getSelected();E.hooks.run(p,"afterSelectionEnd",e[0],e[1],e[2],e[3]),E.hooks.run(p,"afterSelectionEndByProp",e[0],p.colToProp(e[1]),e[2],p.colToProp(e[3])),p.selection.inProgress=!1},isInProgress:function(){return p.selection.inProgress},setRangeStart:function(e,t){E.hooks.run(p,"beforeSetRangeStart",e),l.selRange=new ce(e,e,e),h.setRangeEnd(e,null,t)},setRangeStartOnly:function(e){E.hooks.run(p,"beforeSetRangeStartOnly",e),l.selRange=new ce(e,e,e)},setRangeEnd:function(e,t,n){if(null!==l.selRange){var o,r=!1,i=!0,s=p.view.wt.wtTable.getFirstVisibleRow(),a=p.view.wt.wtTable.getFirstVisibleColumn(),c={row:null,col:null};E.hooks.run(p,"beforeSetRangeEnd",e),p.selection.begin(),c.row=e.row&lt;0?s:e.row,c.col=e.col&lt;0?a:e.col,l.selRange.to=new ue(c.row,c.col),l.settings.multiSelect||(l.selRange.from=e),p.view.wt.selections.current.clear(),o=p.getCellMeta(l.selRange.highlight.row,l.selRange.highlight.col).disableVisualSelection,"string"==typeof o&amp;&amp;(o=[o]),(o===!1||Array.isArray(o)&amp;&amp;o.indexOf("current")===-1)&amp;&amp;p.view.wt.selections.current.add(l.selRange.highlight),p.view.wt.selections.area.clear(),(o===!1||Array.isArray(o)&amp;&amp;o.indexOf("area")===-1)&amp;&amp;h.isMultiple()&amp;&amp;(p.view.wt.selections.area.add(l.selRange.from),p.view.wt.selections.area.add(l.selRange.to)),(l.settings.currentHeaderClassName||l.settings.currentRowClassName||l.settings.currentColClassName)&amp;&amp;(p.view.wt.selections.highlight.clear(),p.view.wt.selections.highlight.add(l.selRange.from),p.view.wt.selections.highlight.add(l.selRange.to)),E.hooks.run(p,"afterSelection",l.selRange.from.row,l.selRange.from.col,l.selRange.to.row,l.selRange.to.col),E.hooks.run(p,"afterSelectionByProp",l.selRange.from.row,u.colToProp(l.selRange.from.col),l.selRange.to.row,u.colToProp(l.selRange.to.col)),(0===l.selRange.from.row&amp;&amp;l.selRange.to.row===p.countRows()-1&amp;&amp;p.countRows()&gt;1||0===l.selRange.from.col&amp;&amp;l.selRange.to.col===p.countCols()-1&amp;&amp;p.countCols()&gt;1)&amp;&amp;(r=!0),(e.row&lt;0||e.col&lt;0)&amp;&amp;(i=!1),t!==!1&amp;&amp;!r&amp;&amp;i&amp;&amp;(l.selRange.from&amp;&amp;!h.isMultiple()?p.view.scrollViewport(l.selRange.from):p.view.scrollViewport(e)),h.refreshBorders(null,n)}},refreshBorders:function(e,t){t||f.destroyEditor(e),p.view.render(),h.isSelected()&amp;&amp;!t&amp;&amp;f.prepareEditor()},isMultiple:function(){var e=!(l.selRange.to.col===l.selRange.from.col&amp;&amp;l.selRange.to.row===l.selRange.from.row),t=E.hooks.run(p,"afterIsMultipleSelection",e);if(e)return t},transformStart:function(e,t,n,o){var r,i,s,a,u=new ue(e,t),c=0,d=0;p.runHooks("modifyTransformStart",u),r=p.countRows(),i=p.countCols(),a=p.getSettings().fixedRowsBottom,l.selRange.highlight.row+e&gt;r-1?n&amp;&amp;l.settings.minSpareRows&gt;0&amp;&amp;!(a&amp;&amp;l.selRange.highlight.row&gt;=r-a-1)?(p.alter("insert_row",r),r=p.countRows()):l.settings.autoWrapCol&amp;&amp;(u.row=1-r,u.col=l.selRange.highlight.col+u.col==i-1?1-i:1):l.settings.autoWrapCol&amp;&amp;l.selRange.highlight.row+u.row&lt;0&amp;&amp;l.selRange.highlight.col+u.col&gt;=0&amp;&amp;(u.row=r-1,u.col=l.selRange.highlight.col+u.col==0?i-1:-1),l.selRange.highlight.col+u.col&gt;i-1?n&amp;&amp;l.settings.minSpareCols&gt;0?(p.alter("insert_col",i),i=p.countCols()):l.settings.autoWrapRow&amp;&amp;(u.row=l.selRange.highlight.row+u.row==r-1?1-r:1,u.col=1-i):l.settings.autoWrapRow&amp;&amp;l.selRange.highlight.col+u.col&lt;0&amp;&amp;l.selRange.highlight.row+u.row&gt;=0&amp;&amp;(u.row=l.selRange.highlight.row+u.row==0?r-1:-1,u.col=i-1),s=new ue(l.selRange.highlight.row+u.row,l.selRange.highlight.col+u.col),s.row&lt;0?(c=-1,s.row=0):s.row&gt;0&amp;&amp;s.row&gt;=r&amp;&amp;(c=1,s.row=r-1),s.col&lt;0?(d=-1,s.col=0):s.col&gt;0&amp;&amp;s.col&gt;=i&amp;&amp;(d=1,s.col=i-1),p.runHooks("afterModifyTransformStart",s,c,d),h.setRangeStart(s,o)},transformEnd:function(e,t){var n,o,r,i=new ue(e,t),s=0,a=0;p.runHooks("modifyTransformEnd",i),n=p.countRows(),o=p.countCols(),r=new ue(l.selRange.to.row+i.row,l.selRange.to.col+i.col),r.row&lt;0?(s=-1,r.row=0):r.row&gt;0&amp;&amp;r.row&gt;=n&amp;&amp;(s=1,r.row=n-1),r.col&lt;0?(a=-1,r.col=0):r.col&gt;0&amp;&amp;r.col&gt;=o&amp;&amp;(a=1,r.col=o-1),p.runHooks("afterModifyTransformEnd",r,s,a),h.setRangeEnd(r,!0)},isSelected:function(){return null!==l.selRange},inInSelection:function(e){return!!h.isSelected()&amp;&amp;l.selRange.includes(e)},deselect:function(){h.isSelected()&amp;&amp;(p.selection.inProgress=!1,l.selRange=null,p.view.wt.selections.current.clear(),p.view.wt.selections.area.clear(),(l.settings.currentHeaderClassName||l.settings.currentRowClassName||l.settings.currentColClassName)&amp;&amp;p.view.wt.selections.highlight.clear(),f.destroyEditor(),h.refreshBorders(),H(p.rootElement,["ht__selection--rows","ht__selection--columns"]),E.hooks.run(p,"afterDeselect"))},selectAll:function(){l.settings.multiSelect&amp;&amp;(h.setRangeStart(new ue(0,0)),h.setRangeEnd(new ue(p.countRows()-1,p.countCols()-1),!1))},empty:function(){if(h.isSelected()){var e,t,n=l.selRange.getTopLeftCorner(),o=l.selRange.getBottomRightCorner(),r=[];for(e=n.row;e&lt;=o.row;e++)for(t=n.col;t&lt;=o.col;t++)p.getCellMeta(e,t).readOnly||r.push([e,t,""]);p.setDataAtCell(r)}}},this.init=function(){c.setData(l.settings.data),E.hooks.run(p,"beforeInit"),W()&amp;&amp;k(p.rootElement,"mobile"),this.updateSettings(l.settings,!0),this.view=new ne(this),f=new V(p,l,h,u),this.forceFullRender=!0,E.hooks.run(p,"init"),this.view.render(),"object"==typeof l.firstRun&amp;&amp;(E.hooks.run(p,"afterChange",l.firstRun[0],l.firstRun[1]),l.firstRun=!1),E.hooks.run(p,"afterInit")},this.validateCell=function(e,t,n,o){function r(e){var o=t.visualCol,r=t.visualRow,i=p.getCell(r,o,!0);i&amp;&amp;"TH"!=i.nodeName&amp;&amp;p.view.wt.wtSettings.settings.cellRenderer(r,o,i),n(e)}var i=p.getCellValidator(t);"[object RegExp]"===Object.prototype.toString.call(i)&amp;&amp;(i=function(e){return function(t,n){n(e.test(t))}}(i)),P(i)?(e=E.hooks.run(p,"beforeValidate",e,t.visualRow,t.prop,o),p._registerTimeout(setTimeout(function(){i.call(t,e,function(n){n=E.hooks.run(p,"afterValidate",n,e,t.visualRow,t.prop,o),t.valid=n,r(n),E.hooks.run(p,"postAfterValidate",n,e,t.visualRow,t.prop,o)})},0))):p._registerTimeout(setTimeout(function(){t.valid=!0,r(t.valid)},0))},this.setDataAtCell=function(e,t,n,s){var a,l,d,h=i(e,t,n),f=[];for(a=0,l=h.length;a&lt;l;a++){if("object"!=typeof h[a])throw new Error("Method `setDataAtCell` accepts row number or changes array of arrays as its first parameter");if("number"!=typeof h[a][1])throw new Error("Method `setDataAtCell` accepts row and column number as its parameters. If you want to use object property name, use method `setDataAtRowProp`");d=u.colToProp(h[a][1]),f.push([h[a][0],d,c.getAtCell(w.toPhysicalRow(h[a][0]),h[a][1]),h[a][2]])}s||"object"!=typeof e||(s=t),p.runHooks("afterSetDataAtCell",f,s),o(f,s,function(){r(f,s)})},this.setDataAtRowProp=function(e,t,n,s){var a,l,u=i(e,t,n),d=[];for(a=0,l=u.length;a&lt;l;a++)d.push([u[a][0],u[a][1],c.getAtCell(w.toPhysicalRow(u[a][0]),u[a][1]),u[a][2]]);s||"object"!=typeof e||(s=t),p.runHooks("afterSetDataAtRowProp",d,s),o(d,s,function(){r(d,s)})},this.listen=function(){E.activeGuid=p.guid},this.unlisten=function(){E.activeGuid=null},this.isListening=function(){return E.activeGuid===p.guid},this.destroyEditor=function(e){h.refreshBorders(e)},this.populateFromArray=function(e,t,n,o,r,i,s,a,l){var u;if("object"!=typeof n||"object"!=typeof n[0])throw new Error("populateFromArray parameter `input` must be an array of arrays");return u="number"==typeof o?new ue(o,r):null,d.populateFromArray(new ue(e,t),n,u,i,s,a,l)},this.spliceCol=function(e,t,n){return u.spliceCol.apply(u,arguments)},this.spliceRow=function(e,t,n){return u.spliceRow.apply(u,arguments)},this.getSelected=function(){if(h.isSelected())return[l.selRange.from.row,l.selRange.from.col,l.selRange.to.row,l.selRange.to.col]},this.getSelectedRange=function(){if(h.isSelected())return l.selRange},this.render=function(){p.view&amp;&amp;(p.renderCall=!0,p.forceFullRender=!0,h.refreshBorders(null,!0))},this.loadData=function(e){function t(){l.cellSettings.length=0}if(Array.isArray(l.settings.dataSchema)?p.dataType="array":P(l.settings.dataSchema)?p.dataType="function":p.dataType="object",u&amp;&amp;u.destroy(),u=new j(p,l,m),"object"==typeof e&amp;&amp;null!==e)e.push&amp;&amp;e.splice||(e=[e]);else{if(null!==e)throw new Error("loadData only accepts array of objects or array of arrays ("+typeof e+" given)");e=[];var n,o=0,r=0,i=u.getSchema();for(o=0,r=l.settings.startRows;o&lt;r;o++)if("object"!==p.dataType&amp;&amp;"function"!==p.dataType||!l.settings.dataSchema)if("array"===p.dataType)n=z(i[0]),e.push(n);else{n=[];for(var s=0,a=l.settings.startCols;s&lt;a;s++)n.push(null);e.push(n)}else n=z(i),e.push(n)}l.isPopulated=!1,m.prototype.data=e,Array.isArray(e[0])&amp;&amp;(p.dataType="array"),u.dataSource=e,c.data=e,c.dataType=p.dataType,c.colToProp=u.colToProp.bind(u),c.propToCol=u.propToCol.bind(u),t(),d.adjustRowsAndCols(),E.hooks.run(p,"afterLoadData",l.firstRun),l.firstRun?l.firstRun=[null,"loadData"]:(E.hooks.run(p,"afterChange",null,"loadData"),p.render()),l.isPopulated=!0},this.getData=function(e,t,n,o){return I(e)?u.getAll():u.getRange(new ue(e,t),new ue(n,o),u.DESTINATION_RENDERER)},this.getCopyableText=function(e,t,n,o){return u.getCopyableText(new ue(e,t),new ue(n,o))},this.getCopyableData=function(e,t){return u.getCopyable(e,u.colToProp(t))},this.getSchema=function(){return u.getSchema()},this.updateSettings=function(e,t){var n,o,r,i=!1;if(L(e.rows))throw new Error('"rows" setting is no longer supported. do you mean startRows, minRows or maxRows?');if(L(e.cols))throw new Error('"cols" setting is no longer supported. do you mean startCols, minCols or maxCols?');for(n in e)"data"!==n&amp;&amp;(E.hooks.getRegistered().indexOf(n)&gt;-1?(P(e[n])||Array.isArray(e[n]))&amp;&amp;p.addHook(n,e[n]):!t&amp;&amp;e.hasOwnProperty(n)&amp;&amp;(m.prototype[n]=e[n]));if(void 0===e.data&amp;&amp;void 0===l.settings.data?p.loadData(null):void 0!==e.data?p.loadData(e.data):void 0!==e.columns&amp;&amp;u.createMap(),r=p.countCols(),e.columns&amp;&amp;P(e.columns)&amp;&amp;(r=p.countSourceCols(),i=!0),void 0===e.cell&amp;&amp;void 0===e.cells&amp;&amp;void 0===e.columns||(l.cellSettings.length=0),r&gt;0){var a,c;for(n=0,o=0;n&lt;r;n++)i&amp;&amp;!e.columns(n)||(l.columnSettings[o]=A(m,l.columnsSettingConflicts),a=l.columnSettings[o].prototype,m.prototype.columns&amp;&amp;(c=i?m.prototype.columns(n):m.prototype.columns[o],c&amp;&amp;(U(a,c),U(a,s(c)))),o++)}if(L(e.cell))for(var f in e.cell)if(e.cell.hasOwnProperty(f)){var g=e.cell[f];p.setCellMetaObject(g.row,g.col,g)}E.hooks.run(p,"afterCellMetaReset"),L(e.className)&amp;&amp;(m.prototype.className&amp;&amp;H(p.rootElement,m.prototype.className),e.className&amp;&amp;k(p.rootElement,e.className));var w=p.rootElement.style.height;""!==w&amp;&amp;(w=parseInt(p.rootElement.style.height,10));var v=e.height;if(P(v)&amp;&amp;(v=v()),t){var y=p.rootElement.getAttribute("style");y&amp;&amp;p.rootElement.setAttribute("data-initialstyle",p.rootElement.getAttribute("style"))}if(null===v){var b=p.rootElement.getAttribute("data-initialstyle");b&amp;&amp;(b.indexOf("height")&gt;-1||b.indexOf("overflow")&gt;-1)?p.rootElement.setAttribute("style",b):(p.rootElement.style.height="",p.rootElement.style.overflow="")}else void 0!==v&amp;&amp;(p.rootElement.style.height=v+"px",p.rootElement.style.overflow="hidden");if("undefined"!=typeof e.width){var C=e.width;P(C)&amp;&amp;(C=C()),p.rootElement.style.width=C+"px"}t||(u.clearLengthCache(),p.view&amp;&amp;p.view.wt.wtViewport.resetHasOversizedColumnHeadersMarked(),E.hooks.run(p,"afterUpdateSettings")),d.adjustRowsAndCols(),p.view&amp;&amp;!l.firstRun&amp;&amp;(p.forceFullRender=!0,h.refreshBorders(null,!0)),t||!p.view||""!==w&amp;&amp;""!==v&amp;&amp;void 0!==v||w===v||p.view.wt.wtOverlays.updateMainScrollableElements()},this.getValue=function(){var e=p.getSelected();if(m.prototype.getValue){if(P(m.prototype.getValue))return m.prototype.getValue.call(p);if(e)return p.getData()[e[0]][m.prototype.getValue]}else if(e)return p.getDataAtCell(e[0],e[1])},this.getSettings=function(){return l.settings},this.clear=function(){h.selectAll(),h.empty()},this.alter=function(e,t,n,o,r){d.alter(e,t,n,o,r)},this.getCell=function(e,t,n){return p.view.getCellAtCoords(new ue(e,t),n)},this.getCoords=function(e){return this.view.wt.wtTable.getCoords.call(this.view.wt.wtTable,e)},this.colToProp=function(e){return u.colToProp(e)},this.propToCol=function(e){return u.propToCol(e)},this.toVisualRow=function(e){return w.toVisualRow(e)},this.toVisualColumn=function(e){return w.toVisualColumn(e)},this.toPhysicalRow=function(e){return w.toPhysicalRow(e)},this.toPhysicalColumn=function(e){return w.toPhysicalColumn(e)},this.getDataAtCell=function(e,t){return u.get(e,u.colToProp(t))},this.getDataAtRowProp=function(e,t){return u.get(e,t)},this.getDataAtCol=function(e){var t=[];return t.concat.apply(t,u.getRange(new ue(0,e),new ue(l.settings.data.length-1,e),u.DESTINATION_RENDERER))},this.getDataAtProp=function(e){var t,n=[];return t=u.getRange(new ue(0,u.propToCol(e)),new ue(l.settings.data.length-1,u.propToCol(e)),u.DESTINATION_RENDERER),
n.concat.apply(n,t)},this.getSourceData=function(e,t,n,o){var r;return r=void 0===e?c.getData():c.getByRange(new ue(e,t),new ue(n,o))},this.getSourceDataArray=function(e,t,n,o){var r;return r=void 0===e?c.getData(!0):c.getByRange(new ue(e,t),new ue(n,o),!0)},this.getSourceDataAtCol=function(e){return c.getAtColumn(e)},this.getSourceDataAtRow=function(e){return c.getAtRow(e)},this.getSourceDataAtCell=function(e,t){return c.getAtCell(e,t)},this.getDataAtRow=function(e){var t=u.getRange(new ue(e,0),new ue(e,this.countCols()-1),u.DESTINATION_RENDERER);return t[0]},this.getDataType=function(e,t,n,o){var r=this,i=null,s=null;void 0===e&amp;&amp;(e=0,n=this.countRows(),t=0,o=this.countCols()),void 0===n&amp;&amp;(n=e),void 0===o&amp;&amp;(o=t);var a="mixed";return te(Math.min(e,n),Math.max(e,n),function(e){var n=!0;return te(Math.min(t,o),Math.max(t,o),function(t){var o=r.getCellMeta(e,t);return s=o.type,i?n=i===s:i=s,n}),a=n?s:"mixed",n}),a},this.removeCellMeta=function(e,t,n){var o=p.getCellMeta(e,t);void 0!=o[n]&amp;&amp;delete l.cellSettings[e][t][n]},this.spliceCellsMeta=function(e,t){for(var n,o=[],r=2;r&lt;arguments.length;r++)o[r-2]=arguments[r];(n=l.cellSettings).splice.apply(n,$traceurRuntime.spread([e,t],o))},this.setCellMetaObject=function(e,t,n){if("object"==typeof n)for(var o in n)if(n.hasOwnProperty(o)){var r=n[o];this.setCellMeta(e,t,o,r)}},this.setCellMeta=function(e,t,n,o){var r;r=w.toPhysical(e,t),e=r[0],t=r[1],r,l.cellSettings[e]||(l.cellSettings[e]=[]),l.cellSettings[e][t]||(l.cellSettings[e][t]=new l.columnSettings[t]),l.cellSettings[e][t][n]=o,E.hooks.run(p,"afterSetCellMeta",e,t,n,o)},this.getCellsMeta=function(){return q(l.cellSettings)},this.getCellMeta=function(e,t){var n,o,r=u.colToProp(t),i=e,a=t;if(n=w.toPhysical(e,t),e=n[0],t=n[1],n,l.columnSettings[t]||(l.columnSettings[t]=A(m,l.columnsSettingConflicts)),l.cellSettings[e]||(l.cellSettings[e]=[]),l.cellSettings[e][t]||(l.cellSettings[e][t]=new l.columnSettings[t]),o=l.cellSettings[e][t],o.row=e,o.col=t,o.visualRow=i,o.visualCol=a,o.prop=r,o.instance=p,E.hooks.run(p,"beforeGetCellMeta",e,t,o),U(o,s(o)),o.cells){var c=o.cells.call(o,e,t,r);c&amp;&amp;(U(o,c),U(o,s(c)))}return E.hooks.run(p,"afterGetCellMeta",e,t,o),o},this.getCellMetaAtRow=function(e){return l.cellSettings[e]},this.isColumnModificationAllowed=function(){return!("object"===p.dataType||p.getSettings().columns)};var v=se("renderer");this.getCellRenderer=function(e,t){var n=v.call(this,e,t);return Q(n)},this.getCellEditor=se("editor"),this.getCellValidator=se("validator"),this.validateCells=function(e){var t=new n;e&amp;&amp;(t.onQueueEmpty=e);for(var o=p.countRows()-1;o&gt;=0;){for(var r=p.countCols()-1;r&gt;=0;)t.addValidatorToQueue(),p.validateCell(p.getDataAtCell(o,r),p.getCellMeta(o,r),function(e){if("boolean"!=typeof e)throw new Error("Validation error: result is not boolean");e===!1&amp;&amp;(t.valid=!1),t.removeValidatorFormQueue()},"validateCells"),r--;o--}t.checkIfQueueIsEmpty()},this.getRowHeader=function(e){var t=l.settings.rowHeaders;return void 0!==e&amp;&amp;(e=E.hooks.run(p,"modifyRowHeader",e)),void 0===e?(t=[],te(p.countRows()-1,function(e){t.push(p.getRowHeader(e))})):Array.isArray(t)&amp;&amp;void 0!==t[e]?t=t[e]:P(t)?t=t(e):t&amp;&amp;"string"!=typeof t&amp;&amp;"number"!=typeof t&amp;&amp;(t=e+1),t},this.hasRowHeaders=function(){return!!l.settings.rowHeaders},this.hasColHeaders=function(){if(void 0!==l.settings.colHeaders&amp;&amp;null!==l.settings.colHeaders)return!!l.settings.colHeaders;for(var e=0,t=p.countCols();e&lt;t;e++)if(p.getColHeader(e))return!0;return!1},this.getColHeader=function(e){var t=l.settings.columns&amp;&amp;P(l.settings.columns),n=l.settings.colHeaders;if(e=E.hooks.run(p,"modifyColHeader",e),void 0===e){for(var o=[],r=t?p.countSourceCols():p.countCols(),i=0;i&lt;r;i++)o.push(p.getColHeader(i));n=o}else{var s=function(e){for(var t=[],n=p.countSourceCols(),o=0;o&lt;n;o++)P(p.getSettings().columns)&amp;&amp;p.getSettings().columns(o)&amp;&amp;t.push(o);return t[e]},a=e;e=E.hooks.run(p,"modifyCol",e);var u=s(e);l.settings.columns&amp;&amp;P(l.settings.columns)&amp;&amp;l.settings.columns(u)&amp;&amp;l.settings.columns(u).title?n=l.settings.columns(u).title:l.settings.columns&amp;&amp;l.settings.columns[e]&amp;&amp;l.settings.columns[e].title?n=l.settings.columns[e].title:Array.isArray(l.settings.colHeaders)&amp;&amp;void 0!==l.settings.colHeaders[e]?n=l.settings.colHeaders[e]:P(l.settings.colHeaders)?n=l.settings.colHeaders(e):l.settings.colHeaders&amp;&amp;"string"!=typeof l.settings.colHeaders&amp;&amp;"number"!=typeof l.settings.colHeaders&amp;&amp;(n=ae(a))}return n},this._getColWidthFromSettings=function(e){var t=p.getCellMeta(0,e),n=t.width;if(void 0!==n&amp;&amp;n!==l.settings.width||(n=t.colWidths),void 0!==n&amp;&amp;null!==n){switch(typeof n){case"object":n=n[e];break;case"function":n=n(e)}"string"==typeof n&amp;&amp;(n=parseInt(n,10))}return n},this.getColWidth=function(e){var t=p._getColWidthFromSettings(e);return t=E.hooks.run(p,"modifyColWidth",t,e),void 0===t&amp;&amp;(t=de.DEFAULT_WIDTH),t},this._getRowHeightFromSettings=function(e){var t=l.settings.rowHeights;if(void 0!==t&amp;&amp;null!==t){switch(typeof t){case"object":t=t[e];break;case"function":t=t(e)}"string"==typeof t&amp;&amp;(t=parseInt(t,10))}return t},this.getRowHeight=function(e){var t=p._getRowHeightFromSettings(e);return t=E.hooks.run(p,"modifyRowHeight",t,e)},this.countSourceRows=function(){var e=E.hooks.run(p,"modifySourceLength");return e||(p.getSourceData()?p.getSourceData().length:0)},this.countSourceCols=function(){var e=0,t=p.getSourceData()&amp;&amp;p.getSourceData()[0]?p.getSourceData()[0]:[];return e=G(t)?K(t):t.length||0},this.countRows=function(){return u.getLength()},this.countCols=function(){var e=!1,t=0;if("array"===p.dataType&amp;&amp;(e=l.settings.data&amp;&amp;l.settings.data[0]&amp;&amp;l.settings.data[0].length),e&amp;&amp;(t=l.settings.data[0].length),l.settings.columns){var n=P(l.settings.columns);if(n)if("array"===p.dataType){for(var o=0,r=0;r&lt;t;r++)l.settings.columns(r)&amp;&amp;o++;t=o}else"object"!==p.dataType&amp;&amp;"function"!==p.dataType||(t=u.colToPropCache.length);else t=l.settings.columns.length}else"object"!==p.dataType&amp;&amp;"function"!==p.dataType||(t=u.colToPropCache.length);return t},this.rowOffset=function(){return p.view.wt.wtTable.getFirstRenderedRow()},this.colOffset=function(){return p.view.wt.wtTable.getFirstRenderedColumn()},this.countRenderedRows=function(){return p.view.wt.drawn?p.view.wt.wtTable.getRenderedRowsCount():-1},this.countVisibleRows=function(){return p.view.wt.drawn?p.view.wt.wtTable.getVisibleRowsCount():-1},this.countRenderedCols=function(){return p.view.wt.drawn?p.view.wt.wtTable.getRenderedColumnsCount():-1},this.countVisibleCols=function(){return p.view.wt.drawn?p.view.wt.wtTable.getVisibleColumnsCount():-1},this.countEmptyRows=function(e){for(var t,n=p.countRows()-1,o=0;n&gt;=0;){if(t=E.hooks.run(this,"modifyRow",n),p.isEmptyRow(t))o++;else if(e)break;n--}return o},this.countEmptyCols=function(e){if(p.countRows()&lt;1)return 0;for(var t=p.countCols()-1,n=0;t&gt;=0;){if(p.isEmptyCol(t))n++;else if(e)break;t--}return n},this.isEmptyRow=function(e){return l.settings.isEmptyRow.call(p,e)},this.isEmptyCol=function(e){return l.settings.isEmptyCol.call(p,e)},this.selectCell=function(e,t,n,o,r,i){var s;if(i=I(i)||i===!0,"number"!=typeof e||e&lt;0||e&gt;=p.countRows())return!1;if("number"!=typeof t||t&lt;0||t&gt;=p.countCols())return!1;if(L(n)){if("number"!=typeof n||n&lt;0||n&gt;=p.countRows())return!1;if("number"!=typeof o||o&lt;0||o&gt;=p.countCols())return!1}return s=new ue(e,t),l.selRange=new ce(s,s,s),i&amp;&amp;p.listen(),I(n)?h.setRangeEnd(l.selRange.from,r):h.setRangeEnd(new ue(n,o),r),p.selection.finish(),!0},this.selectCellByProp=function(e,t,n,o,r){return arguments[1]=u.propToCol(arguments[1]),L(arguments[3])&amp;&amp;(arguments[3]=u.propToCol(arguments[3])),p.selectCell.apply(p,arguments)},this.deselectCell=function(){h.deselect()},this.scrollViewportTo=function(e,t){var n=void 0!==arguments[2]&amp;&amp;arguments[2],o=void 0!==arguments[3]&amp;&amp;arguments[3];if(void 0!==e&amp;&amp;(e&lt;0||e&gt;=p.countRows()))return!1;if(void 0!==t&amp;&amp;(t&lt;0||t&gt;=p.countCols()))return!1;var r=!1;return void 0!==e&amp;&amp;void 0!==t&amp;&amp;(p.view.wt.wtOverlays.topOverlay.scrollTo(e,n),p.view.wt.wtOverlays.leftOverlay.scrollTo(t,o),r=!0),"number"==typeof e&amp;&amp;"number"!=typeof t&amp;&amp;(p.view.wt.wtOverlays.topOverlay.scrollTo(e,n),r=!0),"number"==typeof t&amp;&amp;"number"!=typeof e&amp;&amp;(p.view.wt.wtOverlays.leftOverlay.scrollTo(t,o),r=!0),r},this.destroy=function(){p._clearTimeouts(),p.view&amp;&amp;p.view.destroy(),c&amp;&amp;c.destroy(),c=null,x(p.rootElement),g.destroy(),E.hooks.run(p,"afterDestroy"),E.hooks.destroy(p);for(var e in p)p.hasOwnProperty(e)&amp;&amp;(P(p[e])?p[e]=a:"guid"!==e&amp;&amp;(p[e]=null));u&amp;&amp;u.destroy(),u=null,l=null,d=null,h=null,f=null,p=null,m=null},this.getActiveEditor=function(){return f.getActiveEditor()},this.getPlugin=function(e){return J(this,e)},this.getInstance=function(){return p},this.addHook=function(e,t){E.hooks.add(e,t,p)},this.hasHook=function(e){return E.hooks.has(e,p)},this.addHookOnce=function(e,t){E.hooks.once(e,t,p)},this.removeHook=function(e,t){E.hooks.remove(e,t,p)},this.runHooks=function(e,t,n,o,r,i,s){return E.hooks.run(p,e,t,n,o,r,i,s)},this.timeouts=[],this._registerTimeout=function(e){this.timeouts.push(e)},this._clearTimeouts=function(){for(var e=0,t=this.timeouts.length;e&lt;t;e++)clearTimeout(this.timeouts[e])},this.version=E.version,E.hooks.run(p,"construct")};var he=function(){};he.prototype={data:void 0,dataSchema:void 0,width:void 0,height:void 0,startRows:5,startCols:5,rowHeaders:void 0,colHeaders:null,colWidths:void 0,rowHeights:void 0,columns:void 0,cells:void 0,cell:[],comments:!1,customBorders:!1,minRows:0,minCols:0,maxRows:1/0,maxCols:1/0,minSpareRows:0,minSpareCols:0,allowInsertRow:!0,allowInsertColumn:!0,allowRemoveRow:!0,allowRemoveColumn:!0,multiSelect:!0,fillHandle:!0,fixedRowsTop:0,fixedRowsBottom:0,fixedColumnsLeft:0,outsideClickDeselects:!0,enterBeginsEditing:!0,enterMoves:{row:1,col:0},tabMoves:{row:0,col:1},autoWrapRow:!1,autoWrapCol:!1,copyRowsLimit:1e3,copyColsLimit:1e3,pasteMode:"overwrite",persistentState:void 0,currentRowClassName:void 0,currentColClassName:void 0,currentHeaderClassName:"ht__highlight",className:void 0,tableClassName:void 0,stretchH:"none",isEmptyRow:function(e){var t,n,o,r;for(t=0,n=this.countCols();t&lt;n;t++)if(o=this.getDataAtCell(e,t),""!==o&amp;&amp;null!==o&amp;&amp;L(o))return"object"==typeof o&amp;&amp;(r=this.getCellMeta(e,t),$(this.getSchema()[r.prop],o));return!0},isEmptyCol:function(e){var t,n,o;for(t=0,n=this.countRows();t&lt;n;t++)if(o=this.getDataAtCell(t,e),""!==o&amp;&amp;null!==o&amp;&amp;L(o))return!1;return!0},observeDOMVisibility:!0,allowInvalid:!0,allowEmpty:!0,invalidCellClassName:"htInvalid",placeholder:!1,placeholderCellClassName:"htPlaceholder",readOnlyCellClassName:"htDimmed",renderer:void 0,commentedCellClassName:"htCommentCell",fragmentSelection:!1,readOnly:!1,skipColumnOnPaste:!1,search:!1,type:"text",copyable:!0,editor:void 0,autoComplete:void 0,visibleRows:10,trimDropdown:!0,debug:!1,wordWrap:!0,noWordWrapClassName:"htNoWrap",contextMenu:void 0,contextMenuCopyPaste:void 0,copyPaste:void 0,undo:void 0,columnSorting:void 0,manualColumnMove:void 0,manualColumnResize:void 0,manualRowMove:void 0,manualRowResize:void 0,mergeCells:!1,viewportRowRenderingOffset:"auto",viewportColumnRenderingOffset:"auto",validator:void 0,disableVisualSelection:!1,sortIndicator:void 0,manualColumnFreeze:void 0,trimWhitespace:!0,settings:void 0,source:void 0,title:void 0,checkedTemplate:void 0,uncheckedTemplate:void 0,label:void 0,format:void 0,language:void 0,selectOptions:void 0,autoColumnSize:void 0,autoRowSize:void 0,dateFormat:void 0,correctFormat:!1,defaultDate:void 0,strict:void 0,allowHtml:!1,renderAllRows:void 0,preventOverflow:!1,bindRowsWithHeaders:void 0,collapsibleColumns:void 0,columnSummary:void 0,dropdownMenu:void 0,filters:void 0,formulas:void 0,ganttChart:void 0,headerTooltips:void 0,hiddenColumns:void 0,hiddenRows:void 0,nestedHeaders:void 0,trimRows:void 0,rowHeaderWidth:void 0,columnHeaderHeight:void 0,observeChanges:void 0,sortFunction:void 0,sortByRelevance:!0,filter:!0,filteringCaseSensitive:!1},E.DefaultSettings=he},{"3rdparty/walkontable/src/calculator/viewportColumns":4,"3rdparty/walkontable/src/cell/coords":6,"3rdparty/walkontable/src/cell/range":7,browser:24,dataMap:27,dataSource:28,editorManager:29,eventManager:42,"helpers/array":43,"helpers/browser":44,"helpers/data":45,"helpers/dom/element":47,"helpers/function":50,"helpers/mixed":51,"helpers/number":52,"helpers/object":53,"helpers/setting":54,"helpers/string":55,numbro:"numbro",plugins:61,renderers:117,tableView:126,"utils/recordTranslator":130}],27:[function(e,t,n){"use strict";function o(e,t,n){var o=this;this.instance=e,this.priv=t,this.GridSettings=n,this.dataSource=this.instance.getSettings().data,this.cachedLength=null,this.skipCache=!1,this.latestSourceRowsCount=0,this.dataSource&amp;&amp;this.dataSource[0]?this.duckSchema=this.recursiveDuckSchema(this.dataSource[0]):this.duckSchema={},this.createMap(),this.interval=O.create(function(){return o.clearLengthCache()},"15fps"),this.instance.addHook("skipLengthCache",function(e){return o.onSkipLengthCache(e)})}Object.defineProperties(n,{DataMap:{get:function(){return o}},__esModule:{value:!0}});var r,i,s,a,l,u,c,d,h,f=(r=e("browser"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).default,p=(i=e("SheetClip"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).default,m=(s=e("helpers/data"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).cellMethodLookupFactory,g=(a=e("helpers/setting"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).columnFactory,w=(l=e("helpers/object"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}),v=w.createObjectPropListener,y=w.duckSchema,b=w.deepExtend,C=w.deepClone,_=w.isObject,R=w.deepObjectSize,M=(u=e("helpers/array"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}),S=M.extendArray,E=M.to2dArray,O=(c=e("utils/interval"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}).Interval,T=(d=e("helpers/number"),d&amp;&amp;d.__esModule&amp;&amp;d||{default:d}).rangeEach,k=(h=e("multiMap"),h&amp;&amp;h.__esModule&amp;&amp;h||{default:h}).MultiMap;o.prototype.DESTINATION_RENDERER=1,o.prototype.DESTINATION_CLIPBOARD_GENERATOR=2,o.prototype.recursiveDuckSchema=function(e){return y(e)},o.prototype.recursiveDuckColumns=function(e,t,n){var o,r;if("undefined"==typeof t&amp;&amp;(t=0,n=""),"object"==typeof e&amp;&amp;!Array.isArray(e))for(r in e)e.hasOwnProperty(r)&amp;&amp;(null===e[r]?(o=n+r,this.colToPropCache.push(o),this.propToColCache.set(o,t),t++):t=this.recursiveDuckColumns(e[r],t,r+"."));return t},o.prototype.createMap=function(){var e,t=this.getSchema();if("undefined"==typeof t)throw new Error("trying to create `columns` definition but you didn't provide `schema` nor `data`");this.colToPropCache=[],this.propToColCache=new k;var n=this.instance.getSettings().columns;if(n){var o=n.length,r=0,i=!1,s=R(t);for("function"==typeof n&amp;&amp;(o=s&gt;0?s:this.instance.countSourceCols(),i=!0),e=0;e&lt;o;e++){var a=i?n(e):n[e];if(_(a)){if("undefined"!=typeof a.data){var l=i?r:e;this.colToPropCache[l]=a.data,this.propToColCache.set(a.data,l)}r++}}}else this.recursiveDuckColumns(t)},o.prototype.colToProp=function(e){return e=f.hooks.run(this.instance,"modifyCol",e),this.colToPropCache&amp;&amp;"undefined"!=typeof this.colToPropCache[e]?this.colToPropCache[e]:e},o.prototype.propToCol=function(e){var t;return t="undefined"==typeof this.propToColCache.get(e)?e:this.propToColCache.get(e),t=f.hooks.run(this.instance,"unmodifyCol",t)},o.prototype.getSchema=function(){var e=this.instance.getSettings().dataSchema;return e?"function"==typeof e?e():e:this.duckSchema},o.prototype.createRow=function(e,t,n){var o,r,i=this.instance.countCols(),s=0;t||(t=1),("number"!=typeof e||e&gt;=this.instance.countSourceRows())&amp;&amp;(e=this.instance.countSourceRows()),f.hooks.run(this.instance,"beforeCreateRow",e,t,n),r=e;for(var a=this.instance.getSettings().maxRows;s&lt;t&amp;&amp;this.instance.countSourceRows()&lt;a;)"array"===this.instance.dataType?this.instance.getSettings().dataSchema?o=C(this.getSchema()):(o=[],T(i-1,function(){return o.push(null)})):"function"===this.instance.dataType?o=this.instance.getSettings().dataSchema(e):(o={},b(o,this.getSchema())),e===this.instance.countSourceRows()?this.dataSource.push(o):this.spliceData(e,0,o),s++,r++;return f.hooks.run(this.instance,"afterCreateRow",e,s,n),this.instance.forceFullRender=!0,s},o.prototype.createCol=function(e,t,n){if(!this.instance.isColumnModificationAllowed())throw new Error("Cannot create new column. When data source in an object, you can only have as much columns as defined in first data row, data schema or in the 'columns' setting.If you want to be able to add new columns, you have to use array datasource.");var o,r,i=this.instance.countSourceRows(),s=this.dataSource,a=0;t||(t=1),("number"!=typeof e||e&gt;=this.instance.countCols())&amp;&amp;(e=this.instance.countCols()),f.hooks.run(this.instance,"beforeCreateCol",e,t,n),r=e;for(var l=this.instance.getSettings().maxCols;a&lt;t&amp;&amp;this.instance.countCols()&lt;l;){if(o=g(this.GridSettings,this.priv.columnsSettingConflicts),"number"!=typeof e||e&gt;=this.instance.countCols()){if(i&gt;0)for(var u=0;u&lt;i;u++)"undefined"==typeof s[u]&amp;&amp;(s[u]=[]),s[u].push(null);else s.push([null]);this.priv.columnSettings.push(o)}else{for(var u=0;u&lt;i;u++)s[u].splice(r,0,null);this.priv.columnSettings.splice(r,0,o)}a++,r++}return f.hooks.run(this.instance,"afterCreateCol",e,a,n),this.instance.forceFullRender=!0,a},o.prototype.removeRow=function(e,t,n){t||(t=1),"number"!=typeof e&amp;&amp;(e=-t),t=f.hooks.run(this.instance,"modifyRemovedAmount",t,e),e=(this.instance.countSourceRows()+e)%this.instance.countSourceRows();var o=this.physicalRowsToLogical(e,t),r=f.hooks.run(this.instance,"beforeRemoveRow",e,t,o,n);if(r!==!1){var i,s=this.dataSource;i=this.filterData(e,t),i&amp;&amp;(s.length=0,Array.prototype.push.apply(s,i)),f.hooks.run(this.instance,"afterRemoveRow",e,t,o,n),this.instance.forceFullRender=!0}},o.prototype.removeCol=function(e,t,n){if("object"===this.instance.dataType||this.instance.getSettings().columns)throw new Error("cannot remove column with object data source or columns option specified");t||(t=1),"number"!=typeof e&amp;&amp;(e=-t),e=(this.instance.countCols()+e)%this.instance.countCols();var o=this.physicalColumnsToLogical(e,t),r=o.slice(0).sort(function(e,t){return t-e}),i=f.hooks.run(this.instance,"beforeRemoveCol",e,t,o,n);if(i!==!1){for(var s=!0,a=r.length,l=this.dataSource,u=0;u&lt;a;u++)s&amp;&amp;o[0]!==o[u]-u&amp;&amp;(s=!1);if(s)for(var c=0,d=this.instance.countSourceRows();c&lt;d;c++)l[c].splice(o[0],t);else{for(var h=0,p=this.instance.countSourceRows();h&lt;p;h++)for(var m=0;m&lt;a;m++)l[h].splice(r[m],1);for(var g=0;g&lt;a;g++)this.priv.columnSettings.splice(o[g],1)}f.hooks.run(this.instance,"afterRemoveCol",e,t,o,n),this.instance.forceFullRender=!0}},o.prototype.spliceCol=function(e,t,n){var o=4&lt;=arguments.length?[].slice.call(arguments,3):[],r=this.instance.getDataAtCol(e),i=r.slice(t,t+n),s=r.slice(t+n);S(o,s);for(var a=0;a&lt;n;)o.push(null),a++;return E(o),this.instance.populateFromArray(t,e,o,null,null,"spliceCol"),i},o.prototype.spliceRow=function(e,t,n){var o=4&lt;=arguments.length?[].slice.call(arguments,3):[],r=this.instance.getSourceDataAtRow(e),i=r.slice(t,t+n),s=r.slice(t+n);S(o,s);for(var a=0;a&lt;n;)o.push(null),a++;return this.instance.populateFromArray(e,t,[o],null,null,"spliceRow"),i},o.prototype.spliceData=function(e,t,n){var o=f.hooks.run(this.instance,"beforeDataSplice",e,t,n);o!==!1&amp;&amp;this.dataSource.splice(e,t,n)},o.prototype.filterData=function(e,t){var n=this.physicalRowsToLogical(e,t),o=f.hooks.run(this.instance,"beforeDataFilter",e,t,n);if(o!==!1){var r=this.dataSource.filter(function(e,t){return n.indexOf(t)==-1});return r}},o.prototype.get=function(e,t){e=f.hooks.run(this.instance,"modifyRow",e);var n=this.dataSource[e],o=f.hooks.run(this.instance,"modifyRowData",e);n=isNaN(o)?o:n;var r=null;if(n&amp;&amp;n.hasOwnProperty&amp;&amp;n.hasOwnProperty(t))r=n[t];else if("string"==typeof t&amp;&amp;t.indexOf(".")&gt;-1){var i=t.split("."),s=n;if(!s)return null;for(var a=0,l=i.length;a&lt;l;a++)if(s=s[i[a]],"undefined"==typeof s)return null;r=s}else"function"==typeof t&amp;&amp;(r=t(this.dataSource.slice(e,e+1)[0]));if(f.hooks.has("modifyData",this.instance)){var u=v(r);f.hooks.run(this.instance,"modifyData",e,this.propToCol(t),u,"get"),u.isTouched()&amp;&amp;(r=u.value)}return r};var x=m("copyable",!1);o.prototype.getCopyable=function(e,t){return x.call(this.instance,e,this.propToCol(t))?this.get(e,t):""},o.prototype.set=function(e,t,n,o){e=f.hooks.run(this.instance,"modifyRow",e,o||"datamapGet");var r=this.dataSource[e],i=f.hooks.run(this.instance,"modifyRowData",e);if(r=isNaN(i)?i:r,f.hooks.has("modifyData",this.instance)){var s=v(n);f.hooks.run(this.instance,"modifyData",e,this.propToCol(t),s,"set"),s.isTouched()&amp;&amp;(n=s.value)}if(r&amp;&amp;r.hasOwnProperty&amp;&amp;r.hasOwnProperty(t))r[t]=n;else if("string"==typeof t&amp;&amp;t.indexOf(".")&gt;-1){for(var a=t.split("."),l=r,u=0,c=a.length-1;u&lt;c;u++)"undefined"==typeof l[a[u]]&amp;&amp;(l[a[u]]={}),l=l[a[u]];l[a[u]]=n}else"function"==typeof t?t(this.dataSource.slice(e,e+1)[0],n):r[t]=n},o.prototype.physicalRowsToLogical=function(e,t){for(var n,o=this.instance.countSourceRows(),r=(o+e)%o,i=[],s=t;r&lt;o&amp;&amp;s;)n=f.hooks.run(this.instance,"modifyRow",r),i.push(n),s--,r++;return i},o.prototype.physicalColumnsToLogical=function(e,t){for(var n=this.instance.countCols(),o=(n+e)%n,r=[],i=t;o&lt;n&amp;&amp;i;){var s=f.hooks.run(this.instance,"modifyCol",o);r.push(s),i--,o++}return r},o.prototype.clear=function(){for(var e=0;e&lt;this.instance.countSourceRows();e++)for(var t=0;t&lt;this.instance.countCols();t++)this.set(e,this.colToProp(t),"")},o.prototype.clearLengthCache=function(){this.cachedLength=null},o.prototype.getLength=function(){var e,t=this,n=this.instance.getSettings().maxRows;e=n&lt;0||0===n?0:n||1/0;var o=this.instance.countSourceRows();if(f.hooks.has("modifyRow",this.instance)){var r=this.skipCache;this.interval.start(),o!==this.latestSourceRowsCount&amp;&amp;(r=!0),this.latestSourceRowsCount=o,null===this.cachedLength||r?(T(o-1,function(e){e=f.hooks.run(t.instance,"modifyRow",e),null===e&amp;&amp;--o}),this.cachedLength=o):o=this.cachedLength}else this.interval.stop();return Math.min(o,e)},o.prototype.getAll=function(){var e={row:0,col:0},t=this.instance.getSettings().maxRows;if(0===t)return[];var n={row:Math.min(Math.max(t-1,0),Math.max(this.instance.countSourceRows()-1,0)),col:Math.max(this.instance.countCols()-1,0)};return e.row-n.row!==0||this.instance.countSourceRows()?this.getRange(e,n,o.prototype.DESTINATION_RENDERER):[]},o.prototype.getRange=function(e,t,n){var o,r,i,s,a,l=[],u=n===this.DESTINATION_CLIPBOARD_GENERATOR?this.getCopyable:this.get;for(r=Math.max(e.row,t.row),s=Math.max(e.col,t.col),o=Math.min(e.row,t.row);o&lt;=r;o++){a=[];var c=f.hooks.run(this.instance,"modifyRow",o);for(i=Math.min(e.col,t.col);i&lt;=s&amp;&amp;null!==c;i++)a.push(u.call(this,o,this.colToProp(i)));null!==c&amp;&amp;l.push(a)}return l},o.prototype.getText=function(e,t){return p.stringify(this.getRange(e,t,this.DESTINATION_RENDERER))},o.prototype.getCopyableText=function(e,t){return p.stringify(this.getRange(e,t,this.DESTINATION_CLIPBOARD_GENERATOR))},o.prototype.onSkipLengthCache=function(e){var t=this;this.skipCache=!0,setTimeout(function(){t.skipCache=!1},e)},o.prototype.destroy=function(){this.interval.stop(),this.interval=null,this.instance=null,this.priv=null,this.GridSettings=null,this.dataSource=null,this.cachedLength=null,this.duckSchema=null}},{SheetClip:"SheetClip",browser:24,"helpers/array":43,"helpers/data":45,"helpers/number":52,"helpers/object":53,"helpers/setting":54,multiMap:59,"utils/interval":129}],28:[function(e,t,n){"use strict";Object.defineProperties(n,{DataSource:{get:function(){return u}},__esModule:{value:!0}});var o,r,i,s=(o=e("helpers/object"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).getProperty,a=(r=e("helpers/array"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).arrayEach,l=(i=e("helpers/number"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).rangeEach,u=function(e){var t=void 0!==arguments[1]?arguments[1]:[];this.hot=e,this.data=t,this.dataType="array",this.colToProp=function(){},this.propToCol=function(){}};$traceurRuntime.createClass(u,{getData:function(){var e=void 0!==arguments[0]&amp;&amp;arguments[0],t=this.data;return e&amp;&amp;(t=this.getByRange({row:0,col:0},{row:Math.max(this.countRows()-1,0),col:Math.max(this.countColumns()-1,0)},!0)),t},setData:function(e){this.data=e},getAtColumn:function(e){var t=this,n=[];return a(this.data,function(o){var r=t.colToProp(e);o="string"==typeof r?s(o,r):o[r],n.push(o)}),n},getAtRow:function(e){return this.data[e]},getAtCell:function(e,t){var n=null,o=this.hot.runHooks("modifyRowData",e),r=isNaN(o)?o:this.data[e];if(r){var i=this.colToProp(t);n="string"==typeof i?s(r,i):"function"==typeof i?i(this.data.slice(e,e+1)[0]):r[i]}return n},getByRange:function(e,t){var n=void 0!==arguments[2]&amp;&amp;arguments[2],o=this,r=Math.min(e.row,t.row),i=Math.min(e.col,t.col),s=Math.max(e.row,t.row),a=Math.max(e.col,t.col),u=[];return l(r,s,function(e){var t,r=o.getAtRow(e);"array"===o.dataType?t=r.slice(i,a+1):"object"===o.dataType&amp;&amp;(t=n?[]:{},l(i,a,function(e){var i=o.colToProp(e);n?t.push(r[i]):t[i]=r[i]})),u.push(t)}),u},countRows:function(){return Array.isArray(this.data)?this.data.length:0},countColumns:function(){var e=0;return Array.isArray(this.data)&amp;&amp;("array"===this.dataType?e=this.data[0].length:"object"===this.dataType&amp;&amp;(e=Object.keys(this.data[0]).length)),e},destroy:function(){this.data=null,this.hot=null}},{})},{"helpers/array":43,"helpers/number":52,"helpers/object":53}],29:[function(e,t,n){"use strict";function o(e,t,n){function o(e){var o="function"==typeof t.settings.enterMoves?t.settings.enterMoves(event):t.settings.enterMoves;e?n.transformStart(-o.row,-o.col):n.transformStart(o.row,o.col,!0)}function r(e){e?n.transformEnd(-1,0):n.transformStart(-1,0)}function i(e){e?n.transformEnd(1,0):n.transformStart(1,0)}function s(e){e?n.transformEnd(0,1):n.transformStart(0,1)}function a(e){e?n.transformEnd(0,-1):n.transformStart(0,-1)}function l(l){var u,h;if(e.isListening()&amp;&amp;(c.hooks.run(e,"beforeKeyDown",l),!_&amp;&amp;!y(l)&amp;&amp;(t.lastKeyCode=l.keyCode,n.isSelected()))){if(u=(l.ctrlKey||l.metaKey)&amp;&amp;!l.altKey,g&amp;&amp;!g.isWaiting()&amp;&amp;!(p(l.keyCode)||m(l.keyCode)||u||C.isEditorOpened()))return void C.openEditor("",l);switch(h=l.shiftKey?n.setRangeEnd:n.setRangeStart,l.keyCode){case f.A:!C.isEditorOpened()&amp;&amp;u&amp;&amp;(n.selectAll(),l.preventDefault(),w(l));break;case f.ARROW_UP:C.isEditorOpened()&amp;&amp;!g.isWaiting()&amp;&amp;C.closeEditorAndSaveChanges(u),r(l.shiftKey),l.preventDefault(),w(l);break;case f.ARROW_DOWN:C.isEditorOpened()&amp;&amp;!g.isWaiting()&amp;&amp;C.closeEditorAndSaveChanges(u),i(l.shiftKey),l.preventDefault(),w(l);break;case f.ARROW_RIGHT:C.isEditorOpened()&amp;&amp;!g.isWaiting()&amp;&amp;C.closeEditorAndSaveChanges(u),s(l.shiftKey),l.preventDefault(),w(l);break;case f.ARROW_LEFT:C.isEditorOpened()&amp;&amp;!g.isWaiting()&amp;&amp;C.closeEditorAndSaveChanges(u),a(l.shiftKey),l.preventDefault(),w(l);break;case f.TAB:var b="function"==typeof t.settings.tabMoves?t.settings.tabMoves(l):t.settings.tabMoves;l.shiftKey?n.transformStart(-b.row,-b.col):n.transformStart(b.row,b.col,!0),l.preventDefault(),w(l);break;case f.BACKSPACE:case f.DELETE:n.empty(l),C.prepareEditor(),l.preventDefault();break;case f.F2:C.openEditor(null,l),g&amp;&amp;g.enableFullEditMode(),l.preventDefault();break;case f.ENTER:C.isEditorOpened()?(g&amp;&amp;g.state!==c.EditorState.WAITING&amp;&amp;C.closeEditorAndSaveChanges(u),o(l.shiftKey)):e.getSettings().enterBeginsEditing?(C.openEditor(null,l),g&amp;&amp;g.enableFullEditMode()):o(l.shiftKey),l.preventDefault(),v(l);break;case f.ESCAPE:C.isEditorOpened()&amp;&amp;C.closeEditorAndRestoreOriginalValue(u),l.preventDefault();break;case f.HOME:h(l.ctrlKey||l.metaKey?new d(0,t.selRange.from.col):new d(t.selRange.from.row,0)),l.preventDefault(),w(l);break;case f.END:h(l.ctrlKey||l.metaKey?new d(e.countRows()-1,t.selRange.from.col):new d(t.selRange.from.row,e.countCols()-1)),l.preventDefault(),w(l);break;case f.PAGE_UP:n.transformStart(-e.countVisibleRows(),0),l.preventDefault(),w(l);break;case f.PAGE_DOWN:n.transformStart(e.countVisibleRows(),0),l.preventDefault(),w(l)}}}function u(){function t(e,t,n){"TD"==n.nodeName&amp;&amp;(C.openEditor(),g&amp;&amp;g.enableFullEditMode())}e.addHook("afterDocumentKeyDown",l),h.addEventListener(document.documentElement,"keydown",function(t){_||e.runHooks("afterDocumentKeyDown",t)}),e.view.wt.update("onCellDblClick",t),e.addHook("afterDestroy",function(){_=!0})}var h,g,C=this,_=!1;h=b(e),this.destroyEditor=function(e){this.closeEditor(e)},this.getActiveEditor=function(){return g},this.prepareEditor=function(){var n,o,r,i,s,a,l;return g&amp;&amp;g.isWaiting()?void this.closeEditor(!1,!1,function(e){e&amp;&amp;C.prepareEditor()}):(n=t.selRange.highlight.row,o=t.selRange.highlight.col,r=e.colToProp(o),i=e.getCell(n,o),s=e.getSourceDataAtCell(e.runHooks("modifyRow",n),o),a=e.getCellMeta(n,o),l=e.getCellEditor(a),void(l?(g=c.editors.getEditor(l,e),g.prepare(n,o,r,i,s,a)):g=void 0))},this.isEditorOpened=function(){return g&amp;&amp;g.isOpened()},this.openEditor=function(e,t){g&amp;&amp;!g.cellProperties.readOnly?g.beginEditing(e,t):g&amp;&amp;g.cellProperties.readOnly&amp;&amp;t&amp;&amp;t.keyCode===f.ENTER&amp;&amp;o()},this.closeEditor=function(e,t,n){g?g.finishEditing(e,t,n):n&amp;&amp;n(!1)},this.closeEditorAndSaveChanges=function(e){return this.closeEditor(!1,e)},this.closeEditorAndRestoreOriginalValue=function(e){return this.closeEditor(!0,e)},u()}Object.defineProperties(n,{EditorManager:{get:function(){return o}},__esModule:{value:!0}});var r,i,s,a,l,u,c=(r=e("browser"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).default,d=(i=e("3rdparty/walkontable/src/cell/coords"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).WalkontableCellCoords,h=(s=e("helpers/unicode"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}),f=h.KEY_CODES,p=h.isMetaKey,m=h.isCtrlKey,g=(a=e("helpers/dom/event"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}),w=g.stopPropagation,v=g.stopImmediatePropagation,y=g.isImmediatePropagationStopped,b=((l=e("editors"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).getEditor,(u=e("eventManager"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).eventManager);c.EditorManager=o},{"3rdparty/walkontable/src/cell/coords":6,browser:24,editors:30,eventManager:42,"helpers/dom/event":48,"helpers/unicode":56}],30:[function(e,t,n){"use strict";function o(e){var t,n;n={},t=e,this.getConstructor=function(){return e},this.getInstance=function(e){return e.guid in n||(n[e.guid]=new t(e)),n[e.guid]}}function r(e,t){var n=new o(t);"string"==typeof e&amp;&amp;(h[e]=n,c.editors[d(e)+"Editor"]=t),f.set(t,n)}function i(e,t){var n;if("function"==typeof e)f.get(e)||r(null,e),n=f.get(e);else{if("string"!=typeof e)throw Error('Only strings and functions can be passed as "editor" parameter ');n=h[e]}if(!n)throw Error('No editor registered under name "'+e+'"');return n.getInstance(t)}function s(e){var t;if("string"!=typeof e)throw Error('Only strings and functions can be passed as "editor" parameter ');if(t=h[e],!t)throw Error('No editor registered under name "'+e+'"');return t.getConstructor()}function a(e){return!!h[e]}Object.defineProperties(n,{registerEditor:{get:function(){return r}},getEditor:{get:function(){return i}},hasEditor:{get:function(){return a}},getEditorConstructor:{get:function(){return s}},__esModule:{value:!0}});var l,u,c=(l=e("browser"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).default,d=(u=e("helpers/string"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).toUpperCaseFirst,h={},f=new WeakMap;c.editors=c.editors||{},c.editors.registerEditor=r,c.editors.getEditor=i},{browser:24,"helpers/string":55}],31:[function(e,t,n){"use strict";function o(e){this.instance=e,this.state=a.EditorState.VIRGIN,this._opened=!1,this._fullEditMode=!1,this._closeCallback=null,this.init()}Object.defineProperties(n,{BaseEditor:{get:function(){return o}},__esModule:{value:!0}});var r,i,s,a=(r=e("browser"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).default,l=(i=e("helpers/mixed"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).stringify,u=(s=e("3rdparty/walkontable/src/cell/coords"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).WalkontableCellCoords;a.editors=a.editors||{},a.editors.BaseEditor=o,a.EditorState={VIRGIN:"STATE_VIRGIN",EDITING:"STATE_EDITING",WAITING:"STATE_WAITING",FINISHED:"STATE_FINISHED"},o.prototype._fireCallbacks=function(e){this._closeCallback&amp;&amp;(this._closeCallback(e),this._closeCallback=null)},o.prototype.init=function(){},o.prototype.getValue=function(){throw Error("Editor getValue() method unimplemented")},o.prototype.setValue=function(e){throw Error("Editor setValue() method unimplemented")},o.prototype.open=function(){throw Error("Editor open() method unimplemented")},o.prototype.close=function(){throw Error("Editor close() method unimplemented");
},o.prototype.prepare=function(e,t,n,o,r,i){this.TD=o,this.row=e,this.col=t,this.prop=n,this.originalValue=r,this.cellProperties=i;var s=!document.activeElement||document.activeElement&amp;&amp;void 0===document.activeElement.nodeName;this.instance.view.isMouseDown()&amp;&amp;document.activeElement&amp;&amp;document.activeElement!==document.body&amp;&amp;!s?document.activeElement.blur():s&amp;&amp;document.body.focus(),this.state=a.EditorState.VIRGIN},o.prototype.extend=function(){function e(){n.apply(this,arguments)}function t(e,t){function n(){}return n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e}var n=this.constructor;return t(e,n)},o.prototype.saveValue=function(e,t){var n,o;t?(n=this.instance.getSelected(),n[0]&gt;n[2]&amp;&amp;(o=n[0],n[0]=n[2],n[2]=o),n[1]&gt;n[3]&amp;&amp;(o=n[1],n[1]=n[3],n[3]=o)):n=[this.row,this.col,null,null],this.instance.populateFromArray(n[0],n[1],e,n[2],n[3],"edit")},o.prototype.beginEditing=function(e,t){this.state==a.EditorState.VIRGIN&amp;&amp;(this.instance.view.scrollViewport(new u(this.row,this.col)),this.instance.view.render(),this.state=a.EditorState.EDITING,e="string"==typeof e?e:this.originalValue,this.setValue(l(e)),this.open(t),this._opened=!0,this.focus(),this.instance.view.render(),this.instance.runHooks("afterBeginEditing",this.row,this.col))},o.prototype.finishEditing=function(e,t,n){var o,r=this;if(n){var i=this._closeCallback;this._closeCallback=function(e){i&amp;&amp;i(e),n(e),r.instance.view.render()}}if(!this.isWaiting()){if(this.state==a.EditorState.VIRGIN)return void this.instance._registerTimeout(setTimeout(function(){r._fireCallbacks(!0)},0));if(this.state==a.EditorState.EDITING){if(e)return this.cancelChanges(),void this.instance.view.render();var s=this.getValue();o=this.instance.getSettings().trimWhitespace?[["string"==typeof s?String.prototype.trim.call(s||""):s]]:[[s]],this.state=a.EditorState.WAITING,this.saveValue(o,t),this.instance.getCellValidator(this.cellProperties)?this.instance.addHookOnce("postAfterValidate",function(e){r.state=a.EditorState.FINISHED,r.discardEditor(e)}):(this.state=a.EditorState.FINISHED,this.discardEditor(!0))}}},o.prototype.cancelChanges=function(){this.state=a.EditorState.FINISHED,this.discardEditor()},o.prototype.discardEditor=function(e){this.state===a.EditorState.FINISHED&amp;&amp;(e===!1&amp;&amp;this.cellProperties.allowInvalid!==!0?(this.instance.selectCell(this.row,this.col),this.focus(),this.state=a.EditorState.EDITING,this._fireCallbacks(!1)):(this.close(),this._opened=!1,this._fullEditMode=!1,this.state=a.EditorState.VIRGIN,this._fireCallbacks(!0)))},o.prototype.enableFullEditMode=function(){this._fullEditMode=!0},o.prototype.isInFullEditMode=function(){return this._fullEditMode},o.prototype.isOpened=function(){return this._opened},o.prototype.isWaiting=function(){return this.state===a.EditorState.WAITING},o.prototype.checkEditorSection=function(){var e=this.instance.countRows(),t="";return this.row&lt;this.instance.getSettings().fixedRowsTop?t=this.col&lt;this.instance.getSettings().fixedColumnsLeft?"top-left-corner":"top":this.instance.getSettings().fixedRowsBottom&amp;&amp;this.row&gt;=e-this.instance.getSettings().fixedRowsBottom?t=this.col&lt;this.instance.getSettings().fixedColumnsLeft?"bottom-left-corner":"bottom":this.col&lt;this.instance.getSettings().fixedColumnsLeft&amp;&amp;(t="left"),t}},{"3rdparty/walkontable/src/cell/coords":6,browser:24,"helpers/mixed":51}],32:[function(e,t,n){"use strict";function o(e){H=!1;var t=this.getActiveEditor();if(f(e.keyCode)||e.keyCode===h.BACKSPACE||e.keyCode===h.DELETE||e.keyCode===h.INSERT){var n=0;if(e.keyCode===h.C&amp;&amp;(e.ctrlKey||e.metaKey))return;t.isOpened()||(n+=10),t.htEditor&amp;&amp;t.instance._registerTimeout(setTimeout(function(){t.queryChoices(t.TEXTAREA.value),H=!0},n))}}Object.defineProperties(n,{AutocompleteEditor:{get:function(){return D}},__esModule:{value:!0}});var r,i,s,a,l,u,c,d=(r=e("helpers/unicode"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}),h=d.KEY_CODES,f=d.isPrintableChar,p=(i=e("helpers/mixed"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).stringify,m=(s=e("helpers/string"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).stripTags,g=(a=e("helpers/array"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}),w=g.pivot,v=(g.arrayFilter,g.arrayMap),y=(l=e("helpers/dom/element"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}),b=y.addClass,C=y.getCaretPosition,_=y.getScrollbarWidth,R=y.getSelectionEndPosition,M=y.outerWidth,S=y.outerHeight,E=y.offset,O=y.getTrimmingContainer,T=y.setCaretPosition,k=(u=e("editors"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).registerEditor,x=(c=e("handsontableEditor"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}).HandsontableEditor,D=x.prototype.extend();D.prototype.init=function(){x.prototype.init.apply(this,arguments),this.query=null,this.choices=[]},D.prototype.createElements=function(){x.prototype.createElements.apply(this,arguments),b(this.htContainer,"autocompleteEditor"),b(this.htContainer,window.navigator.platform.indexOf("Mac")===-1?"":"htMacScroll")};var H=!1;D.prototype.prepare=function(){this.instance.addHook("beforeKeyDown",o),x.prototype.prepare.apply(this,arguments)},D.prototype.open=function(){this.TEXTAREA_PARENT.style.overflow="auto",x.prototype.open.apply(this,arguments),this.TEXTAREA_PARENT.style.overflow="";var e=this.htEditor.getInstance(),t=this,n=void 0===this.cellProperties.trimDropdown||this.cellProperties.trimDropdown;this.TEXTAREA.style.visibility="visible",this.focus(),e.updateSettings({colWidths:n?[M(this.TEXTAREA)-2]:void 0,width:n?M(this.TEXTAREA)+_()+2:void 0,afterRenderer:function(e,n,o,r,i,s){var a,l,u=t.cellProperties,c=u.filteringCaseSensitive,d=u.allowHtml;i=p(i),i&amp;&amp;!d&amp;&amp;(a=c===!0?i.indexOf(this.query):i.toLowerCase().indexOf(t.query.toLowerCase()),a!==-1&amp;&amp;(l=i.substr(a,t.query.length),i=i.replace(l,"&lt;strong&gt;"+l+"&lt;/strong&gt;"))),e.innerHTML=i},autoColumnSize:!0,modifyColWidth:function(e,t){var o=this.getPlugin("autoColumnSize").widths;return o[t]&amp;&amp;(e=o[t]),n?e:e+15}}),this.htEditor.view.wt.wtTable.holder.parentNode.style["padding-right"]=_()+2+"px",H&amp;&amp;(H=!1),t.instance._registerTimeout(setTimeout(function(){t.queryChoices(t.TEXTAREA.value)},0))},D.prototype.close=function(){x.prototype.close.apply(this,arguments)},D.prototype.queryChoices=function(e){var t=this;this.query=e;var n=this.cellProperties,o=n.source,r=(n.filter,n.filteringCaseSensitive,n.allowHtml),i=function(e){return v(e,function(e){return m(e)})};"function"==typeof o?o.call(this.cellProperties,e,function(e){t.updateChoicesList(r?e:i(e))}):Array.isArray(o)?this.updateChoicesList(r?o:i(o)):this.updateChoicesList([])},D.prototype.updateChoicesList=function(e){var t=C(this.TEXTAREA),n=R(this.TEXTAREA),o=this.cellProperties.sortByRelevance,r=this.cellProperties.filter,i=null,s=null;o&amp;&amp;(i=D.sortByRelevance(this.getValue(),e,this.cellProperties.filteringCaseSensitive));var a=Array.isArray(i)?i.length:0;if(r===!1)a&amp;&amp;(s=i[0]);else{for(var l=[],u=0,c=e.length;u&lt;c&amp;&amp;!(o&amp;&amp;a&lt;=u);u++)a?l.push(e[i[u]]):l.push(e[u]);s=0,e=l}this.choices=e,this.htEditor.loadData(w([e])),this.updateDropdownHeight(),this.flipDropdownIfNeeded(),this.cellProperties.strict===!0&amp;&amp;this.highlightBestMatchingChoice(s),this.instance.listen(),this.TEXTAREA.focus(),T(this.TEXTAREA,t,t===n?void 0:n)},D.prototype.flipDropdownIfNeeded=function(){var e=E(this.TEXTAREA),t=S(this.TEXTAREA),n=this.getDropdownHeight(),o=O(this.instance.view.wt.wtTable.TABLE),r=o.scrollTop,i=S(this.instance.view.wt.wtTable.THEAD),s={row:0,col:0};o!==window&amp;&amp;(s=E(o));var a=e.top-s.top-i+r,l=o.scrollHeight-a-i-t,u=n&gt;l&amp;&amp;a&gt;l;return u?this.flipDropdown(n):this.unflipDropdown(),this.limitDropdownIfNeeded(u?a:l,n),u},D.prototype.limitDropdownIfNeeded=function(e,t){if(t&gt;e){var n=0,o=0,r=0,i=null;do r=this.htEditor.getRowHeight(o)||this.htEditor.view.wt.wtSettings.settings.defaultRowHeight,n+=r,o++;while(n&lt;e);i=n-r,this.htEditor.flipped&amp;&amp;(this.htEditor.rootElement.style.top=parseInt(this.htEditor.rootElement.style.top,10)+t-i+"px"),this.setDropdownHeight(n-r)}},D.prototype.flipDropdown=function(e){var t=this.htEditor.rootElement.style;t.position="absolute",t.top=-e+"px",this.htEditor.flipped=!0},D.prototype.unflipDropdown=function(){var e=this.htEditor.rootElement.style;"absolute"===e.position&amp;&amp;(e.position="",e.top=""),this.htEditor.flipped=void 0},D.prototype.updateDropdownHeight=function(){var e=this.htEditor.getColWidth(0)+_()+2,t=this.cellProperties.trimDropdown;this.htEditor.updateSettings({height:this.getDropdownHeight(),width:t?void 0:e}),this.htEditor.view.wt.wtTable.alignOverlaysWithTrimmingContainer()},D.prototype.setDropdownHeight=function(e){this.htEditor.updateSettings({height:e})},D.prototype.finishEditing=function(e){e||this.instance.removeHook("beforeKeyDown",o),x.prototype.finishEditing.apply(this,arguments)},D.prototype.highlightBestMatchingChoice=function(e){"number"==typeof e?this.htEditor.selectCell(e,0):this.htEditor.deselectCell()},D.sortByRelevance=function(e,t,n){var o,r,i,s,a=[],l=e.length,u=[],c=t.length;if(0===l){for(s=0;s&lt;c;s++)u.push(s);return u}for(s=0;s&lt;c;s++)o=m(p(t[s])),r=n?o.indexOf(e):o.toLowerCase().indexOf(e.toLowerCase()),r!=-1&amp;&amp;(i=o.length-r-l,a.push({baseIndex:s,index:r,charsLeft:i,value:o}));for(a.sort(function(e,t){return t.index===-1?-1:e.index===-1?1:e.index&lt;t.index?-1:t.index&lt;e.index?1:e.index===t.index?e.charsLeft&lt;t.charsLeft?-1:e.charsLeft&gt;t.charsLeft?1:0:void 0}),s=0,c=a.length;s&lt;c;s++)u.push(a[s].baseIndex);return u},D.prototype.getDropdownHeight=function(){var e=this.htEditor.getInstance().getRowHeight(0)||23,t=this.cellProperties.visibleRows;return this.choices.length&gt;=t?t*e:this.choices.length*e+8},D.prototype.allowKeyEventPropagation=function(e){var t={row:this.htEditor.getSelectedRange()?this.htEditor.getSelectedRange().from.row:-1},n=!1;return e===h.ARROW_DOWN&amp;&amp;t.row&gt;0&amp;&amp;t.row&lt;this.htEditor.countRows()-1&amp;&amp;(n=!0),e===h.ARROW_UP&amp;&amp;t.row&gt;-1&amp;&amp;(n=!0),n},D.prototype.discardEditor=function(e){x.prototype.discardEditor.apply(this,arguments),this.instance.view.render()},k("autocomplete",D)},{editors:30,handsontableEditor:36,"helpers/array":43,"helpers/dom/element":47,"helpers/mixed":51,"helpers/string":55,"helpers/unicode":56}],33:[function(e,t,n){"use strict";Object.defineProperties(n,{CheckboxEditor:{get:function(){return u}},__esModule:{value:!0}});var o,r,i,s=(o=e("editors"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).registerEditor,a=(r=e("_baseEditor"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).BaseEditor,l=(i=e("helpers/dom/element"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).hasClass,u=function(){$traceurRuntime.superConstructor(c).apply(this,arguments)},c=u;$traceurRuntime.createClass(u,{beginEditing:function(e,t){if(void 0===t){var n=this.TD.querySelector('input[type="checkbox"]');l(n,"htBadValue")||n.click()}},finishEditing:function(){},init:function(){},open:function(){},close:function(){},getValue:function(){},setValue:function(){},focus:function(){}},{},a),s("checkbox",u)},{_baseEditor:31,editors:30,"helpers/dom/element":47}],34:[function(e,t,n){"use strict";Object.defineProperties(n,{DateEditor:{get:function(){return E}},__esModule:{value:!0}});var o,r,i,s,a,l,u,c,d,h,f=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,p=(r=e("helpers/dom/element"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}),m=p.addClass,g=p.outerHeight,w=(i=e("helpers/object"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).deepExtend,v=(s=e("eventManager"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).EventManager,y=(a=e("editors"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}),b=(y.getEditor,y.registerEditor),C=(l=e("helpers/unicode"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).isMetaKey,_=(u=e("helpers/dom/event"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).stopPropagation,R=(c=e("textEditor"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}).TextEditor,M=(d=e("moment"),d&amp;&amp;d.__esModule&amp;&amp;d||{default:d}).default,S=(h=e("pikaday"),h&amp;&amp;h.__esModule&amp;&amp;h||{default:h}).default,E=function(e){this.$datePicker=null,this.datePicker=null,this.datePickerStyle=null,this.defaultDateFormat="DD/MM/YYYY",this.isCellEdited=!1,this.parentDestroyed=!1,$traceurRuntime.superConstructor(O).call(this,e)},O=E;$traceurRuntime.createClass(E,{init:function(){var e=this;if("function"!=typeof M)throw new Error("You need to include moment.js to your project.");if("function"!=typeof S)throw new Error("You need to include Pikaday to your project.");$traceurRuntime.superGet(this,O.prototype,"init").call(this),this.instance.addHook("afterDestroy",function(){e.parentDestroyed=!0,e.destroyElements()})},createElements:function(){$traceurRuntime.superGet(this,O.prototype,"createElements").call(this),this.datePicker=document.createElement("DIV"),this.datePickerStyle=this.datePicker.style,this.datePickerStyle.position="absolute",this.datePickerStyle.top=0,this.datePickerStyle.left=0,this.datePickerStyle.zIndex=9999,m(this.datePicker,"htDatepickerHolder"),document.body.appendChild(this.datePicker),this.$datePicker=new S(this.getDatePickerConfig());var e=new v(this);e.addEventListener(this.datePicker,"mousedown",function(e){return _(e)}),this.hideDatepicker()},destroyElements:function(){this.$datePicker.destroy()},prepare:function(e,t,n,o,r,i){this._opened=!1,$traceurRuntime.superGet(this,O.prototype,"prepare").call(this,e,t,n,o,r,i)},open:function(){var e=void 0!==arguments[0]?arguments[0]:null;$traceurRuntime.superGet(this,O.prototype,"open").call(this),this.showDatepicker(e)},close:function(){var e=this;this._opened=!1,this.instance._registerTimeout(setTimeout(function(){e.instance.selection.refreshBorders()},0)),$traceurRuntime.superGet(this,O.prototype,"close").call(this)},finishEditing:function(){var e=void 0!==arguments[0]&amp;&amp;arguments[0],t=void 0!==arguments[1]&amp;&amp;arguments[1];if(e){var n=this.originalValue;void 0!==n&amp;&amp;this.setValue(n)}this.hideDatepicker(),$traceurRuntime.superGet(this,O.prototype,"finishEditing").call(this,e,t)},showDatepicker:function(e){this.$datePicker.config(this.getDatePickerConfig());var t,n=this.TD.getBoundingClientRect(),o=this.cellProperties.dateFormat||this.defaultDateFormat,r=this.$datePicker.config(),i=this.instance.view.isMouseDown(),s=!!e&amp;&amp;C(e.keyCode);this.datePickerStyle.top=window.pageYOffset+n.top+g(this.TD)+"px",this.datePickerStyle.left=window.pageXOffset+n.left+"px",this.$datePicker._onInputFocus=function(){},r.format=o,this.originalValue?(t=this.originalValue,M(t,o,!0).isValid()&amp;&amp;this.$datePicker.setMoment(M(t,o),!0),this.getValue()!==this.originalValue&amp;&amp;this.setValue(this.originalValue),s||i||this.setValue("")):this.cellProperties.defaultDate?(t=this.cellProperties.defaultDate,r.defaultDate=t,M(t,o,!0).isValid()&amp;&amp;this.$datePicker.setMoment(M(t,o),!0),s||i||this.setValue("")):this.$datePicker.gotoToday(),this.datePickerStyle.display="block",this.$datePicker.show()},hideDatepicker:function(){this.datePickerStyle.display="none",this.$datePicker.hide()},getDatePickerConfig:function(){var e=this,t=this.TEXTAREA,n={};this.cellProperties&amp;&amp;this.cellProperties.datePickerConfig&amp;&amp;w(n,this.cellProperties.datePickerConfig);var o=n.onSelect,r=n.onClose;return n.field=t,n.trigger=t,n.container=this.datePicker,n.bound=!1,n.format=n.format||this.defaultDateFormat,n.reposition=n.reposition||!1,n.onSelect=function(t){isNaN(t.getTime())||(t=M(t).format(e.cellProperties.dateFormat||e.defaultDateFormat)),e.setValue(t),e.hideDatepicker(),o&amp;&amp;o()},n.onClose=function(){e.parentDestroyed||e.finishEditing(!1),r&amp;&amp;r()},n}},{},R),f.editors=f.editors||{},f.editors.DateEditor=E,b("date",E)},{browser:24,editors:30,eventManager:42,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/object":53,"helpers/unicode":56,moment:"moment",pikaday:"pikaday",textEditor:41}],35:[function(e,t,n){"use strict";Object.defineProperties(n,{DropdownEditor:{get:function(){return c}},__esModule:{value:!0}});var o,r,i,s=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,a=(r=e("editors"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}),l=(a.getEditor,a.registerEditor),u=(a.getEditorConstructor,(i=e("autocompleteEditor"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).AutocompleteEditor),c=function(){$traceurRuntime.superConstructor(d).apply(this,arguments)},d=c;$traceurRuntime.createClass(c,{prepare:function(e,t,n,o,r,i){$traceurRuntime.superGet(this,d.prototype,"prepare").call(this,e,t,n,o,r,i),this.cellProperties.filter=!1,this.cellProperties.strict=!0}},{},u),s.hooks.add("beforeValidate",function(e,t,n,o){var r=this.getCellMeta(t,this.propToCol(n));r.editor===s.editors.DropdownEditor&amp;&amp;void 0===r.strict&amp;&amp;(r.filter=!1,r.strict=!0)}),l("dropdown",c)},{autocompleteEditor:32,browser:24,editors:30}],36:[function(e,t,n){"use strict";Object.defineProperties(n,{HandsontableEditor:{get:function(){return b}},__esModule:{value:!0}});var o,r,i,s,a,l,u,c=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,d=(r=e("helpers/unicode"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).KEY_CODES,h=(i=e("helpers/object"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).extend,f=(s=e("helpers/dom/element"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).setCaretPosition,p=(a=e("helpers/dom/event"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}),m=p.stopImmediatePropagation,g=p.isImmediatePropagationStopped,w=(l=e("editors"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}),v=(w.getEditor,w.registerEditor),y=(u=e("textEditor"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).TextEditor,b=y.prototype.extend();b.prototype.createElements=function(){y.prototype.createElements.apply(this,arguments);var e=document.createElement("DIV");e.className="handsontableEditor",this.TEXTAREA_PARENT.appendChild(e),this.htContainer=e,this.assignHooks()},b.prototype.prepare=function(e,t,n,o,r,i){y.prototype.prepare.apply(this,arguments);var s=this,a={startRows:0,startCols:0,minRows:0,minCols:0,className:"listbox",copyPaste:!1,autoColumnSize:!1,autoRowSize:!1,readOnly:!0,fillHandle:!1,afterOnCellMouseDown:function(){var e=this.getValue();void 0!==e&amp;&amp;s.setValue(e),s.instance.destroyEditor()}};this.cellProperties.handsontable&amp;&amp;h(a,i.handsontable),this.htOptions=a};var C=function(e){if(!g(e)){var t,n=this.getActiveEditor(),o=n.htEditor.getInstance();if(e.keyCode==d.ARROW_DOWN)if(o.getSelected()||o.flipped){if(o.getSelected())if(o.flipped)t=o.getSelected()[0]+1;else if(!o.flipped){var r=o.getSelected()[0],i=o.countRows()-1;t=Math.min(i,r+1)}}else t=0;else if(e.keyCode==d.ARROW_UP)if(!o.getSelected()&amp;&amp;o.flipped)t=o.countRows()-1;else if(o.getSelected())if(o.flipped){var r=o.getSelected()[0];t=Math.max(0,r-1)}else{var r=o.getSelected()[0];t=r-1}void 0!==t&amp;&amp;(t&lt;0||o.flipped&amp;&amp;t&gt;o.countRows()-1?o.deselectCell():o.selectCell(t,0),o.getData().length&amp;&amp;(e.preventDefault(),m(e),n.instance.listen(),n.TEXTAREA.focus()))}};b.prototype.open=function(){this.instance.addHook("beforeKeyDown",C),y.prototype.open.apply(this,arguments),this.htEditor&amp;&amp;this.htEditor.destroy(),this.htEditor=new c(this.htContainer,this.htOptions),this.cellProperties.strict?(this.htEditor.selectCell(0,0),this.TEXTAREA.style.visibility="hidden"):(this.htEditor.deselectCell(),this.TEXTAREA.style.visibility="visible"),f(this.TEXTAREA,0,this.TEXTAREA.value.length)},b.prototype.close=function(){this.instance.removeHook("beforeKeyDown",C),this.instance.listen(),y.prototype.close.apply(this,arguments)},b.prototype.focus=function(){this.instance.listen(),y.prototype.focus.apply(this,arguments)},b.prototype.beginEditing=function(e){var t=this.instance.getSettings().onBeginEditing;t&amp;&amp;t()===!1||y.prototype.beginEditing.apply(this,arguments)},b.prototype.finishEditing=function(e,t){if(this.htEditor&amp;&amp;this.htEditor.isListening()&amp;&amp;this.instance.listen(),this.htEditor&amp;&amp;this.htEditor.getSelected()){var n=this.htEditor.getInstance().getValue();void 0!==n&amp;&amp;this.setValue(n)}return y.prototype.finishEditing.apply(this,arguments)},b.prototype.assignHooks=function(){var e=this;this.instance.addHook("afterDestroy",function(){e.htEditor&amp;&amp;e.htEditor.destroy()})},v("handsontable",b)},{browser:24,editors:30,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/object":53,"helpers/unicode":56,textEditor:41}],37:[function(e,t,n){"use strict";Object.defineProperties(n,{MobileTextEditor:{get:function(){return k}},__esModule:{value:!0}});var o,r,i,s,a,l,u,c=((o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,(r=e("helpers/unicode"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).KEY_CODES),d=(i=e("helpers/dom/event"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}),h=d.stopImmediatePropagation,f=d.isImmediatePropagationStopped,p=(s=e("helpers/dom/element"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}),m=p.addClass,g=p.getScrollLeft,w=p.getScrollTop,v=p.hasClass,y=p.isChildOf,b=p.offset,C=p.outerHeight,_=p.outerWidth,R=p.removeClass,M=p.setCaretPosition,S=(a=e("editors"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}),E=(S.getEditor,S.registerEditor),O=(l=e("_baseEditor"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).BaseEditor,T=(u=e("eventManager"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).eventManager,k=O.prototype.extend(),x={},D=function(){this.controls={},this.controls.leftButton=document.createElement("DIV"),this.controls.leftButton.className="leftButton",this.controls.rightButton=document.createElement("DIV"),this.controls.rightButton.className="rightButton",this.controls.upButton=document.createElement("DIV"),this.controls.upButton.className="upButton",this.controls.downButton=document.createElement("DIV"),this.controls.downButton.className="downButton";for(var e in this.controls)this.controls.hasOwnProperty(e)&amp;&amp;this.positionControls.appendChild(this.controls[e])};k.prototype.valueChanged=function(){return this.initValue!=this.getValue()},k.prototype.init=function(){var e=this;this.eventManager=T(this.instance),this.createElements(),this.bindEvents(),this.instance.addHook("afterDestroy",function(){e.destroy()})},k.prototype.getValue=function(){return this.TEXTAREA.value},k.prototype.setValue=function(e){this.initValue=e,this.TEXTAREA.value=e},k.prototype.createElements=function(){this.editorContainer=document.createElement("DIV"),this.editorContainer.className="htMobileEditorContainer",this.cellPointer=document.createElement("DIV"),this.cellPointer.className="cellPointer",this.moveHandle=document.createElement("DIV"),this.moveHandle.className="moveHandle",this.inputPane=document.createElement("DIV"),this.inputPane.className="inputs",this.positionControls=document.createElement("DIV"),this.positionControls.className="positionControls",this.TEXTAREA=document.createElement("TEXTAREA"),m(this.TEXTAREA,"handsontableInput"),this.inputPane.appendChild(this.TEXTAREA),this.editorContainer.appendChild(this.cellPointer),this.editorContainer.appendChild(this.moveHandle),this.editorContainer.appendChild(this.inputPane),this.editorContainer.appendChild(this.positionControls),D.call(this),document.body.appendChild(this.editorContainer)},k.prototype.onBeforeKeyDown=function(e){var t=this,n=t.getActiveEditor();if(e.target===n.TEXTAREA&amp;&amp;!f(e))switch(e.keyCode){case c.ENTER:n.close(),e.preventDefault();break;case c.BACKSPACE:h(e)}},k.prototype.open=function(){this.instance.addHook("beforeKeyDown",this.onBeforeKeyDown),m(this.editorContainer,"active"),R(this.cellPointer,"hidden"),this.updateEditorPosition()},k.prototype.focus=function(){this.TEXTAREA.focus(),M(this.TEXTAREA,this.TEXTAREA.value.length)},k.prototype.close=function(){this.TEXTAREA.blur(),this.instance.removeHook("beforeKeyDown",this.onBeforeKeyDown),R(this.editorContainer,"active")},k.prototype.scrollToView=function(){var e=this.instance.getSelectedRange().highlight;this.instance.view.scrollViewport(e)},k.prototype.hideCellPointer=function(){v(this.cellPointer,"hidden")||m(this.cellPointer,"hidden")},k.prototype.updateEditorPosition=function(e,t){if(e&amp;&amp;t)e=parseInt(e,10),t=parseInt(t,10),this.editorContainer.style.top=t+"px",this.editorContainer.style.left=e+"px";else{var n=this.instance.getSelected(),o=this.instance.getCell(n[0],n[1]);if(x.cellPointer||(x.cellPointer={height:C(this.cellPointer),width:_(this.cellPointer)}),x.editorContainer||(x.editorContainer={width:_(this.editorContainer)}),void 0!==o){var r=this.instance.view.wt.wtOverlays.leftOverlay.trimmingContainer==window?0:g(this.instance.view.wt.wtOverlays.leftOverlay.holder),i=this.instance.view.wt.wtOverlays.topOverlay.trimmingContainer==window?0:w(this.instance.view.wt.wtOverlays.topOverlay.holder),s=b(o),a=_(o),l={x:r,y:i};this.editorContainer.style.top=parseInt(s.top+C(o)-l.y+x.cellPointer.height,10)+"px",this.editorContainer.style.left=parseInt(window.innerWidth/2-x.editorContainer.width/2,10)+"px",s.left+a/2&gt;parseInt(this.editorContainer.style.left,10)+x.editorContainer.width?this.editorContainer.style.left=window.innerWidth-x.editorContainer.width+"px":s.left+a/2&lt;parseInt(this.editorContainer.style.left,10)+20&amp;&amp;(this.editorContainer.style.left="0px"),this.cellPointer.style.left=parseInt(s.left-x.cellPointer.width/2-b(this.editorContainer).left+a/2-l.x,10)+"px"}}},k.prototype.updateEditorData=function(){var e=this.instance.getSelected(),t=this.instance.getDataAtCell(e[0],e[1]);this.row=e[0],this.col=e[1],this.setValue(t),this.updateEditorPosition()},k.prototype.prepareAndSave=function(){var e;return!this.valueChanged()||(e=this.instance.getSettings().trimWhitespace?[[String.prototype.trim.call(this.getValue())]]:[[this.getValue()]],void this.saveValue(e))},k.prototype.bindEvents=function(){var e=this;this.eventManager.addEventListener(this.controls.leftButton,"touchend",function(t){e.prepareAndSave(),e.instance.selection.transformStart(0,-1,null,!0),e.updateEditorData(),t.preventDefault()}),this.eventManager.addEventListener(this.controls.rightButton,"touchend",function(t){e.prepareAndSave(),e.instance.selection.transformStart(0,1,null,!0),e.updateEditorData(),t.preventDefault()}),this.eventManager.addEventListener(this.controls.upButton,"touchend",function(t){e.prepareAndSave(),e.instance.selection.transformStart(-1,0,null,!0),e.updateEditorData(),t.preventDefault()}),this.eventManager.addEventListener(this.controls.downButton,"touchend",function(t){e.prepareAndSave(),e.instance.selection.transformStart(1,0,null,!0),e.updateEditorData(),t.preventDefault()}),this.eventManager.addEventListener(this.moveHandle,"touchstart",function(t){if(1==t.touches.length){var n=t.touches[0],o={x:e.editorContainer.offsetLeft,y:e.editorContainer.offsetTop},r={x:n.pageX-o.x,y:n.pageY-o.y};e.eventManager.addEventListener(this,"touchmove",function(t){var n=t.touches[0];e.updateEditorPosition(n.pageX-r.x,n.pageY-r.y),e.hideCellPointer(),t.preventDefault()})}}),this.eventManager.addEventListener(document.body,"touchend",function(t){y(t.target,e.editorContainer)||y(t.target,e.instance.rootElement)||e.close()}),this.eventManager.addEventListener(this.instance.view.wt.wtOverlays.leftOverlay.holder,"scroll",function(t){e.instance.view.wt.wtOverlays.leftOverlay.trimmingContainer!=window&amp;&amp;e.hideCellPointer()}),this.eventManager.addEventListener(this.instance.view.wt.wtOverlays.topOverlay.holder,"scroll",function(t){e.instance.view.wt.wtOverlays.topOverlay.trimmingContainer!=window&amp;&amp;e.hideCellPointer()})},k.prototype.destroy=function(){this.eventManager.clear(),this.editorContainer.parentNode.removeChild(this.editorContainer)},E("mobile",k)},{_baseEditor:31,browser:24,editors:30,eventManager:42,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/unicode":56}],38:[function(e,t,n){"use strict";Object.defineProperties(n,{NumericEditor:{get:function(){return u}},__esModule:{value:!0}});var o,r,i,s=(o=e("numbro"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,a=(r=e("editors"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).registerEditor,l=(i=e("textEditor"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).TextEditor,u=function(){$traceurRuntime.superConstructor(c).apply(this,arguments)},c=u;$traceurRuntime.createClass(u,{beginEditing:function(e){if("undefined"==typeof e&amp;&amp;this.originalValue){"undefined"!=typeof this.cellProperties.language&amp;&amp;s.culture(this.cellProperties.language);var t=s.cultureData().delimiters.decimal;e=(""+this.originalValue).replace(".",t)}$traceurRuntime.superGet(this,c.prototype,"beginEditing").call(this,e)}},{},l),a("numeric",u)},{editors:30,numbro:"numbro",textEditor:41}],39:[function(e,t,n){"use strict";Object.defineProperties(n,{PasswordEditor:{get:function(){return d}},__esModule:{value:!0}});var o,r,i,s,a=((o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,(r=e("helpers/dom/element"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).empty),l=(i=e("editors"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}),u=(l.getEditor,l.registerEditor),c=(s=e("textEditor"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).TextEditor,d=function(){$traceurRuntime.superConstructor(h).apply(this,arguments)},h=d;$traceurRuntime.createClass(d,{createElements:function(){$traceurRuntime.superGet(this,h.prototype,"createElements").call(this),this.TEXTAREA=document.createElement("input"),this.TEXTAREA.setAttribute("type","password"),this.TEXTAREA.className="handsontableInput",this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,a(this.TEXTAREA_PARENT),this.TEXTAREA_PARENT.appendChild(this.TEXTAREA)}},{},c),u("password",d)},{browser:24,editors:30,"helpers/dom/element":47,textEditor:41}],40:[function(e,t,n){"use strict";Object.defineProperties(n,{SelectEditor:{get:function(){return E}},__esModule:{value:!0}});var o,r,i,s,a,l,u=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,c=(r=e("helpers/dom/element"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}),d=c.addClass,h=c.empty,f=c.fastInnerHTML,p=c.getComputedStyle,m=c.getCssTransform,g=c.getScrollableElement,w=c.offset,v=c.outerHeight,y=c.outerWidth,b=c.resetCssTransform,C=(i=e("helpers/dom/event"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).stopImmediatePropagation,_=(s=e("helpers/unicode"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).KEY_CODES,R=(a=e("editors"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}),M=(R.getEditor,R.registerEditor),S=(l=e("_baseEditor"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).BaseEditor,E=S.prototype.extend();E.prototype.init=function(){this.select=document.createElement("SELECT"),d(this.select,"htSelectEditor"),this.select.style.display="none",this.instance.rootElement.appendChild(this.select),this.registerHooks()},E.prototype.registerHooks=function(){var e=this;this.instance.addHook("afterScrollHorizontally",function(){return e.refreshDimensions()}),this.instance.addHook("afterScrollVertically",function(){return e.refreshDimensions()}),this.instance.addHook("afterColumnResize",function(){return e.refreshDimensions()}),this.instance.addHook("afterRowResize",function(){return e.refreshDimensions()})},E.prototype.prepare=function(){S.prototype.prepare.apply(this,arguments);var e,t=this.cellProperties.selectOptions;e="function"==typeof t?this.prepareOptions(t(this.row,this.col,this.prop)):this.prepareOptions(t),h(this.select);for(var n in e)if(e.hasOwnProperty(n)){var o=document.createElement("OPTION");o.value=n,f(o,e[n]),this.select.appendChild(o)}},E.prototype.prepareOptions=function(e){var t={};if(Array.isArray(e))for(var n=0,o=e.length;n&lt;o;n++)t[e[n]]=e[n];else"object"==typeof e&amp;&amp;(t=e);return t},E.prototype.getValue=function(){return this.select.value},E.prototype.setValue=function(e){this.select.value=e};var O=function(e){var t=this,n=t.getActiveEditor();switch(e.keyCode){case _.ARROW_UP:var o=n.select.selectedIndex-1;o&gt;=0&amp;&amp;(n.select[o].selected=!0),C(e),e.preventDefault();break;case _.ARROW_DOWN:var r=n.select.selectedIndex+1;r&lt;=n.select.length-1&amp;&amp;(n.select[r].selected=!0),C(e),e.preventDefault()}};E.prototype.open=function(){this._opened=!0,this.refreshDimensions(),this.select.style.display="",this.instance.addHook("beforeKeyDown",O)},E.prototype.close=function(){this._opened=!1,this.select.style.display="none",this.instance.removeHook("beforeKeyDown",O)},E.prototype.focus=function(){this.select.focus()},E.prototype.refreshValue=function(){var e=this.instance.getSourceDataAtCell(this.row,this.prop);this.originalValue=e,this.setValue(e),this.refreshDimensions()},E.prototype.refreshDimensions=function(){if(this.state===u.EditorState.EDITING){if(this.TD=this.getEditedCell(),!this.TD)return void this.close();var e,t=y(this.TD)+1,n=v(this.TD)+1,o=w(this.TD),r=w(this.instance.rootElement),i=g(this.TD),s=o.top-r.top-1-(i.scrollTop||0),a=o.left-r.left-1-(i.scrollLeft||0),l=this.checkEditorSection(),c=this.instance.getSettings();c.rowHeaders?1:0,c.colHeaders?1:0;switch(l){case"top":e=m(this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.holder.parentNode);break;case"left":e=m(this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.holder.parentNode);
break;case"top-left-corner":e=m(this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.holder.parentNode);break;case"bottom-left-corner":e=m(this.instance.view.wt.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.holder.parentNode);break;case"bottom":e=m(this.instance.view.wt.wtOverlays.bottomOverlay.clone.wtTable.holder.parentNode)}0===this.instance.getSelected()[0]&amp;&amp;(s+=1),0===this.instance.getSelected()[1]&amp;&amp;(a+=1);var d=this.select.style;e&amp;&amp;e!=-1?d[e[0]]=e[1]:b(this.select);var h=p(this.TD);parseInt(h.borderTopWidth,10)&gt;0&amp;&amp;(n-=1),parseInt(h.borderLeftWidth,10)&gt;0&amp;&amp;(t-=1),d.height=n+"px",d.minWidth=t+"px",d.top=s+"px",d.left=a+"px",d.margin="0px"}},E.prototype.getEditedCell=function(){var e,t=this.checkEditorSection();switch(t){case"top":e=this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.select.style.zIndex=101;break;case"corner":e=this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.select.style.zIndex=103;break;case"left":e=this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.select.style.zIndex=102;break;default:e=this.instance.getCell(this.row,this.col),this.select.style.zIndex=""}return e!=-1&amp;&amp;e!=-2?e:void 0},M("select",E)},{_baseEditor:31,browser:24,editors:30,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/unicode":56}],41:[function(e,t,n){"use strict";Object.defineProperties(n,{TextEditor:{get:function(){return N}},__esModule:{value:!0}});var o,r,i,s,a,l,u,c,d=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,h=(r=e("helpers/dom/element"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}),f=h.addClass,p=h.getCaretPosition,m=h.getComputedStyle,g=h.getCssTransform,w=h.getScrollableElement,v=h.getScrollbarWidth,y=h.innerWidth,b=h.offset,C=h.resetCssTransform,_=h.setCaretPosition,R=h.hasVerticalScrollbar,M=h.hasHorizontalScrollbar,S=(i=e("autoResize"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).default,E=(s=e("_baseEditor"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).BaseEditor,O=(a=e("eventManager"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).eventManager,T=(l=e("editors"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}),k=(T.getEditor,T.registerEditor),x=(u=e("helpers/unicode"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).KEY_CODES,D=(c=e("helpers/dom/event"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}),H=D.stopPropagation,A=D.stopImmediatePropagation,P=D.isImmediatePropagationStopped,N=E.prototype.extend();N.prototype.init=function(){var e=this;this.createElements(),this.eventManager=O(this),this.bindEvents(),this.autoResize=S(),this.instance.addHook("afterDestroy",function(){e.destroy()})},N.prototype.getValue=function(){return this.TEXTAREA.value},N.prototype.setValue=function(e){this.TEXTAREA.value=e};var L=function(e){var t,n=this,o=n.getActiveEditor();if(t=(e.ctrlKey||e.metaKey)&amp;&amp;!e.altKey,e.target===o.TEXTAREA&amp;&amp;!P(e)){if(17===e.keyCode||224===e.keyCode||91===e.keyCode||93===e.keyCode)return void A(e);switch(e.keyCode){case x.ARROW_RIGHT:o.isInFullEditMode()&amp;&amp;(!o.isWaiting()&amp;&amp;!o.allowKeyEventPropagation||!o.isWaiting()&amp;&amp;o.allowKeyEventPropagation&amp;&amp;!o.allowKeyEventPropagation(e.keyCode))&amp;&amp;A(e);break;case x.ARROW_LEFT:o.isInFullEditMode()&amp;&amp;(!o.isWaiting()&amp;&amp;!o.allowKeyEventPropagation||!o.isWaiting()&amp;&amp;o.allowKeyEventPropagation&amp;&amp;!o.allowKeyEventPropagation(e.keyCode))&amp;&amp;A(e);break;case x.ARROW_UP:case x.ARROW_DOWN:o.isInFullEditMode()&amp;&amp;(!o.isWaiting()&amp;&amp;!o.allowKeyEventPropagation||!o.isWaiting()&amp;&amp;o.allowKeyEventPropagation&amp;&amp;!o.allowKeyEventPropagation(e.keyCode))&amp;&amp;A(e);break;case x.ENTER:var r=o.instance.getSelected(),i=!(r[0]===r[2]&amp;&amp;r[1]===r[3]);if(t&amp;&amp;!i||e.altKey){if(o.isOpened()){var s=p(o.TEXTAREA),a=o.getValue(),l=a.slice(0,s)+"\n"+a.slice(s);o.setValue(l),_(o.TEXTAREA,s+1)}else o.beginEditing(o.originalValue+"\n");A(e)}e.preventDefault();break;case x.A:case x.X:case x.C:case x.V:t&amp;&amp;A(e);break;case x.BACKSPACE:case x.DELETE:case x.HOME:case x.END:A(e)}[x.ARROW_UP,x.ARROW_RIGHT,x.ARROW_DOWN,x.ARROW_LEFT].indexOf(e.keyCode)===-1&amp;&amp;o.autoResize.resize(String.fromCharCode(e.keyCode))}};N.prototype.open=function(){this.refreshDimensions(),this.instance.addHook("beforeKeyDown",L)},N.prototype.close=function(e){this.textareaParentStyle.display="none",this.autoResize.unObserve(),document.activeElement===this.TEXTAREA&amp;&amp;this.instance.listen(),this.instance.removeHook("beforeKeyDown",L)},N.prototype.focus=function(){this.TEXTAREA.focus(),_(this.TEXTAREA,this.TEXTAREA.value.length)},N.prototype.createElements=function(){this.TEXTAREA=document.createElement("TEXTAREA"),f(this.TEXTAREA,"handsontableInput"),this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,this.TEXTAREA_PARENT=document.createElement("DIV"),f(this.TEXTAREA_PARENT,"handsontableInputHolder"),this.textareaParentStyle=this.TEXTAREA_PARENT.style,this.textareaParentStyle.top=0,this.textareaParentStyle.left=0,this.textareaParentStyle.display="none",this.TEXTAREA_PARENT.appendChild(this.TEXTAREA),this.instance.rootElement.appendChild(this.TEXTAREA_PARENT);var e=this;this.instance._registerTimeout(setTimeout(function(){e.refreshDimensions()},0))},N.prototype.getEditedCell=function(){var e,t=this.checkEditorSection();switch(t){case"top":e=this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=101;break;case"top-left-corner":e=this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=103;break;case"bottom-left-corner":e=this.instance.view.wt.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=103;break;case"left":e=this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=102;break;case"bottom":e=this.instance.view.wt.wtOverlays.bottomOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=102;break;default:e=this.instance.getCell(this.row,this.col),this.textareaParentStyle.zIndex=""}return e!=-1&amp;&amp;e!=-2?e:void 0},N.prototype.refreshValue=function(){var e=this.instance.getSourceDataAtCell(this.row,this.prop);this.originalValue=e,this.setValue(e),this.refreshDimensions()},N.prototype.refreshDimensions=function(){if(this.state===d.EditorState.EDITING){if(this.TD=this.getEditedCell(),!this.TD)return void this.close(!0);var e,t=b(this.TD),n=b(this.instance.rootElement),o=w(this.TD),r=this.instance.countRows(),i=t.top===n.top?0:1,s=t.top-n.top-i-(o.scrollTop||0),a=t.left-n.left-1-(o.scrollLeft||0),l=this.instance.getSettings(),u=(this.instance.hasRowHeaders(),this.instance.hasColHeaders()),c=this.checkEditorSection(),h=this.TD.style.backgroundColor;switch(c){case"top":e=g(this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.holder.parentNode);break;case"left":e=g(this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.holder.parentNode);break;case"top-left-corner":e=g(this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.holder.parentNode);break;case"bottom-left-corner":e=g(this.instance.view.wt.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.holder.parentNode);break;case"bottom":e=g(this.instance.view.wt.wtOverlays.bottomOverlay.clone.wtTable.holder.parentNode)}(u&amp;&amp;0===this.instance.getSelected()[0]||l.fixedRowsBottom&amp;&amp;this.instance.getSelected()[0]===r-l.fixedRowsBottom)&amp;&amp;(s+=1),0===this.instance.getSelected()[1]&amp;&amp;(a+=1),e&amp;&amp;e!=-1?this.textareaParentStyle[e[0]]=e[1]:C(this.TEXTAREA_PARENT),this.textareaParentStyle.top=s+"px",this.textareaParentStyle.left=a+"px";var f=this.instance.view.wt.wtViewport.rowsRenderCalculator.startPosition,p=this.instance.view.wt.wtViewport.columnsRenderCalculator.startPosition,_=this.instance.view.wt.wtOverlays.leftOverlay.getScrollPosition(),S=this.instance.view.wt.wtOverlays.topOverlay.getScrollPosition(),E=v(),O=this.TD.offsetTop+f-S,T=this.TD.offsetLeft+p-_,k=y(this.TD)-8,x=R(o)?E:0,D=M(o)?E:0,H=this.instance.view.maximumVisibleElementWidth(T)-9-x,A=this.TD.scrollHeight+1,P=Math.max(this.instance.view.maximumVisibleElementHeight(O)-D,23),N=m(this.TD);this.TEXTAREA.style.fontSize=N.fontSize,this.TEXTAREA.style.fontFamily=N.fontFamily,this.TEXTAREA.style.backgroundColor="",this.TEXTAREA.style.backgroundColor=h?h:m(this.TEXTAREA).backgroundColor,this.autoResize.init(this.TEXTAREA,{minHeight:Math.min(A,P),maxHeight:P,minWidth:Math.min(k,H),maxWidth:H},!0),this.textareaParentStyle.display="block"}},N.prototype.bindEvents=function(){var e=this;this.eventManager.addEventListener(this.TEXTAREA,"cut",function(e){H(e)}),this.eventManager.addEventListener(this.TEXTAREA,"paste",function(e){H(e)}),this.instance.addHook("afterScrollHorizontally",function(){e.refreshDimensions()}),this.instance.addHook("afterScrollVertically",function(){e.refreshDimensions()}),this.instance.addHook("afterColumnResize",function(){e.refreshDimensions(),e.focus()}),this.instance.addHook("afterRowResize",function(){e.refreshDimensions(),e.focus()}),this.instance.addHook("afterDestroy",function(){e.eventManager.destroy()})},N.prototype.destroy=function(){this.eventManager.destroy()},k("text",N)},{_baseEditor:31,autoResize:"autoResize",browser:24,editors:30,eventManager:42,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/unicode":56}],42:[function(e,t,n){"use strict";function o(e,t){var n,o,r,i,s,a,l="HOT-TABLE";if(t.isTargetWebComponent=!1,t.realTarget=t.target,a=t.stopImmediatePropagation,t.stopImmediatePropagation=function(){a.apply(this),p(this)},!u.eventManager.isHotTableEnv)return t;for(t=d(t),s=t.path?t.path.length:0;s--;){if(t.path[s].nodeName===l)n=!0;else if(n&amp;&amp;t.path[s].shadowRoot){i=t.path[s];break}0!==s||i||(i=t.path[s])}return i||(i=t.target),t.isTargetWebComponent=!0,f()?t.realTarget=t.srcElement||t.toElement:(e instanceof u.Core||e instanceof Walkontable)&amp;&amp;(e instanceof u.Core?o=e.view?e.view.wt.wtTable.TABLE:null:e instanceof Walkontable&amp;&amp;(o=e.wtTable.TABLE.parentNode.parentNode),r=h(t.target,[l],o),r?t.realTarget=o.querySelector(l)||t.target:t.realTarget=t.target),Object.defineProperty(t,"target",{get:function(){return d(i)},enumerable:!0,configurable:!0}),t}function r(e){return new m(e)}Object.defineProperties(n,{EventManager:{get:function(){return m}},eventManager:{get:function(){return r}},__esModule:{value:!0}});var i,s,a,l,u=(i=e("browser"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).default,c=(s=e("helpers/dom/element"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}),d=c.polymerWrap,h=c.closest,f=(a=e("helpers/feature"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).isWebComponentSupportedNatively,p=(l=e("helpers/dom/event"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).stopImmediatePropagation,m=function(){var e=void 0!==arguments[0]?arguments[0]:null;this.context=e||this,this.context.eventListeners||(this.context.eventListeners=[])};$traceurRuntime.createClass(m,{addEventListener:function(e,t,n){function r(e){e=o(s,e),n.call(this,e)}var i=this,s=this.context;return this.context.eventListeners.push({element:e,event:t,callback:n,callbackProxy:r}),window.addEventListener?e.addEventListener(t,r,!1):e.attachEvent("on"+t,r),u.countEventManagerListeners++,function(){i.removeEventListener(e,t,n)}},removeEventListener:function(e,t,n){for(var o,r=this.context.eventListeners.length;r--;)if(o=this.context.eventListeners[r],o.event==t&amp;&amp;o.element==e){if(n&amp;&amp;n!=o.callback)continue;this.context.eventListeners.splice(r,1),o.element.removeEventListener?o.element.removeEventListener(o.event,o.callbackProxy,!1):o.element.detachEvent("on"+o.event,o.callbackProxy),u.countEventManagerListeners--}},clearEvents:function(){if(this.context)for(var e=this.context.eventListeners.length;e--;){var t=this.context.eventListeners[e];t&amp;&amp;this.removeEventListener(t.element,t.event,t.callback)}},clear:function(){this.clearEvents()},destroy:function(){this.clearEvents(),this.context=null},fireEvent:function(e,t){var n,o={bubbles:!0,cancelable:"mousemove"!==t,view:window,detail:0,screenX:0,screenY:0,clientX:1,clientY:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:void 0};document.createEvent?(n=document.createEvent("MouseEvents"),n.initMouseEvent(t,o.bubbles,o.cancelable,o.view,o.detail,o.screenX,o.screenY,o.clientX,o.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.button,o.relatedTarget||document.body.parentNode)):n=document.createEventObject(),e.dispatchEvent?e.dispatchEvent(n):e.fireEvent("on"+t,n)}},{}),u.countEventManagerListeners=0,u.eventManager=r},{browser:24,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/feature":49}],43:[function(e,t,n){"use strict";function o(e){for(var t=0,n=e.length;t&lt;n;)e[t]=[e[t]],t++}function r(e,t){for(var n=0,o=t.length;n&lt;o;)e.push(t[n]),n++}function i(e){var t=[];if(!e||0===e.length||!e[0]||0===e[0].length)return t;for(var n=e.length,o=e[0].length,r=0;r&lt;n;r++)for(var i=0;i&lt;o;i++)t[i]||(t[i]=[]),t[i][r]=e[r][i];return t}function s(e,t,n,o){var r=-1,i=e.length;for(o&amp;&amp;i&amp;&amp;(n=e[++r]);++r&lt;i;)n=t(n,e[r],r,e);return n}function a(e,t){for(var n=-1,o=e.length,r=-1,i=[];++n&lt;o;){var s=e[n];t(s,n,e)&amp;&amp;(i[++r]=s)}return i}function l(e,t){for(var n=-1,o=e.length,r=-1,i=[];++n&lt;o;){var s=e[n];i[++r]=t(s,n,e)}return i}function u(e,t){for(var n=-1,o=e.length;++n&lt;o&amp;&amp;t(e[n],n,e)!==!1;);return e}function c(e){return s(e,function(e,t){return e+t},0)}function d(e){return s(e,function(e,t){return e&gt;t?e:t},Array.isArray(e)?e[0]:void 0)}function h(e){return s(e,function(e,t){return e&lt;t?e:t},Array.isArray(e)?e[0]:void 0)}function f(e){return e.length?c(e)/e.length:0}function p(e){return s(e,function(e,t){return e.concat(Array.isArray(t)?p(t):t)},[])}function m(e){var t=[];return u(e,function(e){t.indexOf(e)===-1&amp;&amp;t.push(e)}),t}function g(e,t,n){if(null==e)throw new TypeError('"array" is null or not defined');var o=Object(e),r=o.length&gt;&gt;&gt;0;if(0===r)return!1;for(var i=0|n,s=Math.max(i&gt;=0?i:r-Math.abs(i),0);s&lt;r;){if(o[s]===t)return!0;s++}return!1}Object.defineProperties(n,{to2dArray:{get:function(){return o}},extendArray:{get:function(){return r}},pivot:{get:function(){return i}},arrayReduce:{get:function(){return s}},arrayFilter:{get:function(){return a}},arrayMap:{get:function(){return l}},arrayEach:{get:function(){return u}},arraySum:{get:function(){return c}},arrayMax:{get:function(){return d}},arrayMin:{get:function(){return h}},arrayAvg:{get:function(){return f}},arrayFlatten:{get:function(){return p}},arrayUnique:{get:function(){return m}},arrayIncludes:{get:function(){return g}},__esModule:{value:!0}})},{}],44:[function(e,t,n){"use strict";function o(){return l}function r(){return u}function i(){return c}function s(){return d}function a(e){return e||(e=navigator.userAgent),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)}Object.defineProperties(n,{isIE8:{get:function(){return o}},isIE9:{get:function(){return r}},isSafari:{get:function(){return i}},isChrome:{get:function(){return s}},isMobileBrowser:{get:function(){return a}},__esModule:{value:!0}});var l=!document.createTextNode("test").textContent,u=!!document.documentMode,c=/Safari/.test(navigator.userAgent)&amp;&amp;/Apple Computer/.test(navigator.vendor),d=/Chrome/.test(navigator.userAgent)&amp;&amp;/Google/.test(navigator.vendor)},{}],45:[function(e,t,n){"use strict";function o(e){for(var t,n=e+1,o="";n&gt;0;)t=(n-1)%m,o=String.fromCharCode(65+t)+o,n=parseInt((n-t)/m,10);return o}function r(e){var t=0;if(e)for(var n=0,o=e.length-1;n&lt;e.length;n+=1,o-=1)t+=Math.pow(m,o)*(p.indexOf(e[n])+1);return--t,t}function i(){var e,t,n=void 0!==arguments[0]?arguments[0]:100,r=void 0!==arguments[1]?arguments[1]:4,i=[];for(e=0;e&lt;n;e++){var s=[];for(t=0;t&lt;r;t++)s.push(o(t)+(e+1));i.push(s)}return i}function s(){var e,t,n=void 0!==arguments[0]?arguments[0]:100,r=void 0!==arguments[1]?arguments[1]:4,i=[];for(e=0;e&lt;n;e++){var s={};for(t=0;t&lt;r;t++)s["prop"+t]=o(t)+(e+1);i.push(s)}return i}function a(e,t){for(var n,o=[],r=0;r&lt;e;r++){n=[];for(var i=0;i&lt;t;i++)n.push("");o.push(n)}return o}function l(e){var t,n,o,r,i=[],s=0;for(t=0,n=e.length;t&lt;n;t++)for(o=0,r=e[t].length;o&lt;r;o++)o==s&amp;&amp;(i.push([]),s++),i[o].push(e[t][o]);return i}function u(e,t){function n(e){var t=h.cellTypes[e];if("undefined"==typeof t)throw new Error('You declared cell type "'+e+'" as a string that is not mapped to a known object. Cell type must be an object or a string mapped to an object in Handsontable.cellTypes');return t}return t="undefined"==typeof t||t,function(o,r){return function o(r){if(r){if(r.hasOwnProperty(e)&amp;&amp;void 0!==r[e])return r[e];if(r.hasOwnProperty("type")&amp;&amp;r.type){var i;if("string"!=typeof r.type)throw new Error("Cell type must be a string ");if(i=n(r.type),i.hasOwnProperty(e))return i[e];if(t)return}return o(f(r))}}("number"==typeof o?this.getCellMeta(o,r):o)}}Object.defineProperties(n,{spreadsheetColumnLabel:{get:function(){return o}},spreadsheetColumnIndex:{get:function(){return r}},createSpreadsheetData:{get:function(){return i}},createSpreadsheetObjectData:{get:function(){return s}},createEmptySpreadsheetData:{get:function(){return a}},translateRowsToColumns:{get:function(){return l}},cellMethodLookupFactory:{get:function(){return u}},__esModule:{value:!0}});var c,d,h=(c=e("browser"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}).default,f=(d=e("object"),d&amp;&amp;d.__esModule&amp;&amp;d||{default:d}).getPrototypeOf,p="ABCDEFGHIJKLMNOPQRSTUVWXYZ",m=p.length},{browser:24,object:53}],46:[function(e,t,n){"use strict";function o(e){var t=new Date(e);return isNaN(new Date(e+"T00:00").getDate())?t:new Date(t.getTime()+6e4*t.getTimezoneOffset())}Object.defineProperties(n,{getNormalizedDate:{get:function(){return o}},__esModule:{value:!0}})},{}],47:[function(e,t,n){"use strict";function o(e){for(var t=void 0!==arguments[1]?arguments[1]:0,n=-1,o=null;null!=e;){if(n===t){o=e;break}e.host&amp;&amp;e.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e=e.host:(n++,e=e.parentNode)}return o}function r(e,t,n){for(;null!=e&amp;&amp;e!==n;){if(e.nodeType===Node.ELEMENT_NODE&amp;&amp;(t.indexOf(e.nodeName)&gt;-1||t.indexOf(e)&gt;-1))return e;e=e.host&amp;&amp;e.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.host:e.parentNode}return null}function i(e,t,n){for(var o=[];e&amp;&amp;(e=r(e,t,n),e&amp;&amp;(!n||n.contains(e)));)o.push(e),e=e.host&amp;&amp;e.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.host:e.parentNode;var i=o.length;return i?o[i-1]:null}function s(e,t){var n=e.parentNode,o=[];for("string"==typeof t?o=Array.prototype.slice.call(document.querySelectorAll(t),0):o.push(t);null!=n;){if(o.indexOf(n)&gt;-1)return!0;n=n.parentNode}return!1}function a(e){function t(e){return e.nodeType===Node.ELEMENT_NODE&amp;&amp;e.nodeName===o.toUpperCase()}var n,o="hot-table",r=!1;for(n=l(e);null!=n;){if(t(n)){r=!0;break}if(n.host&amp;&amp;n.nodeType===Node.DOCUMENT_FRAGMENT_NODE){if(r=t(n.host))break;n=n.host}n=n.parentNode}return r}function l(e){return"undefined"!=typeof Polymer&amp;&amp;"function"==typeof wrap?wrap(e):e}function u(e){return"undefined"!=typeof Polymer&amp;&amp;"function"==typeof unwrap?unwrap(e):e}function c(e){var t=0;if(e.previousSibling)for(;e=e.previousSibling;)++t;return t}function d(e,t){var n=document.querySelector(".ht_clone_"+e);return n?n.contains(t):null}function h(e){var t=0,n=[];if(!e||!e.length)return n;for(;e[t];)n.push(e[t]),t++;return n}function f(e,t){return Z(e,t)}function p(e,t){return J(e,t)}function m(e,t){return Q(e,t)}function g(e,t){if(3===e.nodeType)t.removeChild(e);else if(["TABLE","THEAD","TBODY","TFOOT","TR"].indexOf(e.nodeName)&gt;-1)for(var n=e.childNodes,o=n.length-1;o&gt;=0;o--)g(n[o],e)}function w(e){for(var t;t=e.lastChild;)e.removeChild(t)}function v(e,t){ue.test(t)?e.innerHTML=t:y(e,t)}function y(e,t){var n=e.firstChild;n&amp;&amp;3===n.nodeType&amp;&amp;null===n.nextSibling?ce?n.textContent=t:n.data=t:(w(e),e.appendChild(document.createTextNode(t)))}function b(e){for(var t=e;u(t)!==document.documentElement;){if(null===t)return!1;if(t.nodeType===Node.DOCUMENT_FRAGMENT_NODE){if(t.host){if(t.host.impl)return b(t.host.impl);if(t.host)return b(t.host);throw new Error("Lost in Web Components world")}return!1}if("none"===t.style.display)return!1;t=t.parentNode}return!0}function C(e){var t,n,o,r,i;if(r=document.documentElement,re()&amp;&amp;e.firstChild&amp;&amp;"CAPTION"===e.firstChild.nodeName)return i=e.getBoundingClientRect(),{top:i.top+(window.pageYOffset||r.scrollTop)-(r.clientTop||0),left:i.left+(window.pageXOffset||r.scrollLeft)-(r.clientLeft||0)};for(t=e.offsetLeft,n=e.offsetTop,o=e;(e=e.offsetParent)&amp;&amp;e!==document.body;)t+=e.offsetLeft,n+=e.offsetTop,o=e;return o&amp;&amp;"fixed"===o.style.position&amp;&amp;(t+=window.pageXOffset||r.scrollLeft,n+=window.pageYOffset||r.scrollTop),{left:t,top:n}}function _(){var e=window.scrollY;return void 0===e&amp;&amp;(e=document.documentElement.scrollTop),e}function R(){var e=window.scrollX;return void 0===e&amp;&amp;(e=document.documentElement.scrollLeft),e}function M(e){return e===window?_():e.scrollTop}function S(e){return e===window?R():e.scrollLeft}function E(e){for(var t,n,o,r=e.parentNode,i=["auto","scroll"],s="",a="",l="",u="";r&amp;&amp;r.style&amp;&amp;document.body!==r;){if(t=r.style.overflow,n=r.style.overflowX,o=r.style.overflowY,"scroll"==t||"scroll"==n||"scroll"==o)return r;if(window.getComputedStyle&amp;&amp;(s=window.getComputedStyle(r),a=s.getPropertyValue("overflow"),l=s.getPropertyValue("overflow-y"),u=s.getPropertyValue("overflow-x"),"scroll"===a||"scroll"===u||"scroll"===l))return r;if(r.clientHeight&lt;=r.scrollHeight&amp;&amp;(i.indexOf(o)!==-1||i.indexOf(t)!==-1||i.indexOf(a)!==-1||i.indexOf(l)!==-1))return r;if(r.clientWidth&lt;=r.scrollWidth&amp;&amp;(i.indexOf(n)!==-1||i.indexOf(t)!==-1||i.indexOf(a)!==-1||i.indexOf(u)!==-1))return r;r=r.parentNode}return window}function O(e){for(var t=e.parentNode;t&amp;&amp;t.style&amp;&amp;document.body!==t;){if("visible"!==t.style.overflow&amp;&amp;""!==t.style.overflow)return t;if(window.getComputedStyle){var n=window.getComputedStyle(t);if("visible"!==n.getPropertyValue("overflow")&amp;&amp;""!==n.getPropertyValue("overflow"))return t}t=t.parentNode}return window}function T(e,t){if(e){if(e!==window){var n,o=e.style[t];return""!==o&amp;&amp;void 0!==o?o:(n=k(e),""!==n[t]&amp;&amp;void 0!==n[t]?n[t]:void 0)}if("width"===t)return window.innerWidth+"px";if("height"===t)return window.innerHeight+"px"}}function k(e){return e.currentStyle||document.defaultView.getComputedStyle(e)}function x(e){return e.offsetWidth}function D(e){return re()&amp;&amp;e.firstChild&amp;&amp;"CAPTION"===e.firstChild.nodeName?e.offsetHeight+e.firstChild.offsetHeight:e.offsetHeight}function H(e){return e.clientHeight||e.innerHeight}function A(e){return e.clientWidth||e.innerWidth}function P(e,t,n){window.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function N(e,t,n){window.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)}function L(e){if(e.selectionStart)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange();if(null==t)return 0;var n=e.createTextRange(),o=n.duplicate();return n.moveToBookmark(t.getBookmark()),o.setEndPoint("EndToStart",n),o.text.length}return 0}function I(e){if(e.selectionEnd)return e.selectionEnd;if(document.selection){var t=document.selection.createRange();if(null==t)return 0;var n=e.createTextRange();return n.text.indexOf(t.text)+t.text.length}}function W(){var e="";return window.getSelection?e=window.getSelection().toString():document.selection&amp;&amp;"Control"!==document.selection.type&amp;&amp;(e=document.selection.createRange().text),e}function j(e,t,n){if(void 0===n&amp;&amp;(n=t),e.setSelectionRange){e.focus();try{e.setSelectionRange(t,n)}catch(i){var o=e.parentNode,r=o.style.display;o.style.display="block",e.setSelectionRange(t,n),o.style.display=r}}else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i.select()}}function V(){var e=document.createElement("div");e.style.height="200px",e.style.width="100%";var t=document.createElement("div");t.style.boxSizing="content-box",t.style.height="150px",t.style.left="0px",t.style.overflow="hidden",t.style.position="absolute",t.style.top="0px",t.style.width="200px",t.style.visibility="hidden",t.appendChild(e),(document.body||document.documentElement).appendChild(t);var n=e.offsetWidth;t.style.overflow="scroll";var o=e.offsetWidth;return n==o&amp;&amp;(o=t.clientWidth),(document.body||document.documentElement).removeChild(t),n-o}function B(){return void 0===le&amp;&amp;(le=V()),le}function F(e){return e.offsetWidth!==e.clientWidth}function z(e){return e.offsetHeight!==e.clientHeight}function Y(e,t,n){te()||ne()?(e.style.top=n,e.style.left=t):oe()?e.style["-webkit-transform"]="translate3d("+t+","+n+",0)":e.style.transform="translate3d("+t+","+n+",0)"}function U(e){var t;return e.style.transform&amp;&amp;""!==(t=e.style.transform)?["transform",t]:e.style["-webkit-transform"]&amp;&amp;""!==(t=e.style["-webkit-transform"])?["-webkit-transform",t]:-1}function G(e){e.style.transform&amp;&amp;""!==e.style.transform?e.style.transform="":e.style["-webkit-transform"]&amp;&amp;""!==e.style["-webkit-transform"]&amp;&amp;(e.style["-webkit-transform"]="")}function $(e){var t=["INPUT","SELECT","TEXTAREA"];return e&amp;&amp;(t.indexOf(e.nodeName)&gt;-1||"true"===e.contentEditable)}function K(e){return $(e)&amp;&amp;e.className.indexOf("handsontableInput")==-1&amp;&amp;e.className.indexOf("copyPaste")==-1}Object.defineProperties(n,{getParent:{get:function(){return o}},closest:{get:function(){return r}},closestDown:{get:function(){return i}},isChildOf:{get:function(){return s}},isChildOfWebComponentTable:{get:function(){return a}},polymerWrap:{get:function(){return l}},polymerUnwrap:{get:function(){return u}},index:{get:function(){return c}},overlayContainsElement:{get:function(){return d}},hasClass:{get:function(){return f}},addClass:{get:function(){return p}},removeClass:{get:function(){return m}},removeTextNodes:{get:function(){return g}},empty:{get:function(){return w}},HTML_CHARACTERS:{get:function(){return ue}},fastInnerHTML:{get:function(){return v}},fastInnerText:{get:function(){return y}},isVisible:{get:function(){return b}},offset:{get:function(){return C}},getWindowScrollTop:{get:function(){return _}},getWindowScrollLeft:{get:function(){return R}},getScrollTop:{get:function(){return M}},getScrollLeft:{get:function(){return S}},getScrollableElement:{get:function(){return E}},getTrimmingContainer:{get:function(){return O}},getStyle:{get:function(){return T}},getComputedStyle:{get:function(){return k}},outerWidth:{get:function(){return x}},outerHeight:{get:function(){return D}},innerHeight:{get:function(){return H}},innerWidth:{get:function(){return A}},addEvent:{get:function(){return P}},removeEvent:{get:function(){return N}},getCaretPosition:{get:function(){return L}},getSelectionEndPosition:{get:function(){return I}},getSelectionText:{get:function(){return W}},setCaretPosition:{get:function(){return j}},getScrollbarWidth:{get:function(){return B}},hasVerticalScrollbar:{get:function(){return F}},hasHorizontalScrollbar:{get:function(){return z}},setOverlayPosition:{get:function(){return Y}},getCssTransform:{get:function(){return U}},resetCssTransform:{get:function(){return G}},isInput:{get:function(){return $}},isOutsideInput:{get:function(){return K}},__esModule:{value:!0}});var X,q,Z,J,Q,ee=(X=e("../browser"),X&amp;&amp;X.__esModule&amp;&amp;X||{default:X}),te=ee.isIE8,ne=ee.isIE9,oe=ee.isSafari,re=(q=e("../feature"),q&amp;&amp;q.__esModule&amp;&amp;q||{default:q}).hasCaptionProblem,ie=!!document.documentElement.classList;if(ie){var se=function(){var e=document.createElement("div");return e.classList.add("test","test2"),e.classList.contains("test2")}();Z=function(e,t){return""!==t&amp;&amp;e.classList.contains(t)},J=function(e,t){var n=0;if("string"==typeof t&amp;&amp;(t=t.split(" ")),t=h(t),se)e.classList.add.apply(e.classList,t);else for(;t&amp;&amp;t[n];)e.classList.add(t[n]),n++},Q=function(e,t){var n=0;if("string"==typeof t&amp;&amp;(t=t.split(" ")),t=h(t),se)e.classList.remove.apply(e.classList,t);else for(;t&amp;&amp;t[n];)e.classList.remove(t[n]),n++}}else{var ae=function(e){return new RegExp("(\\s|^)"+e+"(\\s|$)")};Z=function(e,t){return!!e.className.match(ae(t))},J=function(e,t){var n=0,o=e.className;if("string"==typeof t&amp;&amp;(t=t.split(" ")),""===o)o=t.join(" ");else for(;t&amp;&amp;t[n];)ae(t[n]).test(o)||(o+=" "+t[n]),n++;e.className=o},Q=function(e,t){var n=0,o=e.className;for("string"==typeof t&amp;&amp;(t=t.split(" "));t&amp;&amp;t[n];)o=o.replace(ae(t[n])," ").trim(),n++;e.className!==o&amp;&amp;(e.className=o)}}var le,ue=/(&lt;(.*)&gt;|&amp;(.*);)/,ce=!!document.createTextNode("test").textContent},{"../browser":44,"../feature":49}],48:[function(e,t,n){"use strict";function o(e){e.isImmediatePropagationEnabled=!1,e.cancelBubble=!0}function r(e){return e.isImmediatePropagationEnabled===!1}function i(e){"function"==typeof e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function s(e){return e.pageX?e.pageX:e.clientX+f()}function a(e){return e.pageY?e.pageY:e.clientY+h()}function l(e){return 2===e.button}function u(e){return 0===e.button}Object.defineProperties(n,{stopImmediatePropagation:{get:function(){return o}},isImmediatePropagationStopped:{get:function(){return r}},stopPropagation:{get:function(){return i}},pageX:{get:function(){return s}},pageY:{get:function(){return a}},isRightClick:{get:function(){return l}},isLeftClick:{get:function(){return u}},__esModule:{value:!0}});var c,d=(c=e("element"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}),h=d.getWindowScrollTop,f=d.getWindowScrollLeft},{element:47}],49:[function(e,t,n){"use strict";function o(e){return h.call(window,e)}function r(e){f.call(window,e)}function i(){return"ontouchstart"in window}function s(){var e=document.createElement("div");return!(!e.createShadowRoot||!e.createShadowRoot.toString().match(/\[native code\]/))}function a(){var e=document.createElement("TABLE");e.style.borderSpacing=0,e.style.borderWidth=0,e.style.padding=0;var t=document.createElement("TBODY");e.appendChild(t),t.appendChild(document.createElement("TR")),t.firstChild.appendChild(document.createElement("TD")),t.firstChild.firstChild.innerHTML="&lt;tr&gt;&lt;td&gt;t&lt;br&gt;t&lt;/td&gt;&lt;/tr&gt;";var n=document.createElement("CAPTION");n.innerHTML="c&lt;br&gt;c&lt;br&gt;c&lt;br&gt;c",n.style.padding=0,n.style.margin=0,e.insertBefore(n,t),document.body.appendChild(e),m=e.offsetHeight&lt;2*e.lastChild.offsetHeight,document.body.removeChild(e)}function l(){return void 0===m&amp;&amp;a(),m}function u(e){var t=void 0!==arguments[1]?arguments[1]:{};return g?g:g="object"==typeof Intl?new Intl.Collator(e,t).compare:"function"==typeof String.prototype.localeCompare?function(e,t){return(e+"").localeCompare(t)}:function(e,t){return e===t?0:e&gt;t?-1:1}}Object.defineProperties(n,{requestAnimationFrame:{get:function(){return o}},cancelAnimationFrame:{get:function(){return r}},isTouchSupported:{get:function(){return i}},isWebComponentSupportedNatively:{get:function(){return s}},hasCaptionProblem:{get:function(){return l}},getComparisonFunction:{get:function(){return u}},__esModule:{value:!0}});for(var c=0,d=["ms","moz","webkit","o"],h=window.requestAnimationFrame,f=window.cancelAnimationFrame,p=0;p&lt;d.length&amp;&amp;!h;++p)h=window[d[p]+"RequestAnimationFrame"],f=window[d[p]+"CancelAnimationFrame"]||window[d[p]+"CancelRequestAnimationFrame"];h||(h=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-c)),o=window.setTimeout(function(){e(t+n)},n);return c=t+n,o}),f||(f=function(e){clearTimeout(e)});var m,g},{}],50:[function(e,t,n){"use strict";function o(e){return"function"==typeof e}function r(e,t){return function(){return e.apply(t,arguments)}}function i(e){function t(){var t=this,s=arguments,a=Date.now(),l=!1;r.lastCallThrottled=!0,o||(o=a,l=!0);var u=n-(a-o);return l?(r.lastCallThrottled=!1,e.apply(this,s)):(i&amp;&amp;clearTimeout(i),i=setTimeout(function(){r.lastCallThrottled=!1,e.apply(t,s),o=0,i=void 0},u)),r}var n=void 0!==arguments[1]?arguments[1]:200,o=0,r={lastCallThrottled:!0},i=null;return t}function s(e){function t(){a=r}function n(){return a?(a--,e.apply(this,arguments)):s.apply(this,arguments)}var o=void 0!==arguments[1]?arguments[1]:200,r=void 0!==arguments[2]?arguments[2]:10,s=i(e,o),a=r;return n.clearHits=t,n}function a(e){function t(){var t=this,i=arguments;return r&amp;&amp;clearTimeout(r),r=setTimeout(function(){n=e.apply(t,i)},o),n}var n,o=void 0!==arguments[1]?arguments[1]:200,r=null;return t}function l(){for(var e=[],t=0;t&lt;arguments.length;t++)e[t]=arguments[t];var n=e,o=n[0],r=Array.prototype.slice.call(n,1);
return function(){return f(r,function(e,t){return t(e)},o.apply(this,arguments))}}function u(e){for(var t=[],n=1;n&lt;arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],o=0;o&lt;arguments.length;o++)n[o]=arguments[o];return e.apply(this,t.concat(n))}}function c(e){function t(o){return function(){for(var r=[],i=0;i&lt;arguments.length;i++)r[i]=arguments[i];var s,a=o.concat(r);return s=a.length&gt;=n?e.apply(this,a):t(a)}}var n=e.length;return t([])}function d(e){function t(o){return function(){for(var r=[],i=0;i&lt;arguments.length;i++)r[i]=arguments[i];var s,a=o.concat(r.reverse());return s=a.length&gt;=n?e.apply(this,a):t(a)}}var n=e.length;return t([])}Object.defineProperties(n,{isFunction:{get:function(){return o}},proxy:{get:function(){return r}},throttle:{get:function(){return i}},throttleAfterHits:{get:function(){return s}},debounce:{get:function(){return a}},pipe:{get:function(){return l}},partial:{get:function(){return u}},curry:{get:function(){return c}},curryRight:{get:function(){return d}},__esModule:{value:!0}});var h,f=(h=e("array"),h&amp;&amp;h.__esModule&amp;&amp;h||{default:h}).arrayReduce},{array:43}],51:[function(e,t,n){"use strict";function o(e){switch(typeof e){case"string":case"number":return e+"";case"object":return null===e?"":e.toString();case"undefined":return"";default:return e.toString()}}function r(e){return"undefined"!=typeof e}function i(e){return"undefined"==typeof e}function s(e){return null===e||""===e||i(e)}Object.defineProperties(n,{stringify:{get:function(){return o}},isDefined:{get:function(){return r}},isUndefined:{get:function(){return i}},isEmpty:{get:function(){return s}},__esModule:{value:!0}})},{}],52:[function(e,t,n){"use strict";function o(e){var t=typeof e;return"number"==t?!isNaN(e)&amp;&amp;isFinite(e):"string"==t?!!e.length&amp;&amp;(1==e.length?/\d/.test(e):/^\s*[+-]?\s*(?:(?:\d+(?:\.\d+)?(?:e[+-]?\d+)?)|(?:0x[a-f\d]+))\s*$/i.test(e)):"object"==t&amp;&amp;!(!e||"number"!=typeof e.valueOf()||e instanceof Date)}function r(e,t,n){var o=-1;for("function"==typeof t?(n=t,t=e):o=e-1;++o&lt;=t&amp;&amp;n(o)!==!1;);}function i(e,t,n){var o=e+1;for("function"==typeof t&amp;&amp;(n=t,t=0);--o&gt;=t&amp;&amp;n(o)!==!1;);}function s(e,t){return t=parseInt(t.toString().replace("%",""),10),t=parseInt(e*t/100)}Object.defineProperties(n,{isNumeric:{get:function(){return o}},rangeEach:{get:function(){return r}},rangeEachReverse:{get:function(){return i}},valueAccordingPercent:{get:function(){return s}},__esModule:{value:!0}})},{}],53:[function(e,t,n){"use strict";function o(e){var t;return Array.isArray(e)?t=[]:(t={},p(e,function(e,n){"__children"!==n&amp;&amp;(e&amp;&amp;"object"==typeof e&amp;&amp;!Array.isArray(e)?t[n]=o(e):Array.isArray(e)?e.length&amp;&amp;"object"==typeof e[0]&amp;&amp;!Array.isArray(e[0])?t[n]=[o(e[0])]:t[n]=[]:t[n]=null)})),t}function r(e,t){return t.prototype.constructor=t,e.prototype=new t,e.prototype.constructor=e,e}function i(e,t){return p(t,function(t,n){e[n]=t}),e}function s(e,t){p(t,function(n,o){t[o]&amp;&amp;"object"==typeof t[o]?(e[o]||(Array.isArray(t[o])?e[o]=[]:"[object Date]"===Object.prototype.toString.call(t[o])?e[o]=t[o]:e[o]={}),s(e[o],t[o])):e[o]=t[o]})}function a(e){return"object"==typeof e?JSON.parse(JSON.stringify(e)):e}function l(e){var t={};return p(e,function(e,n){t[n]=e}),t}function u(e){for(var t=[],n=1;n&lt;arguments.length;n++)t[n-1]=arguments[n];return e.MIXINS||(e.MIXINS=[]),y(t,function(t){e.MIXINS.push(t.MIXIN_NAME),p(t,function(t,n){if(void 0!==e.prototype[n])throw new Error("Mixin conflict. Property '"+n+"' already exist and cannot be overwritten.");if("function"==typeof t)e.prototype[n]=t;else{var o=function(e,t){e="_"+e;var n=function(e){return(Array.isArray(e)||d(e))&amp;&amp;(e=a(e)),e};return function(){return void 0===this[e]&amp;&amp;(this[e]=n(t)),this[e]}},r=function(e){return e="_"+e,function(t){this[e]=t}};Object.defineProperty(e.prototype,n,{get:o(n,t),set:r(n),configurable:!0})}})}),e}function c(e,t){return JSON.stringify(e)===JSON.stringify(t)}function d(e){return"[object Object]"==Object.prototype.toString.call(e)}function h(e){var t;if("object"==typeof e.__proto__)t=e.__proto__;else{var n,o=e.constructor;"function"==typeof e.constructor&amp;&amp;(n=o,delete e.constructor&amp;&amp;(o=e.constructor,e.constructor=n)),t=o?o.prototype:null}return t}function f(e,t,n,o){o.value=n,o.writable=o.writable!==!1,o.enumerable=o.enumerable!==!1,o.configurable=o.configurable!==!1,Object.defineProperty(e,t,o)}function p(e,t){for(var n in e)if((!e.hasOwnProperty||e.hasOwnProperty&amp;&amp;e.hasOwnProperty(n))&amp;&amp;t(e[n],n,e)===!1)break;return e}function m(e,t){var n=t.split("."),o=e;return p(n,function(e){if(o=o[e],void 0===o)return o=void 0,!1}),o}function g(e){if(!d(e))return 0;var t=function(e){var n=0;return d(e)?p(e,function(e){n+=t(e)}):n++,n};return t(e)}function w(e){var t,n=void 0!==arguments[1]?arguments[1]:"value",o="_"+n,r=(t={},Object.defineProperty(t,"_touched",{value:!1,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(t,o,{value:e,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(t,"isTouched",{value:function(){return this._touched},configurable:!0,enumerable:!0,writable:!0}),t);return Object.defineProperty(r,n,{get:function(){return this[o]},set:function(e){this._touched=!0,this[o]=e},enumerable:!0,configurable:!0}),r}Object.defineProperties(n,{duckSchema:{get:function(){return o}},inherit:{get:function(){return r}},extend:{get:function(){return i}},deepExtend:{get:function(){return s}},deepClone:{get:function(){return a}},clone:{get:function(){return l}},mixin:{get:function(){return u}},isObjectEquals:{get:function(){return c}},isObject:{get:function(){return d}},getPrototypeOf:{get:function(){return h}},defineGetter:{get:function(){return f}},objectEach:{get:function(){return p}},getProperty:{get:function(){return m}},deepObjectSize:{get:function(){return g}},createObjectPropListener:{get:function(){return w}},__esModule:{value:!0}});var v,y=(v=e("array"),v&amp;&amp;v.__esModule&amp;&amp;v||{default:v}).arrayEach},{array:43}],54:[function(e,t,n){"use strict";function o(e,t){function n(){}i(n,e);for(var o=0,r=t.length;o&lt;r;o++)n.prototype[t[o]]=void 0;return n}Object.defineProperties(n,{columnFactory:{get:function(){return o}},__esModule:{value:!0}});var r,i=(r=e("object"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).inherit},{object:53}],55:[function(e,t,n){"use strict";function o(e){return e[0].toUpperCase()+e.substr(1)}function r(e,t){var n=!0;return m(t.length-1,function(o){if(e.charAt(o)!==t.charAt(o))return n=!1,!1}),n}function i(e,t){var n=!0,o=t.length-1,r=e.length-1;return m(o,function(i){var s=r-i,a=o-i;if(e.charAt(s)!==t.charAt(a))return n=!1,!1}),n}function s(){for(var e=[],t=0;t&lt;arguments.length;t++)e[t]=arguments[t];for(var n=[],o=e.length;o--;){var r=p(e[o]).toLowerCase();n.indexOf(r)===-1&amp;&amp;n.push(r)}return 1===n.length}function a(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()}function l(e){return/^([0-9][0-9]?\%$)|(^100\%$)/.test(e)}function u(e){var t=void 0!==arguments[1]?arguments[1]:{};return(e+"").replace(/(?:\\)?\[([^\[\]]+)]/g,function(e,n){return"\\"===e.charAt(0)?e.substr(1,e.length-1):void 0===t[n]?"":t[n]})}function c(e,t){var n=void 0!==arguments[2]?arguments[2]:" ";if(e+="",e.length&gt;=t)return e;n=String(n);var o=n.length;o||(n=" ");var r=t-e.length,i=Math.ceil(r/n.length),s="";return m(i,function(e){s+=n}),s=s.slice(0,r),s+e}function d(e){return e+="",e.replace(g,"")}Object.defineProperties(n,{toUpperCaseFirst:{get:function(){return o}},startsWith:{get:function(){return r}},endsWith:{get:function(){return i}},equalsIgnoreCase:{get:function(){return s}},randomString:{get:function(){return a}},isPercentValue:{get:function(){return l}},substitute:{get:function(){return u}},padStart:{get:function(){return c}},stripTags:{get:function(){return d}},__esModule:{value:!0}});var h,f,p=(h=e("mixed"),h&amp;&amp;h.__esModule&amp;&amp;h||{default:h}).stringify,m=(f=e("number"),f&amp;&amp;f.__esModule&amp;&amp;f||{default:f}).rangeEach,g=/&lt;\/?\w+\/?&gt;|&lt;\w+[\s|\/][^&gt;]*&gt;/gi},{mixed:51,number:52}],56:[function(e,t,n){"use strict";function o(e){return 32==e||e&gt;=48&amp;&amp;e&lt;=57||e&gt;=96&amp;&amp;e&lt;=111||e&gt;=186&amp;&amp;e&lt;=192||e&gt;=219&amp;&amp;e&lt;=222||e&gt;=226||e&gt;=65&amp;&amp;e&lt;=90}function r(e){var t=[u.ARROW_DOWN,u.ARROW_UP,u.ARROW_LEFT,u.ARROW_RIGHT,u.HOME,u.END,u.DELETE,u.BACKSPACE,u.F1,u.F2,u.F3,u.F4,u.F5,u.F6,u.F7,u.F8,u.F9,u.F10,u.F11,u.F12,u.TAB,u.PAGE_DOWN,u.PAGE_UP,u.ENTER,u.ESCAPE,u.SHIFT,u.CAPS_LOCK,u.ALT];return t.indexOf(e)!==-1}function i(e){return[u.CONTROL_LEFT,224,u.COMMAND_LEFT,u.COMMAND_RIGHT].indexOf(e)!==-1}function s(e,t){var n=t.split("|"),o=!1;return l(n,function(t){if(e===u[t])return o=!0,!1}),o}Object.defineProperties(n,{KEY_CODES:{get:function(){return u}},isPrintableChar:{get:function(){return o}},isMetaKey:{get:function(){return r}},isCtrlKey:{get:function(){return i}},isKey:{get:function(){return s}},__esModule:{value:!0}});var a,l=(a=e("array"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).arrayEach,u={MOUSE_LEFT:1,MOUSE_RIGHT:3,MOUSE_MIDDLE:2,BACKSPACE:8,COMMA:188,INSERT:45,DELETE:46,END:35,ENTER:13,ESCAPE:27,CONTROL_LEFT:91,COMMAND_LEFT:17,COMMAND_RIGHT:93,ALT:18,HOME:36,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,SPACE:32,SHIFT:16,CAPS_LOCK:20,TAB:9,ARROW_RIGHT:39,ARROW_LEFT:37,ARROW_UP:38,ARROW_DOWN:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,A:65,X:88,C:67,V:86}},{array:43}],57:[function(e,t,n){"use strict";Object.defineProperties(n,{arrayMapper:{get:function(){return m}},__esModule:{value:!0}});var o,r,i,s,a=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,l=(r=e("helpers/array"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}),u=(l.arrayEach,l.arrayReduce),c=l.arrayMap,d=l.arrayMax,h=(i=e("helpers/object"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).defineGetter,f=(s=e("helpers/number"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).rangeEach,p="arrayMapper",m={_arrayMap:[],getValueByIndex:function(e){var t;return void 0===(t=this._arrayMap[e])?null:t},getIndexByValue:function(e){var t;return(t=this._arrayMap.indexOf(e))===-1?null:t},insertItems:function(e){var t=void 0!==arguments[1]?arguments[1]:1,n=this,o=d(this._arrayMap)+1,r=[];return f(t-1,function(t){r.push(n._arrayMap.splice(e+t,0,o+t))}),r},removeItems:function(e){var t=void 0!==arguments[1]?arguments[1]:1,n=this,o=[];if(Array.isArray(e)){var r=[].concat(this._arrayMap);e.sort(function(e,t){return t-e}),o=u(e,function(e,t){return n._arrayMap.splice(t,1),e.concat(r.slice(t,t+1))},[])}else o=this._arrayMap.splice(e,t);return o},unshiftItems:function(e){function t(e){return u(o,function(t,n){return e&gt;n&amp;&amp;t++,t},0)}var n=void 0!==arguments[1]?arguments[1]:1,o=this.removeItems(e,n);this._arrayMap=c(this._arrayMap,function(e,n){var o=t(e);return o&amp;&amp;(e-=o),e})},shiftItems:function(e){var t=void 0!==arguments[1]?arguments[1]:1,n=this;this._arrayMap=c(this._arrayMap,function(n){return n&gt;=e&amp;&amp;(n+=t),n}),f(t-1,function(t){n._arrayMap.splice(e+t,0,e+t)})},clearMap:function(){this._arrayMap.length=0}};h(m,"MIXIN_NAME",p,{writable:!1,enumerable:!1}),a.utils.arrayMapper=m},{browser:24,"helpers/array":43,"helpers/number":52,"helpers/object":53}],58:[function(e,t,n){"use strict";Object.defineProperties(n,{localHooks:{get:function(){return c}},__esModule:{value:!0}});var o,r,i,s=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,a=(r=e("helpers/array"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).arrayEach,l=(i=e("helpers/object"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).defineGetter,u="localHooks",c={_localHooks:Object.create(null),addLocalHook:function(e,t){this._localHooks[e]||(this._localHooks[e]=[]),this._localHooks[e].push(t)},runLocalHooks:function(e){for(var t=[],n=1;n&lt;arguments.length;n++)t[n-1]=arguments[n];var o=this;this._localHooks[e]&amp;&amp;a(this._localHooks[e],function(e){return e.apply(o,t)})},clearLocalHooks:function(){this._localHooks={}}};l(c,"MIXIN_NAME",u,{writable:!1,enumerable:!1}),s.utils.localHooks=c},{browser:24,"helpers/array":43,"helpers/object":53}],59:[function(e,t,n){"use strict";function o(){function e(e){return null!==e&amp;&amp;!n(e)&amp;&amp;("string"==typeof e||"number"==typeof e)}function t(e){return null!==e&amp;&amp;("object"==typeof e||"function"==typeof e)}function n(e){return e!==e}var o={arrayMap:[],weakMap:new WeakMap};return{get:function(n){return e(n)?o.arrayMap[n]:t(n)?o.weakMap.get(n):void 0},set:function(n,r){if(e(n))o.arrayMap[n]=r;else{if(!t(n))throw new Error("Invalid key type");o.weakMap.set(n,r)}},delete:function(n){e(n)?delete o.arrayMap[n]:t(n)&amp;&amp;o.weakMap.delete(n)}}}Object.defineProperties(n,{MultiMap:{get:function(){return o}},__esModule:{value:!0}}),window.MultiMap=o},{}],60:[function(e,t,n){"use strict";Object.defineProperties(n,{Hooks:{get:function(){return l}},__esModule:{value:!0}});var o,r,i=["afterCellMetaReset","afterChange","afterChangesObserved","afterContextMenuDefaultOptions","beforeContextMenuSetItems","afterDropdownMenuDefaultOptions","beforeDropdownMenuSetItems","afterContextMenuHide","afterContextMenuShow","afterCopyLimit","beforeCreateCol","afterCreateCol","beforeCreateRow","afterCreateRow","afterDeselect","afterDestroy","afterDocumentKeyDown","afterGetCellMeta","afterGetColHeader","afterGetRowHeader","afterInit","afterLoadData","afterMomentumScroll","afterOnCellCornerMouseDown","afterOnCellCornerDblClick","afterOnCellMouseDown","afterOnCellMouseOver","afterRemoveCol","afterRemoveRow","afterRender","beforeRenderer","afterRenderer","afterScrollHorizontally","afterScrollVertically","afterSelection","afterSelectionByProp","afterSelectionEnd","afterSelectionEndByProp","afterSetCellMeta","afterSetDataAtCell","afterSetDataAtRowProp","afterUpdateSettings","afterValidate","beforeAutofill","beforeCellAlignment","beforeChange","beforeChangeRender","beforeDrawBorders","beforeGetCellMeta","beforeInit","beforeInitWalkontable","beforeKeyDown","beforeOnCellMouseDown","beforeOnCellMouseOver","beforeRemoveCol","beforeRemoveRow","beforeRender","beforeSetRangeStart","beforeSetRangeEnd","beforeTouchScroll","beforeValidate","beforeValueRender","construct","init","modifyCol","unmodifyCol","unmodifyRow","modifyColHeader","modifyColWidth","modifyRow","modifyRowHeader","modifyRowHeight","modifyData","modifyRowData","persistentStateLoad","persistentStateReset","persistentStateSave","beforeColumnSort","afterColumnSort","modifyAutofillRange","modifyCopyableRange","beforeColumnMove","afterColumnMove","beforeRowMove","afterRowMove","beforeColumnResize","afterColumnResize","beforeRowResize","afterRowResize","afterGetColumnHeaderRenderers","afterGetRowHeaderRenderers","beforeStretchingColumnWidth","beforeFilter","afterFilter","modifyColumnHeaderHeight","beforeUndo","afterUndo","beforeRedo","afterRedo","modifyRowHeaderWidth","beforeAutofillInsidePopulate","modifyTransformStart","modifyTransformEnd","afterModifyTransformStart","afterModifyTransformEnd","beforeValueRender","afterViewportRowCalculatorOverride","afterViewportColumnCalculatorOverride","afterPluginsInitialized","manualRowHeights","skipLengthCache","afterTrimRow","afterUntrimRow","afterDropdownMenuShow","afterDropdownMenuHide","hiddenRow","hiddenColumn","beforeAddChild","afterAddChild","beforeDetachChild","afterDetachChild","afterBeginEditing"],s=(o=e("helpers/array"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).arrayEach,a=(r=e("helpers/object"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).objectEach,l=function(){this.globalBucket=this.createEmptyBucket()};$traceurRuntime.createClass(l,{createEmptyBucket:function(){var e=Object.create(null);return s(i,function(t){return e[t]=[]}),e},getBucket:function(){var e=void 0!==arguments[0]?arguments[0]:null;return e?(e.pluginHookBucket||(e.pluginHookBucket=this.createEmptyBucket()),e.pluginHookBucket):this.globalBucket},add:function(e,t){var n=void 0!==arguments[2]?arguments[2]:null,o=this;if(Array.isArray(t))s(t,function(t){return o.add(e,t,n)});else{var r=this.getBucket(n);"undefined"==typeof r[e]&amp;&amp;(this.register(e),r[e]=[]),t.skip=!1,r[e].indexOf(t)===-1&amp;&amp;r[e].push(t)}return this},once:function(e,t){var n=void 0!==arguments[2]?arguments[2]:null,o=this;Array.isArray(t)?s(t,function(t){return o.once(e,t,n)}):(t.runOnce=!0,this.add(e,t,n))},remove:function(e,t){var n=void 0!==arguments[2]?arguments[2]:null,o=this.getBucket(n);return"undefined"!=typeof o[e]&amp;&amp;o[e].indexOf(t)&gt;=0&amp;&amp;(t.skip=!0,!0)},has:function(e){var t=void 0!==arguments[1]?arguments[1]:null,n=this.getBucket(t);return!(void 0===n[e]||!n[e].length)},run:function(e,t,n,o,r,i,s,a){var l=this.globalBucket[t],u=-1,c=l?l.length:0;if(c)for(;++u&lt;c;)if(l[u]&amp;&amp;!l[u].skip){var d=l[u].call(e,n,o,r,i,s,a);void 0!==d&amp;&amp;(n=d),l[u]&amp;&amp;l[u].runOnce&amp;&amp;this.remove(t,l[u])}var h=this.getBucket(e)[t],f=-1,p=h?h.length:0;if(p)for(;++f&lt;p;)if(h[f]&amp;&amp;!h[f].skip){var m=h[f].call(e,n,o,r,i,s,a);void 0!==m&amp;&amp;(n=m),h[f]&amp;&amp;h[f].runOnce&amp;&amp;this.remove(t,h[f],e)}return n},destroy:function(){var e=void 0!==arguments[0]?arguments[0]:null;a(this.getBucket(e),function(e,t,n){return n[t].length=0})},register:function(e){this.isRegistered(e)||i.push(e)},deregister:function(e){this.isRegistered(e)&amp;&amp;i.splice(i.indexOf(e),1)},isRegistered:function(e){return i.indexOf(e)&gt;=0},getRegistered:function(){return i}},{})},{"helpers/array":43,"helpers/object":53}],61:[function(e,t,n){"use strict";function o(e,t){e=h(e),c.plugins[e]=t,c.hooks.add("construct",function(){var n;f.has(this)||f.set(this,{}),n=f.get(this),n[e]||(n[e]=new t(this))}),c.hooks.add("afterDestroy",function(){if(f.has(this)){var e=f.get(this);d(e,function(e){return e.destroy()}),f.delete(this)}})}function r(e,t){if("string"!=typeof t)throw Error('Only strings can be passed as "plugin" parameter');var n=h(t);if(f.has(e)&amp;&amp;f.get(e)[n])return f.get(e)[n]}function i(e){return f.has(e)?Object.keys(f.get(e)):[]}function s(e,t){var n=null;return f.has(e)&amp;&amp;d(f.get(e),function(e,o){e===t&amp;&amp;(n=o)}),n}Object.defineProperties(n,{registerPlugin:{get:function(){return o}},getPlugin:{get:function(){return r}},getRegistredPluginNames:{get:function(){return i}},getPluginName:{get:function(){return s}},__esModule:{value:!0}});var a,l,u,c=(a=e("browser"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).default,d=(l=e("helpers/object"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).objectEach,h=(u=e("helpers/string"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).toUpperCaseFirst,f=new WeakMap},{browser:24,"helpers/object":53,"helpers/string":55}],62:[function(e,t,n){"use strict";Object.defineProperties(n,{default:{get:function(){return C}},__esModule:{value:!0}});var o,r,i,s,a,l=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,u=(r=e("helpers/object"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}),c=u.defineGetter,d=u.objectEach,h=(i=e("helpers/array"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).arrayEach,f=(s=e("utils/recordTranslator"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}),p=(f.registerIdentity,f.getTranslator),m=(a=e("plugins"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}),g=m.getRegistredPluginNames,w=m.getPluginName,v=new WeakMap,y=null,b=function(e){var t=this;c(this,"hot",e,{writable:!1}),c(this,"t",p(e),{writable:!1}),v.set(this,{hooks:{}}),y=null,this.pluginName=null,this.pluginsInitializedCallbacks=[],this.isPluginsReady=!1,this.enabled=!1,this.initialized=!1,this.hot.addHook("afterPluginsInitialized",function(){return t.onAfterPluginsInitialized()}),this.hot.addHook("afterUpdateSettings",function(){return t.onUpdateSettings()}),this.hot.addHook("beforeInit",function(){return t.init()})};$traceurRuntime.createClass(b,{init:function(){this.pluginName=w(this.hot,this),this.isEnabled&amp;&amp;this.isEnabled()&amp;&amp;this.enablePlugin(),y||(y=g(this.hot)),y.indexOf(this.pluginName)&gt;=0&amp;&amp;y.splice(y.indexOf(this.pluginName),1),y.length||this.hot.runHooks("afterPluginsInitialized"),this.initialized=!0},enablePlugin:function(){this.enabled=!0},disablePlugin:function(){this.eventManager&amp;&amp;this.eventManager.clear(),this.clearHooks(),this.enabled=!1},addHook:function(e,t){var n=v.get(this).hooks[e]=v.get(this).hooks[e]||[];this.hot.addHook(e,t),n.push(t),v.get(this).hooks[e]=n},removeHooks:function(e){var t=this;h(v.get(this).hooks[e]||[],function(n){t.hot.removeHook(e,n)})},clearHooks:function(){var e=this,t=v.get(this).hooks;d(t,function(t,n){return e.removeHooks(n)}),t.length=0},callOnPluginsReady:function(e){this.isPluginsReady?e():this.pluginsInitializedCallbacks.push(e)},onAfterPluginsInitialized:function(){h(this.pluginsInitializedCallbacks,function(e){return e()}),this.pluginsInitializedCallbacks.length=0,this.isPluginsReady=!0},onUpdateSettings:function(){this.isEnabled&amp;&amp;(this.enabled&amp;&amp;!this.isEnabled()&amp;&amp;this.disablePlugin(),!this.enabled&amp;&amp;this.isEnabled()&amp;&amp;this.enablePlugin(),this.enabled&amp;&amp;this.isEnabled()&amp;&amp;this.updatePlugin())},updatePlugin:function(){},destroy:function(){var e=this;this.eventManager&amp;&amp;this.eventManager.destroy(),this.clearHooks(),d(this,function(t,n){"hot"!==n&amp;&amp;"t"!==n&amp;&amp;(e[n]=null)}),delete this.t,delete this.hot}},{});var C=b;l.plugins.BasePlugin=b},{browser:24,"helpers/array":43,"helpers/object":53,plugins:61,"utils/recordTranslator":130}],63:[function(e,t,n){"use strict";Object.defineProperties(n,{AutoColumnSize:{get:function(){return N}},__esModule:{value:!0}});var o,r,i,s,a,l,u,c,d,h,f,p=(o=e("_base"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,m=(r=e("helpers/array"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}),g=m.arrayEach,w=m.arrayFilter,v=m.arrayReduce,y=m.arrayMap,b=(i=e("helpers/feature"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}),C=b.cancelAnimationFrame,_=b.requestAnimationFrame,R=(s=e("helpers/dom/element"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).isVisible,M=(a=e("utils/ghostTable"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).GhostTable,S=(l=e("helpers/object"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}),E=S.isObject,O=(S.objectEach,u=e("helpers/number"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}),T=O.valueAccordingPercent,k=O.rangeEach,x=(c=e("plugins"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}).registerPlugin,D=(d=e("utils/samplesGenerator"),d&amp;&amp;d.__esModule&amp;&amp;d||{default:d}).SamplesGenerator,H=(h=e("helpers/string"),h&amp;&amp;h.__esModule&amp;&amp;h||{default:h}).isPercentValue,A=(f=e("3rdparty/walkontable/src/calculator/viewportColumns"),f&amp;&amp;f.__esModule&amp;&amp;f||{default:f}).WalkontableViewportColumnsCalculator,P=new WeakMap,N=function(e){var t=this;$traceurRuntime.superConstructor(L).call(this,e),P.set(this,{cachedColumnHeaders:[]}),this.widths=[],this.ghostTable=new M(this.hot),this.samplesGenerator=new D(function(e,n){return t.hot.getDataAtCell(e,n)}),this.firstCalculation=!0,this.inProgress=!1,this.addHook("beforeColumnResize",function(e,n,o){return t.onBeforeColumnResize(e,n,o)})},L=N;$traceurRuntime.createClass(N,{isEnabled:function(){return this.hot.getSettings().autoColumnSize!==!1&amp;&amp;!this.hot.getSettings().colWidths},enablePlugin:function(){var e=this;if(!this.enabled){var t=this.hot.getSettings().autoColumnSize;t&amp;&amp;null!=t.useHeaders&amp;&amp;this.ghostTable.setSetting("useHeaders",t.useHeaders),this.addHook("afterLoadData",function(){return e.onAfterLoadData()}),this.addHook("beforeChange",function(t){return e.onBeforeChange(t)}),this.addHook("beforeRender",function(t){return e.onBeforeRender(t)}),this.addHook("modifyColWidth",function(t,n){return e.getColumnWidth(n,t)}),this.addHook("afterInit",function(){return e.onAfterInit()}),$traceurRuntime.superGet(this,L.prototype,"enablePlugin").call(this)}},updatePlugin:function(){var e=this.findColumnsWhereHeaderWasChanged();e.length&amp;&amp;this.clearCache(e),$traceurRuntime.superGet(this,L.prototype,"updatePlugin").call(this)},disablePlugin:function(){$traceurRuntime.superGet(this,L.prototype,"disablePlugin").call(this)},calculateColumnsWidth:function(){var e=void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countCols()-1},t=void 0!==arguments[1]?arguments[1]:{from:0,to:this.hot.countRows()-1},n=void 0!==arguments[2]&amp;&amp;arguments[2],o=this;"number"==typeof e&amp;&amp;(e={from:e,to:e}),"number"==typeof t&amp;&amp;(t={from:t,to:t}),k(e.from,e.to,function(e){if(n||void 0===o.widths[e]&amp;&amp;!o.hot._getColWidthFromSettings(e)){var r=o.samplesGenerator.generateColumnSamples(e,t);r.forEach(function(e,t){return o.ghostTable.addColumn(t,e)})}}),this.ghostTable.columns.length&amp;&amp;(this.ghostTable.getWidths(function(e,t){return o.widths[e]=t}),this.ghostTable.clean())},calculateAllColumnsWidth:function(){var e=void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countRows()-1},t=this,n=0,o=this.hot.countCols()-1,r=null;this.inProgress=!0;var i=function(){return t.hot?(t.calculateColumnsWidth({from:n,to:Math.min(n+L.CALCULATION_STEP,o)},e),n=n+L.CALCULATION_STEP+1,void(n&lt;o?r=_(i):(C(r),t.inProgress=!1,t.hot.view.wt.wtOverlays.adjustElementsSize(!0),t.hot.view.wt.wtOverlays.leftOverlay.needFullRender&amp;&amp;t.hot.view.wt.wtOverlays.leftOverlay.clone.draw()))):(C(r),void(t.inProgress=!1))};this.firstCalculation&amp;&amp;this.getSyncCalculationLimit()&amp;&amp;(this.calculateColumnsWidth({from:0,to:this.getSyncCalculationLimit()},e),this.firstCalculation=!1,n=this.getSyncCalculationLimit()+1),n&lt;o?i():this.inProgress=!1},setSamplingOptions:function(){var e=this.hot.getSettings().autoColumnSize,t=e&amp;&amp;e.hasOwnProperty("samplingRatio")?this.hot.getSettings().autoColumnSize.samplingRatio:void 0,n=e&amp;&amp;e.hasOwnProperty("allowSampleDuplicates")?this.hot.getSettings().autoColumnSize.allowSampleDuplicates:void 0;t&amp;&amp;!isNaN(t)&amp;&amp;this.samplesGenerator.setSampleCount(parseInt(t,10)),n&amp;&amp;this.samplesGenerator.setAllowDuplicates(n)},recalculateAllColumnsWidth:function(){this.hot.view&amp;&amp;R(this.hot.view.wt.wtTable.TABLE)&amp;&amp;(this.clearCache(),this.calculateAllColumnsWidth())},getSyncCalculationLimit:function(){var e=L.SYNC_CALCULATION_LIMIT,t=this.hot.countCols()-1;return E(this.hot.getSettings().autoColumnSize)&amp;&amp;(e=this.hot.getSettings().autoColumnSize.syncLimit,H(e)?e=T(t,e):e&gt;&gt;=0),Math.min(e,t)},getColumnWidth:function(e){var t=arguments[1],n=void 0===arguments[2]||arguments[2],o=t;return void 0===o&amp;&amp;(o=this.widths[e],n&amp;&amp;"number"==typeof o&amp;&amp;(o=Math.max(o,A.DEFAULT_WIDTH))),o},getFirstVisibleColumn:function(){var e=this.hot.view.wt;return e.wtViewport.columnsVisibleCalculator?e.wtTable.getFirstVisibleColumn():e.wtViewport.columnsRenderCalculator?e.wtTable.getFirstRenderedColumn():-1},getLastVisibleColumn:function(){var e=this.hot.view.wt;return e.wtViewport.columnsVisibleCalculator?e.wtTable.getLastVisibleColumn():e.wtViewport.columnsRenderCalculator?e.wtTable.getLastRenderedColumn():-1},findColumnsWhereHeaderWasChanged:function(){var e=this.hot.getColHeader(),t=P.get(this).cachedColumnHeaders,n=v(e,function(e,n,o){var r=t.length;return(r-1&lt;o||t[o]!==n)&amp;&amp;e.push(o),r-1&lt;o?t.push(n):t[o]=n,e},[]);return n},clearCache:function(){var e=void 0!==arguments[0]?arguments[0]:[],t=this;e.length?g(e,function(e){return t.widths[e]=void 0}):this.widths.length=0},isNeedRecalculate:function(){return!!w(this.widths,function(e){return void 0===e}).length},onBeforeRender:function(){var e=this.hot.renderCall,t=this.hot.countRows();t&amp;&amp;(this.calculateColumnsWidth({from:this.getFirstVisibleColumn(),to:this.getLastVisibleColumn()},void 0,e),this.isNeedRecalculate()&amp;&amp;!this.inProgress&amp;&amp;this.calculateAllColumnsWidth())},onAfterLoadData:function(){var e=this;this.hot.view?this.recalculateAllColumnsWidth():setTimeout(function(){e.hot&amp;&amp;e.recalculateAllColumnsWidth()},0)},onBeforeChange:function(e){var t=this,n=y(e,function(e){var n=e,o=(n[0],n[1]);return t.hot.propToCol(o)});this.clearCache(n)},onBeforeColumnResize:function(e,t,n){return n&amp;&amp;(this.calculateColumnsWidth(e,void 0,!0),t=this.getColumnWidth(e,void 0,!1)),t},onAfterInit:function(){P.get(this).cachedColumnHeaders=this.hot.getColHeader()},destroy:function(){this.ghostTable.clean(),$traceurRuntime.superGet(this,L.prototype,"destroy").call(this)}},{get CALCULATION_STEP(){return 50},get SYNC_CALCULATION_LIMIT(){return 50}},p),x("autoColumnSize",N)},{"3rdparty/walkontable/src/calculator/viewportColumns":4,_base:62,"helpers/array":43,"helpers/dom/element":47,"helpers/feature":49,"helpers/number":52,"helpers/object":53,"helpers/string":55,plugins:61,"utils/ghostTable":128,"utils/samplesGenerator":131}],64:[function(e,t,n){"use strict";Object.defineProperties(n,{AutoRowSize:{get:function(){return k}},__esModule:{value:!0}});var o,r,i,s,a,l,u,c,d,h,f=(o=e("_base"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,p=(r=e("helpers/array"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}),m=(p.arrayEach,p.arrayFilter),g=(i=e("helpers/feature"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}),w=g.cancelAnimationFrame,v=g.requestAnimationFrame,y=(s=e("helpers/dom/element"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).isVisible,b=(a=e("utils/ghostTable"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).GhostTable,C=(l=e("helpers/object"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}),_=C.isObject,R=(C.objectEach,u=e("helpers/number"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}),M=R.valueAccordingPercent,S=R.rangeEach,E=(c=e("plugins"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}).registerPlugin,O=(d=e("utils/samplesGenerator"),d&amp;&amp;d.__esModule&amp;&amp;d||{default:d}).SamplesGenerator,T=(h=e("helpers/string"),h&amp;&amp;h.__esModule&amp;&amp;h||{default:h}).isPercentValue,k=function(e){var t=this;$traceurRuntime.superConstructor(x).call(this,e),this.heights=[],this.ghostTable=new b(this.hot),this.samplesGenerator=new O(function(e,n){return e&gt;=0?t.hot.getDataAtCell(e,n):e===-1?t.hot.getColHeader(n):null}),this.firstCalculation=!0,this.inProgress=!1,this.addHook("beforeRowResize",function(e,n,o){return t.onBeforeRowResize(e,n,o)})},x=k;$traceurRuntime.createClass(k,{isEnabled:function(){return this.hot.getSettings().autoRowSize===!0||_(this.hot.getSettings().autoRowSize)},enablePlugin:function(){var e=this;this.enabled||(this.setSamplingOptions(),this.addHook("afterLoadData",function(){return e.onAfterLoadData()}),this.addHook("beforeChange",function(t){return e.onBeforeChange(t)}),this.addHook("beforeColumnMove",function(){return e.recalculateAllRowsHeight()}),this.addHook("beforeColumnResize",function(){return e.recalculateAllRowsHeight()}),this.addHook("beforeColumnSort",function(){return e.clearCache()}),this.addHook("beforeRender",function(t){return e.onBeforeRender(t)}),this.addHook("beforeRowMove",function(t,n){return e.onBeforeRowMove(t,n)}),this.addHook("modifyRowHeight",function(t,n){return e.getRowHeight(n,t)}),this.addHook("modifyColumnHeaderHeight",function(){return e.getColumnHeaderHeight()}),$traceurRuntime.superGet(this,x.prototype,"enablePlugin").call(this))},disablePlugin:function(){$traceurRuntime.superGet(this,x.prototype,"disablePlugin").call(this)},calculateRowsHeight:function(){var e=void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countRows()-1},t=void 0!==arguments[1]?arguments[1]:{from:0,to:this.hot.countCols()-1},n=void 0!==arguments[2]&amp;&amp;arguments[2],o=this;if("number"==typeof e&amp;&amp;(e={from:e,to:e}),"number"==typeof t&amp;&amp;(t={from:t,to:t}),null!==this.hot.getColHeader(0)){var r=this.samplesGenerator.generateRowSamples(-1,t);this.ghostTable.addColumnHeadersRow(r.get(-1))}S(e.from,e.to,function(e){if(n||void 0===o.heights[e]){var r=o.samplesGenerator.generateRowSamples(e,t);r.forEach(function(e,t){return o.ghostTable.addRow(t,e)})}}),this.ghostTable.rows.length&amp;&amp;(this.ghostTable.getHeights(function(e,t){return o.heights[e]=t}),this.ghostTable.clean())},calculateAllRowsHeight:function(){var e=void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countCols()-1},t=this,n=0,o=this.hot.countRows()-1,r=null;this.inProgress=!0;var i=function(){return t.hot?(t.calculateRowsHeight({from:n,to:Math.min(n+x.CALCULATION_STEP,o)},e),n=n+x.CALCULATION_STEP+1,void(n&lt;o?r=v(i):(w(r),t.inProgress=!1,t.hot.view.wt.wtOverlays.adjustElementsSize(!0),t.hot.view.wt.wtOverlays.leftOverlay.needFullRender&amp;&amp;t.hot.view.wt.wtOverlays.leftOverlay.clone.draw()))):(w(r),void(t.inProgress=!1))};this.firstCalculation&amp;&amp;this.getSyncCalculationLimit()&amp;&amp;(this.calculateRowsHeight({from:0,to:this.getSyncCalculationLimit()},e),this.firstCalculation=!1,n=this.getSyncCalculationLimit()+1),n&lt;o?i():(this.inProgress=!1,this.hot.view.wt.wtOverlays.adjustElementsSize(!1))},setSamplingOptions:function(){var e=this.hot.getSettings().autoRowSize,t=e&amp;&amp;e.hasOwnProperty("samplingRatio")?this.hot.getSettings().autoRowSize.samplingRatio:void 0,n=e&amp;&amp;e.hasOwnProperty("allowSampleDuplicates")?this.hot.getSettings().autoRowSize.allowSampleDuplicates:void 0;t&amp;&amp;!isNaN(t)&amp;&amp;this.samplesGenerator.setSampleCount(parseInt(t,10)),n&amp;&amp;this.samplesGenerator.setAllowDuplicates(n)},recalculateAllRowsHeight:function(){y(this.hot.view.wt.wtTable.TABLE)&amp;&amp;(this.clearCache(),this.calculateAllRowsHeight());
},getSyncCalculationLimit:function(){var e=x.SYNC_CALCULATION_LIMIT,t=this.hot.countRows()-1;return _(this.hot.getSettings().autoRowSize)&amp;&amp;(e=this.hot.getSettings().autoRowSize.syncLimit,T(e)?e=M(t,e):e&gt;&gt;=0),Math.min(e,t)},getRowHeight:function(e){var t=arguments[1],n=t;return void 0!==this.heights[e]&amp;&amp;this.heights[e]&gt;(t||0)&amp;&amp;(n=this.heights[e]),n},getColumnHeaderHeight:function(){return this.heights[-1]},getFirstVisibleRow:function(){var e=this.hot.view.wt;return e.wtViewport.rowsVisibleCalculator?e.wtTable.getFirstVisibleRow():e.wtViewport.rowsRenderCalculator?e.wtTable.getFirstRenderedRow():-1},getLastVisibleRow:function(){var e=this.hot.view.wt;return e.wtViewport.rowsVisibleCalculator?e.wtTable.getLastVisibleRow():e.wtViewport.rowsRenderCalculator?e.wtTable.getLastRenderedRow():-1},clearCache:function(){this.heights.length=0,this.heights[-1]=void 0},clearCacheByRange:function(e){var t=this;"number"==typeof e&amp;&amp;(e={from:e,to:e}),S(Math.min(e.from,e.to),Math.max(e.from,e.to),function(e){return t.heights[e]=void 0})},isNeedRecalculate:function(){return!!m(this.heights,function(e){return void 0===e}).length},onBeforeRender:function(){var e=this.hot.renderCall;this.calculateRowsHeight({from:this.getFirstVisibleRow(),to:this.getLastVisibleRow()},void 0,e);var t=this.hot.getSettings().fixedRowsBottom;if(t){var n=this.hot.countRows()-1;this.calculateRowsHeight({from:n-t,to:n})}this.isNeedRecalculate()&amp;&amp;!this.inProgress&amp;&amp;this.calculateAllRowsHeight()},onBeforeRowMove:function(e,t){this.clearCacheByRange({from:e,to:t}),this.calculateAllRowsHeight()},onBeforeRowResize:function(e,t,n){return n&amp;&amp;(this.calculateRowsHeight(e,void 0,!0),t=this.getRowHeight(e)),t},onAfterLoadData:function(){var e=this;this.hot.view?this.recalculateAllRowsHeight():setTimeout(function(){e.hot&amp;&amp;e.recalculateAllRowsHeight()},0)},onBeforeChange:function(e){var t=null;1===e.length?t=e[0][0]:e.length&gt;1&amp;&amp;(t={from:e[0][0],to:e[e.length-1][0]}),null!==t&amp;&amp;this.clearCacheByRange(t)},destroy:function(){this.ghostTable.clean(),$traceurRuntime.superGet(this,x.prototype,"destroy").call(this)}},{get CALCULATION_STEP(){return 50},get SYNC_CALCULATION_LIMIT(){return 500}},f),E("autoRowSize",k)},{_base:62,"helpers/array":43,"helpers/dom/element":47,"helpers/feature":49,"helpers/number":52,"helpers/object":53,"helpers/string":55,plugins:61,"utils/ghostTable":128,"utils/samplesGenerator":131}],65:[function(e,t,n){"use strict";Object.defineProperties(n,{Autofill:{get:function(){return T}},__esModule:{value:!0}});var o,r,i,s,a,l,u,c,d=(o=e("_base"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,h=(r=e("browser"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).default,f=(i=e("helpers/array"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).arrayIncludes,p=(s=e("helpers/dom/element"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}),m=p.offset,g=p.outerHeight,w=p.outerWidth,v=(a=e("eventManager"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).eventManager,y=(l=e("plugins"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).registerPlugin,b=(u=e("3rdparty/walkontable/src/cell/coords"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).WalkontableCellCoords,C=(c=e("utils"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}),_=C.getDeltas,R=C.getDragDirectionAndRange,M=C.DIRECTIONS,S=C.getMappedFillHandleSetting,E="insert_row",O=200,T=function(e){$traceurRuntime.superConstructor(k).call(this,e),this.eventManager=v(this),this.addingStarted=!1,this.mouseDownOnCellCorner=!1,this.mouseDragOutside=!1,this.handleDraggedCells=0,this.directions=[],this.autoInsertRow=!1},k=T;$traceurRuntime.createClass(T,{isEnabled:function(){return this.hot.getSettings().fillHandle},enablePlugin:function(){var e=this;this.enabled||(this.mapSettings(),this.registerEvents(),this.addHook("afterOnCellCornerMouseDown",function(t){return e.onAfterCellCornerMouseDown(t)}),this.addHook("afterOnCellCornerDblClick",function(t){return e.onCellCornerDblClick(t)}),this.addHook("beforeOnCellMouseOver",function(t,n,o){return e.onBeforeCellMouseOver(n)}),$traceurRuntime.superGet(this,k.prototype,"enablePlugin").call(this))},updatePlugin:function(){this.disablePlugin(),this.enablePlugin(),$traceurRuntime.superGet(this,k.prototype,"updatePlugin").call(this)},disablePlugin:function(){this.clearMappedSettings(),$traceurRuntime.superGet(this,k.prototype,"disablePlugin").call(this)},getSelectionData:function(){var e={from:this.hot.getSelectedRange().from,to:this.hot.getSelectedRange().to};return this.hot.getData(e.from.row,e.from.col,e.to.row,e.to.col)},fillIn:function(){if(this.hot.view.wt.selections.fill.isEmpty())return!1;var e=this.hot.view.wt.selections.fill.getCorners();this.resetSelectionOfDraggedArea();var t=this.getCornersOfSelectedCells(),n=R(t,e),o=n.directionOfDrag,r=n.startOfDragCoords,i=n.endOfDragCoords;if(this.hot.runHooks("modifyAutofillRange",t,e),r&amp;&amp;r.row&gt;-1&amp;&amp;r.col&gt;-1){var s=this.getSelectionData(),a=_(r,i,s,o);this.hot.runHooks("beforeAutofill",r,i,s),this.hot.populateFromArray(r.row,r.col,s,i.row,i.col,this.pluginName+".fill",null,o,a),this.setSelection(e)}else this.hot.selection.refreshBorders();return!0},reduceSelectionAreaIfNeeded:function(e){return e.row&lt;0&amp;&amp;(e.row=0),e.col&lt;0&amp;&amp;(e.col=0),e},getCoordsOfDragAndDropBorders:function(e){var t,n=this.hot.getSelectedRange().getTopLeftCorner(),o=this.hot.getSelectedRange().getBottomRightCorner();if(f(this.directions,M.vertical)&amp;&amp;(o.row&lt;e.row||n.row&gt;e.row))t=new b(e.row,o.col);else{if(!f(this.directions,M.horizontal))return;t=new b(o.row,e.col)}return this.reduceSelectionAreaIfNeeded(t)},showBorder:function(e){var t=this.getCoordsOfDragAndDropBorders(e);t&amp;&amp;this.redrawBorders(t)},addRow:function(){var e=this;this.hot._registerTimeout(setTimeout(function(){e.hot.alter(E,void 0,1,e.pluginName+".fill"),e.addingStarted=!1},O))},addNewRowIfNeeded:function(){if(this.hot.view.wt.selections.fill.cellRange&amp;&amp;this.addingStarted===!1&amp;&amp;this.autoInsertRow){var e=this.hot.getSelected(),t=this.hot.view.wt.selections.fill.getCorners(),n=this.hot.countRows();e[2]&lt;n-1&amp;&amp;t[2]===n-1&amp;&amp;(this.addingStarted=!0,this.addRow())}},getCornersOfSelectedCells:function(){return this.hot.selection.isMultiple()?this.hot.view.wt.selections.area.getCorners():this.hot.view.wt.selections.current.getCorners()},getIndexOfLastAdjacentFilledInRow:function(e){for(var t,n=this.hot.getData(),o=this.hot.countRows(),r=e[2]+1;r&lt;o;r++){for(var i=e[1];i&lt;=e[3];i++){var s=n[r][i];if(s)return-1}var a=n[r][e[1]-1],l=n[r][e[3]+1];(a||l)&amp;&amp;(t=r)}return t},addSelectionFromStartAreaToSpecificRowIndex:function(e,t){this.hot.view.wt.selections.fill.clear(),this.hot.view.wt.selections.fill.add(new b(e[0],e[1])),this.hot.view.wt.selections.fill.add(new b(t,e[3]))},setSelection:function(e){this.hot.selection.setRangeStart(new b(e[0],e[1])),this.hot.selection.setRangeEnd(new b(e[2],e[3]))},selectAdjacent:function(){var e=this.getCornersOfSelectedCells(),t=this.getIndexOfLastAdjacentFilledInRow(e);return t!==-1&amp;&amp;(this.addSelectionFromStartAreaToSpecificRowIndex(e,t),!0)},resetSelectionOfDraggedArea:function(){this.handleDraggedCells=0,this.hot.view.wt.selections.fill.clear()},redrawBorders:function(e){this.hot.view.wt.selections.fill.clear(),this.hot.view.wt.selections.fill.add(this.hot.getSelectedRange().from),this.hot.view.wt.selections.fill.add(this.hot.getSelectedRange().to),this.hot.view.wt.selections.fill.add(e),this.hot.view.render()},getIfMouseWasDraggedOutside:function(e){var t=m(this.hot.table).top-(window.pageYOffset||document.documentElement.scrollTop)+g(this.hot.table),n=m(this.hot.table).left-(window.pageXOffset||document.documentElement.scrollLeft)+w(this.hot.table);return e.clientY&gt;t&amp;&amp;e.clientX&lt;=n},registerEvents:function(){var e=this;this.eventManager.addEventListener(document.documentElement,"mouseup",function(){return e.onMouseUp()}),this.eventManager.addEventListener(document.documentElement,"mousemove",function(t){return e.onMouseMove(t)})},onCellCornerDblClick:function(){var e=this.selectAdjacent();e&amp;&amp;this.fillIn()},onAfterCellCornerMouseDown:function(){this.handleDraggedCells=1,this.mouseDownOnCellCorner=!0},onBeforeCellMouseOver:function(e){this.mouseDownOnCellCorner&amp;&amp;!this.hot.view.isMouseDown()&amp;&amp;this.handleDraggedCells&amp;&amp;(this.handleDraggedCells++,this.showBorder(e),this.addNewRowIfNeeded())},onMouseUp:function(){this.handleDraggedCells&amp;&amp;(this.handleDraggedCells&gt;1&amp;&amp;this.fillIn(),this.handleDraggedCells=0,this.mouseDownOnCellCorner=!1)},onMouseMove:function(e){var t=this.getIfMouseWasDraggedOutside(e);this.addingStarted===!1&amp;&amp;this.handleDraggedCells&gt;0&amp;&amp;t?(this.mouseDragOutside=!0,this.addingStarted=!0):this.mouseDragOutside=!1,this.mouseDragOutside&amp;&amp;this.autoInsertRow&amp;&amp;this.addRow()},clearMappedSettings:function(){this.directions.length=0,this.autoInsertRow=!1},mapSettings:function(){var e=S(this.hot.getSettings().fillHandle);this.directions=e.directions,this.autoInsertRow=e.autoInsertRow},destroy:function(){$traceurRuntime.superGet(this,k.prototype,"destroy").call(this)}},{},d),y("autofill",T),h.hooks.register("modifyAutofillRange"),h.hooks.register("beforeAutofill")},{"3rdparty/walkontable/src/cell/coords":6,_base:62,browser:24,eventManager:42,"helpers/array":43,"helpers/dom/element":47,plugins:61,utils:66}],66:[function(e,t,n){"use strict";function o(e,t,n,o){var r=n.length,i=n?n[0].length:0,s=[],a=t.row-e.row,l=t.col-e.col;if(["down","up"].indexOf(o)!==-1){for(var u=[],c=0;c&lt;=l;c++){var d=parseInt(n[0][c],10),h=parseInt(n[r-1][c],10),f=("down"===o?h-d:d-h)/(r-1)||0;u.push(f)}s.push(u)}if(["right","left"].indexOf(o)!==-1)for(var p=0;p&lt;=a;p++){var m=parseInt(n[p][0],10),g=parseInt(n[p][i-1],10),w=("right"===o?g-m:m-g)/(i-1)||0;s.push([w])}return s}function r(e,t){var n,o,r;return t[0]===e[0]&amp;&amp;t[1]&lt;e[1]?(r="left",n=new WalkontableCellCoords(t[0],t[1]),o=new WalkontableCellCoords(t[2],e[1]-1)):t[0]===e[0]&amp;&amp;t[3]&gt;e[3]?(r="right",n=new WalkontableCellCoords(t[0],e[3]+1),o=new WalkontableCellCoords(t[2],t[3])):t[0]&lt;e[0]&amp;&amp;t[1]===e[1]?(r="up",n=new WalkontableCellCoords(t[0],t[1]),o=new WalkontableCellCoords(e[0]-1,t[3])):t[2]&gt;e[2]&amp;&amp;t[1]===e[1]&amp;&amp;(r="down",n=new WalkontableCellCoords(e[2]+1,t[1]),o=new WalkontableCellCoords(t[2],t[3])),{directionOfDrag:r,startOfDragCoords:n,endOfDragCoords:o}}function i(e){var t={};return e===!0?(t.directions=Object.keys(c),t.autoInsertRow=!0):l(e)?(u(e.autoInsertRow)?e.direction===c.horizontal?t.autoInsertRow=!1:t.autoInsertRow=e.autoInsertRow:t.autoInsertRow=!1,u(e.direction)?t.directions=[e.direction]:t.directions=Object.keys(c)):"string"==typeof e?(t.directions=[e],t.autoInsertRow=!0):(t.directions=[],t.autoInsertRow=!1),t}Object.defineProperties(n,{DIRECTIONS:{get:function(){return c}},getDeltas:{get:function(){return o}},getDragDirectionAndRange:{get:function(){return r}},getMappedFillHandleSetting:{get:function(){return i}},__esModule:{value:!0}});var s,a,l=(s=e("helpers/object"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).isObject,u=(a=e("helpers/mixed"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).isDefined,c={horizontal:"horizontal",vertical:"vertical"}},{"helpers/mixed":51,"helpers/object":53}],67:[function(e,t,n){"use strict";Object.defineProperties(n,{ColumnSorting:{get:function(){return M}},__esModule:{value:!0}});var o,r,i,s,a,l,u,c,d=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,h=(r=e("moment"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).default,f=(i=e("helpers/dom/element"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}),p=f.addClass,m=f.hasClass,g=f.removeClass,w=(s=e("helpers/array"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}),v=w.arrayMap,y=w.arrayReduce,b=(a=e("helpers/mixed"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).isEmpty,C=(l=e("_base"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).default,_=(u=e("plugins"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).registerPlugin,R=(c=e("utils/sortingAlgorithms/mergeSort"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}).mergeSort;d.hooks.register("beforeColumnSort"),d.hooks.register("afterColumnSort");var M=function(e){$traceurRuntime.superConstructor(S).call(this,e),this.sortIndicators=[],this.lastSortedColumn=null,this.sortEmptyCells=!1},S=M;$traceurRuntime.createClass(M,{isEnabled:function(){return!!this.hot.getSettings().columnSorting},enablePlugin:function(){var e=this;if(!this.enabled){this.setPluginOptions();var t=this;this.hot.sortIndex=[],this.hot.sort=function(){var e=Array.prototype.slice.call(arguments);return t.sortByColumn.apply(t,e)},"undefined"==typeof this.hot.getSettings().observeChanges&amp;&amp;this.enableObserveChangesPlugin(),this.addHook("afterTrimRow",function(t){return e.sort()}),this.addHook("afterUntrimRow",function(t){return e.sort()}),this.addHook("modifyRow",function(t){return e.translateRow(t)}),this.addHook("unmodifyRow",function(t){return e.untranslateRow(t)}),this.addHook("afterUpdateSettings",function(){return e.onAfterUpdateSettings()}),this.addHook("afterGetColHeader",function(t,n){return e.getColHeader(t,n)}),this.addHook("afterOnCellMouseDown",function(t,n){return e.onAfterOnCellMouseDown(t,n)}),this.addHook("afterCreateRow",function(){t.afterCreateRow.apply(t,arguments)}),this.addHook("afterRemoveRow",function(){t.afterRemoveRow.apply(t,arguments)}),this.addHook("afterInit",function(){return e.sortBySettings()}),this.addHook("afterLoadData",function(){e.hot.sortIndex=[],e.hot.view&amp;&amp;e.sortBySettings()}),this.hot.view&amp;&amp;this.sortBySettings(),$traceurRuntime.superGet(this,S.prototype,"enablePlugin").call(this)}},disablePlugin:function(){this.hot.sort=void 0,$traceurRuntime.superGet(this,S.prototype,"disablePlugin").call(this)},onAfterUpdateSettings:function(){this.sortBySettings()},sortBySettings:function(){var e,t,n=this.hot.getSettings().columnSorting,o=this.loadSortingState();"undefined"==typeof o?(e=n.column,t=n.sortOrder):(e=o.sortColumn,t=o.sortOrder),"number"==typeof e&amp;&amp;(this.lastSortedColumn=e,this.sortByColumn(e,t))},setSortingColumn:function(e,t){return"undefined"==typeof e?(this.hot.sortColumn=void 0,void(this.hot.sortOrder=void 0)):(this.hot.sortColumn===e&amp;&amp;"undefined"==typeof t?this.hot.sortOrder===!1?this.hot.sortOrder=void 0:this.hot.sortOrder=!this.hot.sortOrder:this.hot.sortOrder="undefined"==typeof t||t,void(this.hot.sortColumn=e))},sortByColumn:function(e,t){if(this.setSortingColumn(e,t),"undefined"!=typeof this.hot.sortColumn){var n=d.hooks.run(this.hot,"beforeColumnSort",this.hot.sortColumn,this.hot.sortOrder);n!==!1&amp;&amp;this.sort(),this.updateOrderClass(),this.updateSortIndicator(),d.hooks.run(this.hot,"afterColumnSort",this.hot.sortColumn,this.hot.sortOrder),this.hot.render(),this.saveSortingState()}},saveSortingState:function(){var e={};"undefined"!=typeof this.hot.sortColumn&amp;&amp;(e.sortColumn=this.hot.sortColumn),"undefined"!=typeof this.hot.sortOrder&amp;&amp;(e.sortOrder=this.hot.sortOrder),(e.hasOwnProperty("sortColumn")||e.hasOwnProperty("sortOrder"))&amp;&amp;d.hooks.run(this.hot,"persistentStateSave","columnSorting",e)},loadSortingState:function(){var e={};return d.hooks.run(this.hot,"persistentStateLoad","columnSorting",e),e.value},updateOrderClass:function(){var e;this.hot.sortOrder===!0?e="ascending":this.hot.sortOrder===!1&amp;&amp;(e="descending"),this.sortOrderClass=e},enableObserveChangesPlugin:function(){var e=this;this.hot._registerTimeout(setTimeout(function(){e.hot.updateSettings({observeChanges:!0})},0))},defaultSort:function(e,t){return function(n,o){return"string"==typeof n[1]&amp;&amp;(n[1]=n[1].toLowerCase()),"string"==typeof o[1]&amp;&amp;(o[1]=o[1].toLowerCase()),n[1]===o[1]?0:b(n[1])?b(o[1])?0:t.columnSorting.sortEmptyCells&amp;&amp;e?-1:1:b(o[1])?b(n[1])?0:t.columnSorting.sortEmptyCells&amp;&amp;e?1:-1:isNaN(n[1])&amp;&amp;!isNaN(o[1])?e?1:-1:!isNaN(n[1])&amp;&amp;isNaN(o[1])?e?-1:1:(isNaN(n[1])||isNaN(o[1])||(n[1]=parseFloat(n[1]),o[1]=parseFloat(o[1])),n[1]&lt;o[1]?e?-1:1:n[1]&gt;o[1]?e?1:-1:0)}},dateSort:function(e,t){return function(n,o){if(n[1]===o[1])return 0;if(b(n[1]))return b(o[1])?0:t.columnSorting.sortEmptyCells&amp;&amp;e?-1:1;if(b(o[1]))return b(n[1])?0:t.columnSorting.sortEmptyCells&amp;&amp;e?1:-1;var r=h(n[1],t.dateFormat),i=h(o[1],t.dateFormat);return r.isValid()?i.isValid()?i.isAfter(r)?e?-1:1:i.isBefore(r)?e?1:-1:0:-1:1}},numericSort:function(e,t){return function(n,o){var r=parseFloat(n[1]),i=parseFloat(o[1]);if(r===i||isNaN(r)&amp;&amp;isNaN(i))return 0;if(t.columnSorting.sortEmptyCells){if(b(n[1]))return e?-1:1;if(b(o[1]))return e?1:-1}return isNaN(r)?1:isNaN(i)?-1:r&lt;i?e?-1:1:r&gt;i?e?1:-1:0}},sort:function(){if("undefined"==typeof this.hot.sortOrder)return void(this.hot.sortIndex.length=0);var e,t,n=this.hot.getCellMeta(0,this.hot.sortColumn),o=this.hot.countEmptyRows();this.hot.sortingEnabled=!1,this.hot.sortIndex.length=0,"undefined"==typeof n.columnSorting.sortEmptyCells&amp;&amp;(n.columnSorting={sortEmptyCells:this.sortEmptyCells}),t=this.hot.getSettings().maxRows===Number.POSITIVE_INFINITY?this.hot.countRows()-this.hot.getSettings().minSpareRows:this.hot.countRows()-o;for(var r=0,i=t;r&lt;i;r++)this.hot.sortIndex.push([r,this.hot.getDataAtCell(r,this.hot.sortColumn)]);if(n.sortFunction)e=n.sortFunction;else switch(n.type){case"date":e=this.dateSort;break;case"numeric":e=this.numericSort;break;default:e=this.defaultSort}R(this.hot.sortIndex,e(this.hot.sortOrder,n));for(var s=this.hot.sortIndex.length;s&lt;this.hot.countRows();s++)this.hot.sortIndex.push([s,this.hot.getDataAtCell(s,this.hot.sortColumn)]);this.hot.sortingEnabled=!0},updateSortIndicator:function(){if("undefined"!=typeof this.hot.sortOrder){var e=this.hot.getCellMeta(0,this.hot.sortColumn);this.sortIndicators[this.hot.sortColumn]=e.sortIndicator}},translateRow:function(e){return this.hot.sortingEnabled&amp;&amp;"undefined"!=typeof this.hot.sortOrder&amp;&amp;this.hot.sortIndex&amp;&amp;this.hot.sortIndex.length&amp;&amp;this.hot.sortIndex[e]?this.hot.sortIndex[e][0]:e},untranslateRow:function(e){if(this.hot.sortingEnabled&amp;&amp;this.hot.sortIndex&amp;&amp;this.hot.sortIndex.length)for(var t=0;t&lt;this.hot.sortIndex.length;t++)if(this.hot.sortIndex[t][0]==e)return t},getColHeader:function(e,t){if(e&lt;0||!t.parentNode)return!1;var n=t.querySelector(".colHeader"),o=(t.getAttribute("colspan"),t.parentNode.parentNode.childNodes),r=Array.prototype.indexOf.call(o,t.parentNode);r-=o.length,n&amp;&amp;(this.hot.getSettings().columnSorting&amp;&amp;e&gt;=0&amp;&amp;r===-1&amp;&amp;p(n,"columnSorting"),g(n,"descending"),g(n,"ascending"),this.sortIndicators[e]&amp;&amp;e===this.hot.sortColumn&amp;&amp;("ascending"===this.sortOrderClass?p(n,"ascending"):"descending"===this.sortOrderClass&amp;&amp;p(n,"descending")))},isSorted:function(){return"undefined"!=typeof this.hot.sortColumn},afterCreateRow:function(e,t){if(this.isSorted()){for(var n=0;n&lt;this.hot.sortIndex.length;n++)this.hot.sortIndex[n][0]&gt;=e&amp;&amp;(this.hot.sortIndex[n][0]+=t);for(var n=0;n&lt;t;n++)this.hot.sortIndex.splice(e+n,0,[e+n,this.hot.getSourceData()[e+n][this.hot.sortColumn+this.hot.colOffset()]]);this.saveSortingState()}},afterRemoveRow:function(e,t){function n(e){return y(o,function(t,n){return e&gt;n&amp;&amp;t++,t},0)}if(this.isSorted()){var o=this.hot.sortIndex.splice(e,t);o=v(o,function(e){return e[0]}),this.hot.sortIndex=v(this.hot.sortIndex,function(e,t){var o=n(e[0]);return o&amp;&amp;(e[0]-=o),e}),this.saveSortingState()}},setPluginOptions:function(){var e=this.hot.getSettings().columnSorting;"object"==typeof e?this.sortEmptyCells=e.sortEmptyCells||!1:this.sortEmptyCells=!1},onAfterOnCellMouseDown:function(e,t){t.row&gt;-1||m(e.realTarget,"columnSorting")&amp;&amp;(t.col!==this.lastSortedColumn&amp;&amp;(this.hot.sortOrder=!0),this.lastSortedColumn=t.col,this.sortByColumn(t.col))}},{},C),_("columnSorting",M)},{_base:62,browser:24,"helpers/array":43,"helpers/dom/element":47,"helpers/mixed":51,moment:"moment",plugins:61,"utils/sortingAlgorithms/mergeSort":132}],68:[function(e,t,n){"use strict";Object.defineProperties(n,{CommentEditor:{get:function(){return i}},__esModule:{value:!0}});var o,r=(o=e("helpers/dom/element"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).addClass,i=function(){this.editor=this.createEditor(),this.editorStyle=this.editor.style,this.hidden=!0,this.hide()},s=i;$traceurRuntime.createClass(i,{setPosition:function(e,t){this.editorStyle.left=e+"px",this.editorStyle.top=t+"px"},setSize:function(e,t){if(e&amp;&amp;t){var n=this.getInputElement();n.style.width=e+"px",n.style.height=t+"px"}},resetSize:function(){var e=this.getInputElement();e.style.width="",e.style.height=""},setReadOnlyState:function(e){var t=this.getInputElement();t.readOnly=e},show:function(){this.editorStyle.display="block",this.hidden=!1},hide:function(){this.editorStyle.display="none",this.hidden=!0},isVisible:function(){return"block"===this.editorStyle.display},setValue:function(){var e=void 0!==arguments[0]?arguments[0]:"";e=e||"",this.getInputElement().value=e},getValue:function(){return this.getInputElement().value},isFocused:function(){return document.activeElement===this.getInputElement()},focus:function(){this.getInputElement().focus()},createEditor:function(){var e,t,n=document.querySelector("."+s.CLASS_EDITOR_CONTAINER);return n||(n=document.createElement("div"),r(n,s.CLASS_EDITOR_CONTAINER),document.body.appendChild(n)),e=document.createElement("div"),r(e,s.CLASS_EDITOR),t=document.createElement("textarea"),r(t,s.CLASS_INPUT),e.appendChild(t),n.appendChild(e),e},getInputElement:function(){return this.editor.querySelector("."+s.CLASS_INPUT)},destroy:function(){this.editor.parentNode.removeChild(this.editor),this.editor=null,this.editorStyle=null}},{get CLASS_EDITOR_CONTAINER(){return"htCommentsContainer"},get CLASS_EDITOR(){return"htComments"},get CLASS_INPUT(){return"htCommentTextArea"},get CLASS_CELL(){return"htCommentCell"}})},{"helpers/dom/element":47}],69:[function(e,t,n){"use strict";var o;Object.defineProperties(n,{Comments:{get:function(){return B}},__esModule:{value:!0}});var r,i,s,a,l,u,c,d,h,f,p=(r=e("browser"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).default,m=(i=e("helpers/dom/element"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}),g=m.addClass,w=m.closest,v=m.isChildOf,y=m.hasClass,b=m.offset,C=m.outerWidth,_=m.outerHeight,R=m.getScrollableElement,M=(s=e("helpers/object"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}),S=M.deepClone,E=M.deepExtend,O=(a=e("helpers/function"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).debounce,T=(l=e("eventManager"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).EventManager,k=(u=e("3rdparty/walkontable/src/cell/coords"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).WalkontableCellCoords,x=(c=e("plugins"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}).registerPlugin,D=(d=e("_base"),d&amp;&amp;d.__esModule&amp;&amp;d||{default:d}).default,H=(h=e("commentEditor"),h&amp;&amp;h.__esModule&amp;&amp;h||{default:h}).CommentEditor,A=(f=e("contextMenu/utils"),f&amp;&amp;f.__esModule&amp;&amp;f||{default:f}),P=A.checkSelectionConsistency,N=A.markLabelAsSelected,L=new WeakMap,I="comment",W="value",j="style",V="readOnly",B=function(e){$traceurRuntime.superConstructor(F).call(this,e),this.editor=null,this.eventManager=null,this.range={},this.mouseDown=!1,this.contextMenuEvent=!1,this.timer=null,this.displayDelay=250,L.set(this,{tempEditorDimensions:{},cellBelowCursor:null})},F=B;$traceurRuntime.createClass(B,(o={},Object.defineProperty(o,"isEnabled",{value:function(){return!!this.hot.getSettings().comments},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"enablePlugin",{value:function(){var e=this;this.enabled||(this.editor||(this.editor=new H),this.eventManager||(this.eventManager=new T(this)),this.addHook("afterContextMenuDefaultOptions",function(t){return e.addToContextMenu(t)}),this.addHook("afterRenderer",function(t,n,o,r,i,s){return e.onAfterRenderer(t,s)}),this.addHook("afterScrollHorizontally",function(){return e.hide()}),this.addHook("afterScrollVertically",function(){return e.hide()}),this.addHook("afterBeginEditing",function(t){return e.onAfterBeginEditing(t)}),this.registerListeners(),$traceurRuntime.superGet(this,F.prototype,"enablePlugin").call(this))},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"disablePlugin",{value:function(){$traceurRuntime.superGet(this,F.prototype,"disablePlugin").call(this)},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"registerListeners",{value:function(){var e=this;this.eventManager.addEventListener(document,"mouseover",function(t){return e.onMouseOver(t)}),this.eventManager.addEventListener(document,"mousedown",function(t){return e.onMouseDown(t)}),this.eventManager.addEventListener(document,"mouseup",function(t){return e.onMouseUp(t)}),this.eventManager.addEventListener(this.editor.getInputElement(),"blur",function(t){return e.onEditorBlur(t)}),this.eventManager.addEventListener(this.editor.getInputElement(),"mousedown",function(t){return e.onEditorMouseDown(t)}),this.eventManager.addEventListener(this.editor.getInputElement(),"mouseup",function(t){return e.onEditorMouseUp(t)})},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"setRange",{value:function(e){this.range=e},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"clearRange",{value:function(){this.range={}},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"targetIsCellWithComment",{value:function(e){var t=w(e.target,"TD","TBODY");return!!(t&amp;&amp;y(t,"htCommentCell")&amp;&amp;w(t,[this.hot.rootElement]))},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"targetIsCommentTextArea",{value:function(e){return this.editor.getInputElement()===e.target},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"setComment",{value:function(e){var t;if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');var n=this.editor.getValue(),o="";null!=e?o=e:null!=n&amp;&amp;(o=n);var r=this.range.from.row,i=this.range.from.col;this.updateCommentMeta(r,i,(t={},Object.defineProperty(t,W,{value:o,configurable:!0,enumerable:!0,writable:!0}),t)),this.hot.render()},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"setCommentAtCell",{value:function(e,t,n){this.setRange({from:new k(e,t)}),this.setComment(n)},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"removeComment",{value:function(){var e=void 0===arguments[0]||arguments[0];if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');this.hot.setCellMeta(this.range.from.row,this.range.from.col,I,void 0),e&amp;&amp;this.hot.render(),this.hide()},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"removeCommentAtCell",{value:function(e,t){var n=void 0===arguments[2]||arguments[2];this.setRange({from:new k(e,t)}),this.removeComment(n)},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"getComment",{value:function(){var e=this.range.from.row,t=this.range.from.col;return this.getCommentMeta(e,t,W)},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"getCommentAtCell",{value:function(e,t){return this.getCommentMeta(e,t,W)},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"show",{value:function(){if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');var e=this.hot.getCellMeta(this.range.from.row,this.range.from.col);return this.refreshEditor(!0),this.editor.setValue(e[I]?e[I][W]:""),this.editor.hidden&amp;&amp;this.editor.show(),!0},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"showAtCell",{value:function(e,t){return this.setRange({from:new k(e,t)}),this.show()},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"hide",{value:function(){this.editor.hidden||this.editor.hide()},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"refreshEditor",{value:function(){var e=void 0!==arguments[0]&amp;&amp;arguments[0];if(e||this.range.from&amp;&amp;this.editor.isVisible()){var t=R(this.hot.view.wt.wtTable.TABLE),n=this.hot.view.wt.wtTable.getCell(this.range.from),o=this.range.from.row,r=this.range.from.col,i=b(n),s=this.hot.view.wt.wtTable.getStretchedColumnWidth(r),a=i.top&lt;0?0:i.top,l=i.left;this.hot.view.wt.wtViewport.hasVerticalScroll()&amp;&amp;t!==window&amp;&amp;(a-=this.hot.view.wt.wtOverlays.topOverlay.getScrollPosition()),this.hot.view.wt.wtViewport.hasHorizontalScroll()&amp;&amp;t!==window&amp;&amp;(l-=this.hot.view.wt.wtOverlays.leftOverlay.getScrollPosition());var u=l+s,c=a,d=this.getCommentMeta(o,r,j),h=this.getCommentMeta(o,r,V);d?this.editor.setSize(d.width,d.height):this.editor.resetSize(),this.editor.setReadOnlyState(h),this.editor.setPosition(u,c)}},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"checkSelectionCommentsConsistency",{value:function(){var e=this.hot.getSelectedRange();if(!e)return!1;var t=!1,n=e.from;return this.getCommentMeta(n.row,n.col,W)&amp;&amp;(t=!0),t},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"updateCommentMeta",{value:function(e,t,n){var o,r=this.hot.getCellMeta(e,t)[I];r?(o=S(r),E(o,n)):o=n,this.hot.setCellMeta(e,t,I,o)},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"getCommentMeta",{value:function(e,t,n){var o=this.hot.getCellMeta(e,t);if(o[I])return o[I][n]},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"onMouseDown",{value:function(e){if(this.mouseDown=!0,this.hot.view&amp;&amp;this.hot.view.wt){if(!this.contextMenuEvent&amp;&amp;!this.targetIsCommentTextArea(e)){var t=w(e.target,"TD","TBODY"),n=null;t&amp;&amp;(n=this.hot.view.wt.wtTable.getCoords(t)),(!t||this.range.from&amp;&amp;n&amp;&amp;(this.range.from.row!==n.row||this.range.from.col!==n.col))&amp;&amp;this.hide()}this.contextMenuEvent=!1}},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"onMouseOver",{value:function(e){var t=this;if(!this.mouseDown&amp;&amp;!this.editor.isFocused()){var n=L.get(this);n.cellBelowCursor=document.elementFromPoint(e.clientX,e.clientY),O(function(){if(!y(e.target,"wtBorder")&amp;&amp;n.cellBelowCursor===e.target&amp;&amp;t.editor)if(t.targetIsCellWithComment(e)){var o=t.hot.view.wt.wtTable.getCoords(e.target),r={from:new k(o.row,o.col)};t.setRange(r),t.show()}else!v(e.target,document)||t.targetIsCommentTextArea(e)||t.editor.isFocused()||t.hide()},this.displayDelay)()}},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"onMouseUp",{value:function(e){this.mouseDown=!1},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"onAfterRenderer",{value:function(e,t){t[I]&amp;&amp;t[I][W]&amp;&amp;g(e,t.commentedCellClassName)},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"onEditorBlur",{value:function(e){this.setComment()},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"onEditorMouseDown",{value:function(e){var t=L.get(this);t.tempEditorDimensions={width:C(e.target),height:_(e.target)}},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"onEditorMouseUp",{value:function(e){var t,n=L.get(this),o=C(e.target),r=_(e.target);o===n.tempEditorDimensions.width+1&amp;&amp;r===n.tempEditorDimensions.height+2||this.updateCommentMeta(this.range.from.row,this.range.from.col,(t={},Object.defineProperty(t,j,{value:{width:o,height:r},configurable:!0,enumerable:!0,writable:!0}),t))},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"onContextMenuAddComment",{value:function(){var e=this,t=this.hot.getSelectedRange();this.contextMenuEvent=!0,this.setRange({from:t.from}),this.show(),setTimeout(function(){e.hot&amp;&amp;(e.hot.deselectCell(),e.editor.focus())},10)},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"onContextMenuRemoveComment",{value:function(e){this.contextMenuEvent=!0;for(var t=e.start.row;t&lt;=e.end.row;t++)for(var n=e.start.col;n&lt;=e.end.col;n++)this.removeCommentAtCell(t,n,!1);this.hot.render()},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"onContextMenuMakeReadOnly",{value:function(e){var t;this.contextMenuEvent=!0;for(var n=e.start.row;n&lt;=e.end.row;n++)for(var o=e.start.col;o&lt;=e.end.col;o++){var r=!!this.getCommentMeta(n,o,V);this.updateCommentMeta(n,o,(t={},Object.defineProperty(t,V,{value:!r,configurable:!0,enumerable:!0,writable:!0}),t))}},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"addToContextMenu",{value:function(e){var t=this;e.items.push(p.plugins.ContextMenu.SEPARATOR,{key:"commentsAddEdit",name:function(){return t.checkSelectionCommentsConsistency()?"Edit comment":"Add comment"},callback:function(){return t.onContextMenuAddComment()},disabled:function(){return!(this.getSelected()&amp;&amp;!this.selection.selectedHeader.corner)}},{key:"commentsRemove",name:function(){return"Delete comment"},callback:function(e,n){return t.onContextMenuRemoveComment(n);
},disabled:function(){return t.hot.selection.selectedHeader.corner}},{key:"commentsReadOnly",name:function(){var e=this,t="Read only comment",n=P(this.getSelectedRange(),function(t,n){var o=e.getCellMeta(t,n)[I];if(o&amp;&amp;(o=o[V]),o)return!0});return n&amp;&amp;(t=N(t)),t},callback:function(e,n){return t.onContextMenuMakeReadOnly(n)},disabled:function(){return t.hot.selection.selectedHeader.corner||!t.checkSelectionCommentsConsistency()}})},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"onAfterBeginEditing",{value:function(e,t){this.hide()},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"destroy",{value:function(){this.editor&amp;&amp;this.editor.destroy(),$traceurRuntime.superGet(this,F.prototype,"destroy").call(this)},configurable:!0,enumerable:!0,writable:!0}),o),{},D),x("comments",B)},{"3rdparty/walkontable/src/cell/coords":6,_base:62,browser:24,commentEditor:68,"contextMenu/utils":88,eventManager:42,"helpers/dom/element":47,"helpers/function":50,"helpers/object":53,plugins:61}],70:[function(e,t,n){"use strict";function o(e,t){var n;return i(t,function(t){var o=t.key?t.key.split(":"):null;if(Array.isArray(o)&amp;&amp;o[1]===e)return n=t,!1}),n}Object.defineProperties(n,{CommandExecutor:{get:function(){return s}},__esModule:{value:!0}});var r,i=(r=e("helpers/array"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).arrayEach,s=function(e){this.hot=e,this.commands={},this.commonCallback=null};$traceurRuntime.createClass(s,{registerCommand:function(e,t){this.commands[e]=t},setCommonCallback:function(e){this.commonCallback=e},execute:function(e){for(var t=[],n=1;n&lt;arguments.length;n++)t[n-1]=arguments[n];var r=this,s=e.split(":");e=s[0];var a=2===s.length?s[1]:null,l=this.commands[e];if(!l)throw new Error("Menu command '"+e+"' not exists.");if(a&amp;&amp;l.submenu&amp;&amp;(l=o(a,l.submenu.items)),l.disabled!==!0&amp;&amp;("function"!=typeof l.disabled||l.disabled.call(this.hot)!==!0)&amp;&amp;!l.hasOwnProperty("submenu")){var u=[];"function"==typeof l.callback&amp;&amp;u.push(l.callback),"function"==typeof this.commonCallback&amp;&amp;u.push(this.commonCallback),t.unshift(s.join(":")),i(u,function(e){return e.apply(r.hot,t)})}}},{})},{"helpers/array":43}],71:[function(e,t,n){"use strict";Object.defineProperties(n,{ContextMenu:{get:function(){return F}},__esModule:{value:!0}});var o,r,i,s,a,l,u,c,d,h,l,f,p=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,m=(r=e("_base"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).default,g=(i=e("helpers/array"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).arrayEach,w=(s=e("commandExecutor"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).CommandExecutor,v=(a=e("eventManager"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).EventManager,y=(l=e("helpers/dom/element"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).hasClass,b=(u=e("itemsFactory"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).ItemsFactory,C=(c=e("menu"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}).Menu,_=(d=e("plugins"),d&amp;&amp;d.__esModule&amp;&amp;d||{default:d}).registerPlugin,R=(h=e("helpers/dom/event"),h&amp;&amp;h.__esModule&amp;&amp;h||{default:h}),M=R.stopPropagation,S=R.pageX,E=R.pageY,O=(l=e("helpers/dom/element"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}),T=O.getWindowScrollLeft,k=O.getWindowScrollTop,x=(f=e("predefinedItems"),f&amp;&amp;f.__esModule&amp;&amp;f||{default:f}),D=x.ROW_ABOVE,H=x.ROW_BELOW,A=x.COLUMN_LEFT,P=x.COLUMN_RIGHT,N=x.REMOVE_ROW,L=x.REMOVE_COLUMN,I=x.UNDO,W=x.REDO,j=x.READ_ONLY,V=x.ALIGNMENT,B=x.SEPARATOR,F=function(e){$traceurRuntime.superConstructor(z).call(this,e),this.eventManager=new v(this),this.commandExecutor=new w(this.hot),this.itemsFactory=null,this.menu=null},z=F;$traceurRuntime.createClass(F,{isEnabled:function(){return this.hot.getSettings().contextMenu},enablePlugin:function(){var e=this;if(!this.enabled){this.itemsFactory=new b(this.hot,z.DEFAULT_ITEMS);var t=this.hot.getSettings().contextMenu,n={items:this.itemsFactory.getItems(t)};this.registerEvents(),"function"==typeof t.callback&amp;&amp;this.commandExecutor.setCommonCallback(t.callback),$traceurRuntime.superGet(this,z.prototype,"enablePlugin").call(this),this.callOnPluginsReady(function(){e.hot.runHooks("afterContextMenuDefaultOptions",n),e.itemsFactory.setPredefinedItems(n.items);var o=e.itemsFactory.getItems(t);e.menu=new C(e.hot,{className:"htContextMenu",keepInViewport:!0}),e.hot.runHooks("beforeContextMenuSetItems",o),e.menu.setMenuItems(o),e.menu.addLocalHook("afterOpen",function(){return e.onMenuAfterOpen()}),e.menu.addLocalHook("afterClose",function(){return e.onMenuAfterClose()}),e.menu.addLocalHook("executeCommand",function(){for(var t=[],n=0;n&lt;arguments.length;n++)t[n]=arguments[n];return e.executeCommand.apply(e,t)}),g(o,function(t){return e.commandExecutor.registerCommand(t.key,t)})})}},updatePlugin:function(){this.disablePlugin(),this.enablePlugin(),$traceurRuntime.superGet(this,z.prototype,"updatePlugin").call(this)},disablePlugin:function(){this.close(),this.menu&amp;&amp;(this.menu.destroy(),this.menu=null),$traceurRuntime.superGet(this,z.prototype,"disablePlugin").call(this)},registerEvents:function(){var e=this;this.eventManager.addEventListener(this.hot.rootElement,"contextmenu",function(t){return e.onContextMenu(t)})},open:function(e){this.menu&amp;&amp;(this.menu.open(),this.menu.setPosition({top:parseInt(E(e),10)-k(),left:parseInt(S(e),10)-T()}),this.menu.hotMenu.isHotTableEnv=this.hot.isHotTableEnv,p.eventManager.isHotTableEnv=this.hot.isHotTableEnv)},close:function(){this.menu&amp;&amp;this.menu.close()},executeCommand:function(){for(var e=[],t=0;t&lt;arguments.length;t++)e[t]=arguments[t];this.commandExecutor.execute.apply(this.commandExecutor,e)},onContextMenu:function(e){function t(e){return"TD"===e.nodeName||"TD"===e.parentNode.nodeName}var n=this.hot.getSettings(),o=n.rowHeaders,r=n.colHeaders,i=e.realTarget;this.close(),y(i,"handsontableInput")||(e.preventDefault(),M(e),(o||r||t(i)||y(i,"current")&amp;&amp;y(i,"wtBorder"))&amp;&amp;this.open(e))},onMenuAfterOpen:function(){this.hot.runHooks("afterContextMenuShow",this)},onMenuAfterClose:function(){this.hot.listen(),this.hot.runHooks("afterContextMenuHide",this)},destroy:function(){this.close(),this.menu&amp;&amp;this.menu.destroy(),$traceurRuntime.superGet(this,z.prototype,"destroy").call(this)}},{get DEFAULT_ITEMS(){return[D,H,B,A,P,B,N,L,B,I,W,B,j,B,V]}},m),F.SEPARATOR={name:B},p.hooks.register("afterContextMenuDefaultOptions"),p.hooks.register("afterContextMenuShow"),p.hooks.register("afterContextMenuHide"),p.hooks.register("afterContextMenuExecute"),_("contextMenu",F)},{_base:62,browser:24,commandExecutor:70,eventManager:42,"helpers/array":43,"helpers/dom/element":47,"helpers/dom/event":48,itemsFactory:73,menu:74,plugins:61,predefinedItems:75}],72:[function(e,t,n){"use strict";Object.defineProperties(n,{Cursor:{get:function(){return f}},__esModule:{value:!0}});var o,r,i,s=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,a=(r=e("helpers/dom/element"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}),l=a.getWindowScrollLeft,u=a.getWindowScrollTop,c=(i=e("helpers/dom/event"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}),d=c.pageX,h=c.pageY,f=function(e){var t,n,o,r,i,s,a=u(),c=l();this.type=this.getSourceType(e),"literal"===this.type?(t=parseInt(e.top,10),o=parseInt(e.left,10),i=e.height||0,s=e.width||0,n=t,r=o,t+=a,o+=c):"event"===this.type&amp;&amp;(t=parseInt(h(e),10),o=parseInt(d(e),10),i=e.target.clientHeight,s=e.target.clientWidth,n=t-a,r=o-c),this.top=t,this.topRelative=n,this.left=o,this.leftRelative=r,this.scrollTop=a,this.scrollLeft=c,this.cellHeight=i,this.cellWidth=s};$traceurRuntime.createClass(f,{getSourceType:function(e){var t="literal";return e instanceof Event&amp;&amp;(t="event"),t},fitsAbove:function(e){return this.topRelative&gt;=e.offsetHeight},fitsBelow:function(e){var t=void 0!==arguments[1]?arguments[1]:window.innerHeight;return this.topRelative+e.offsetHeight&lt;=t},fitsOnRight:function(e){var t=void 0!==arguments[1]?arguments[1]:window.innerWidth;return this.leftRelative+this.cellWidth+e.offsetWidth&lt;=t},fitsOnLeft:function(e){return this.leftRelative&gt;=e.offsetWidth}},{}),s.plugins.utils=s.plugins.utils||{},s.plugins.utils.Cursor=f},{browser:24,"helpers/dom/element":47,"helpers/dom/event":48}],73:[function(e,t,n){"use strict";function o(){var e=void 0!==arguments[0]?arguments[0]:null,t=void 0!==arguments[1]?arguments[1]:[],n=void 0!==arguments[2]?arguments[2]:{},o=[];return e&amp;&amp;e.items?e=e.items:Array.isArray(e)||(e=t),u(e)?l(e,function(e,t){var r=n["string"==typeof e?e:t];r||(r=e),u(e)?c(r,e):"string"==typeof r&amp;&amp;(r={name:r}),void 0===r.key&amp;&amp;(r.key=t),o.push(r)}):d(e,function(e,t){var r=n[e];!r&amp;&amp;p.indexOf(e)&gt;=0||(r||(r={name:e,key:t+""}),u(e)&amp;&amp;c(r,e),void 0===r.key&amp;&amp;(r.key=t),o.push(r))}),o}Object.defineProperties(n,{ItemsFactory:{get:function(){return g}},__esModule:{value:!0}});var r,i,s,a=(r=e("helpers/object"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}),l=a.objectEach,u=a.isObject,c=a.extend,d=(i=e("helpers/array"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).arrayEach,h=(s=e("predefinedItems"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}),f=h.SEPARATOR,p=h.ITEMS,m=h.predefinedItems,g=function(e){var t=void 0!==arguments[1]?arguments[1]:null;this.hot=e,this.predefinedItems=m(),this.defaultOrderPattern=t};$traceurRuntime.createClass(g,{setPredefinedItems:function(e){var t=this,n={};this.defaultOrderPattern.length=0,l(e,function(e,o){var r="";e.name===f?(n[f]=e,r=f):isNaN(parseInt(o,10))?(e.key=void 0===e.key?o:e.key,n[o]=e,r=e.key):(n[e.key]=e,r=e.key),t.defaultOrderPattern.push(r)}),this.predefinedItems=n},getItems:function(){var e=void 0!==arguments[0]?arguments[0]:null;return o(e,this.defaultOrderPattern,this.predefinedItems)}},{})},{"helpers/array":43,"helpers/object":53,predefinedItems:75}],74:[function(e,t,n){"use strict";Object.defineProperties(n,{Menu:{get:function(){return z}},__esModule:{value:!0}});var o,r,i,s,a,l,u,c,d,h,f,p,m=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,g=(r=e("helpers/dom/element"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}),w=g.addClass,v=g.empty,y=g.fastInnerHTML,b=g.getScrollbarWidth,C=g.isChildOf,_=g.removeClass,R=(i=e("helpers/array"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}),M=R.arrayEach,S=R.arrayFilter,E=R.arrayReduce,O=(s=e("cursor"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).Cursor,T=(a=e("eventManager"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).EventManager,k=(l=e("helpers/object"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).mixin,x=(u=e("helpers/function"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).debounce,D=(c=e("utils"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}),H=D.filterSeparators,A=D.hasSubMenu,P=D.isDisabled,N=D.isItemHidden,L=D.isSeparator,I=D.isSelectionDisabled,W=D.normalizeSelection,j=(d=e("helpers/unicode"),d&amp;&amp;d.__esModule&amp;&amp;d||{default:d}).KEY_CODES,V=(h=e("mixins/localHooks"),h&amp;&amp;h.__esModule&amp;&amp;h||{default:h}).localHooks,B=(f=e("predefinedItems"),f&amp;&amp;f.__esModule&amp;&amp;f||{default:f}).SEPARATOR,F=(p=e("helpers/dom/event"),p&amp;&amp;p.__esModule&amp;&amp;p||{default:p}).stopImmediatePropagation,z=function(e,t){this.hot=e,this.options=t||{parent:null,name:null,className:"",keepInViewport:!0,standalone:!1},this.eventManager=new T(this),this.container=this.createContainer(this.options.name),this.hotMenu=null,this.hotSubMenus={},this.parentMenu=this.options.parent||null,this.menuItems=null,this.origOutsideClickDeselects=null,this.offset={above:0,below:0,left:0,right:0},this._afterScrollCallback=null,this.registerEvents()},Y=z;$traceurRuntime.createClass(z,{registerEvents:function(){var e=this;this.eventManager.addEventListener(document.documentElement,"mousedown",function(t){return e.onDocumentMouseDown(t)})},setMenuItems:function(e){this.menuItems=e},setOffset:function(e){var t=void 0!==arguments[1]?arguments[1]:0;this.offset[e]=t},isSubMenu:function(){return null!==this.parentMenu},open:function(){var e=this;this.container.removeAttribute("style"),this.container.style.display="block";var t=x(function(t){return e.openSubMenu(t)},300),n=S(this.menuItems,function(t){return N(t,e.hot)});n=H(n,B);var o={data:n,colHeaders:!1,colWidths:[200],autoRowSize:!1,readOnly:!0,copyPaste:!1,columns:[{data:"name",renderer:function(t,n,o,r,i,s){return e.menuItemRenderer(t,n,o,r,i,s)}}],renderAllRows:!0,fragmentSelection:"cell",disableVisualSelection:"area",beforeKeyDown:function(t){return e.onBeforeKeyDown(t)},afterOnCellMouseOver:function(n,o,r){e.isAllSubMenusClosed()?t(o.row):e.openSubMenu(o.row)}};this.origOutsideClickDeselects=this.hot.getSettings().outsideClickDeselects,this.hot.getSettings().outsideClickDeselects=!1,this.hotMenu=new m.Core(this.container,o),this.hotMenu.addHook("afterInit",function(){return e.onAfterInit()}),this.hotMenu.init(),this.hotMenu.listen(),this.blockMainTableCallbacks(),this.runLocalHooks("afterOpen")},close:function(){var e=void 0!==arguments[0]&amp;&amp;arguments[0];this.isOpened()&amp;&amp;(e&amp;&amp;this.parentMenu?this.parentMenu.close():(this.closeAllSubMenus(),this.container.style.display="none",this.releaseMainTableCallbacks(),this.hotMenu.destroy(),this.hotMenu=null,this.hot.getSettings().outsideClickDeselects=this.origOutsideClickDeselects,this.runLocalHooks("afterClose"),this.parentMenu&amp;&amp;this.parentMenu.hotMenu.listen()))},openSubMenu:function(e){if(!this.hotMenu)return!1;var t=this.hotMenu.getCell(e,0);if(this.closeAllSubMenus(),!t||!A(t))return!1;var n=this.hotMenu.getSourceDataAtRow(e),o=new Y(this.hot,{parent:this,name:n.name,className:this.options.className,keepInViewport:!0});return o.setMenuItems(n.submenu.items),o.open(),o.setPosition(t.getBoundingClientRect()),this.hotSubMenus[n.key]=o,o},closeSubMenu:function(e){var t=this.hotMenu.getSourceDataAtRow(e),n=this.hotSubMenus[t.key];n&amp;&amp;(n.destroy(),delete this.hotSubMenus[t.key])},closeAllSubMenus:function(){var e=this;M(this.hotMenu.getData(),function(t,n){return e.closeSubMenu(n)})},isAllSubMenusClosed:function(){return 0===Object.keys(this.hotSubMenus).length},destroy:function(){this.clearLocalHooks(),this.close(),this.parentMenu=null,this.eventManager.destroy()},isOpened:function(){return null!==this.hotMenu},executeCommand:function(e){if(this.isOpened()&amp;&amp;this.hotMenu.getSelected()){var t=this.hotMenu.getSourceDataAtRow(this.hotMenu.getSelected()[0]);if(this.runLocalHooks("select",t,e),t.isCommand!==!1&amp;&amp;t.name!==B){var n=this.hot.getSelectedRange(),o=n?W(n):{},r=!0;(t.disabled===!0||"function"==typeof t.disabled&amp;&amp;t.disabled.call(this.hot)===!0||t.submenu)&amp;&amp;(r=!1),this.runLocalHooks("executeCommand",t.key,o,e),this.isSubMenu()&amp;&amp;this.parentMenu.runLocalHooks("executeCommand",t.key,o,e),r&amp;&amp;this.close(!0)}}},setPosition:function(e){var t=new O(e);this.options.keepInViewport?(t.fitsBelow(this.container)?this.setPositionBelowCursor(t):t.fitsAbove(this.container)?this.setPositionAboveCursor(t):this.setPositionBelowCursor(t),t.fitsOnRight(this.container)?this.setPositionOnRightOfCursor(t):this.setPositionOnLeftOfCursor(t)):(this.setPositionBelowCursor(t),this.setPositionOnRightOfCursor(t))},setPositionAboveCursor:function(e){var t=this.offset.above+e.top-this.container.offsetHeight;this.isSubMenu()&amp;&amp;(t=e.top+e.cellHeight-this.container.offsetHeight+3),this.container.style.top=t+"px"},setPositionBelowCursor:function(e){var t=this.offset.below+e.top;this.isSubMenu()&amp;&amp;(t=e.top-1),this.container.style.top=t+"px"},setPositionOnRightOfCursor:function(e){var t;t=this.isSubMenu()?1+e.left+e.cellWidth:this.offset.right+1+e.left,this.container.style.left=t+"px"},setPositionOnLeftOfCursor:function(e){var t=this.offset.left+e.left-this.container.offsetWidth+b()+4;this.container.style.left=t+"px"},selectFirstCell:function(){var e=this.hotMenu.getCell(0,0);L(e)||P(e)||I(e)?this.selectNextCell(0,0):this.hotMenu.selectCell(0,0)},selectLastCell:function(){var e=this.hotMenu.countRows()-1,t=this.hotMenu.getCell(e,0);L(t)||P(t)||I(t)?this.selectPrevCell(e,0):this.hotMenu.selectCell(e,0)},selectNextCell:function(e,t){var n=e+1,o=n&lt;this.hotMenu.countRows()?this.hotMenu.getCell(n,t):null;o&amp;&amp;(L(o)||P(o)||I(o)?this.selectNextCell(n,t):this.hotMenu.selectCell(n,t))},selectPrevCell:function(e,t){var n=e-1,o=n&gt;=0?this.hotMenu.getCell(n,t):null;o&amp;&amp;(L(o)||P(o)||I(o)?this.selectPrevCell(n,t):this.hotMenu.selectCell(n,t))},menuItemRenderer:function(e,t,n,o,r,i){var s=this,a=e.getSourceDataAtRow(n),l=document.createElement("div"),u=function(e){return e.hasOwnProperty("submenu")},c=function(e){return new RegExp(B,"i").test(e.name)},d=function(e){return e.disabled===!0||"function"==typeof e.disabled&amp;&amp;e.disabled.call(s.hot)===!0},h=function(e){return e.disableSelection};"function"==typeof i&amp;&amp;(i=i.call(this.hot)),v(t),w(l,"htItemWrapper"),t.appendChild(l),c(a)?w(t,"htSeparator"):"function"==typeof a.renderer?(w(t,"htCustomMenuRenderer"),t.appendChild(a.renderer(e,l,n,o,r,i))):y(l,i),d(a)?(w(t,"htDisabled"),this.eventManager.addEventListener(t,"mouseenter",function(){return e.deselectCell()})):h(a)?(w(t,"htSelectionDisabled"),this.eventManager.addEventListener(t,"mouseenter",function(){return e.deselectCell()})):u(a)?(w(t,"htSubmenu"),h(a)?this.eventManager.addEventListener(t,"mouseenter",function(){return e.deselectCell()}):this.eventManager.addEventListener(t,"mouseenter",function(){return e.selectCell(n,o,void 0,void 0,!1,!1)})):(_(t,"htSubmenu"),_(t,"htDisabled"),h(a)?this.eventManager.addEventListener(t,"mouseenter",function(){return e.deselectCell()}):this.eventManager.addEventListener(t,"mouseenter",function(){return e.selectCell(n,o,void 0,void 0,!1,!1)}))},createContainer:function(){var e=void 0!==arguments[0]?arguments[0]:null;e&amp;&amp;(e=e.replace(/ /g,"_"),e=this.options.className+"Sub_"+e);var t;return t=e?document.querySelector("."+this.options.className+"."+e):document.querySelector("."+this.options.className),t||(t=document.createElement("div"),w(t,"htMenu "+this.options.className),e&amp;&amp;w(t,e),document.getElementsByTagName("body")[0].appendChild(t)),t},blockMainTableCallbacks:function(){this._afterScrollCallback=function(){},this.hot.addHook("afterScrollVertically",this._afterScrollCallback),this.hot.addHook("afterScrollHorizontally",this._afterScrollCallback)},releaseMainTableCallbacks:function(){this._afterScrollCallback&amp;&amp;(this.hot.removeHook("afterScrollVertically",this._afterScrollCallback),this.hot.removeHook("afterScrollHorizontally",this._afterScrollCallback),this._afterScrollCallback=null)},onBeforeKeyDown:function(e){var t=this.hotMenu.getSelected(),n=!1;switch(e.keyCode){case j.ESCAPE:this.close(),n=!0;break;case j.ENTER:t&amp;&amp;(this.hotMenu.getSourceDataAtRow(t[0]).submenu?n=!0:(this.executeCommand(e),this.close(!0)));break;case j.ARROW_DOWN:t?this.selectNextCell(t[0],t[1]):this.selectFirstCell(),n=!0;break;case j.ARROW_UP:t?this.selectPrevCell(t[0],t[1]):this.selectLastCell(),n=!0;break;case j.ARROW_RIGHT:if(t){var o=this.openSubMenu(t[0]);o&amp;&amp;o.selectFirstCell()}n=!0;break;case j.ARROW_LEFT:t&amp;&amp;this.isSubMenu()&amp;&amp;(this.close(),this.parentMenu&amp;&amp;this.parentMenu.hotMenu.listen(),n=!0)}n&amp;&amp;(e.preventDefault(),F(e))},onAfterInit:function(){var e=this.hotMenu.getSettings().data,t=this.hotMenu.view.wt.wtTable.hider.style,n=this.hotMenu.view.wt.wtTable.holder.style,o=parseInt(t.width,10),r=E(e,function(e,t){return e+(t.name===B?1:26)},0);n.width=o+22+"px",n.height=r+4+"px",t.height=n.height},onDocumentMouseDown:function(e){this.isOpened()&amp;&amp;(this.container&amp;&amp;C(e.target,this.container)&amp;&amp;this.executeCommand(e),this.options.standalone&amp;&amp;this.hotMenu&amp;&amp;!C(e.target,this.hotMenu.rootElement)?this.close(!0):(this.isAllSubMenusClosed()||this.isSubMenu())&amp;&amp;!C(e.target,".htMenu")&amp;&amp;C(e.target,document)&amp;&amp;this.close(!0))}},{}),k(z,V)},{browser:24,cursor:72,eventManager:42,"helpers/array":43,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/function":50,"helpers/object":53,"helpers/unicode":56,"mixins/localHooks":58,predefinedItems:75,utils:88}],75:[function(e,t,n){"use strict";function o(){var e={};return y(oe,function(t,n){return e[n]=t()}),e}function r(e,t){ne.indexOf(e)===-1&amp;&amp;(oe[e]=t)}var i;Object.defineProperties(n,{ALIGNMENT:{get:function(){return a.KEY}},CLEAR_COLUMN:{get:function(){return l.KEY}},COLUMN_LEFT:{get:function(){return u.KEY}},COLUMN_RIGHT:{get:function(){return c.KEY}},READ_ONLY:{get:function(){return d.KEY}},REDO:{get:function(){return h.KEY}},REMOVE_COLUMN:{get:function(){return f.KEY}},REMOVE_ROW:{get:function(){return p.KEY}},ROW_ABOVE:{get:function(){return m.KEY}},ROW_BELOW:{get:function(){return g.KEY}},SEPARATOR:{get:function(){return w.KEY}},UNDO:{get:function(){return v.KEY}},ITEMS:{get:function(){return ne}},predefinedItems:{get:function(){return o}},addItem:{get:function(){return r}},__esModule:{value:!0}});var s,a,l,u,c,d,h,f,p,m,g,w,v,a,l,u,c,d,h,f,p,m,g,w,v,y=(s=e("helpers/object"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).objectEach,b=(a=e("predefinedItems/alignment"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}),C=b.alignmentItem,_=b.KEY,R=(l=e("predefinedItems/clearColumn"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}),M=R.clearColumnItem,S=R.KEY,E=(u=e("predefinedItems/columnLeft"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}),O=E.columnLeftItem,T=E.KEY,k=(c=e("predefinedItems/columnRight"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}),x=k.columnRightItem,D=k.KEY,H=(d=e("predefinedItems/readOnly"),d&amp;&amp;d.__esModule&amp;&amp;d||{default:d}),A=H.readOnlyItem,P=H.KEY,N=(h=e("predefinedItems/redo"),h&amp;&amp;h.__esModule&amp;&amp;h||{default:h}),L=N.redoItem,I=N.KEY,W=(f=e("predefinedItems/removeColumn"),f&amp;&amp;f.__esModule&amp;&amp;f||{default:f}),j=W.removeColumnItem,V=W.KEY,B=(p=e("predefinedItems/removeRow"),p&amp;&amp;p.__esModule&amp;&amp;p||{default:p}),F=B.removeRowItem,z=B.KEY,Y=(m=e("predefinedItems/rowAbove"),m&amp;&amp;m.__esModule&amp;&amp;m||{default:m}),U=Y.rowAboveItem,G=Y.KEY,$=(g=e("predefinedItems/rowBelow"),g&amp;&amp;g.__esModule&amp;&amp;g||{default:g}),K=$.rowBelowItem,X=$.KEY,q=(w=e("predefinedItems/separator"),w&amp;&amp;w.__esModule&amp;&amp;w||{default:w}),Z=q.separatorItem,J=q.KEY,Q=(v=e("predefinedItems/undo"),v&amp;&amp;v.__esModule&amp;&amp;v||{default:v}),ee=Q.undoItem,te=Q.KEY,a=(a=e("predefinedItems/alignment"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}),l=(l=e("predefinedItems/clearColumn"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}),u=(u=e("predefinedItems/columnLeft"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}),c=(c=e("predefinedItems/columnRight"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}),d=(d=e("predefinedItems/readOnly"),d&amp;&amp;d.__esModule&amp;&amp;d||{default:d}),h=(h=e("predefinedItems/redo"),h&amp;&amp;h.__esModule&amp;&amp;h||{default:h}),f=(f=e("predefinedItems/removeColumn"),f&amp;&amp;f.__esModule&amp;&amp;f||{default:f}),p=(p=e("predefinedItems/removeRow"),p&amp;&amp;p.__esModule&amp;&amp;p||{default:p}),m=(m=e("predefinedItems/rowAbove"),m&amp;&amp;m.__esModule&amp;&amp;m||{default:m}),g=(g=e("predefinedItems/rowBelow"),g&amp;&amp;g.__esModule&amp;&amp;g||{default:g}),w=(w=e("predefinedItems/separator"),w&amp;&amp;w.__esModule&amp;&amp;w||{default:w}),v=(v=e("predefinedItems/undo"),v&amp;&amp;v.__esModule&amp;&amp;v||{default:v}),ne=[G,X,T,D,S,z,V,te,I,P,_,J],oe=(i={},Object.defineProperty(i,J,{value:Z,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(i,G,{value:U,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(i,X,{value:K,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(i,T,{value:O,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(i,D,{value:x,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(i,S,{value:M,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(i,z,{value:F,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(i,V,{value:j,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(i,te,{value:ee,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(i,I,{value:L,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(i,P,{value:A,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(i,_,{value:C,configurable:!0,enumerable:!0,writable:!0}),i)},{"helpers/object":53,"predefinedItems/alignment":76,"predefinedItems/clearColumn":77,"predefinedItems/columnLeft":78,"predefinedItems/columnRight":79,"predefinedItems/readOnly":80,"predefinedItems/redo":81,"predefinedItems/removeColumn":82,"predefinedItems/removeRow":83,"predefinedItems/rowAbove":84,"predefinedItems/rowBelow":85,"predefinedItems/separator":86,"predefinedItems/undo":87}],76:[function(e,t,n){"use strict";function o(){return{key:h,name:"Alignment",disabled:function(){return!(this.getSelectedRange()&amp;&amp;!this.selection.selectedHeader.corner)},submenu:{items:[{key:h+":left",name:function(){var e=this,t="Left",n=u(this.getSelectedRange(),function(t,n){var o=e.getCellMeta(t,n).className;if(o&amp;&amp;o.indexOf("htLeft")!==-1)return!0});return n&amp;&amp;(t=c(t)),t},callback:function(){var e=this,t=this.getSelectedRange(),n=l(t,function(t,n){return e.getCellMeta(t,n).className}),o="horizontal",r="htLeft";this.runHooks("beforeCellAlignment",n,t,o,r),a(t,o,r,function(t,n){return e.getCellMeta(t,n)}),this.render()},disabled:!1},{key:h+":center",name:function(){var e=this,t="Center",n=u(this.getSelectedRange(),function(t,n){var o=e.getCellMeta(t,n).className;if(o&amp;&amp;o.indexOf("htCenter")!==-1)return!0});return n&amp;&amp;(t=c(t)),t},callback:function(){var e=this,t=this.getSelectedRange(),n=l(t,function(t,n){return e.getCellMeta(t,n).className}),o="horizontal",r="htCenter";this.runHooks("beforeCellAlignment",n,t,o,r),a(t,o,r,function(t,n){return e.getCellMeta(t,n)}),this.render()},disabled:!1},{key:h+":right",name:function(){var e=this,t="Right",n=u(this.getSelectedRange(),function(t,n){var o=e.getCellMeta(t,n).className;if(o&amp;&amp;o.indexOf("htRight")!==-1)return!0});return n&amp;&amp;(t=c(t)),t},callback:function(){var e=this,t=this.getSelectedRange(),n=l(t,function(t,n){return e.getCellMeta(t,n).className}),o="horizontal",r="htRight";this.runHooks("beforeCellAlignment",n,t,o,r),a(t,o,r,function(t,n){return e.getCellMeta(t,n)}),this.render()},disabled:!1},{key:h+":justify",name:function(){var e=this,t="Justify",n=u(this.getSelectedRange(),function(t,n){var o=e.getCellMeta(t,n).className;if(o&amp;&amp;o.indexOf("htJustify")!==-1)return!0});return n&amp;&amp;(t=c(t)),t},callback:function(){var e=this,t=this.getSelectedRange(),n=l(t,function(t,n){return e.getCellMeta(t,n).className}),o="horizontal",r="htJustify";this.runHooks("beforeCellAlignment",n,t,o,r),a(t,o,r,function(t,n){return e.getCellMeta(t,n)}),this.render()},disabled:!1},{name:d},{key:h+":top",name:function(){var e=this,t="Top",n=u(this.getSelectedRange(),function(t,n){var o=e.getCellMeta(t,n).className;if(o&amp;&amp;o.indexOf("htTop")!==-1)return!0});return n&amp;&amp;(t=c(t)),t},callback:function(){var e=this,t=this.getSelectedRange(),n=l(t,function(t,n){return e.getCellMeta(t,n).className}),o="vertical",r="htTop";this.runHooks("beforeCellAlignment",n,t,o,r),a(t,o,r,function(t,n){return e.getCellMeta(t,n)}),this.render()},disabled:!1},{key:h+":middle",name:function(){var e=this,t="Middle",n=u(this.getSelectedRange(),function(t,n){var o=e.getCellMeta(t,n).className;if(o&amp;&amp;o.indexOf("htMiddle")!==-1)return!0});return n&amp;&amp;(t=c(t)),t},callback:function(){var e=this,t=this.getSelectedRange(),n=l(t,function(t,n){return e.getCellMeta(t,n).className}),o="vertical",r="htMiddle";this.runHooks("beforeCellAlignment",n,t,o,r),a(t,o,r,function(t,n){return e.getCellMeta(t,n)}),this.render()},disabled:!1},{key:h+":bottom",name:function(){var e=this,t="Bottom",n=u(this.getSelectedRange(),function(t,n){var o=e.getCellMeta(t,n).className;if(o&amp;&amp;o.indexOf("htBottom")!==-1)return!0});return n&amp;&amp;(t=c(t)),t},callback:function(){var e=this,t=this.getSelectedRange(),n=l(t,function(t,n){return e.getCellMeta(t,n).className}),o="vertical",r="htBottom";this.runHooks("beforeCellAlignment",n,t,o,r),a(t,o,r,function(t,n){return e.getCellMeta(t,n)}),this.render()},disabled:!1}]}}}Object.defineProperties(n,{KEY:{get:function(){return h}},alignmentItem:{get:function(){return o}},__esModule:{value:!0}});var r,i,s=(r=e("utils"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}),a=s.align,l=s.getAlignmentClasses,u=s.checkSelectionConsistency,c=s.markLabelAsSelected,d=(i=e("separator"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).KEY,h="alignment"},{separator:86,utils:88}],77:[function(e,t,n){"use strict";function o(){return{key:s,name:"Clear column",callback:function(e,t){var n=t.start.col;this.countRows()&amp;&amp;this.populateFromArray(0,n,[[null]],Math.max(t.start.row,t.end.row),n,"ContextMenu.clearColumn")},disabled:function(){var e=i(this);if(!e)return!0;var t=[e[0],0,e[0],this.countCols()-1],n=t.join(",")==e.join(",");return e[1]&lt;0||this.countCols()&gt;=this.getSettings().maxCols||n}}}Object.defineProperties(n,{KEY:{get:function(){return s}},clearColumnItem:{get:function(){return o}},__esModule:{value:!0}});var r,i=(r=e("utils"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).getValidSelection,s="clear_column"},{utils:88}],78:[function(e,t,n){"use strict";function o(){return{key:s,name:"Insert column on the left",callback:function(e,t){this.alter("insert_col",t.start.col,1,"ContextMenu.columnLeft")},disabled:function(){var e=i(this);if(!e)return!0;if(!this.isColumnModificationAllowed())return!0;var t=[e[0],0,e[0],this.countCols()-1],n=t.join(",")==e.join(","),o=1===this.countCols();return e[1]&lt;0||this.countCols()&gt;=this.getSettings().maxCols||!o&amp;&amp;n},hidden:function(){return!this.getSettings().allowInsertColumn}}}Object.defineProperties(n,{KEY:{get:function(){return s}},columnLeftItem:{get:function(){return o}},__esModule:{value:!0}});var r,i=(r=e("utils"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).getValidSelection,s="col_left"},{utils:88}],79:[function(e,t,n){"use strict";function o(){return{key:s,name:"Insert column on the right",callback:function(e,t){this.alter("insert_col",t.end.col+1,1,"ContextMenu.columnRight")},disabled:function(){var e=i(this);if(!e)return!0;if(!this.isColumnModificationAllowed())return!0;var t=[e[0],0,e[0],this.countCols()-1],n=t.join(",")==e.join(","),o=1===this.countCols();return e[1]&lt;0||this.countCols()&gt;=this.getSettings().maxCols||!o&amp;&amp;n},hidden:function(){return!this.getSettings().allowInsertColumn}}}Object.defineProperties(n,{KEY:{get:function(){return s}},columnRightItem:{get:function(){return o}},__esModule:{value:!0}});var r,i=(r=e("utils"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).getValidSelection,s="col_right"},{utils:88}],80:[function(e,t,n){"use strict";function o(){return{key:l,name:function(){var e=this,t="Read only",n=s(this.getSelectedRange(),function(t,n){return e.getCellMeta(t,n).readOnly});return n&amp;&amp;(t=a(t)),t},callback:function(){var e=this,t=this.getSelectedRange(),n=s(t,function(t,n){return e.getCellMeta(t,n).readOnly});t.forAll(function(t,o){e.setCellMeta(t,o,"readOnly",!n)}),this.render()},disabled:function(){return!(this.getSelectedRange()&amp;&amp;!this.selection.selectedHeader.corner)}}}Object.defineProperties(n,{KEY:{get:function(){return l}},readOnlyItem:{get:function(){return o}},__esModule:{value:!0}});var r,i=(r=e("utils"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}),s=i.checkSelectionConsistency,a=i.markLabelAsSelected,l="make_read_only"},{utils:88}],81:[function(e,t,n){"use strict";function o(){return{key:r,name:"Redo",callback:function(){this.redo()},disabled:function(){return this.undoRedo&amp;&amp;!this.undoRedo.isRedoAvailable()}}}Object.defineProperties(n,{KEY:{get:function(){return r}},redoItem:{get:function(){return o}},__esModule:{value:!0}});var r="redo"},{}],82:[function(e,t,n){"use strict";function o(){return{key:s,name:"Remove column",callback:function(e,t){var n=t.end.col-t.start.col+1;this.alter("remove_col",t.start.col,n,"ContextMenu.removeColumn")},disabled:function(){var e=i(this),t=this.countCols();return!e||this.selection.selectedHeader.rows||this.selection.selectedHeader.corner||!this.isColumnModificationAllowed()||!t},hidden:function(){return!this.getSettings().allowRemoveColumn}}}Object.defineProperties(n,{KEY:{get:function(){return s}},removeColumnItem:{get:function(){return o}},__esModule:{value:!0}});var r,i=(r=e("utils"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).getValidSelection,s="remove_col"},{utils:88}],83:[function(e,t,n){"use strict";function o(){return{key:s,name:"Remove row",callback:function(e,t){var n=t.end.row-t.start.row+1;this.alter("remove_row",t.start.row,n,"ContextMenu.removeRow")},disabled:function(){var e=i(this),t=this.countRows();return!e||this.selection.selectedHeader.cols||this.selection.selectedHeader.corner||!t},hidden:function(){return!this.getSettings().allowRemoveRow}}}Object.defineProperties(n,{KEY:{get:function(){return s}},removeRowItem:{get:function(){return o}},__esModule:{value:!0}});var r,i=(r=e("utils"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).getValidSelection,s="remove_row"},{utils:88}],84:[function(e,t,n){"use strict";function o(){return{key:s,name:"Insert row above",callback:function(e,t){this.alter("insert_row",t.start.row,1,"ContextMenu.rowAbove");
},disabled:function(){var e=i(this);return!e||this.selection.selectedHeader.cols||this.countRows()&gt;=this.getSettings().maxRows},hidden:function(){return!this.getSettings().allowInsertRow}}}Object.defineProperties(n,{KEY:{get:function(){return s}},rowAboveItem:{get:function(){return o}},__esModule:{value:!0}});var r,i=(r=e("utils"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).getValidSelection,s="row_above"},{utils:88}],85:[function(e,t,n){"use strict";function o(){return{key:s,name:"Insert row below",callback:function(e,t){this.alter("insert_row",t.end.row+1,1,"ContextMenu.rowBelow")},disabled:function(){var e=i(this);return!e||this.selection.selectedHeader.cols||this.countRows()&gt;=this.getSettings().maxRows},hidden:function(){return!this.getSettings().allowInsertRow}}}Object.defineProperties(n,{KEY:{get:function(){return s}},rowBelowItem:{get:function(){return o}},__esModule:{value:!0}});var r,i=(r=e("utils"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).getValidSelection,s="row_below"},{utils:88}],86:[function(e,t,n){"use strict";function o(){return{name:r}}Object.defineProperties(n,{KEY:{get:function(){return r}},separatorItem:{get:function(){return o}},__esModule:{value:!0}});var r="---------"},{}],87:[function(e,t,n){"use strict";function o(){return{key:r,name:"Undo",callback:function(){this.undo()},disabled:function(){return this.undoRedo&amp;&amp;!this.undoRedo.isUndoAvailable()}}}Object.defineProperties(n,{KEY:{get:function(){return r}},undoItem:{get:function(){return o}},__esModule:{value:!0}});var r="undo"},{}],88:[function(e,t,n){"use strict";function o(e){return{start:e.getTopLeftCorner(),end:e.getBottomRightCorner()}}function r(e){return S(e,"htSeparator")}function i(e){return S(e,"htSubmenu")}function s(e){return S(e,"htDisabled")}function a(e){return S(e,"htSelectionDisabled")}function l(e){var t=e.getSelected();return t?t[0]&lt;0?null:t:null}function u(e,t){return e.indexOf(t)!=-1?e:(e=e.replace("htTop","").replace("htMiddle","").replace("htBottom","").replace("  ",""),e+=" "+t)}function c(e,t){return e.indexOf(t)!=-1?e:(e=e.replace("htLeft","").replace("htCenter","").replace("htRight","").replace("htJustify","").replace("  ",""),e+=" "+t)}function d(e,t){for(var n={},o=e.from.row;o&lt;=e.to.row;o++)for(var r=e.from.col;r&lt;=e.to.col;r++)n[o]||(n[o]=[]),n[o][r]=t(o,r);return n}function h(e,t,n,o){if(e.from.row==e.to.row&amp;&amp;e.from.col==e.to.col)f(e.from.row,e.from.col,t,n,o);else for(var r=e.from.row;r&lt;=e.to.row;r++)for(var i=e.from.col;i&lt;=e.to.col;i++)f(r,i,t,n,o)}function f(e,t,n,o,r){var i=r(e,t),s=o;i.className&amp;&amp;(s="vertical"===n?u(i.className,o):c(i.className,o)),i.className=s}function p(e,t){var n=!1;return e&amp;&amp;e.forAll(function(e,o){if(t(e,o))return n=!0,!1}),n}function m(e){return'&lt;span class="selected"&gt;'+String.fromCharCode(10003)+"&lt;/span&gt;"+e}function g(e,t){return!e.hidden||!("function"==typeof e.hidden&amp;&amp;e.hidden.call(t))}function w(e,t){for(var n=e.slice(0),o=0;o&lt;n.length&amp;&amp;n[o].name===t;)n.shift();return n}function v(e,t){var n=e.slice(0);return n.reverse(),n=w(n,t),n.reverse(),n}function y(e){var t=[];return M(e,function(e,n){n&gt;0?t[t.length-1].name!==e.name&amp;&amp;t.push(e):t.push(e)}),t}function b(e){var t=void 0!==arguments[1]?arguments[1]:E,n=e.slice(0);return n=w(n,t),n=v(n,t),n=y(n)}Object.defineProperties(n,{normalizeSelection:{get:function(){return o}},isSeparator:{get:function(){return r}},hasSubMenu:{get:function(){return i}},isDisabled:{get:function(){return s}},isSelectionDisabled:{get:function(){return a}},getValidSelection:{get:function(){return l}},prepareVerticalAlignClass:{get:function(){return u}},prepareHorizontalAlignClass:{get:function(){return c}},getAlignmentClasses:{get:function(){return d}},align:{get:function(){return h}},checkSelectionConsistency:{get:function(){return p}},markLabelAsSelected:{get:function(){return m}},isItemHidden:{get:function(){return g}},filterSeparators:{get:function(){return b}},__esModule:{value:!0}});var C,_,R,M=(C=e("helpers/array"),C&amp;&amp;C.__esModule&amp;&amp;C||{default:C}).arrayEach,S=(_=e("helpers/dom/element"),_&amp;&amp;_.__esModule&amp;&amp;_||{default:_}).hasClass,E=(R=e("predefinedItems/separator"),R&amp;&amp;R.__esModule&amp;&amp;R||{default:R}).KEY},{"helpers/array":43,"helpers/dom/element":47,"predefinedItems/separator":86}],89:[function(e,t,n){"use strict";Object.defineProperties(n,{ContextMenuCopyPaste:{get:function(){return w}},__esModule:{value:!0}});var o,r,i,s,a,l,u,c=(o=e("_base"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,d=(r=e("zeroclipboard"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).default,h=(i=e("helpers/dom/element"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).removeClass,f=(s=e("helpers/array"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).arrayEach,p=(a=e("eventManager"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).EventManager,m=(l=e("plugins"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).registerPlugin,g=(u=e("contextMenu/predefinedItems"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).SEPARATOR,w=function(e){$traceurRuntime.superConstructor(v).call(this,e),this.eventManager=new p(this),this.swfPath=null,this.outsideClickDeselectsCache=null},v=w;$traceurRuntime.createClass(w,{isEnabled:function(){return this.hot.getSettings().contextMenuCopyPaste},enablePlugin:function(){var e=this;if(!this.enabled){"object"==typeof this.hot.getSettings().contextMenuCopyPaste&amp;&amp;(this.swfPath=this.hot.getSettings().contextMenuCopyPaste.swfPath),"undefined"==typeof d&amp;&amp;console.error("To be able to use the Copy/Paste feature from the context menu, you need to manually include ZeroClipboard.js file to your website.");try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){"undefined"==typeof navigator.mimeTypes["application/x-shockwave-flash"]&amp;&amp;console.error("To be able to use the Copy/Paste feature from the context menu, your browser needs to have Flash Plugin installed.")}this.swfPath&amp;&amp;d.config({swfPath:this.swfPath}),this.hot.addHook("afterContextMenuShow",function(){return e.onAfterContextMenuShow()}),this.hot.addHook("afterContextMenuDefaultOptions",function(t){return e.onAfterContextMenuDefaultOptions(t)}),this.registerEvents(),$traceurRuntime.superGet(this,v.prototype,"enablePlugin").call(this)}},disablePlugin:function(){$traceurRuntime.superGet(this,v.prototype,"disablePlugin").call(this)},registerEvents:function(){var e=this;this.eventManager.addEventListener(document,"mouseenter",function(){return e.removeCurrentClass()}),this.eventManager.addEventListener(document,"mouseleave",function(){return e.removeZeroClipboardClass()})},getCopyValue:function(){return this.hot.copyPaste.setCopyableText(),this.hot.copyPaste.copyPasteInstance.elTextarea.value},onAfterContextMenuDefaultOptions:function(e){e.items.unshift({key:"copy",name:"Copy",disabled:function(){return this.selection.selectedHeader.corner}},{key:"paste",name:"Paste",callback:function(){this.copyPaste.triggerPaste()},disabled:function(){return this.selection.selectedHeader.corner}},{name:g})},onAfterContextMenuShow:function(){var e=this,t=this.hot.getPlugin("contextMenu"),n=t.menu.hotMenu.getSourceData();f(n,function(n,o){if("copy"===n.key){var r=new d(t.menu.hotMenu.getCell(o,0));return r.off(),r.on("copy",function(t){var n=t.clipboardData;n.setData("text/plain",e.getCopyValue()),e.hot.getSettings().outsideClickDeselects=e.outsideClickDeselectsCache}),!1}})},removeCurrentClass:function(){var e=this.hot.getPlugin("contextMenu");if(e.enabled){if(e.menu.isOpened()){var t=e.menu.hotMenu.rootElement.querySelector("td.current");t&amp;&amp;h(t,"current")}this.outsideClickDeselectsCache=this.hot.getSettings().outsideClickDeselects,this.hot.getSettings().outsideClickDeselects=!1}},removeZeroClipboardClass:function(){var e=this.hot.getPlugin("contextMenu");if(e.enabled){if(e.menu.isOpened()){var t=e.menu.hotMenu.rootElement.querySelector("td.zeroclipboard-is-hover");t&amp;&amp;h(t,"zeroclipboard-is-hover")}this.hot.getSettings().outsideClickDeselects=this.outsideClickDeselectsCache}}},{},c),m("contextMenuCopyPaste",w)},{_base:62,"contextMenu/predefinedItems":75,eventManager:42,"helpers/array":43,"helpers/dom/element":47,plugins:61,zeroclipboard:"zeroclipboard"}],90:[function(e,t,n){"use strict";function o(e){function t(){e.isListening()&amp;&amp;e.selection.empty()}function n(t){var n,o,r,i,s,a,l,u,c,d;if(e.isListening()&amp;&amp;e.selection.isSelected()){n=t,o=y.parse(n),r=e.getSelected(),i=new x(r[0],r[1]),s=new x(r[2],r[3]),a=new D(i,i,s),l=a.getTopLeftCorner(),u=a.getBottomRightCorner(),c=l,d=new x(Math.max(u.row,o.length-1+l.row),Math.max(u.col,o[0].length-1+l.col));var h=s.row-i.row&gt;=o.length-1,f=s.col-i.col&gt;=o[0].length-1;e.addHookOnce("afterChange",function(t,n){var o=t?t.length:0;if(o){var r={row:0,col:0},i=-1;R(t,function(e,n){var s=o&gt;n+1?t[n+1]:null;s&amp;&amp;(h||(r.row=r.row+Math.max(s[0]-e[0]-1,0)),!f&amp;&amp;e[1]&gt;i&amp;&amp;(i=e[1],r.col=r.col+Math.max(s[1]-e[1]-1,0)))}),e.selectCell(c.row,c.col,d.row+r.row,d.col+r.col)}}),e.populateFromArray(c.row,c.col,o,d.row,d.col,"CopyPaste.paste",e.getSettings().pasteMode)}}function o(t){if(e.getSelected()&amp;&amp;!(e.getActiveEditor()&amp;&amp;e.getActiveEditor().isOpened()||O(t))){if(_(t.keyCode)){if(e.getSettings().fragmentSelection&amp;&amp;T())return;return r.setCopyableText(),void E(t)}var n=(t.ctrlKey||t.metaKey)&amp;&amp;!t.altKey;t.keyCode==C.A&amp;&amp;n&amp;&amp;e._registerTimeout(setTimeout(k(r.setCopyableText,r),0))}}var r=this;this.copyPasteInstance=v(),this.copyPasteInstance.onCut(t),this.copyPasteInstance.onPaste(n),this.onPaste=n,e.addHook("beforeKeyDown",o),this.destroy=function(){this.copyPasteInstance&amp;&amp;(this.copyPasteInstance.removeCallback(t),this.copyPasteInstance.removeCallback(n),this.copyPasteInstance.destroy(),this.copyPasteInstance=null),e.removeHook("beforeKeyDown",o)},e.addHook("afterDestroy",k(this.destroy,this)),this.triggerPaste=k(this.copyPasteInstance.triggerPaste,this.copyPasteInstance),this.triggerCut=k(this.copyPasteInstance.triggerCut,this.copyPasteInstance),this.setCopyableText=function(){var t=e.getSettings(),n=t.copyRowsLimit,o=t.copyColsLimit,r=e.getSelectedRange(),i=r.getTopLeftCorner(),s=r.getBottomRightCorner(),a=i.row,l=i.col,u=s.row,c=s.col,d=Math.min(u,a+n-1),h=Math.min(c,l+o-1),f=[];f.push({startRow:a,startCol:l,endRow:d,endCol:h}),f=w.hooks.run(e,"modifyCopyableRange",f);var p=this.getRangedCopyableData(f);e.copyPaste.copyPasteInstance.copyable(p),u===d&amp;&amp;c===h||w.hooks.run(e,"afterCopyLimit",u-a+1,c-l+1,n,o)},this.getRangedCopyableData=function(t){var n=[],o=[],r=[];return R(t,function(e){M(e.startRow,e.endRow,function(e){o.indexOf(e)===-1&amp;&amp;o.push(e)}),M(e.startCol,e.endCol,function(e){r.indexOf(e)===-1&amp;&amp;r.push(e)})}),R(o,function(t){var o=[];R(r,function(n){o.push(e.getCopyableData(t,n))}),n.push(o)}),y.stringify(n)}}function r(){var e=this,t=e.getSettings().copyPaste!==!1;t&amp;&amp;!e.copyPaste?e.copyPaste=new o(e):!t&amp;&amp;e.copyPaste&amp;&amp;(e.copyPaste.destroy(),e.copyPaste=null)}Object.defineProperties(n,{CopyPastePlugin:{get:function(){return o}},__esModule:{value:!0}});var i,s,a,l,u,c,d,h,f,p,m,g,w=(i=e("browser"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).default,v=(s=e("copyPaste"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).default,y=(a=e("SheetClip"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).default,b=(l=e("helpers/unicode"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}),C=b.KEY_CODES,_=b.isCtrlKey,R=(u=e("helpers/array"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).arrayEach,M=(c=e("helpers/number"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}).rangeEach,S=(d=e("helpers/dom/event"),d&amp;&amp;d.__esModule&amp;&amp;d||{default:d}),E=S.stopImmediatePropagation,O=S.isImmediatePropagationStopped,T=(h=e("helpers/dom/element"),h&amp;&amp;h.__esModule&amp;&amp;h||{default:h}).getSelectionText,k=(f=e("helpers/function"),f&amp;&amp;f.__esModule&amp;&amp;f||{default:f}).proxy,x=((p=e("plugins"),p&amp;&amp;p.__esModule&amp;&amp;p||{default:p}).registerPlugin,(m=e("3rdparty/walkontable/src/cell/coords"),m&amp;&amp;m.__esModule&amp;&amp;m||{default:m}).WalkontableCellCoords),D=(g=e("3rdparty/walkontable/src/cell/range"),g&amp;&amp;g.__esModule&amp;&amp;g||{default:g}).WalkontableCellRange;w.hooks.add("afterInit",r),w.hooks.add("afterUpdateSettings",r),w.hooks.register("afterCopyLimit"),w.hooks.register("modifyCopyableRange")},{"3rdparty/walkontable/src/cell/coords":6,"3rdparty/walkontable/src/cell/range":7,SheetClip:"SheetClip",browser:24,copyPaste:"copyPaste","helpers/array":43,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/function":50,"helpers/number":52,"helpers/unicode":56,plugins:61}],91:[function(e,t,n){"use strict";function o(){}var r,i,s,a,l,u=(r=e("browser"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).default,c=((i=e("plugins"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).registerPlugin,(s=e("3rdparty/walkontable/src/cell/range"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).WalkontableCellRange),d=(a=e("3rdparty/walkontable/src/selection"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).WalkontableSelection,h=function(e){return"boolean"==typeof e&amp;&amp;e===!0||"object"==typeof e&amp;&amp;e.length&gt;0},f=function(){h(this.getSettings().customBorders)&amp;&amp;(this.customBorders||(l=this,this.customBorders=new o))},p=function(e){for(var t=0;t&lt;l.view.wt.selections.length;t++)if(l.view.wt.selections[t].settings.className==e)return t;return-1},m=function(e){var t={row:e.row,col:e.col},n=new d(e,new c(t,t,t)),o=p(e.className);o&gt;=0?l.view.wt.selections[o]=n:l.view.wt.selections.push(n)},g=function(e,t,n){var o=_(e,t);o=R(o,n),this.setCellMeta(e,t,"borders",o),m(o)},w=function(e){for(var t=e.range,n=t.from.row;n&lt;=t.to.row;n++)for(var o=t.from.col;o&lt;=t.to.col;o++){var r=_(n,o),i=0;n==t.from.row&amp;&amp;(i++,e.hasOwnProperty("top")&amp;&amp;(r.top=e.top)),n==t.to.row&amp;&amp;(i++,e.hasOwnProperty("bottom")&amp;&amp;(r.bottom=e.bottom)),o==t.from.col&amp;&amp;(i++,e.hasOwnProperty("left")&amp;&amp;(r.left=e.left)),o==t.to.col&amp;&amp;(i++,e.hasOwnProperty("right")&amp;&amp;(r.right=e.right)),i&gt;0&amp;&amp;(this.setCellMeta(n,o,"borders",r),m(r))}},v=function(e,t){return"border_row"+e+"col"+t},y=function(){return{width:1,color:"#000"}},b=function(){return{hide:!0}},C=function(){return{width:1,color:"#000",cornerVisible:!1}},_=function(e,t){return{className:v(e,t),border:C(),row:e,col:t,top:b(),right:b(),bottom:b(),left:b()}},R=function(e,t){return t.hasOwnProperty("border")&amp;&amp;(e.border=t.border),t.hasOwnProperty("top")&amp;&amp;(e.top=t.top),t.hasOwnProperty("right")&amp;&amp;(e.right=t.right),t.hasOwnProperty("bottom")&amp;&amp;(e.bottom=t.bottom),t.hasOwnProperty("left")&amp;&amp;(e.left=t.left),e},M=function(e){for(var t=document.querySelectorAll("."+e),n=0;n&lt;t.length;n++)if(t[n]&amp;&amp;"TD"!=t[n].nodeName){var o=t[n].parentNode;o.parentNode&amp;&amp;o.parentNode.removeChild(o)}},S=function(e,t){var n=v(e,t);M(n),this.removeCellMeta(e,t,"borders")},E=function(e,t,n,o){var r=this.getCellMeta(e,t).borders;r&amp;&amp;void 0!=r.border||(r=_(e,t)),o?r[n]=b():r[n]=y(),this.setCellMeta(e,t,"borders",r);var i=v(e,t);M(i),m(r),this.render()},O=function(e,t,n){if(e.from.row==e.to.row&amp;&amp;e.from.col==e.to.col)"noBorders"==t?S.call(this,e.from.row,e.from.col):E.call(this,e.from.row,e.from.col,t,n);else switch(t){case"noBorders":for(var o=e.from.col;o&lt;=e.to.col;o++)for(var r=e.from.row;r&lt;=e.to.row;r++)S.call(this,r,o);break;case"top":for(var i=e.from.col;i&lt;=e.to.col;i++)E.call(this,e.from.row,i,t,n);break;case"right":for(var s=e.from.row;s&lt;=e.to.row;s++)E.call(this,s,e.to.col,t);break;case"bottom":for(var a=e.from.col;a&lt;=e.to.col;a++)E.call(this,e.to.row,a,t);break;case"left":for(var l=e.from.row;l&lt;=e.to.row;l++)E.call(this,l,e.from.col,t)}},T=function(e,t){var n=!1;return e.getSelectedRange().forAll(function(o,r){var i=e.getCellMeta(o,r).borders;if(i){if(!t)return n=!0,!1;if(!i[t].hasOwnProperty("hide"))return n=!0,!1}}),n},k=function(e){return'&lt;span class="selected"&gt;'+String.fromCharCode(10003)+"&lt;/span&gt;"+e},x=function(e){this.getSettings().customBorders&amp;&amp;(e.items.push(u.plugins.ContextMenu.SEPARATOR),e.items.push({key:"borders",name:"Borders",disabled:function(){return this.selection.selectedHeader.corner},submenu:{items:[{key:"borders:top",name:function(){var e="Top",t=T(this,"top");return t&amp;&amp;(e=k(e)),e},callback:function(){var e=T(this,"top");O.call(this,this.getSelectedRange(),"top",e)}},{key:"borders:right",name:function(){var e="Right",t=T(this,"right");return t&amp;&amp;(e=k(e)),e},callback:function(){var e=T(this,"right");O.call(this,this.getSelectedRange(),"right",e)}},{key:"borders:bottom",name:function(){var e="Bottom",t=T(this,"bottom");return t&amp;&amp;(e=k(e)),e},callback:function(){var e=T(this,"bottom");O.call(this,this.getSelectedRange(),"bottom",e)}},{key:"borders:left",name:function(){var e="Left",t=T(this,"left");return t&amp;&amp;(e=k(e)),e},callback:function(){var e=T(this,"left");O.call(this,this.getSelectedRange(),"left",e)}},{key:"borders:no_borders",name:"Remove border(s)",callback:function(){O.call(this,this.getSelectedRange(),"noBorders")},disabled:function(){return!T(this)}}]}}))};u.hooks.add("beforeInit",f),u.hooks.add("afterContextMenuDefaultOptions",x),u.hooks.add("afterInit",function(){var e=this.getSettings().customBorders;if(e){for(var t=0;t&lt;e.length;t++)e[t].range?w.call(this,e[t]):g.call(this,e[t].row,e[t].col,e[t]);this.render(),this.view.wt.draw(!0)}}),u.CustomBorders=o},{"3rdparty/walkontable/src/cell/range":7,"3rdparty/walkontable/src/selection":19,browser:24,plugins:61}],92:[function(e,t,n){"use strict";function o(){this.boundaries=null,this.callback=null}Object.defineProperties(n,{DragToScroll:{get:function(){return o}},__esModule:{value:!0}});var r,i,s,a=(r=e("browser"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).default,l=(i=e("eventManager"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).eventManager;(s=e("plugins"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).registerPlugin;a.plugins.DragToScroll=o,o.prototype.setBoundaries=function(e){this.boundaries=e},o.prototype.setCallback=function(e){this.callback=e},o.prototype.check=function(e,t){var n=0,o=0;t&lt;this.boundaries.top?o=t-this.boundaries.top:t&gt;this.boundaries.bottom&amp;&amp;(o=t-this.boundaries.bottom),e&lt;this.boundaries.left?n=e-this.boundaries.left:e&gt;this.boundaries.right&amp;&amp;(n=e-this.boundaries.right),this.callback(n,o)};var u,c=function(e){e.dragToScrollListening=!1;var t=e.view.wt.wtTable.holder;u=new o,t!==window&amp;&amp;(u.setBoundaries(t.getBoundingClientRect()),u.setCallback(function(e,n){e&lt;0?t.scrollLeft-=50:e&gt;0&amp;&amp;(t.scrollLeft+=50),n&lt;0?t.scrollTop-=20:n&gt;0&amp;&amp;(t.scrollTop+=20)}),e.dragToScrollListening=!0)};a.hooks.add("afterInit",function(){var e=this,t=l(this);t.addEventListener(document,"mouseup",function(){e.dragToScrollListening=!1}),t.addEventListener(document,"mousemove",function(t){e.dragToScrollListening&amp;&amp;u.check(t.clientX,t.clientY)})}),a.hooks.add("afterDestroy",function(){l(this).clear()}),a.hooks.add("afterOnCellMouseDown",function(){c(this)}),a.hooks.add("afterOnCellCornerMouseDown",function(){c(this)}),a.plugins.DragToScroll=o},{browser:24,eventManager:42,plugins:61}],93:[function(e,t,n){"use strict";function o(e){return{key:"freeze_column",name:"Freeze this column",callback:function(){var t=this.getSelectedRange().from.col;e.freezeColumn(t),this.render(),this.view.wt.wtOverlays.adjustElementsSize(!0)},hidden:function(){var e=this.getSelectedRange(),t=!1;return void 0===e?t=!0:(e.from.col!==e.to.col||e.from.col&lt;=this.getSettings().fixedColumnsLeft-1)&amp;&amp;(t=!0),t}}}Object.defineProperties(n,{freezeColumnItem:{get:function(){return o}},__esModule:{value:!0}})},{}],94:[function(e,t,n){"use strict";function o(e){return{key:"unfreeze_column",name:"Unfreeze this column",callback:function(){var t=this.getSelectedRange().from.col;e.unfreezeColumn(t),this.render(),this.view.wt.wtOverlays.adjustElementsSize(!0)},hidden:function(){var e=this.getSelectedRange(),t=!1;return void 0===e?t=!0:(e.from.col!==e.to.col||e.from.col&gt;=this.getSettings().fixedColumnsLeft)&amp;&amp;(t=!0),t}}}Object.defineProperties(n,{unfreezeColumnItem:{get:function(){return o}},__esModule:{value:!0}})},{}],95:[function(e,t,n){"use strict";Object.defineProperties(n,{ManualColumnFreeze:{get:function(){return g}},__esModule:{value:!0}});var o,r,i,s,a,l,u=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,c=(r=e("_base"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).default,d=(i=e("plugins"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).registerPlugin,h=(s=e("helpers/array"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).arrayEach,f=(a=e("contextMenuItem/freezeColumn"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).freezeColumnItem,p=(l=e("contextMenuItem/unfreezeColumn"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).unfreezeColumnItem,m=new WeakMap,g=function(e){$traceurRuntime.superConstructor(w).call(this,e),m.set(this,{moveByFreeze:!1,afterFirstUse:!1}),this.frozenColumnsBasePositions=[],this.manualColumnMovePlugin=void 0},w=g;$traceurRuntime.createClass(g,{isEnabled:function(){return!!this.hot.getSettings().manualColumnFreeze},enablePlugin:function(){var e=this;this.enabled||(this.addHook("afterContextMenuDefaultOptions",function(t){return e.addContextMenuEntry(t)}),this.addHook("afterInit",function(){return e.onAfterInit()}),this.addHook("beforeColumnMove",function(t,n){return e.onBeforeColumnMove(t,n)}),$traceurRuntime.superGet(this,w.prototype,"enablePlugin").call(this))},disablePlugin:function(){var e=m.get(this);e.afterFirstUse=!1,e.moveByFreeze=!1,$traceurRuntime.superGet(this,w.prototype,"disablePlugin").call(this)},updatePlugin:function(){this.disablePlugin(),this.enablePlugin(),$traceurRuntime.superGet(this,w.prototype,"updatePlugin").call(this)},freezeColumn:function(e){var t=m.get(this),n=this.hot.getSettings();t.afterFirstUse||(t.afterFirstUse=!0),n.fixedColumnsLeft===this.hot.countCols()||e&lt;=n.fixedColumnsLeft-1||(t.moveByFreeze=!0,e!==this.getMovePlugin().columnsMapper.getValueByIndex(e)&amp;&amp;(this.frozenColumnsBasePositions[n.fixedColumnsLeft]=e),this.getMovePlugin().moveColumn(e,n.fixedColumnsLeft++))},unfreezeColumn:function(e){var t=m.get(this),n=this.hot.getSettings();if(t.afterFirstUse||(t.afterFirstUse=!0),!(n.fixedColumnsLeft&lt;=0||e&gt;n.fixedColumnsLeft-1)){var o=this.getBestColumnReturnPosition(e);t.moveByFreeze=!0,n.fixedColumnsLeft--,this.getMovePlugin().moveColumn(e,o+1)}},getMovePlugin:function(){return this.manualColumnMovePlugin||(this.manualColumnMovePlugin=this.hot.getPlugin("manualColumnMove")),this.manualColumnMovePlugin},getBestColumnReturnPosition:function(e){var t,n=this.getMovePlugin(),o=this.hot.getSettings(),r=o.fixedColumnsLeft,i=n.columnsMapper.getValueByIndex(r);if(null==this.frozenColumnsBasePositions[e])for(t=n.columnsMapper.getValueByIndex(e);i&lt;t;)r++,i=n.columnsMapper.getValueByIndex(r);else{for(t=this.frozenColumnsBasePositions[e],this.frozenColumnsBasePositions[e]=void 0;i&lt;=t;)r++,i=n.columnsMapper.getValueByIndex(r);r=i}return r-1},addContextMenuEntry:function(e){e.items.push(u.plugins.ContextMenu.SEPARATOR,f(this),p(this))},onAfterInit:function(){this.getMovePlugin().isEnabled()||this.getMovePlugin().enablePlugin()},onBeforeColumnMove:function(e,t){var n=m.get(this);if(n.afterFirstUse&amp;&amp;!n.moveByFreeze){var o=this.hot.getSettings().fixedColumnsLeft,r=t&lt;o;if(r||h(e,function(e,t,n){if(e&lt;o)return r=!0,!1}),r)return!1}n.moveByFreeze&amp;&amp;(n.moveByFreeze=!1)},destroy:function(){$traceurRuntime.superGet(this,w.prototype,"destroy").call(this)}},{},c),d("manualColumnFreeze",g)},{_base:62,browser:24,"contextMenuItem/freezeColumn":93,"contextMenuItem/unfreezeColumn":94,"helpers/array":43,plugins:61}],96:[function(e,t,n){"use strict";Object.defineProperties(n,{ColumnsMapper:{get:function(){return f}},__esModule:{value:!0}});var o,r,i,s,a,l=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,u=(r=e("mixins/arrayMapper"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).arrayMapper,c=(i=e("helpers/array"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).arrayFilter,d=(s=e("helpers/object"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).mixin,h=(a=e("helpers/number"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).rangeEach,f=function(e){this.manualColumnMove=e};$traceurRuntime.createClass(f,{createMap:function(e){var t=this,n=void 0===e?this._arrayMap.length:e;this._arrayMap.length=0,h(n-1,function(e){t._arrayMap[e]=e})},destroy:function(){this._arrayMap=null},moveColumn:function(e,t){var n=this._arrayMap[e];this._arrayMap[e]=null,this._arrayMap.splice(t,0,n)},clearNull:function(){this._arrayMap=c(this._arrayMap,function(e){return null!==e})}},{}),d(f,u),l.utils.ManualColumnMoveColumnsMapper=f},{browser:24,"helpers/array":43,"helpers/number":52,"helpers/object":53,"mixins/arrayMapper":57}],97:[function(e,t,n){"use strict";Object.defineProperties(n,{ManualColumnMove:{get:function(){return D}},__esModule:{value:!0}});var o,r,i,s,a,l,u,c,d,h,f=(o=e("_base.js"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,p=(r=e("browser"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).default,m=(i=e("helpers/array"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).arrayEach,g=(s=e("helpers/dom/element"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}),w=g.addClass,v=g.removeClass,y=g.offset,b=(a=e("helpers/number"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).rangeEach,C=(l=e("eventManager"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).eventManager,_=(u=e("plugins"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).registerPlugin,R=(c=e("columnsMapper"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}).ColumnsMapper,M=(d=e("ui/backlight"),d&amp;&amp;d.__esModule&amp;&amp;d||{default:d}).BacklightUI,S=(h=e("ui/guideline"),h&amp;&amp;h.__esModule&amp;&amp;h||{default:h}).GuidelineUI,E=new WeakMap,O="ht__manualColumnMove",T="show-ui",k="on-moving--columns",x="after-selection--columns",D=function(e){$traceurRuntime.superConstructor(H).call(this,e),E.set(this,{columnsToMove:[],countCols:0,fixedColumns:0,pressed:void 0,disallowMoving:void 0,target:{eventPageX:void 0,coords:void 0,TD:void 0,col:void 0}}),this.removedColumns=[],this.columnsMapper=new R(this),this.eventManager=C(this),this.backlight=new M(e),this.guideline=new S(e)},H=D;$traceurRuntime.createClass(D,{isEnabled:function(){return!!this.hot.getSettings().manualColumnMove},enablePlugin:function(){var e=this;this.enabled||(this.addHook("beforeOnCellMouseDown",function(t,n,o,r){return e.onBeforeOnCellMouseDown(t,n,o,r)}),this.addHook("beforeOnCellMouseOver",function(t,n,o,r){return e.onBeforeOnCellMouseOver(t,n,o,r)}),this.addHook("afterScrollVertically",function(){return e.onAfterScrollVertically()}),this.addHook("modifyCol",function(t,n){return e.onModifyCol(t,n)}),this.addHook("beforeRemoveCol",function(t,n){return e.onBeforeRemoveCol(t,n)}),this.addHook("afterRemoveCol",function(t,n){return e.onAfterRemoveCol(t,n)}),this.addHook("afterCreateCol",function(t,n){return e.onAfterCreateCol(t,n)}),this.addHook("unmodifyCol",function(t){return e.onUnmodifyCol(t)}),this.registerEvents(),w(this.hot.rootElement,O),$traceurRuntime.superGet(this,H.prototype,"enablePlugin").call(this))},updatePlugin:function(){this.disablePlugin(),this.enablePlugin(),this.onAfterPluginsInitialized(),$traceurRuntime.superGet(this,H.prototype,"updatePlugin").call(this)},disablePlugin:function(){var e=this.hot.getSettings().manualColumnMove;Array.isArray(e)&amp;&amp;this.columnsMapper.clearMap(),v(this.hot.rootElement,O),this.unregisterEvents(),this.backlight.destroy(),this.guideline.destroy(),$traceurRuntime.superGet(this,H.prototype,"disablePlugin").call(this)},moveColumn:function(e,t){this.moveColumns([e],t)},moveColumns:function(e,t){var n=this,o=E.get(this),r=this.hot.runHooks("beforeColumnMove",e,t);o.disallowMoving=!r,r!==!1&amp;&amp;(m(e,function(e,t,o){o[t]=n.columnsMapper.getValueByIndex(e)}),m(e,function(e,o){var r=n.columnsMapper.getIndexByValue(e);r!==t&amp;&amp;n.columnsMapper.moveColumn(r,t+o)}),this.columnsMapper.clearNull()),this.hot.runHooks("afterColumnMove",e,t)},changeSelection:function(e,t){var n=this.hot.selection,o=this.hot.countRows()-1;n.setRangeStartOnly(new WalkontableCellCoords(0,e)),n.setRangeEnd(new WalkontableCellCoords(o,t),!1)},getColumnsWidth:function(e,t){for(var n=0,o=e;o&lt;t;o++){var r=0;r=o&lt;0?this.hot.view.wt.wtTable.getColumnWidth(o)||0:this.hot.view.wt.wtTable.getStretchedColumnWidth(o)||0,n+=r}return n},initialSettings:function(){var e=this.hot.getSettings().manualColumnMove;Array.isArray(e)?this.moveColumns(e,0):void 0!==e&amp;&amp;this.persistentStateLoad()},isFixedColumnsLeft:function(e){return e&lt;this.hot.getSettings().fixedColumnsLeft},persistentStateSave:function(){p.hooks.run(this.hot,"persistentStateSave","manualColumnMove",this.columnsMapper._arrayMap)},persistentStateLoad:function(){var e={};p.hooks.run(this.hot,"persistentStateLoad","manualColumnMove",e),e.value&amp;&amp;(this.columnsMapper._arrayMap=e.value)},prepareColumnsToMoving:function(e,t){var n=[];return b(e,t,function(e){n.push(e)}),n},refreshPositions:function(){var e=E.get(this),t=this.hot.view.wt.wtTable.getFirstVisibleColumn(),n=this.hot.view.wt.wtTable.getLastVisibleColumn(),o=this.hot.view.wt.wtTable,r=this.hot.view.wt.wtOverlays.scrollableElement,i="number"==typeof r.scrollX?r.scrollX:r.scrollLeft,s=this.hot.view.THEAD.offsetLeft+this.getColumnsWidth(0,e.coordsColumn),a=e.target.eventPageX-(e.rootElementOffset-(void 0===r.scrollX?i:0)),l=o.hider.offsetWidth,u=o.TBODY.offsetLeft,c=this.backlight.getOffset().left,d=this.backlight.getSize().width,h=0;if(e.rootElementOffset+o.holder.offsetWidth+i&lt;e.target.eventPageX&amp;&amp;e.coordsColumn&lt;e.countCols&amp;&amp;e.coordsColumn++,e.hasRowHeaders&amp;&amp;(h=this.hot.view.wt.wtOverlays.leftOverlay.clone.wtTable.getColumnHeader(-1).offsetWidth),this.isFixedColumnsLeft(e.coordsColumn)&amp;&amp;(s+=i),s+=h,e.coordsColumn&lt;0)e.fixedColumns&gt;0?e.target.col=0:e.target.col=t&gt;0?t-1:t;else if(e.target.TD.offsetWidth/2+s&lt;=a){var f=e.coordsColumn&gt;=e.countCols?e.countCols-1:e.coordsColumn;e.target.col=f+1,s+=e.target.TD.offsetWidth,e.target.col&gt;n&amp;&amp;this.hot.scrollViewportTo(void 0,n+1,void 0,!0)}else e.target.col=e.coordsColumn,e.target.col&lt;=t&amp;&amp;e.target.col&gt;=e.fixedColumns&amp;&amp;this.hot.scrollViewportTo(void 0,t-1);e.target.col&lt;=t&amp;&amp;e.target.col&gt;=e.fixedColumns&amp;&amp;this.hot.scrollViewportTo(void 0,t-1);var p=a,m=s;a+d+c&gt;=l?p=l-d-c:a+c&lt;u+h&amp;&amp;(p=u+h+Math.abs(c)),s&gt;=l-1?m=l-1:0===m?m=1:void 0!==r.scrollX&amp;&amp;e.coordsColumn&lt;e.fixedColumns&amp;&amp;(m-=e.rootElementOffset&lt;=r.scrollX?e.rootElementOffset:0),this.backlight.setPosition(null,p),this.guideline.setPosition(null,m)},registerEvents:function(){var e=this;this.eventManager.addEventListener(document.documentElement,"mousemove",function(t){return e.onMouseMove(t)}),this.eventManager.addEventListener(document.documentElement,"mouseup",function(){return e.onMouseUp()})},unregisterEvents:function(){this.eventManager.clear()},onBeforeOnCellMouseDown:function(e,t,n,o){var r=this.hot.view.wt.wtTable,i=this.hot.selection.selectedHeader.cols,s=this.hot.getSelectedRange(),a=E.get(this),l=e.realTarget.className.indexOf("columnSorting")&gt;-1;if(!s||!i||a.pressed||0!==e.button||l)return a.pressed=!1,a.columnsToMove.length=0,void v(this.hot.rootElement,[k,T]);var u=this.guideline.isBuilt()&amp;&amp;!this.guideline.isAppended(),c=this.backlight.isBuilt()&amp;&amp;!this.backlight.isAppended();u&amp;&amp;c&amp;&amp;(this.guideline.appendTo(r.hider),this.backlight.appendTo(r.hider));var d=s,h=d.from,f=d.to,p=Math.min(h.col,f.col),m=Math.max(h.col,f.col);if(t.row&lt;0&amp;&amp;t.col&gt;=p&amp;&amp;t.col&lt;=m){o.column=!0,a.pressed=!0,a.target.eventPageX=e.pageX,a.coordsColumn=t.col,a.target.TD=n,a.target.col=t.col,a.columnsToMove=this.prepareColumnsToMoving(p,m),a.hasRowHeaders=!!this.hot.getSettings().rowHeaders,a.countCols=this.hot.countCols(),a.fixedColumns=this.hot.getSettings().fixedColumnsLeft,a.rootElementOffset=y(this.hot.rootElement).left;var g=a.hasRowHeaders?-1:0,b=r.holder.scrollTop+r.getColumnHeaderHeight(0)+1,C=t.col&lt;a.fixedColumns,_=this.hot.view.wt.wtOverlays.scrollableElement,R=_.scrollX?_.scrollX-a.rootElementOffset:0,M=e.layerX-(C?R:0),S=Math.abs(this.getColumnsWidth(p,t.col)+M);this.backlight.setPosition(b,this.getColumnsWidth(g,p)+S),this.backlight.setSize(this.getColumnsWidth(p,m+1),r.hider.offsetHeight-b),this.backlight.setOffset(null,S*-1),w(this.hot.rootElement,k)}else v(this.hot.rootElement,x),a.pressed=!1,a.columnsToMove.length=0},onMouseMove:function(e){var t=E.get(this);if(t.pressed){if(e.realTarget===this.backlight.element){var n=this.backlight.getSize().width;this.backlight.setSize(0),setTimeout(function(){this.backlight.setPosition(n)})}t.target.eventPageX=e.pageX,this.refreshPositions()}},onBeforeOnCellMouseOver:function(e,t,n,o){var r=this.hot.getSelectedRange(),i=E.get(this);r&amp;&amp;i.pressed&amp;&amp;(i.columnsToMove.indexOf(t.col)&gt;-1?v(this.hot.rootElement,T):w(this.hot.rootElement,T),o.row=!0,o.column=!0,o.cell=!0,i.coordsColumn=t.col,i.target.TD=n)},onMouseUp:function(){var e=E.get(this);if(e.coordsColumn=void 0,e.pressed=!1,e.backlightWidth=0,v(this.hot.rootElement,[k,T,x]),this.hot.selection.selectedHeader.cols&amp;&amp;w(this.hot.rootElement,x),!(e.columnsToMove.length&lt;1||void 0===e.target.col||e.columnsToMove.indexOf(e.target.col)&gt;-1)){
if(this.moveColumns(e.columnsToMove,e.target.col),this.persistentStateSave(),this.hot.render(),this.hot.view.wt.wtOverlays.adjustElementsSize(!0),!e.disallowMoving){var t=this.columnsMapper.getIndexByValue(e.columnsToMove[0]),n=this.columnsMapper.getIndexByValue(e.columnsToMove[e.columnsToMove.length-1]);this.changeSelection(t,n)}e.columnsToMove.length=0}},onAfterScrollVertically:function(){var e=this.hot.view.wt.wtTable,t=e.getColumnHeaderHeight(0)+1,n=e.holder.scrollTop,o=t+n;this.backlight.setPosition(o),this.backlight.setSize(null,e.hider.offsetHeight-o)},onAfterCreateCol:function(e,t){this.columnsMapper.shiftItems(e,t)},onBeforeRemoveCol:function(e,t){var n=this;this.removedColumns.length=0,e!==!1&amp;&amp;b(e,e+t-1,function(e){n.removedColumns.push(n.hot.runHooks("modifyCol",e,n.pluginName))})},onAfterRemoveCol:function(e,t){this.columnsMapper.unshiftItems(this.removedColumns)},onModifyCol:function(e,t){if(t!==this.pluginName){var n=this.columnsMapper.getValueByIndex(e);e=null===n?e:n}return e},onUnmodifyCol:function(e){var t=this.columnsMapper.getIndexByValue(e);return e=null===t?e:t},onAfterPluginsInitialized:function(){var e=this.hot.countCols(),t=this.columnsMapper._arrayMap.length;if(0===t)this.columnsMapper.createMap(this.hot.countSourceCols()||this.hot.getSettings().startCols);else if(t&lt;e){var n=e-t;this.columnsMapper.insertItems(t,n)}else if(t&gt;e){var o=e-1,r=[];m(this.columnsMapper._arrayMap,function(e,t,n){e&gt;o&amp;&amp;r.push(t)}),this.columnsMapper.removeItems(r)}this.initialSettings(),this.backlight.build(),this.guideline.build()},destroy:function(){this.backlight.destroy(),this.guideline.destroy(),$traceurRuntime.superGet(this,H.prototype,"destroy").call(this)}},{},f),_("ManualColumnMove",D),p.hooks.register("beforeColumnMove"),p.hooks.register("afterColumnMove"),p.hooks.register("unmodifyCol")},{"_base.js":62,browser:24,columnsMapper:96,eventManager:42,"helpers/array":43,"helpers/dom/element":47,"helpers/number":52,plugins:61,"ui/backlight":99,"ui/guideline":100}],98:[function(e,t,n){"use strict";Object.defineProperties(n,{BaseUI:{get:function(){return u}},__esModule:{value:!0}});var o,r=(o=e("helpers/number"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).isNumeric,i=0,s=1,a=2,l="px",u=function(e){this.hot=e,this._element=null,this.state=i};$traceurRuntime.createClass(u,{appendTo:function(e){e.appendChild(this._element),this.state=a},build:function(){this._element=document.createElement("div"),this.state=s},destroy:function(){this.isAppended()&amp;&amp;this._element.parentElement.removeChild(this._element),this._element=null,this.state=i},isAppended:function(){return this.state===a},isBuilt:function(){return this.state&gt;=s},setPosition:function(e,t){r(e)&amp;&amp;(this._element.style.top=e+l),r(t)&amp;&amp;(this._element.style.left=t+l)},getPosition:function(){return{top:this._element.style.top?parseInt(this._element.style.top,10):0,left:this._element.style.left?parseInt(this._element.style.left,10):0}},setSize:function(e,t){r(e)&amp;&amp;(this._element.style.width=e+l),r(t)&amp;&amp;(this._element.style.height=t+l)},getSize:function(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}},setOffset:function(e,t){r(e)&amp;&amp;(this._element.style.marginTop=e+l),r(t)&amp;&amp;(this._element.style.marginLeft=t+l)},getOffset:function(){return{top:this._element.style.marginTop?parseInt(this._element.style.marginTop,10):0,left:this._element.style.marginLeft?parseInt(this._element.style.marginLeft,10):0}}},{})},{"helpers/number":52}],99:[function(e,t,n){"use strict";Object.defineProperties(n,{BacklightUI:{get:function(){return l}},__esModule:{value:!0}});var o,r,i=(o=e("_base"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).BaseUI,s=(r=e("helpers/dom/element"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).addClass,a="ht__manualColumnMove--backlight",l=function(e){$traceurRuntime.superConstructor(u).call(this,e)},u=l;$traceurRuntime.createClass(l,{build:function(){$traceurRuntime.superGet(this,u.prototype,"build").call(this),s(this._element,a)}},{},i)},{_base:98,"helpers/dom/element":47}],100:[function(e,t,n){"use strict";Object.defineProperties(n,{GuidelineUI:{get:function(){return l}},__esModule:{value:!0}});var o,r,i=(o=e("_base"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).BaseUI,s=(r=e("helpers/dom/element"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).addClass,a="ht__manualColumnMove--guideline",l=function(e){$traceurRuntime.superConstructor(u).call(this,e)},u=l;$traceurRuntime.createClass(l,{build:function(){$traceurRuntime.superGet(this,u.prototype,"build").call(this),s(this._element,a)}},{},i)},{_base:98,"helpers/dom/element":47}],101:[function(e,t,n){"use strict";Object.defineProperties(n,{ManualColumnResize:{get:function(){return M}},__esModule:{value:!0}});var o,r,i,s,a,l,u,c,d=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,h=(r=e("_base.js"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).default,f=(i=e("helpers/dom/element"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}),p=f.addClass,m=f.hasClass,g=f.removeClass,w=f.outerHeight,v=(s=e("eventManager"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).eventManager,y=(a=e("helpers/dom/event"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}),b=y.pageX,C=(y.pageY,(l=e("helpers/array"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).arrayEach),_=(u=e("helpers/number"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).rangeEach,R=(c=e("plugins"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}).registerPlugin,M=function(e){$traceurRuntime.superConstructor(S).call(this,e),this.currentTH=null,this.currentCol=null,this.selectedCols=[],this.currentWidth=null,this.newSize=null,this.startY=null,this.startWidth=null,this.startOffset=null,this.handle=document.createElement("DIV"),this.guide=document.createElement("DIV"),this.eventManager=v(this),this.pressed=null,this.dblclick=0,this.autoresizeTimeout=null,this.manualColumnWidths=[],p(this.handle,"manualColumnResizer"),p(this.guide,"manualColumnResizerGuide")},S=M;$traceurRuntime.createClass(M,{isEnabled:function(){return this.hot.getSettings().manualColumnResize},enablePlugin:function(){var e=this;if(!this.enabled){this.manualColumnWidths=[];var t=this.hot.getSettings().manualColumnResize,n=this.loadManualColumnWidths();this.addHook("modifyColWidth",function(t,n){return e.onModifyColWidth(t,n)}),this.addHook("beforeStretchingColumnWidth",function(t,n){return e.onBeforeStretchingColumnWidth(t,n)}),this.addHook("beforeColumnResize",function(t,n,o){return e.onBeforeColumnResize(t,n,o)}),"undefined"!=typeof n?this.manualColumnWidths=n:Array.isArray(t)?this.manualColumnWidths=t:this.manualColumnWidths=[],d.hooks.register("beforeColumnResize"),d.hooks.register("afterColumnResize"),this.bindEvents(),$traceurRuntime.superGet(this,S.prototype,"enablePlugin").call(this)}},updatePlugin:function(){var e=this.hot.getSettings().manualColumnResize;Array.isArray(e)?this.manualColumnWidths=e:e||(this.manualColumnWidths=[])},disablePlugin:function(){$traceurRuntime.superGet(this,S.prototype,"disablePlugin").call(this)},saveManualColumnWidths:function(){this.hot.runHooks("persistentStateSave","manualColumnWidths",this.manualColumnWidths)},loadManualColumnWidths:function(){var e={};return this.hot.runHooks("persistentStateLoad","manualColumnWidths",e),e.value},setupHandlePosition:function(e){var t=this;if(!e.parentNode)return!1;this.currentTH=e;var n=this.hot.view.wt.wtTable.getCoords(e).col,o=w(this.currentTH);if(n&gt;=0){var r=this.currentTH.getBoundingClientRect();if(this.currentCol=n,this.selectedCols=[],this.hot.selection.isSelected()&amp;&amp;this.hot.selection.selectedHeader.cols){var i=this.hot.getSelectedRange(),s=i.from,a=i.to,l=s.col,u=a.col;l&gt;=u&amp;&amp;(l=a.col,u=s.col),this.currentCol&gt;=l&amp;&amp;this.currentCol&lt;=u?_(l,u,function(e){return t.selectedCols.push(e)}):this.selectedCols.push(this.currentCol)}else this.selectedCols.push(this.currentCol);this.startOffset=r.left-6,this.startWidth=parseInt(r.width,10),this.handle.style.top=r.top+"px",this.handle.style.left=this.startOffset+this.startWidth+"px",this.handle.style.height=o+"px",this.hot.rootElement.appendChild(this.handle)}},refreshHandlePosition:function(){this.handle.style.left=this.startOffset+this.currentWidth+"px"},setupGuidePosition:function(){var e=parseInt(w(this.handle),10),t=parseInt(this.handle.style.top,10)+e,n=parseInt(this.hot.view.maximumVisibleElementHeight(0),10);p(this.handle,"active"),p(this.guide,"active"),this.guide.style.top=t+"px",this.guide.style.left=this.handle.style.left,this.guide.style.height=n-e+"px",this.hot.rootElement.appendChild(this.guide)},refreshGuidePosition:function(){this.guide.style.left=this.handle.style.left},hideHandleAndGuide:function(){g(this.handle,"active"),g(this.guide,"active")},checkIfColumnHeader:function(e){if(e!=this.hot.rootElement){var t=e.parentNode;return"THEAD"===t.tagName||this.checkIfColumnHeader(t)}return!1},getTHFromTargetElement:function(e){return"TABLE"!=e.tagName?"TH"==e.tagName?e:this.getTHFromTargetElement(e.parentNode):null},onMouseOver:function(e){if(this.checkIfColumnHeader(e.target)){var t=this.getTHFromTargetElement(e.target);if(!t)return;var n=t.getAttribute("colspan");!t||null!==n&amp;&amp;1!==n||this.pressed||this.setupHandlePosition(t)}},afterMouseDownTimeout:function(){var e=this,t=function(){e.hot.forceFullRender=!0,e.hot.view.render(),e.hot.view.wt.wtOverlays.adjustElementsSize(!0)},n=function(n,o){var r=e.hot.runHooks("beforeColumnResize",n,e.newSize,!0);void 0!==r&amp;&amp;(e.newSize=r),"all"===e.hot.getSettings().stretchH?e.clearManualSize(n):e.setManualSize(n,e.newSize),o&amp;&amp;t(),e.saveManualColumnWidths(),e.hot.runHooks("afterColumnResize",n,e.newSize,!0)};if(this.dblclick&gt;=2){var o=this.selectedCols.length;o&gt;1?(C(this.selectedCols,function(e){n(e)}),t()):C(this.selectedCols,function(e){n(e,!0)})}this.dblclick=0,this.autoresizeTimeout=null},onMouseDown:function(e){var t=this;m(e.target,"manualColumnResizer")&amp;&amp;(this.setupGuidePosition(),this.pressed=this.hot,null===this.autoresizeTimeout&amp;&amp;(this.autoresizeTimeout=setTimeout(function(){return t.afterMouseDownTimeout()},500),this.hot._registerTimeout(this.autoresizeTimeout)),this.dblclick++,this.startX=b(e),this.newSize=this.startWidth)},onMouseMove:function(e){var t=this;this.pressed&amp;&amp;(this.currentWidth=this.startWidth+(b(e)-this.startX),C(this.selectedCols,function(e){t.newSize=t.setManualSize(e,t.currentWidth)}),this.refreshHandlePosition(),this.refreshGuidePosition())},onMouseUp:function(e){var t=this,n=function(){t.hot.forceFullRender=!0,t.hot.view.render(),t.hot.view.wt.wtOverlays.adjustElementsSize(!0)},o=function(e,o){t.hot.runHooks("beforeColumnResize",e,t.newSize),o&amp;&amp;n(),t.saveManualColumnWidths(),t.hot.runHooks("afterColumnResize",e,t.newSize)};if(this.pressed){if(this.hideHandleAndGuide(),this.pressed=!1,this.newSize!=this.startWidth){var r=this.selectedCols.length;r&gt;1?(C(this.selectedCols,function(e){o(e)}),n()):C(this.selectedCols,function(e){o(e,!0)})}this.setupHandlePosition(this.currentTH)}},bindEvents:function(){var e=this;this.eventManager.addEventListener(this.hot.rootElement,"mouseover",function(t){return e.onMouseOver(t)}),this.eventManager.addEventListener(this.hot.rootElement,"mousedown",function(t){return e.onMouseDown(t)}),this.eventManager.addEventListener(window,"mousemove",function(t){return e.onMouseMove(t)}),this.eventManager.addEventListener(window,"mouseup",function(t){return e.onMouseUp(t)})},setManualSize:function(e,t){return t=Math.max(t,20),e=this.hot.runHooks("modifyCol",e),this.manualColumnWidths[e]=t,t},clearManualSize:function(e){e=this.hot.runHooks("modifyCol",e),this.manualColumnWidths[e]=void 0},onModifyColWidth:function(e,t){return this.enabled&amp;&amp;(t=this.hot.runHooks("modifyCol",t),this.hot.getSettings().manualColumnResize&amp;&amp;this.manualColumnWidths[t])?this.manualColumnWidths[t]:e},onBeforeStretchingColumnWidth:function(e,t){var n=this.manualColumnWidths[t];return void 0===n&amp;&amp;(n=e),n},onBeforeColumnResize:function(){this.hot.view.wt.wtViewport.hasOversizedColumnHeadersMarked={}}},{},h),R("manualColumnResize",M)},{"_base.js":62,browser:24,eventManager:42,"helpers/array":43,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/number":52,plugins:61}],102:[function(e,t,n){"use strict";Object.defineProperties(n,{ManualRowMove:{get:function(){return D}},__esModule:{value:!0}});var o,r,i,s,a,l,u,c,d,h,f=(o=e("_base.js"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,p=(r=e("browser"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).default,m=(i=e("helpers/array"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).arrayEach,g=(s=e("helpers/dom/element"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}),w=g.addClass,v=g.removeClass,y=g.offset,b=(a=e("helpers/number"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).rangeEach,C=(l=e("eventManager"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).eventManager,_=(u=e("plugins"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).registerPlugin,R=(c=e("rowsMapper"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}).RowsMapper,M=(d=e("ui/backlight"),d&amp;&amp;d.__esModule&amp;&amp;d||{default:d}).BacklightUI,S=(h=e("ui/guideline"),h&amp;&amp;h.__esModule&amp;&amp;h||{default:h}).GuidelineUI,E=new WeakMap,O="ht__manualRowMove",T="show-ui",k="on-moving--rows",x="after-selection--rows",D=function(e){$traceurRuntime.superConstructor(H).call(this,e),E.set(this,{rowsToMove:[],pressed:void 0,disallowMoving:void 0,target:{eventPageY:void 0,coords:void 0,TD:void 0,row:void 0}}),this.removedRows=[],this.rowsMapper=new R(this),this.eventManager=C(this),this.backlight=new M(e),this.guideline=new S(e)},H=D;$traceurRuntime.createClass(D,{isEnabled:function(){return!!this.hot.getSettings().manualRowMove},enablePlugin:function(){var e=this;this.enabled||(this.addHook("beforeOnCellMouseDown",function(t,n,o,r){return e.onBeforeOnCellMouseDown(t,n,o,r)}),this.addHook("beforeOnCellMouseOver",function(t,n,o,r){return e.onBeforeOnCellMouseOver(t,n,o,r)}),this.addHook("afterScrollHorizontally",function(){return e.onAfterScrollHorizontally()}),this.addHook("modifyRow",function(t,n){return e.onModifyRow(t,n)}),this.addHook("beforeRemoveRow",function(t,n){return e.onBeforeRemoveRow(t,n)}),this.addHook("afterRemoveRow",function(t,n){return e.onAfterRemoveRow(t,n)}),this.addHook("afterCreateRow",function(t,n){return e.onAfterCreateRow(t,n)}),this.addHook("afterLoadData",function(t){return e.onAfterLoadData(t)}),this.addHook("beforeColumnSort",function(t,n){return e.onBeforeColumnSort(t,n)}),this.addHook("unmodifyRow",function(t){return e.onUnmodifyRow(t)}),this.registerEvents(),w(this.hot.rootElement,O),$traceurRuntime.superGet(this,H.prototype,"enablePlugin").call(this))},updatePlugin:function(){this.disablePlugin(),this.enablePlugin(),this.onAfterPluginsInitialized(),$traceurRuntime.superGet(this,H.prototype,"updatePlugin").call(this)},disablePlugin:function(){var e=this.hot.getSettings().manualRowMove;Array.isArray(e)&amp;&amp;this.rowsMapper.clearMap(),v(this.hot.rootElement,O),this.unregisterEvents(),this.backlight.destroy(),this.guideline.destroy(),$traceurRuntime.superGet(this,H.prototype,"disablePlugin").call(this)},moveRow:function(e,t){this.moveRows([e],t)},moveRows:function(e,t){var n=this,o=E.get(this),r=this.hot.runHooks("beforeRowMove",e,t);o.disallowMoving=r===!1,o.disallowMoving||(m(e,function(e,t,o){o[t]=n.rowsMapper.getValueByIndex(e)}),m(e,function(e,o){var r=n.rowsMapper.getIndexByValue(e);r!==t&amp;&amp;n.rowsMapper.moveRow(r,t+o)}),this.rowsMapper.clearNull()),this.hot.runHooks("afterRowMove",e,t)},changeSelection:function(e,t){var n=this.hot.selection,o=this.hot.countCols()-1;n.setRangeStartOnly(new WalkontableCellCoords(e,0)),n.setRangeEnd(new WalkontableCellCoords(t,o),!1)},getRowsHeight:function(e,t){for(var n=0,o=e;o&lt;t;o++){var r=this.hot.view.wt.wtTable.getRowHeight(o)||23;n+=r}return n},initialSettings:function(){var e=this.hot.getSettings().manualRowMove;if(Array.isArray(e))this.moveRows(e,0);else if(void 0!==e){var t=this.persistentStateLoad();t.length&amp;&amp;this.moveRows(t,0)}},isFixedRowTop:function(e){return e&lt;this.hot.getSettings().fixedRowsTop},isFixedRowBottom:function(e){return e&gt;this.hot.getSettings().fixedRowsBottom},persistentStateSave:function(){p.hooks.run(this.hot,"persistentStateSave","manualRowMove",this.rowsMapper._arrayMap)},persistentStateLoad:function(){var e={};return p.hooks.run(this.hot,"persistentStateLoad","manualRowMove",e),e.value?e.value:[]},prepareRowsToMoving:function(){var e=this.hot.getSelectedRange(),t=[];if(!e)return t;var n=e,o=n.from,r=n.to,i=Math.min(o.row,r.row),s=Math.max(o.row,r.row);return b(i,s,function(e){t.push(e)}),t},refreshPositions:function(){var e=E.get(this),t=e.target.coords,n=this.hot.view.wt.wtTable.getFirstVisibleRow(),o=this.hot.view.wt.wtTable.getLastVisibleRow(),r=this.hot.getSettings().fixedRowsTop,i=this.hot.countRows();t.row&lt;r&amp;&amp;n&gt;0&amp;&amp;this.hot.scrollViewportTo(n-1),t.row&gt;=o&amp;&amp;o&lt;i&amp;&amp;this.hot.scrollViewportTo(o+1,void 0,!0);var s=this.hot.view.wt.wtTable,a=e.target.TD,l=y(this.hot.rootElement),u=this.hot.view.THEAD.offsetHeight+this.getRowsHeight(0,t.row),c=e.target.eventPageY-l.top+s.holder.scrollTop,d=s.hider.offsetHeight,h=s.TBODY.offsetTop,f=this.backlight.getOffset().top,p=this.backlight.getSize().height;l.top+s.holder.offsetHeight&lt;e.target.eventPageY&amp;&amp;e.target.coords.row++,this.isFixedRowTop(t.row)&amp;&amp;(u+=s.holder.scrollTop),t.row&lt;0?e.target.row=n&gt;0?n-1:n:a.offsetHeight/2+u&lt;=c?(e.target.row=t.row+1,u+=0===t.row?a.offsetHeight-1:a.offsetHeight):e.target.row=t.row;var m=c,g=u;c+p+f&gt;=d?m=d-p-f:c+f&lt;h&amp;&amp;(m=h+Math.abs(f)),u&gt;=d-1&amp;&amp;(g=d-1);var w=0;this.hot.view.wt.wtOverlays.topOverlay&amp;&amp;(w=this.hot.view.wt.wtOverlays.topOverlay.clone.wtTable.TABLE.offsetHeight),t.row&gt;=r&amp;&amp;g-s.holder.scrollTop&lt;w&amp;&amp;this.hot.scrollViewportTo(t.row),this.backlight.setPosition(m),this.guideline.setPosition(g)},updateRowsMapper:function(){var e=this.hot.countSourceRows(),t=this.rowsMapper._arrayMap.length;if(0===t)this.rowsMapper.createMap(e||this.hot.getSettings().startRows);else if(t&lt;e){var n=e-t;this.rowsMapper.insertItems(t,n)}else if(t&gt;e){var o=e-1,r=[];m(this.rowsMapper._arrayMap,function(e,t,n){e&gt;o&amp;&amp;r.push(t)}),this.rowsMapper.removeItems(r)}},registerEvents:function(){var e=this;this.eventManager.addEventListener(document.documentElement,"mousemove",function(t){return e.onMouseMove(t)}),this.eventManager.addEventListener(document.documentElement,"mouseup",function(){return e.onMouseUp()})},unregisterEvents:function(){this.eventManager.clear()},onBeforeColumnSort:function(e,t){var n=E.get(this);n.disallowMoving=void 0!==t},onBeforeOnCellMouseDown:function(e,t,n,o){var r=this.hot.view.wt.wtTable,i=this.hot.selection.selectedHeader.rows,s=this.hot.getSelectedRange(),a=E.get(this);if(!s||!i||a.pressed||0!==e.button)return a.pressed=!1,a.rowsToMove.length=0,void v(this.hot.rootElement,[k,T]);var l=this.guideline.isBuilt()&amp;&amp;!this.guideline.isAppended(),u=this.backlight.isBuilt()&amp;&amp;!this.backlight.isAppended();l&amp;&amp;u&amp;&amp;(this.guideline.appendTo(r.hider),this.backlight.appendTo(r.hider));var c=s,d=c.from,h=c.to,f=Math.min(d.row,h.row),p=Math.max(d.row,h.row);if(t.col&lt;0&amp;&amp;t.row&gt;=f&amp;&amp;t.row&lt;=p){o.row=!0,a.pressed=!0,a.target.eventPageY=e.pageY,a.target.coords=t,a.target.TD=n,a.rowsToMove=this.prepareRowsToMoving();var m=r.holder.scrollLeft+r.getColumnWidth(-1);this.backlight.setPosition(null,m),this.backlight.setSize(r.hider.offsetWidth-m,this.getRowsHeight(f,p+1)),this.backlight.setOffset((this.getRowsHeight(f,t.row)+e.layerY)*-1,null),w(this.hot.rootElement,k),this.refreshPositions()}else v(this.hot.rootElement,x),a.pressed=!1,a.rowsToMove.length=0},onMouseMove:function(e){var t=E.get(this);if(t.pressed){if(e.realTarget===this.backlight.element){var n=this.backlight.getSize().height;this.backlight.setSize(null,0),setTimeout(function(){this.backlight.setPosition(null,n)})}t.target.eventPageY=e.pageY,this.refreshPositions()}},onBeforeOnCellMouseOver:function(e,t,n,o){var r=this.hot.getSelectedRange(),i=E.get(this);r&amp;&amp;i.pressed&amp;&amp;(i.rowsToMove.indexOf(t.row)&gt;-1?v(this.hot.rootElement,T):w(this.hot.rootElement,T),o.row=!0,o.column=!0,o.cell=!0,i.target.coords=t,i.target.TD=n)},onMouseUp:function(){var e=E.get(this),t=e.target.row,n=e.rowsToMove.length;if(e.pressed=!1,e.backlightHeight=0,v(this.hot.rootElement,[k,T,x]),this.hot.selection.selectedHeader.rows&amp;&amp;w(this.hot.rootElement,x),!(n&lt;1||void 0===t||e.rowsToMove.indexOf(t)&gt;-1||e.rowsToMove[n-1]===t-1)){if(this.moveRows(e.rowsToMove,t),this.persistentStateSave(),this.hot.render(),!e.disallowMoving){var o=this.rowsMapper.getIndexByValue(e.rowsToMove[0]),r=this.rowsMapper.getIndexByValue(e.rowsToMove[n-1]);this.changeSelection(o,r)}e.rowsToMove.length=0}},onAfterScrollHorizontally:function(){var e=this.hot.view.wt.wtTable,t=e.getColumnWidth(-1),n=e.holder.scrollLeft,o=t+n;this.backlight.setPosition(null,o),this.backlight.setSize(e.hider.offsetWidth-o)},onAfterCreateRow:function(e,t){this.rowsMapper.shiftItems(e,t)},onBeforeRemoveRow:function(e,t){var n=this;this.removedRows.length=0,e!==!1&amp;&amp;b(e,e+t-1,function(e){n.removedRows.push(n.hot.runHooks("modifyRow",e,n.pluginName))})},onAfterRemoveRow:function(e,t){this.rowsMapper.unshiftItems(this.removedRows)},onAfterLoadData:function(e){this.updateRowsMapper()},onModifyRow:function(e,t){if(t!==this.pluginName){var n=this.rowsMapper.getValueByIndex(e);e=null===n?e:n}return e},onUnmodifyRow:function(e){var t=this.rowsMapper.getIndexByValue(e);return null===t?e:t},onAfterPluginsInitialized:function(){this.updateRowsMapper(),this.initialSettings(),this.backlight.build(),this.guideline.build()},destroy:function(){this.backlight.destroy(),this.guideline.destroy(),$traceurRuntime.superGet(this,H.prototype,"destroy").call(this)}},{},f),_("ManualRowMove",D),p.hooks.register("beforeRowMove"),p.hooks.register("afterRowMove"),p.hooks.register("unmodifyRow")},{"_base.js":62,browser:24,eventManager:42,"helpers/array":43,"helpers/dom/element":47,"helpers/number":52,plugins:61,rowsMapper:103,"ui/backlight":105,"ui/guideline":106}],103:[function(e,t,n){"use strict";Object.defineProperties(n,{RowsMapper:{get:function(){return f}},__esModule:{value:!0}});var o,r,i,s,a,l=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,u=(r=e("mixins/arrayMapper"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).arrayMapper,c=(i=e("helpers/array"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).arrayFilter,d=(s=e("helpers/object"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).mixin,h=(a=e("helpers/number"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).rangeEach,f=function(e){this.manualRowMove=e};$traceurRuntime.createClass(f,{createMap:function(e){var t=this,n=void 0===e?this._arrayMap.length:e;this._arrayMap.length=0,h(n-1,function(e){t._arrayMap[e]=e})},destroy:function(){this._arrayMap=null},moveRow:function(e,t){var n=this._arrayMap[e];this._arrayMap[e]=null,this._arrayMap.splice(t,0,n)},clearNull:function(){this._arrayMap=c(this._arrayMap,function(e){return null!==e})}},{}),d(f,u),l.utils.ManualRowMoveRowsMapper=f},{browser:24,"helpers/array":43,"helpers/number":52,"helpers/object":53,"mixins/arrayMapper":57}],104:[function(e,t,n){"use strict";Object.defineProperties(n,{BaseUI:{get:function(){return a}},__esModule:{value:!0}});var o=0,r=1,i=2,s="px",a=function(e){this.hot=e,this._element=null,this.state=o};$traceurRuntime.createClass(a,{appendTo:function(e){e.appendChild(this._element),this.state=i},build:function(){this._element=document.createElement("div"),this.state=r},destroy:function(){this.isAppended()&amp;&amp;this._element.parentElement.removeChild(this._element),this._element=null,this.state=o},isAppended:function(){return this.state===i},isBuilt:function(){return this.state&gt;=r},setPosition:function(e,t){e&amp;&amp;(this._element.style.top=e+s),t&amp;&amp;(this._element.style.left=t+s)},getPosition:function(){return{top:this._element.style.top?parseInt(this._element.style.top,10):0,left:this._element.style.left?parseInt(this._element.style.left,10):0}},setSize:function(e,t){e&amp;&amp;(this._element.style.width=e+s),t&amp;&amp;(this._element.style.height=t+s)},getSize:function(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}},setOffset:function(e,t){e&amp;&amp;(this._element.style.marginTop=e+s),t&amp;&amp;(this._element.style.marginLeft=t+s)},getOffset:function(){return{top:this._element.style.marginTop?parseInt(this._element.style.marginTop,10):0,left:this._element.style.marginLeft?parseInt(this._element.style.marginLeft,10):0}}},{})},{}],105:[function(e,t,n){"use strict";Object.defineProperties(n,{BacklightUI:{get:function(){return l}},__esModule:{value:!0}});var o,r,i=(o=e("_base"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).BaseUI,s=(r=e("helpers/dom/element"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).addClass,a="ht__manualRowMove--backlight",l=function(e){$traceurRuntime.superConstructor(u).call(this,e)},u=l;$traceurRuntime.createClass(l,{build:function(){$traceurRuntime.superGet(this,u.prototype,"build").call(this),s(this._element,a)}},{},i)},{_base:104,"helpers/dom/element":47}],106:[function(e,t,n){"use strict";Object.defineProperties(n,{GuidelineUI:{get:function(){return l}},__esModule:{value:!0}});var o,r,i=(o=e("_base"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).BaseUI,s=(r=e("helpers/dom/element"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).addClass,a="ht__manualRowMove--guideline",l=function(e){$traceurRuntime.superConstructor(u).call(this,e)},u=l;$traceurRuntime.createClass(l,{build:function(){$traceurRuntime.superGet(this,u.prototype,"build").call(this),s(this._element,a)}},{},i)},{_base:104,"helpers/dom/element":47}],107:[function(e,t,n){"use strict";Object.defineProperties(n,{ManualRowResize:{get:function(){return M}},__esModule:{value:!0}});var o,r,i,s,a,l,u,c,d=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,h=(r=e("_base.js"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).default,f=(i=e("helpers/dom/element"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}),p=f.addClass,m=f.hasClass,g=f.removeClass,w=f.outerWidth,v=(s=e("eventManager"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).eventManager,y=(a=e("helpers/dom/event"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}),b=(y.pageX,y.pageY),C=(l=e("helpers/array"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).arrayEach,_=(u=e("helpers/number"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).rangeEach,R=(c=e("plugins"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}).registerPlugin,M=function(e){$traceurRuntime.superConstructor(S).call(this,e),this.currentTH=null,this.currentRow=null,this.selectedRows=[],this.currentHeight=null,this.newSize=null,this.startY=null,this.startHeight=null,this.startOffset=null,this.handle=document.createElement("DIV"),this.guide=document.createElement("DIV"),this.eventManager=v(this),this.pressed=null,this.dblclick=0,this.autoresizeTimeout=null,this.manualRowHeights=[],p(this.handle,"manualRowResizer"),p(this.guide,"manualRowResizerGuide")},S=M;$traceurRuntime.createClass(M,{isEnabled:function(){return this.hot.getSettings().manualRowResize},enablePlugin:function(){var e=this;if(!this.enabled){this.manualRowHeights=[];var t=this.hot.getSettings().manualRowResize,n=this.loadManualRowHeights();"undefined"!=typeof n?this.manualRowHeights=n:Array.isArray(t)?this.manualRowHeights=t:this.manualRowHeights=[],this.addHook("modifyRowHeight",function(t,n){return e.onModifyRowHeight(t,n)}),d.hooks.register("beforeRowResize"),d.hooks.register("afterRowResize"),this.bindEvents(),$traceurRuntime.superGet(this,S.prototype,"enablePlugin").call(this)}},updatePlugin:function(){var e=this.hot.getSettings().manualRowResize;Array.isArray(e)?this.manualRowHeights=e:e||(this.manualRowHeights=[])},disablePlugin:function(){$traceurRuntime.superGet(this,S.prototype,"disablePlugin").call(this)},saveManualRowHeights:function(){this.hot.runHooks("persistentStateSave","manualRowHeights",this.manualRowHeights)},loadManualRowHeights:function(){var e={};return this.hot.runHooks("persistentStateLoad","manualRowHeights",e),e.value},setupHandlePosition:function(e){var t=this;this.currentTH=e;var n=this.hot.view.wt.wtTable.getCoords(e).row,o=w(this.currentTH);if(n&gt;=0){var r=this.currentTH.getBoundingClientRect();if(this.currentRow=n,this.selectedRows=[],this.hot.selection.isSelected()&amp;&amp;this.hot.selection.selectedHeader.rows){var i=this.hot.getSelectedRange(),s=i.from,a=i.to,l=s.row,u=a.row;l&gt;=u&amp;&amp;(l=a.row,u=s.row),this.currentRow&gt;=l&amp;&amp;this.currentRow&lt;=u?_(l,u,function(e){return t.selectedRows.push(e)}):this.selectedRows.push(this.currentRow)}else this.selectedRows.push(this.currentRow);this.startOffset=r.top-6,this.startHeight=parseInt(r.height,10),this.handle.style.left=r.left+"px",this.handle.style.top=this.startOffset+this.startHeight+"px",this.handle.style.width=o+"px",this.hot.rootElement.appendChild(this.handle)}},refreshHandlePosition:function(){this.handle.style.top=this.startOffset+this.currentHeight+"px"},setupGuidePosition:function(){var e=parseInt(w(this.handle),10),t=parseInt(this.handle.style.left,10)+e,n=parseInt(this.hot.view.maximumVisibleElementWidth(0),10);p(this.handle,"active"),p(this.guide,"active"),this.guide.style.top=this.handle.style.top,this.guide.style.left=t+"px",this.guide.style.width=n-e+"px",this.hot.rootElement.appendChild(this.guide)},refreshGuidePosition:function(){this.guide.style.top=this.handle.style.top},hideHandleAndGuide:function(){g(this.handle,"active"),g(this.guide,"active")},checkIfRowHeader:function(e){if(e!=this.hot.rootElement){var t=e.parentNode;return"TBODY"===t.tagName||this.checkIfRowHeader(t)}return!1},getTHFromTargetElement:function(e){return"TABLE"!=e.tagName?"TH"==e.tagName?e:this.getTHFromTargetElement(e.parentNode):null},onMouseOver:function(e){if(this.checkIfRowHeader(e.target)){var t=this.getTHFromTargetElement(e.target);t&amp;&amp;(this.pressed||this.setupHandlePosition(t))}},afterMouseDownTimeout:function(){var e=this,t=function(){e.hot.forceFullRender=!0,e.hot.view.render(),e.hot.view.wt.wtOverlays.adjustElementsSize(!0)},n=function(n,o){var r=e.hot.runHooks("beforeRowResize",n,e.newSize,!0);void 0!==r&amp;&amp;(e.newSize=r),e.setManualSize(n,e.newSize),o&amp;&amp;t(),e.hot.runHooks("afterRowResize",n,e.newSize,!0)};if(this.dblclick&gt;=2){var o=this.selectedRows.length;o&gt;1?(C(this.selectedRows,function(e){n(e)}),t()):C(this.selectedRows,function(e){n(e,!0)})}this.dblclick=0,this.autoresizeTimeout=null},onMouseDown:function(e){var t=this;m(e.target,"manualRowResizer")&amp;&amp;(this.setupGuidePosition(),this.pressed=this.hot,null==this.autoresizeTimeout&amp;&amp;(this.autoresizeTimeout=setTimeout(function(){return t.afterMouseDownTimeout()},500),this.hot._registerTimeout(this.autoresizeTimeout)),this.dblclick++,this.startY=b(e),this.newSize=this.startHeight)},onMouseMove:function(e){var t=this;this.pressed&amp;&amp;(this.currentHeight=this.startHeight+(b(e)-this.startY),C(this.selectedRows,function(e){t.newSize=t.setManualSize(e,t.currentHeight)}),this.refreshHandlePosition(),this.refreshGuidePosition())},onMouseUp:function(e){var t=this,n=function(){t.hot.forceFullRender=!0,t.hot.view.render(),t.hot.view.wt.wtOverlays.adjustElementsSize(!0)},o=function(e,o){t.hot.runHooks("beforeRowResize",e,t.newSize),o&amp;&amp;n(),t.saveManualRowHeights(),t.hot.runHooks("afterRowResize",e,t.newSize)};if(this.pressed){if(this.hideHandleAndGuide(),this.pressed=!1,this.newSize!=this.startHeight){var r=this.selectedRows.length;r&gt;1?(C(this.selectedRows,function(e){o(e)}),n()):C(this.selectedRows,function(e){o(e,!0)})}this.setupHandlePosition(this.currentTH)}},bindEvents:function(){var e=this;this.eventManager.addEventListener(this.hot.rootElement,"mouseover",function(t){return e.onMouseOver(t)}),this.eventManager.addEventListener(this.hot.rootElement,"mousedown",function(t){return e.onMouseDown(t)}),this.eventManager.addEventListener(window,"mousemove",function(t){return e.onMouseMove(t)}),this.eventManager.addEventListener(window,"mouseup",function(t){return e.onMouseUp(t)})},setManualSize:function(e,t){return e=this.hot.runHooks("modifyRow",e),this.manualRowHeights[e]=t,t},onModifyRowHeight:function(e,t){if(this.enabled){var n=this.hot.getPlugin("autoRowSize"),o=n?n.heights[t]:null;t=this.hot.runHooks("modifyRow",t);var r=this.manualRowHeights[t];if(void 0!==r&amp;&amp;(r===o||r&gt;(e||0)))return r}return e}},{},h),R("manualRowResize",M)},{"_base.js":62,browser:24,eventManager:42,"helpers/array":43,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/number":52,plugins:61}],108:[function(e,t,n){"use strict";function o(){var e=[];return e.getInfo=function(e,t){
for(var n=0,o=this.length;n&lt;o;n++)if(this[n].row&lt;=e&amp;&amp;this[n].row+this[n].rowspan-1&gt;=e&amp;&amp;this[n].col&lt;=t&amp;&amp;this[n].col+this[n].colspan-1&gt;=t)return this[n]},e.setInfo=function(e){for(var t=0,n=this.length;t&lt;n;t++)if(this[t].row===e.row&amp;&amp;this[t].col===e.col)return void(this[t]=e);this.push(e)},e.removeInfo=function(e,t){for(var n=0,o=this.length;n&lt;o;n++)if(this[n].row===e&amp;&amp;this[n].col===t){this.splice(n,1);break}},e}function r(e){if(this.mergedCellInfoCollection=new o,Array.isArray(e))for(var t=0,n=e.length;t&lt;n;t++)this.mergedCellInfoCollection.setInfo(e[t])}function i(e,t){var n=this.getSettings().mergeCells;if(n&amp;&amp;!this.selection.isMultiple()){var o=this.mergeCells.mergedCellInfoCollection.getInfo(e[0],e[1]);o&amp;&amp;(e[0]=o.row,e[1]=o.col,e[2]=o.row+o.rowspan-1,e[3]=o.col+o.colspan-1)}}function s(e,t){this.mergeCells&amp;&amp;this.mergeCells.shiftCollection("right",e,t)}function a(e,t){this.mergeCells&amp;&amp;this.mergeCells.shiftCollection("left",e,t)}function l(e,t){this.mergeCells&amp;&amp;this.mergeCells.shiftCollection("down",e,t)}function u(e,t){this.mergeCells&amp;&amp;this.mergeCells.shiftCollection("up",e,t)}Object.defineProperties(n,{MergeCells:{get:function(){return r}},__esModule:{value:!0}});var c,d,h,f,p,m,g=(c=e("browser"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}).default,w=((d=e("plugins"),d&amp;&amp;d.__esModule&amp;&amp;d||{default:d}).registerPlugin,(h=e("helpers/dom/event"),h&amp;&amp;h.__esModule&amp;&amp;h||{default:h}).stopImmediatePropagation),v=(f=e("3rdparty/walkontable/src/cell/coords"),f&amp;&amp;f.__esModule&amp;&amp;f||{default:f}).WalkontableCellCoords,y=(p=e("3rdparty/walkontable/src/cell/range"),p&amp;&amp;p.__esModule&amp;&amp;p||{default:p}).WalkontableCellRange,b=(m=e("3rdparty/walkontable/src/table"),m&amp;&amp;m.__esModule&amp;&amp;m||{default:m}).WalkontableTable;r.prototype.canMergeRange=function(e){return!e.isSingle()},r.prototype.mergeRange=function(e){if(this.canMergeRange(e)){var t=e.getTopLeftCorner(),n=e.getBottomRightCorner(),o={};o.row=t.row,o.col=t.col,o.rowspan=n.row-t.row+1,o.colspan=n.col-t.col+1,this.mergedCellInfoCollection.setInfo(o)}},r.prototype.mergeOrUnmergeSelection=function(e){var t=this.mergedCellInfoCollection.getInfo(e.from.row,e.from.col);t?this.unmergeSelection(e.from):this.mergeSelection(e)},r.prototype.mergeSelection=function(e){this.mergeRange(e)},r.prototype.unmergeSelection=function(e){var t=this.mergedCellInfoCollection.getInfo(e.row,e.col);this.mergedCellInfoCollection.removeInfo(t.row,t.col)},r.prototype.applySpanProperties=function(e,t,n){var o=this.mergedCellInfoCollection.getInfo(t,n);o?o.row===t&amp;&amp;o.col===n?(e.setAttribute("rowspan",o.rowspan),e.setAttribute("colspan",o.colspan)):(e.removeAttribute("rowspan"),e.removeAttribute("colspan"),e.style.display="none"):(e.removeAttribute("rowspan"),e.removeAttribute("colspan"))},r.prototype.modifyTransform=function(e,t,n){var o=function(e,t){return t.row&gt;=e.row&amp;&amp;t.row&lt;=e.row+e.rowspan-1},r=function(e,t){return t.col&gt;=e.col&amp;&amp;t.col&lt;=e.col+e.colspan-1},i=function(e){return new v(t.to.row+e.row,t.to.col+e.col)},s={row:n.row,col:n.col};if("modifyTransformStart"==e){this.lastDesiredCoords||(this.lastDesiredCoords=new v(null,null));for(var a,l=new v(t.highlight.row,t.highlight.col),u=this.mergedCellInfoCollection.getInfo(l.row,l.col),c=0,d=this.mergedCellInfoCollection.length;c&lt;d;c++){var h=this.mergedCellInfoCollection[c];if(h=new v(h.row+h.rowspan-1,h.col+h.colspan-1),t.includes(h)){a=!0;break}}if(u){var f=new v(u.row,u.col),p=new v(u.row+u.rowspan-1,u.col+u.colspan-1),m=new y(f,f,p);m.includes(this.lastDesiredCoords)||(this.lastDesiredCoords=new v(null,null)),s.row=this.lastDesiredCoords.row?this.lastDesiredCoords.row-l.row:s.row,s.col=this.lastDesiredCoords.col?this.lastDesiredCoords.col-l.col:s.col,n.row&gt;0?s.row=u.row+u.rowspan-1-l.row+n.row:n.row&lt;0&amp;&amp;(s.row=l.row-u.row+n.row),n.col&gt;0?s.col=u.col+u.colspan-1-l.col+n.col:n.col&lt;0&amp;&amp;(s.col=l.col-u.col+n.col)}var g=new v(t.highlight.row+s.row,t.highlight.col+s.col),w=this.mergedCellInfoCollection.getInfo(g.row,g.col);w&amp;&amp;(this.lastDesiredCoords=g,s={row:w.row-l.row,col:w.col-l.col})}else if("modifyTransformEnd"==e)for(var c=0,d=this.mergedCellInfoCollection.length;c&lt;d;c++){var b=this.mergedCellInfoCollection[c],f=new v(b.row,b.col),p=new v(b.row+b.rowspan-1,b.col+b.colspan-1),C=new y(f,f,p),_=t.getBordersSharedWith(C);if(C.isEqual(t))t.setDirection("NW-SE");else if(_.length&gt;0){var R=t.highlight.isEqual(C.from);_.indexOf("top")&gt;-1?t.to.isSouthEastOf(C.from)&amp;&amp;R?t.setDirection("NW-SE"):t.to.isSouthWestOf(C.from)&amp;&amp;R&amp;&amp;t.setDirection("NE-SW"):_.indexOf("bottom")&gt;-1&amp;&amp;(t.to.isNorthEastOf(C.from)&amp;&amp;R?t.setDirection("SW-NE"):t.to.isNorthWestOf(C.from)&amp;&amp;R&amp;&amp;t.setDirection("SE-NW"))}var g=i(s),M=o(b,g),S=r(b,g);t.includesRange(C)&amp;&amp;(C.includes(g)||M||S)&amp;&amp;(M&amp;&amp;(s.row&lt;0?s.row-=b.rowspan-1:s.row&gt;0&amp;&amp;(s.row+=b.rowspan-1)),S&amp;&amp;(s.col&lt;0?s.col-=b.colspan-1:s.col&gt;0&amp;&amp;(s.col+=b.colspan-1)))}0!==s.row&amp;&amp;(n.row=s.row),0!==s.col&amp;&amp;(n.col=s.col)},r.prototype.shiftCollection=function(e,t,n){var o=[0,0];switch(e){case"right":o[0]+=1;break;case"left":o[0]-=1;break;case"down":o[1]+=1;break;case"up":o[1]-=1}for(var r=0;r&lt;this.mergedCellInfoCollection.length;r++){var i=this.mergedCellInfoCollection[r];"right"===e||"left"===e?t&lt;=i.col&amp;&amp;(i.col+=o[0]):t&lt;=i.row&amp;&amp;(i.row+=o[1])}};var C=function(){var e=this,t=e.getSettings().mergeCells;t&amp;&amp;(e.mergeCells||(e.mergeCells=new r(t)))},_=function(){var e=this;e.mergeCells&amp;&amp;(e.view.wt.wtTable.getCell=function(t){if(e.getSettings().mergeCells){var n=e.mergeCells.mergedCellInfoCollection.getInfo(t.row,t.col);n&amp;&amp;(t=n)}return b.prototype.getCell.call(this,t)})},R=function(){var e=this,t=e.getSettings().mergeCells;if(t)if(e.mergeCells){if(e.mergeCells.mergedCellInfoCollection=new o,Array.isArray(t))for(var n=0,i=t.length;n&lt;i;n++)e.mergeCells.mergedCellInfoCollection.setInfo(t[n])}else e.mergeCells=new r(t);else e.mergeCells&amp;&amp;(e.mergeCells.mergedCellInfoCollection=new o)},M=function(e){if(this.mergeCells){var t=(e.ctrlKey||e.metaKey)&amp;&amp;!e.altKey;t&amp;&amp;77===e.keyCode&amp;&amp;(this.mergeCells.mergeOrUnmergeSelection(this.getSelectedRange()),this.render(),w(e))}},S=function(e){this.getSettings().mergeCells&amp;&amp;(e.items.push(g.plugins.ContextMenu.SEPARATOR),e.items.push({key:"mergeCells",name:function(){var e=this.getSelected(),t=this.mergeCells.mergedCellInfoCollection.getInfo(e[0],e[1]);return t?"Unmerge cells":"Merge cells"},callback:function(){this.mergeCells.mergeOrUnmergeSelection(this.getSelectedRange()),this.render()},disabled:function(){return this.selection.selectedHeader.corner}}))},E=function(e,t,n,o,r,i){this.mergeCells&amp;&amp;this.mergeCells.applySpanProperties(e,t,n)},O=function(e){return function(t){var n=this.getSettings().mergeCells;if(n){var o=this.getSelectedRange();if(this.mergeCells.modifyTransform(e,o,t),"modifyTransformEnd"===e){var r=this.countRows(),i=this.countCols();o.from.row&lt;0?o.from.row=0:o.from.row&gt;0&amp;&amp;o.from.row&gt;=r&amp;&amp;(o.from.row=o.from-1),o.from.col&lt;0?o.from.col=0:o.from.col&gt;0&amp;&amp;o.from.col&gt;=i&amp;&amp;(o.from.col=i-1)}}}},T=function(e){this.lastDesiredCoords=null;var t=this.getSettings().mergeCells;if(t){var n=this.getSelectedRange();n.highlight=new v(n.highlight.row,n.highlight.col),n.to=e;var o=!1;do{o=!1;for(var r=0,i=this.mergeCells.mergedCellInfoCollection.length;r&lt;i;r++){var s=this.mergeCells.mergedCellInfoCollection[r],a=new v(s.row,s.col),l=new v(s.row+s.rowspan-1,s.col+s.colspan-1),u=new y(a,a,l);n.expandByRange(u)&amp;&amp;(e.row=n.to.row,e.col=n.to.col,o=!0)}}while(o)}},k=function(e,t){if(t&amp;&amp;"area"==t){var n=this.getSettings().mergeCells;if(n)for(var o=this.getSelectedRange(),r=new y(o.from,o.from,o.from),i=new y(o.to,o.to,o.to),s=0,a=this.mergeCells.mergedCellInfoCollection.length;s&lt;a;s++){var l=this.mergeCells.mergedCellInfoCollection[s],u=new v(l.row,l.col),c=new v(l.row+l.rowspan-1,l.col+l.colspan-1),d=new y(u,u,c);r.expandByRange(d)&amp;&amp;(e[0]=r.from.row,e[1]=r.from.col),i.expandByRange(d)&amp;&amp;(e[2]=i.from.row,e[3]=i.from.col)}}},x=function(e,t,n){var o=this.getSettings().mergeCells;if(o){var r=this.mergeCells.mergedCellInfoCollection.getInfo(e,t);!r||r.row==e&amp;&amp;r.col==t||(n.copyable=!1)}},D=function(e){var t=this.getSettings().mergeCells;if(t)for(var n,o=this.countCols(),r=0;r&lt;o;r++){if(n=this.mergeCells.mergedCellInfoCollection.getInfo(e.startRow,r),n&amp;&amp;n.row&lt;e.startRow)return e.startRow=n.row,D.call(this,e);if(n=this.mergeCells.mergedCellInfoCollection.getInfo(e.endRow,r)){var i=n.row+n.rowspan-1;if(i&gt;e.endRow)return e.endRow=i,D.call(this,e)}}},H=function(e){var t=this.getSettings().mergeCells;if(t)for(var n,o=this.countRows(),r=0;r&lt;o;r++){if(n=this.mergeCells.mergedCellInfoCollection.getInfo(r,e.startColumn),n&amp;&amp;n.col&lt;e.startColumn)return e.startColumn=n.col,H.call(this,e);if(n=this.mergeCells.mergedCellInfoCollection.getInfo(r,e.endColumn)){var i=n.col+n.colspan-1;if(i&gt;e.endColumn)return e.endColumn=i,H.call(this,e)}}},A=function(e){if(e&amp;&amp;this.mergeCells){var t=this.mergeCells.mergedCellInfoCollection,n=this.getSelectedRange();for(var o in t)if(n.highlight.row==t[o].row&amp;&amp;n.highlight.col==t[o].col&amp;&amp;n.to.row==t[o].row+t[o].rowspan-1&amp;&amp;n.to.col==t[o].col+t[o].colspan-1)return!1}return e};g.hooks.add("beforeInit",C),g.hooks.add("afterInit",_),g.hooks.add("afterUpdateSettings",R),g.hooks.add("beforeKeyDown",M),g.hooks.add("modifyTransformStart",O("modifyTransformStart")),g.hooks.add("modifyTransformEnd",O("modifyTransformEnd")),g.hooks.add("beforeSetRangeEnd",T),g.hooks.add("beforeDrawBorders",k),g.hooks.add("afterIsMultipleSelection",A),g.hooks.add("afterRenderer",E),g.hooks.add("afterContextMenuDefaultOptions",S),g.hooks.add("afterGetCellMeta",x),g.hooks.add("afterViewportRowCalculatorOverride",D),g.hooks.add("afterViewportColumnCalculatorOverride",H),g.hooks.add("modifyAutofillRange",i),g.hooks.add("afterCreateCol",s),g.hooks.add("afterRemoveCol",a),g.hooks.add("afterCreateRow",l),g.hooks.add("afterRemoveRow",u),g.MergeCells=r},{"3rdparty/walkontable/src/cell/coords":6,"3rdparty/walkontable/src/cell/range":7,"3rdparty/walkontable/src/table":21,browser:24,"helpers/dom/event":48,plugins:61}],109:[function(e,t,n){"use strict";Object.defineProperties(n,{MultipleSelectionHandles:{get:function(){return w}},__esModule:{value:!0}});var o,r,i,s,a,l,u=((o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,r=e("helpers/dom/element"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}),c=u.getWindowScrollTop,d=u.hasClass,h=u.getWindowScrollLeft,f=(i=e("helpers/browser"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).isMobileBrowser,p=(s=e("_base"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).default,m=(a=e("eventManager"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).EventManager,g=(l=e("plugins"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).registerPlugin,w=function(e){$traceurRuntime.superConstructor(v).call(this,e),this.dragged=[],this.eventManager=null,this.lastSetCell=null},v=w;$traceurRuntime.createClass(w,{isEnabled:function(){return f()},enablePlugin:function(){this.enabled||(this.eventManager||(this.eventManager=new m(this)),this.registerListeners(),$traceurRuntime.superGet(this,v.prototype,"enablePlugin").call(this))},registerListeners:function(){function e(e){if(1===t.dragged.length)return t.dragged.splice(0,t.dragged.length),!0;var n=t.dragged.indexOf(e);return n!=-1&amp;&amp;void(0===n?t.dragged=t.dragged.slice(0,1):1==n&amp;&amp;(t.dragged=t.dragged.slice(-1)))}var t=this;this.eventManager.addEventListener(this.hot.rootElement,"touchstart",function(e){var n;return d(e.target,"topLeftSelectionHandle-HitArea")?(n=t.hot.getSelectedRange(),t.dragged.push("topLeft"),t.touchStartRange={width:n.getWidth(),height:n.getHeight(),direction:n.getDirection()},e.preventDefault(),!1):d(e.target,"bottomRightSelectionHandle-HitArea")?(n=t.hot.getSelectedRange(),t.dragged.push("bottomRight"),t.touchStartRange={width:n.getWidth(),height:n.getHeight(),direction:n.getDirection()},e.preventDefault(),!1):void 0}),this.eventManager.addEventListener(this.hot.rootElement,"touchend",function(n){return d(n.target,"topLeftSelectionHandle-HitArea")?(e.call(t,"topLeft"),t.touchStartRange=void 0,n.preventDefault(),!1):d(n.target,"bottomRightSelectionHandle-HitArea")?(e.call(t,"bottomRight"),t.touchStartRange=void 0,n.preventDefault(),!1):void 0}),this.eventManager.addEventListener(this.hot.rootElement,"touchmove",function(e){var n,o,r,i,s,a,l,u=c(),d=h();0!==t.dragged.length&amp;&amp;(n=document.elementFromPoint(e.touches[0].screenX-d,e.touches[0].screenY-u),n&amp;&amp;n!==t.lastSetCell&amp;&amp;("TD"!=n.nodeName&amp;&amp;"TH"!=n.nodeName||(o=t.hot.getCoords(n),o.col==-1&amp;&amp;(o.col=0),r=t.hot.getSelectedRange(),i=r.getWidth(),s=r.getHeight(),a=r.getDirection(),1==i&amp;&amp;1==s&amp;&amp;t.hot.selection.setRangeEnd(o),l=t.getCurrentRangeCoords(r,o,t.touchStartRange.direction,a,t.dragged[0]),null!==l.start&amp;&amp;t.hot.selection.setRangeStart(l.start),t.hot.selection.setRangeEnd(l.end),t.lastSetCell=n),e.preventDefault()))})},getCurrentRangeCoords:function(e,t,n,o,r){var i=e.getTopLeftCorner(),s=e.getBottomRightCorner(),a=e.getBottomLeftCorner(),l=e.getTopRightCorner(),u={start:null,end:null};switch(n){case"NE-SW":switch(o){case"NE-SW":case"NW-SE":u="topLeft"==r?{start:new WalkontableCellCoords(t.row,e.highlight.col),end:new WalkontableCellCoords(a.row,t.col)}:{start:new WalkontableCellCoords(e.highlight.row,t.col),end:new WalkontableCellCoords(t.row,i.col)};break;case"SE-NW":"bottomRight"==r&amp;&amp;(u={start:new WalkontableCellCoords(s.row,t.col),end:new WalkontableCellCoords(t.row,i.col)})}break;case"NW-SE":switch(o){case"NE-SW":"topLeft"==r?u={start:t,end:a}:u.end=t;break;case"NW-SE":"topLeft"==r?u={start:t,end:s}:u.end=t;break;case"SE-NW":"topLeft"==r?u={start:t,end:i}:u.end=t;break;case"SW-NE":"topLeft"==r?u={start:t,end:l}:u.end=t}break;case"SW-NE":switch(o){case"NW-SE":u="bottomRight"==r?{start:new WalkontableCellCoords(t.row,i.col),end:new WalkontableCellCoords(a.row,t.col)}:{start:new WalkontableCellCoords(i.row,t.col),end:new WalkontableCellCoords(t.row,s.col)};break;case"SW-NE":u="topLeft"==r?{start:new WalkontableCellCoords(e.highlight.row,t.col),end:new WalkontableCellCoords(t.row,s.col)}:{start:new WalkontableCellCoords(t.row,i.col),end:new WalkontableCellCoords(i.row,t.col)};break;case"SE-NW":"bottomRight"==r?u={start:new WalkontableCellCoords(t.row,l.col),end:new WalkontableCellCoords(i.row,t.col)}:"topLeft"==r&amp;&amp;(u={start:a,end:t})}break;case"SE-NW":switch(o){case"NW-SE":case"NE-SW":case"SW-NE":"topLeft"==r&amp;&amp;(u.end=t);break;case"SE-NW":"topLeft"==r?u.end=t:u={start:t,end:i}}}return u},isDragged:function(){return this.dragged.length&gt;0}},{},p),g("multipleSelectionHandles",w)},{_base:62,browser:24,eventManager:42,"helpers/browser":44,"helpers/dom/element":47,plugins:61}],110:[function(e,t,n){"use strict";Object.defineProperties(n,{DataObserver:{get:function(){return d}},__esModule:{value:!0}});var o,r,i,s,a=(o=e("jsonpatch"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,l=(r=e("../../mixins/localHooks"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).localHooks,u=(i=e("../../helpers/object"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).mixin,c=(s=e("utils"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).cleanPatches,d=function(e){this.observedData=null,this.observer=null,this.paused=!1,this.setObservedData(e)};$traceurRuntime.createClass(d,{setObservedData:function(e){var t=this;this.observer&amp;&amp;a.unobserve(this.observedData,this.observer),this.observedData=e,this.observer=a.observe(this.observedData,function(e){return t.onChange(e)})},isPaused:function(){return this.paused},pause:function(){this.paused=!0},resume:function(){this.paused=!1},onChange:function(e){this.runLocalHooks("change",c(e))},destroy:function(){a.unobserve(this.observedData,this.observer),this.observedData=null,this.observer=null}},{}),u(d,l)},{"../../helpers/object":53,"../../mixins/localHooks":58,jsonpatch:"jsonpatch",utils:112}],111:[function(e,t,n){"use strict";Object.defineProperties(n,{ObserveChanges:{get:function(){return p}},__esModule:{value:!0}});var o,r,i,s,a,l,u=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,c=(r=e("_base"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).default,d=((i=e("jsonpatch"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).default,(s=e("dataObserver"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).DataObserver),h=(a=e("helpers/array"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).arrayEach,f=(l=e("plugins"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).registerPlugin;u.hooks.register("afterChangesObserved");var p=function(e){$traceurRuntime.superConstructor(m).call(this,e),this.observer=null},m=p;$traceurRuntime.createClass(p,{isEnabled:function(){return this.hot.getSettings().observeChanges},enablePlugin:function(){var e=this;this.enabled||(this.observer||(this.observer=new d(this.hot.getSourceData()),this._exposePublicApi()),this.observer.addLocalHook("change",function(t){return e.onDataChange(t)}),this.addHook("afterCreateRow",function(){return e.onAfterTableAlter()}),this.addHook("afterRemoveRow",function(){return e.onAfterTableAlter()}),this.addHook("afterCreateCol",function(){return e.onAfterTableAlter()}),this.addHook("afterRemoveCol",function(){return e.onAfterTableAlter()}),this.addHook("afterChange",function(t,n){return e.onAfterTableAlter(n)}),this.addHook("afterLoadData",function(t){return e.onAfterLoadData(t)}),$traceurRuntime.superGet(this,m.prototype,"enablePlugin").call(this))},disablePlugin:function(){this.observer&amp;&amp;(this.observer.destroy(),this.observer=null,this._deletePublicApi()),$traceurRuntime.superGet(this,m.prototype,"disablePlugin").call(this)},onDataChange:function(e){var t=this;if(!this.observer.isPaused()){var n=this.pluginName+".change",o={add:function(e){isNaN(e.col)?t.hot.runHooks("afterCreateRow",e.row,1,n):t.hot.runHooks("afterCreateCol",e.col,1,n)},remove:function(e){isNaN(e.col)?t.hot.runHooks("afterRemoveRow",e.row,1,n):t.hot.runHooks("afterRemoveCol",e.col,1,n)},replace:function(e){t.hot.runHooks("afterChange",[e.row,e.col,null,e.value],n)}};h(e,function(e){o[e.op]&amp;&amp;o[e.op](e)}),this.hot.render()}this.hot.runHooks("afterChangesObserved")},onAfterTableAlter:function(e){var t=this;"loadData"!==e&amp;&amp;(this.observer.pause(),this.hot.addHookOnce("afterChangesObserved",function(){return t.observer.resume()}))},onAfterLoadData:function(e){e||this.observer.setObservedData(this.hot.getSourceData())},destroy:function(){this.observer&amp;&amp;(this.observer.destroy(),this._deletePublicApi()),$traceurRuntime.superGet(this,m.prototype,"destroy").call(this)},_exposePublicApi:function(){var e=this,t=this.hot;t.pauseObservingChanges=function(){return e.observer.pause()},t.resumeObservingChanges=function(){return e.observer.resume()},t.isPausedObservingChanges=function(){return e.observer.isPaused()}},_deletePublicApi:function(){var e=this.hot;delete e.pauseObservingChanges,delete e.resumeObservingChanges,delete e.isPausedObservingChanges}},{},c),f("observeChanges",p)},{_base:62,browser:24,dataObserver:110,"helpers/array":43,jsonpatch:"jsonpatch",plugins:61}],112:[function(e,t,n){"use strict";function o(e){var t=[];return e=a(e,function(e){return!/[\/]length/gi.test(e.path)&amp;&amp;!!r(e.path)}),e=l(e,function(e){var t=r(e.path);return e.row=t.row,e.col=t.col,e}),e=a(e,function(e){if(["add","remove"].indexOf(e.op)!==-1&amp;&amp;!isNaN(e.col)){if(t.indexOf(e.col)!==-1)return!1;t.push(e.col)}return!0}),t.length=0,e}function r(e){var t=e.match(/^\/(\d+)\/?(.*)?$/);if(!t)return null;var n=t,o=n[1],r=n[2];return{row:parseInt(o,10),col:/^\d*$/.test(r)?parseInt(r,10):r}}Object.defineProperties(n,{cleanPatches:{get:function(){return o}},parsePath:{get:function(){return r}},__esModule:{value:!0}});var i,s=(i=e("../../helpers/array"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}),a=s.arrayFilter,l=s.arrayMap},{"../../helpers/array":43}],113:[function(e,t,n){"use strict";function o(e){var t,n=function(){window.localStorage[e+"__persistentStateKeys"]=JSON.stringify(t)},o=function(){var n=window.localStorage[e+"__persistentStateKeys"],o="string"==typeof n?JSON.parse(n):void 0;t=o?o:[]},r=function(){t=[],n()};o(),this.saveValue=function(o,r){window.localStorage[e+"_"+o]=JSON.stringify(r),t.indexOf(o)==-1&amp;&amp;(t.push(o),n())},this.loadValue=function(t,n){t="undefined"==typeof t?n:t;var o=window.localStorage[e+"_"+t];return"undefined"==typeof o?void 0:JSON.parse(o)},this.reset=function(t){window.localStorage.removeItem(e+"_"+t)},this.resetAll=function(){for(var n=0;n&lt;t.length;n++)window.localStorage.removeItem(e+"_"+t[n]);r()}}function r(){function e(){var e=this;for(var t in r)r.hasOwnProperty(t)&amp;&amp;e.addHook(t,r[t])}function t(){var e=this;for(var t in r)r.hasOwnProperty(t)&amp;&amp;e.removeHook(t,r[t])}var n=this;this.init=function(){var r=this,i=r.getSettings().persistentState;return n.enabled=!!i,n.enabled?(r.storage||(r.storage=new o(r.rootElement.id)),r.resetState=n.resetValue,void e.call(r)):void t.call(r)},this.saveValue=function(e,t){var n=this;n.storage.saveValue(e,t)},this.loadValue=function(e,t){var n=this;t.value=n.storage.loadValue(e)},this.resetValue=function(e){var t=this;"undefined"==typeof e?t.storage.resetAll():t.storage.reset(e)};var r={persistentStateSave:n.saveValue,persistentStateLoad:n.loadValue,persistentStateReset:n.resetValue};for(var i in r)r.hasOwnProperty(i)&amp;&amp;a.hooks.register(i)}Object.defineProperties(n,{HandsontablePersistentState:{get:function(){return r}},__esModule:{value:!0}});var i,s,a=(i=e("browser"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).default,l=((s=e("plugins"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).registerPlugin,new r);a.hooks.add("beforeInit",l.init),a.hooks.add("afterUpdateSettings",l.init)},{browser:24,plugins:61}],114:[function(e,t,n){"use strict";function o(){var e=this,t=!!e.getSettings().search;t?e.search=new a.Search(e):delete e.search}var r,i,s,a=(r=e("browser"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).default,l=(i=e("helpers/dom/element"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}),u=l.addClass,c=l.removeClass,d=(s=e("renderers"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}),h=d.registerRenderer,f=d.getRenderer;a.Search=function(e){this.query=function(t,n,o){var r=e.countRows(),i=e.countCols(),s=[];n||(n=a.Search.global.getDefaultCallback()),o||(o=a.Search.global.getDefaultQueryMethod());for(var l=0;l&lt;r;l++)for(var u=0;u&lt;i;u++){var c=e.getDataAtCell(l,u),d=e.getCellMeta(l,u),h=d.search.callback||n,f=d.search.queryMethod||o,p=f(t,c);if(p){var m={row:l,col:u,data:c};s.push(m)}h&amp;&amp;h(e,l,u,c,p)}return s}},a.Search.DEFAULT_CALLBACK=function(e,t,n,o,r){e.getCellMeta(t,n).isSearchResult=r},a.Search.DEFAULT_QUERY_METHOD=function(e,t){return!("undefined"==typeof e||null==e||!e.toLowerCase||0===e.length)&amp;&amp;("undefined"!=typeof t&amp;&amp;null!=t&amp;&amp;t.toString().toLowerCase().indexOf(e.toLowerCase())!=-1)},a.Search.DEFAULT_SEARCH_RESULT_CLASS="htSearchResult",a.Search.global=function(){var e=a.Search.DEFAULT_CALLBACK,t=a.Search.DEFAULT_QUERY_METHOD,n=a.Search.DEFAULT_SEARCH_RESULT_CLASS;return{getDefaultCallback:function(){return e},setDefaultCallback:function(t){e=t},getDefaultQueryMethod:function(){return t},setDefaultQueryMethod:function(e){t=e},getDefaultSearchResultClass:function(){return n},setDefaultSearchResultClass:function(e){n=e}}}(),a.SearchCellDecorator=function(e,t,n,o,r,i,s){var l=null!==s.search&amp;&amp;"object"==typeof s.search&amp;&amp;s.search.searchResultClass||a.Search.global.getDefaultSearchResultClass();s.isSearchResult?u(t,l):c(t,l)};var p=f("base");h("base",function(e,t,n,o,r,i,s){p.apply(this,arguments),a.SearchCellDecorator.apply(this,arguments)}),a.hooks.add("afterInit",o),a.hooks.add("afterUpdateSettings",o)},{browser:24,"helpers/dom/element":47,renderers:117}],115:[function(e,t,n){"use strict";Object.defineProperties(n,{TouchScroll:{get:function(){return w}},__esModule:{value:!0}});var o,r,i,s,a,l,u=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,c=(r=e("helpers/dom/element"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}),d=c.addClass,h=c.removeClass,f=(i=e("helpers/array"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).arrayEach,p=(s=e("_base"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).default,m=(a=e("plugins"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).registerPlugin,g=(l=e("helpers/feature"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).isTouchSupported,w=function(e){$traceurRuntime.superConstructor(v).call(this,e),this.scrollbars=[],this.clones=[],this.lockedCollection=!1},v=w;$traceurRuntime.createClass(w,{isEnabled:function(){return g()},enablePlugin:function(){var e=this;this.enabled||(this.addHook("afterRender",function(){return e.onAfterRender()}),this.registerEvents(),$traceurRuntime.superGet(this,v.prototype,"enablePlugin").call(this))},updatePlugin:function(){this.lockedCollection=!1,$traceurRuntime.superGet(this,v.prototype,"updatePlugin").call(this)},disablePlugin:function(){$traceurRuntime.superGet(this,v.prototype,"disablePlugin").call(this)},registerEvents:function(){var e=this;this.addHook("beforeTouchScroll",function(){return e.onBeforeTouchScroll()}),this.addHook("afterMomentumScroll",function(){return e.onAfterMomentumScroll()})},onAfterRender:function(){if(!this.lockedCollection){var e=this.hot.view.wt.wtOverlays,t=e.topOverlay,n=e.bottomOverlay,o=e.leftOverlay,r=e.topLeftCornerOverlay,i=e.bottomLeftCornerOverlay;this.lockedCollection=!0,this.scrollbars.length=0,this.scrollbars.push(t),n.clone&amp;&amp;this.scrollbars.push(n),this.scrollbars.push(o),r&amp;&amp;this.scrollbars.push(r),i&amp;&amp;i.clone&amp;&amp;this.scrollbars.push(i),this.clones.length=0,t.needFullRender&amp;&amp;this.clones.push(t.clone.wtTable.holder.parentNode),n.needFullRender&amp;&amp;this.clones.push(n.clone.wtTable.holder.parentNode),o.needFullRender&amp;&amp;this.clones.push(o.clone.wtTable.holder.parentNode),r&amp;&amp;this.clones.push(r.clone.wtTable.holder.parentNode),i&amp;&amp;i.clone&amp;&amp;this.clones.push(i.clone.wtTable.holder.parentNode)}},onBeforeTouchScroll:function(){u.freezeOverlays=!0,f(this.clones,function(e){d(e,"hide-tween")})},onAfterMomentumScroll:function(){var e=this;u.freezeOverlays=!1,f(this.clones,function(e){h(e,"hide-tween"),d(e,"show-tween")}),setTimeout(function(){f(e.clones,function(e){h(e,"show-tween")})},400),f(this.scrollbars,function(e){e.refresh(),e.resetFixedPosition()}),this.hot.view.wt.wtOverlays.syncScrollWithMaster()}},{},p),m("touchScroll",w)},{_base:62,browser:24,"helpers/array":43,"helpers/dom/element":47,"helpers/feature":49,plugins:61}],116:[function(e,t,n){"use strict";function o(){var e=this,t="undefined"==typeof e.getSettings().undo||e.getSettings().undo;t?e.undoRedo||(e.undoRedo=new f.UndoRedo(e),s(e),e.addHook("beforeKeyDown",r),e.addHook("afterChange",i)):e.undoRedo&amp;&amp;(delete e.undoRedo,a(e),e.removeHook("beforeKeyDown",r),e.removeHook("afterChange",i))}function r(e){var t=this,n=(e.ctrlKey||e.metaKey)&amp;&amp;!e.altKey;n&amp;&amp;(89===e.keyCode||e.shiftKey&amp;&amp;90===e.keyCode?(t.undoRedo.redo(),y(e)):90===e.keyCode&amp;&amp;(t.undoRedo.undo(),y(e)))}function i(e,t){var n=this;if("loadData"===t)return n.undoRedo.clear()}function s(e){e.undo=function(){return e.undoRedo.undo()},e.redo=function(){return e.undoRedo.redo()},e.isUndoAvailable=function(){return e.undoRedo.isUndoAvailable()},e.isRedoAvailable=function(){return e.undoRedo.isRedoAvailable()},e.clearUndo=function(){return e.undoRedo.clear()}}function a(e){delete e.undo,delete e.redo,delete e.isUndoAvailable,delete e.isRedoAvailable,delete e.clearUndo}var l,u,c,d,h,f=(l=e("browser"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).default,p=(u=e("helpers/array"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).arrayMap,m=(c=e("helpers/number"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}).rangeEach,g=(d=e("helpers/object"),d&amp;&amp;d.__esModule&amp;&amp;d||{default:d}),w=g.inherit,v=g.deepClone,y=(h=e("helpers/dom/event"),h&amp;&amp;h.__esModule&amp;&amp;h||{default:h}).stopImmediatePropagation;f.UndoRedo=function(e){var t=this;this.instance=e,this.doneActions=[],this.undoneActions=[],this.ignoreNewActions=!1,e.addHook("afterChange",function(e,n){e&amp;&amp;"UndoRedo.undo"!==n&amp;&amp;"UndoRedo.redo"!==n&amp;&amp;t.done(new f.UndoRedo.ChangeAction(e))}),e.addHook("afterCreateRow",function(e,n,o){if("UndoRedo.undo"!==o&amp;&amp;"UndoRedo.undo"!==o&amp;&amp;"auto"!==o){var r=new f.UndoRedo.CreateRowAction(e,n);t.done(r)}}),e.addHook("beforeRemoveRow",function(e,n,o,r){if("UndoRedo.undo"!==r&amp;&amp;"UndoRedo.redo"!==r&amp;&amp;"auto"!==r){var i=t.instance.getSourceDataArray();e=(i.length+e)%i.length;var s=v(i.slice(e,e+n));t.done(new f.UndoRedo.RemoveRowAction(e,s))}}),e.addHook("afterCreateCol",function(e,n,o){"UndoRedo.undo"!==o&amp;&amp;"UndoRedo.redo"!==o&amp;&amp;"auto"!==o&amp;&amp;t.done(new f.UndoRedo.CreateColumnAction(e,n))}),e.addHook("beforeRemoveCol",function(n,o,r,i){if("UndoRedo.undo"!==i&amp;&amp;"UndoRedo.redo"!==i&amp;&amp;"auto"!==i){var s=t.instance.getSourceDataArray();n=(t.instance.countCols()+n)%t.instance.countCols();var a=[],l=[],u=[];m(s.length-1,function(t){var r=[],i=s[t];m(n,n+(o-1),function(t){r.push(i[e.runHooks("modifyCol",t)])}),a.push(r)}),m(o-1,function(t){u.push(e.runHooks("modifyCol",n+t))}),Array.isArray(e.getSettings().colHeaders)&amp;&amp;m(o-1,function(t){l.push(e.getSettings().colHeaders[e.runHooks("modifyCol",n+t)]||null)});var c=t.instance.getPlugin("manualColumnMove"),d=c.isEnabled()?c.columnsMapper.__arrayMap:[],h=new f.UndoRedo.RemoveColumnAction(n,u,a,l,d);t.done(h)}}),e.addHook("beforeCellAlignment",function(e,n,o,r){var i=new f.UndoRedo.CellAlignmentAction(e,n,o,r);t.done(i)}),e.addHook("beforeFilter",function(e){t.done(new f.UndoRedo.FiltersAction(e))}),e.addHook("beforeRowMove",function(e,n){e!==!1&amp;&amp;t.done(new f.UndoRedo.RowMoveAction(e,n))})},f.UndoRedo.prototype.done=function(e){this.ignoreNewActions||(this.doneActions.push(e),this.undoneActions.length=0)},f.UndoRedo.prototype.undo=function(){if(this.isUndoAvailable()){var e=this.doneActions.pop(),t=v(e),n=this.instance,o=n.runHooks("beforeUndo",t);if(o===!1)return;this.ignoreNewActions=!0;var r=this;e.undo(this.instance,function(){r.ignoreNewActions=!1,r.undoneActions.push(e)}),n.runHooks("afterUndo",t)}},f.UndoRedo.prototype.redo=function(){if(this.isRedoAvailable()){var e=this.undoneActions.pop(),t=v(e),n=this.instance,o=n.runHooks("beforeRedo",t);if(o===!1)return;this.ignoreNewActions=!0;var r=this;e.redo(this.instance,function(){r.ignoreNewActions=!1,r.doneActions.push(e)}),n.runHooks("afterRedo",t)}},f.UndoRedo.prototype.isUndoAvailable=function(){return this.doneActions.length&gt;0},f.UndoRedo.prototype.isRedoAvailable=function(){return this.undoneActions.length&gt;0},f.UndoRedo.prototype.clear=function(){this.doneActions.length=0,this.undoneActions.length=0},f.UndoRedo.Action=function(){},f.UndoRedo.Action.prototype.undo=function(){},f.UndoRedo.Action.prototype.redo=function(){},f.UndoRedo.ChangeAction=function(e){this.changes=e,this.actionType="change"},w(f.UndoRedo.ChangeAction,f.UndoRedo.Action),f.UndoRedo.ChangeAction.prototype.undo=function(e,t){for(var n=v(this.changes),o=e.countEmptyRows(!0),r=e.countEmptyCols(!0),i=0,s=n.length;i&lt;s;i++)n[i].splice(3,1);e.addHookOnce("afterChange",t),e.setDataAtRowProp(n,null,null,"UndoRedo.undo");for(var a=0,l=n.length;a&lt;l;a++)e.getSettings().minSpareRows&amp;&amp;n[a][0]+1+e.getSettings().minSpareRows===e.countRows()&amp;&amp;o==e.getSettings().minSpareRows&amp;&amp;(e.alter("remove_row",parseInt(n[a][0]+1,10),e.getSettings().minSpareRows),e.undoRedo.doneActions.pop()),e.getSettings().minSpareCols&amp;&amp;n[a][1]+1+e.getSettings().minSpareCols===e.countCols()&amp;&amp;r==e.getSettings().minSpareCols&amp;&amp;(e.alter("remove_col",parseInt(n[a][1]+1,10),e.getSettings().minSpareCols),e.undoRedo.doneActions.pop())},f.UndoRedo.ChangeAction.prototype.redo=function(e,t){for(var n=v(this.changes),o=0,r=n.length;o&lt;r;o++)n[o].splice(2,1);e.addHookOnce("afterChange",t),e.setDataAtRowProp(n,null,null,"UndoRedo.redo")},f.UndoRedo.CreateRowAction=function(e,t){this.index=e,this.amount=t,this.actionType="insert_row"},w(f.UndoRedo.CreateRowAction,f.UndoRedo.Action),f.UndoRedo.CreateRowAction.prototype.undo=function(e,t){var n=e.countRows(),o=e.getSettings().minSpareRows;this.index&gt;=n&amp;&amp;this.index-o&lt;n&amp;&amp;(this.index-=o),e.addHookOnce("afterRemoveRow",t),e.alter("remove_row",this.index,this.amount,"UndoRedo.undo")},f.UndoRedo.CreateRowAction.prototype.redo=function(e,t){e.addHookOnce("afterCreateRow",t),e.alter("insert_row",this.index,this.amount,"UndoRedo.redo")},f.UndoRedo.RemoveRowAction=function(e,t){this.index=e,this.data=t,this.actionType="remove_row"},w(f.UndoRedo.RemoveRowAction,f.UndoRedo.Action),f.UndoRedo.RemoveRowAction.prototype.undo=function(e,t){e.alter("insert_row",this.index,this.data.length,"UndoRedo.undo"),e.addHookOnce("afterRender",t),e.populateFromArray(this.index,0,this.data,void 0,void 0,"UndoRedo.undo")},f.UndoRedo.RemoveRowAction.prototype.redo=function(e,t){e.addHookOnce("afterRemoveRow",t),
e.alter("remove_row",this.index,this.data.length,"UndoRedo.redo")},f.UndoRedo.CreateColumnAction=function(e,t){this.index=e,this.amount=t,this.actionType="insert_col"},w(f.UndoRedo.CreateColumnAction,f.UndoRedo.Action),f.UndoRedo.CreateColumnAction.prototype.undo=function(e,t){e.addHookOnce("afterRemoveCol",t),e.alter("remove_col",this.index,this.amount,"UndoRedo.undo")},f.UndoRedo.CreateColumnAction.prototype.redo=function(e,t){e.addHookOnce("afterCreateCol",t),e.alter("insert_col",this.index,this.amount,"UndoRedo.redo")},f.UndoRedo.RemoveColumnAction=function(e,t,n,o,r){this.index=e,this.indexes=t,this.data=n,this.amount=this.data[0].length,this.headers=o,this.columnPositions=r.slice(0),this.actionType="remove_col"},w(f.UndoRedo.RemoveColumnAction,f.UndoRedo.Action),f.UndoRedo.RemoveColumnAction.prototype.undo=function(e,t){var n,o=this,r=this.indexes.slice(0).sort(),i=function(e,t,n){return n[o.indexes.indexOf(r[t])]},s=[];m(this.data.length-1,function(e){s[e]=p(o.data[e],i)});var a=[];a=p(this.headers,i);var l=[];f.hooks.run(e,"beforeCreateCol",this.indexes[0],this.indexes[this.indexes.length-1],"UndoRedo.undo"),m(this.data.length-1,function(t){n=e.getSourceDataAtRow(t),m(r.length-1,function(e){n.splice(r[e],0,s[t][e]),l.push([t,r[e],null,s[t][e]])})}),e.getPlugin("formulas")&amp;&amp;e.getPlugin("formulas").onAfterSetDataAtCell(l),"undefined"!=typeof this.headers&amp;&amp;m(a.length-1,function(t){e.getSettings().colHeaders.splice(r[t],0,a[t])}),e.getPlugin("manualColumnMove")&amp;&amp;(e.getPlugin("manualColumnMove").columnsMapper.__arrayMap=this.columnPositions),e.addHookOnce("afterRender",t),f.hooks.run(e,"afterCreateCol",this.indexes[0],this.indexes[this.indexes.length-1],"UndoRedo.undo"),e.getPlugin("formulas")&amp;&amp;e.getPlugin("formulas").recalculateFull(),e.render()},f.UndoRedo.RemoveColumnAction.prototype.redo=function(e,t){e.addHookOnce("afterRemoveCol",t),e.alter("remove_col",this.index,this.amount,"UndoRedo.redo")},f.UndoRedo.CellAlignmentAction=function(e,t,n,o){this.stateBefore=e,this.range=t,this.type=n,this.alignment=o},f.UndoRedo.CellAlignmentAction.prototype.undo=function(e,t){if(e.getPlugin("contextMenu").isEnabled()){for(var n=this.range.from.row;n&lt;=this.range.to.row;n++)for(var o=this.range.from.col;o&lt;=this.range.to.col;o++)e.setCellMeta(n,o,"className",this.stateBefore[n][o]||" htLeft");e.addHookOnce("afterRender",t),e.render()}},f.UndoRedo.CellAlignmentAction.prototype.redo=function(e,t){e.getPlugin("contextMenu").isEnabled()&amp;&amp;(e.selectCell(this.range.from.row,this.range.from.col,this.range.to.row,this.range.to.col),e.getPlugin("contextMenu").executeCommand("alignment:"+this.alignment.replace("ht","").toLowerCase()),e.addHookOnce("afterRender",t),e.render())},f.UndoRedo.FiltersAction=function(e){this.formulaStacks=e,this.actionType="filter"},w(f.UndoRedo.FiltersAction,f.UndoRedo.Action),f.UndoRedo.FiltersAction.prototype.undo=function(e,t){var n=e.getPlugin("filters");e.addHookOnce("afterRender",t),n.formulaCollection.importAllFormulas(this.formulaStacks.slice(0,this.formulaStacks.length-1)),n.filter()},f.UndoRedo.FiltersAction.prototype.redo=function(e,t){var n=e.getPlugin("filters");e.addHookOnce("afterRender",t),n.formulaCollection.importAllFormulas(this.formulaStacks),n.filter()},f.UndoRedo.RowMoveAction=function(e,t){this.rows=e.slice(),this.target=t},w(f.UndoRedo.RowMoveAction,f.UndoRedo.Action),f.UndoRedo.RowMoveAction.prototype.undo=function(e,t){var n=e.getPlugin("manualRowMove");e.addHookOnce("afterRender",t);for(var o=this.rows[0]&lt;this.target?-1*this.rows.length:0,r=this.rows[0]&gt;this.target?this.rows[0]+this.rows.length:this.rows[0],i=[],s=this.rows.length+o,a=o;a&lt;s;a++)i.push(this.target+a);n.moveRows(i.slice(),r),e.render(),e.selection.setRangeStartOnly(new WalkontableCellCoords(this.rows[0],0)),e.selection.setRangeEnd(new WalkontableCellCoords(this.rows[this.rows.length-1],e.countCols()-1))},f.UndoRedo.RowMoveAction.prototype.redo=function(e,t){var n=e.getPlugin("manualRowMove");e.addHookOnce("afterRender",t),n.moveRows(this.rows.slice(),this.target),e.render();var o=this.rows[0]&lt;this.target?this.target-this.rows.length:this.target;e.selection.setRangeStartOnly(new WalkontableCellCoords(o,0)),e.selection.setRangeEnd(new WalkontableCellCoords(o+this.rows.length-1,e.countCols()-1))},f.hooks.add("afterInit",o),f.hooks.add("afterUpdateSettings",o),f.hooks.register("beforeUndo"),f.hooks.register("afterUndo"),f.hooks.register("beforeRedo"),f.hooks.register("afterRedo")},{browser:24,"helpers/array":43,"helpers/dom/event":48,"helpers/number":52,"helpers/object":53}],117:[function(e,t,n){"use strict";function o(e,t){var n;c[e]=t,n=u(e)+"Renderer",l.renderers[n]=t,l[n]=t,"base"===e&amp;&amp;(l.renderers.cellDecorator=t)}function r(e){if("function"==typeof e)return e;if("string"!=typeof e)throw Error('Only strings and functions can be passed as "renderer" parameter');if(!(e in c))throw Error('No editor registered under name "'+e+'"');return c[e]}function i(e){return e in c}Object.defineProperties(n,{registerRenderer:{get:function(){return o}},getRenderer:{get:function(){return r}},hasRenderer:{get:function(){return i}},__esModule:{value:!0}});var s,a,l=(s=e("browser"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).default,u=(a=e("helpers/string"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).toUpperCaseFirst,c={};l.renderers=l.renderers||{},l.renderers.registerRenderer=o,l.renderers.getRenderer=r},{browser:24,"helpers/string":55}],118:[function(e,t,n){"use strict";function o(e,t,n,o,r,i,s){s.className&amp;&amp;(t.className?t.className=t.className+" "+s.className:t.className=s.className),s.readOnly&amp;&amp;a(t,s.readOnlyCellClassName),s.valid===!1&amp;&amp;s.invalidCellClassName?a(t,s.invalidCellClassName):l(t,s.invalidCellClassName),s.wordWrap===!1&amp;&amp;s.noWordWrapClassName&amp;&amp;a(t,s.noWordWrapClassName),!i&amp;&amp;s.placeholder&amp;&amp;a(t,s.placeholderCellClassName)}Object.defineProperties(n,{cellDecorator:{get:function(){return o}},__esModule:{value:!0}});var r,i,s=(r=e("helpers/dom/element"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}),a=s.addClass,l=s.removeClass,u=(i=e("renderers"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).registerRenderer;u("base",o)},{"helpers/dom/element":47,renderers:117}],119:[function(e,t,n){"use strict";function o(e,t,n,o,r,i,s){var a=(g.cloneNode(!0),w.cloneNode(!0));if(s.allowHtml?f("html").apply(this,arguments):f("text").apply(this,arguments),t.appendChild(a),u(t,"htAutocomplete"),t.firstChild||t.appendChild(document.createTextNode(String.fromCharCode(160))),!e.acArrowListener){var l=d(e);e.acArrowListener=function(r){c(r.target,"htAutocompleteArrow")&amp;&amp;e.view.wt.getSetting("onCellDblClick",null,new m(n,o),t)},l.addEventListener(e.rootElement,"mousedown",e.acArrowListener),e.addHookOnce("afterDestroy",function(){l.destroy()})}}Object.defineProperties(n,{autocompleteRenderer:{get:function(){return o}},__esModule:{value:!0}});var r,i,s,a,l=(r=e("helpers/dom/element"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}),u=l.addClass,c=l.hasClass,d=(l.empty,(i=e("eventManager"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).eventManager),h=(s=e("renderers"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}),f=h.getRenderer,p=h.registerRenderer,m=(a=e("3rdparty/walkontable/src/cell/coords"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).WalkontableCellCoords,g=document.createElement("DIV");g.className="htAutocompleteWrapper";var w=document.createElement("DIV");w.className="htAutocompleteArrow",w.appendChild(document.createTextNode(String.fromCharCode(9660)));p("autocomplete",o)},{"3rdparty/walkontable/src/cell/coords":6,eventManager:42,"helpers/dom/element":47,renderers:117}],120:[function(e,t,n){"use strict";function o(e,t,n,o,a,l,u){function c(e){var t="SPACE|ENTER",n="DELETE|BACKSPACE",o=O(E,e.keyCode);o(t+"|"+n)&amp;&amp;!x(e)&amp;&amp;h(function(){k(e),e.preventDefault()}),o(t)&amp;&amp;d(),o(n)&amp;&amp;d(!0)}function d(){var t=void 0!==arguments[0]&amp;&amp;arguments[0],n=e.getSelectedRange();if(n){for(var o=n.getTopLeftCorner(),r=n.getBottomRightCorner(),i=[],s=o.row;s&lt;=r.row;s+=1)for(var a=o.col;a&lt;=r.col;a+=1){var l=e.getCellMeta(s,a);if("checkbox"!==l.type)return;if(l.readOnly!==!0){"undefined"==typeof l.checkedTemplate&amp;&amp;(l.checkedTemplate=!0),"undefined"==typeof l.uncheckedTemplate&amp;&amp;(l.uncheckedTemplate=!1);var u=e.getDataAtCell(s,a);t===!1?u===l.checkedTemplate?i.push([s,a,l.uncheckedTemplate]):[l.uncheckedTemplate,null,void 0].indexOf(u)!==-1&amp;&amp;i.push([s,a,l.checkedTemplate]):i.push([s,a,l.uncheckedTemplate])}}i.length&gt;0&amp;&amp;e.setDataAtCell(i)}}function h(t){var n=e.getSelectedRange();if(n)for(var o=n.getTopLeftCorner(),r=n.getBottomRightCorner(),i=o.row;i&lt;=r.row;i++)for(var s=o.col;s&lt;=r.col;s++){var a=e.getCellMeta(i,s);if("checkbox"!==a.type)return;var l=e.getCell(i,s);if(null==l)t(i,s,a);else{var u=l.querySelectorAll("input[type=checkbox]");u.length&gt;0&amp;&amp;!a.readOnly&amp;&amp;t(u)}}}M("base").apply(this,arguments);var f=(r(e),i()),p=u.label,m=!1;if("undefined"==typeof u.checkedTemplate&amp;&amp;(u.checkedTemplate=!0),"undefined"==typeof u.uncheckedTemplate&amp;&amp;(u.uncheckedTemplate=!1),y(t),l===u.checkedTemplate||C(l,u.checkedTemplate)?f.checked=!0:l===u.uncheckedTemplate||C(l,u.uncheckedTemplate)?f.checked=!1:null===l?b(f,"noValue"):(f.style.display="none",b(f,A),m=!0),f.setAttribute("data-row",n),f.setAttribute("data-col",o),!m&amp;&amp;p){var g="";p.value?g="function"==typeof p.value?p.value.call(this,n,o,a,l):p.value:p.property&amp;&amp;(g=e.getDataAtRowProp(n,p.property));var w=s(g);"before"===p.position?w.appendChild(f):w.insertBefore(f,w.firstChild),f=w}t.appendChild(f),m&amp;&amp;t.appendChild(document.createTextNode("#bad-value#")),D.has(e)||(D.set(e,!0),e.addHook("beforeKeyDown",c))}function r(e){var t=H.get(e);return t||(t=new _(e),t.addEventListener(e.rootElement,"click",function(t){return l(t,e)}),t.addEventListener(e.rootElement,"mouseup",function(t){return a(t,e)}),t.addEventListener(e.rootElement,"change",function(t){return u(t,e)}),H.set(e,t)),t}function i(){var e=document.createElement("input");return e.className="htCheckboxRendererInput",e.type="checkbox",e.setAttribute("autocomplete","off"),e.setAttribute("tabindex","-1"),e.cloneNode(!1)}function s(e){var t=document.createElement("label");return t.className="htCheckboxRendererLabel",t.appendChild(document.createTextNode(e)),t.cloneNode(!0)}function a(e,t){c(e.target)&amp;&amp;setTimeout(t.listen,10)}function l(e,t){if(!c(e.target))return!1;var n=parseInt(e.target.getAttribute("data-row"),10),o=parseInt(e.target.getAttribute("data-col"),10),r=t.getCellMeta(n,o);r.readOnly&amp;&amp;e.preventDefault()}function u(e,t){if(!c(e.target))return!1;var n=parseInt(e.target.getAttribute("data-row"),10),o=parseInt(e.target.getAttribute("data-col"),10),r=t.getCellMeta(n,o);if(!r.readOnly){var i=null;i=e.target.checked?void 0===r.checkedTemplate||r.checkedTemplate:void 0!==r.uncheckedTemplate&amp;&amp;r.uncheckedTemplate,t.setDataAtCell(n,o,i)}}function c(e){return"INPUT"===e.tagName&amp;&amp;"checkbox"===e.getAttribute("type")}Object.defineProperties(n,{checkboxRenderer:{get:function(){return o}},__esModule:{value:!0}});var d,h,f,p,m,g,w,v=(d=e("helpers/dom/element"),d&amp;&amp;d.__esModule&amp;&amp;d||{default:d}),y=v.empty,b=v.addClass,C=(v.hasClass,(h=e("helpers/string"),h&amp;&amp;h.__esModule&amp;&amp;h||{default:h}).equalsIgnoreCase),_=(f=e("eventManager"),f&amp;&amp;f.__esModule&amp;&amp;f||{default:f}).EventManager,R=(p=e("renderers"),p&amp;&amp;p.__esModule&amp;&amp;p||{default:p}),M=R.getRenderer,S=R.registerRenderer,E=(m=e("helpers/unicode"),m&amp;&amp;m.__esModule&amp;&amp;m||{default:m}).isKey,O=(g=e("helpers/function"),g&amp;&amp;g.__esModule&amp;&amp;g||{default:g}).partial,T=(w=e("helpers/dom/event"),w&amp;&amp;w.__esModule&amp;&amp;w||{default:w}),k=T.stopImmediatePropagation,x=T.isImmediatePropagationStopped,D=new WeakMap,H=new WeakMap,A="htBadValue";S("checkbox",o)},{eventManager:42,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/function":50,"helpers/string":55,"helpers/unicode":56,renderers:117}],121:[function(e,t,n){"use strict";function o(e,t,n,o,r,i,a){l("base").apply(this,arguments),null!==i&amp;&amp;void 0!==i||(i=""),s(t,i)}Object.defineProperties(n,{htmlRenderer:{get:function(){return o}},__esModule:{value:!0}});var r,i,s=(r=e("helpers/dom/element"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).fastInnerHTML,a=(i=e("renderers"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}),l=a.getRenderer,u=a.registerRenderer;u("html",o)},{"helpers/dom/element":47,renderers:117}],122:[function(e,t,n){"use strict";function o(e,t,n,o,r,i,s){if(d(i)){"undefined"!=typeof s.language&amp;&amp;a.culture(s.language),i=a(i).format(s.format||"0");var l=s.className||"",c=l.length?l.split(" "):[];c.indexOf("htLeft")&lt;0&amp;&amp;c.indexOf("htCenter")&lt;0&amp;&amp;c.indexOf("htRight")&lt;0&amp;&amp;c.indexOf("htJustify")&lt;0&amp;&amp;c.push("htRight"),c.indexOf("htNumeric")&lt;0&amp;&amp;c.push("htNumeric"),s.className=c.join(" ")}u("text")(e,t,n,o,r,i,s)}Object.defineProperties(n,{numericRenderer:{get:function(){return o}},__esModule:{value:!0}});var r,i,s,a=(r=e("numbro"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).default,l=(i=e("renderers"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}),u=l.getRenderer,c=l.registerRenderer,d=(s=e("helpers/number"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).isNumeric;c("numeric",o)},{"helpers/number":52,numbro:"numbro",renderers:117}],123:[function(e,t,n){"use strict";function o(e,t,n,o,r,i,a){l("text").apply(this,arguments),i=t.innerHTML;var u,c=a.hashLength||i.length,d=a.hashSymbol||"*";for(u="";u.split(d).length-1&lt;c;u+=d);s(t,u)}Object.defineProperties(n,{passwordRenderer:{get:function(){return o}},__esModule:{value:!0}});var r,i,s=(r=e("helpers/dom/element"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).fastInnerHTML,a=(i=e("renderers"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}),l=a.getRenderer,u=a.registerRenderer;u("password",o)},{"helpers/dom/element":47,renderers:117}],124:[function(e,t,n){"use strict";function o(e,t,n,o,r,i,s){h("base").apply(this,arguments),!i&amp;&amp;s.placeholder&amp;&amp;(i=s.placeholder);var a=c(i);if(e.getSettings().trimWhitespace||(a=a.replace(/ /g,String.fromCharCode(160))),s.rendererTemplate){l(t);var d=document.createElement("TEMPLATE");d.setAttribute("bind","{{}}"),d.innerHTML=s.rendererTemplate,HTMLTemplateElement.decorate(d),d.model=e.getSourceDataAtRow(n),t.appendChild(d)}else u(t,a)}Object.defineProperties(n,{textRenderer:{get:function(){return o}},__esModule:{value:!0}});var r,i,s,a=(r=e("helpers/dom/element"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}),l=a.empty,u=a.fastInnerText,c=(i=e("helpers/mixed"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).stringify,d=(s=e("renderers"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}),h=d.getRenderer,f=d.registerRenderer;f("text",o)},{"helpers/dom/element":47,"helpers/mixed":51,renderers:117}],125:[function(e,t,n){!function(e){"use strict";function t(e){return{configurable:!0,enumerable:!1,value:e,writable:!0}}function n(){return"__$"+Math.floor(1e9*Math.random())+"$"+ ++H+"$__"}function o(e){return I[e]}function r(){var e=n();return I[e]=!0,e}function i(e){return"object"==typeof e&amp;&amp;e instanceof l}function s(e){return i(e)?"symbol":typeof e}function a(e){var t=new l(e);if(!(this instanceof a))return t;throw new TypeError("Symbol cannot be new'ed")}function l(e){var t=n();S(this,N,{value:this}),S(this,A,{value:t}),S(this,P,{value:e}),c(this),L[t]=this}function u(e){var t=e[W];return t&amp;&amp;t.self===e?t:x(e)?(V.hash.value=B++,V.self.value=e,j.value=R(null,V),S(e,W,j),j.value):void 0}function c(e){return u(e),E.apply(this,arguments)}function d(e){return L[e]||I[e]}function h(e){return i(e)?e[A]:e}function f(e){for(var t=[],n=T(e),o=0;o&lt;n.length;o++){var r=L[n[o]];r&amp;&amp;t.push(r)}return t}function p(t){return e.traceur&amp;&amp;e.traceur.options[t]}function m(e){for(var t=1;t&lt;arguments.length;t++)for(var n=T(arguments[t]),o=0;o&lt;n.length;o++){var r=n[o];d(r)||!function(t,n){S(e,n,{get:function(){return t[n]},enumerable:!0})}(arguments[t],n[o])}return e}function g(e){return null!=e&amp;&amp;("object"==typeof e||"function"==typeof e)}function w(e){if(null==e)throw _();return C(e)}function v(e){if(null==e)throw new TypeError("Value cannot be converted to an Object");return e}function y(e,t){e.Symbol||(e.Symbol=t,Object.getOwnPropertySymbols=f),e.Symbol.iterator||(e.Symbol.iterator=t("Symbol.iterator"))}function b(e){y(e,a),e.Reflect=e.Reflect||{},e.Reflect.global=e.Reflect.global||e}if(!e.$traceurRuntime){var C=Object,_=TypeError,R=C.create,M=C.defineProperties,S=C.defineProperty,E=C.freeze,O=C.getOwnPropertyDescriptor,T=C.getOwnPropertyNames,k=C.keys,x=Object.isExtensible,D=t,H=0,A=n(),P=n(),N=n(),L=R(null),I=R(null);S(a.prototype,"constructor",t(a)),S(a.prototype,"toString",D(function(){var e=this[N];if(!p("symbols"))return e[A];if(!e)throw TypeError("Conversion from symbol to string");var t=e[P];return void 0===t&amp;&amp;(t=""),"Symbol("+t+")"})),S(a.prototype,"valueOf",D(function(){var e=this[N];if(!e)throw TypeError("Conversion from symbol to string");return p("symbols")?e:e[A]})),S(l.prototype,"constructor",t(a)),S(l.prototype,"toString",{value:a.prototype.toString,enumerable:!1}),S(l.prototype,"valueOf",{value:a.prototype.valueOf,enumerable:!1});var W=r(),j={value:void 0},V={hash:{value:void 0},self:{value:void 0}},B=0;c(l.prototype),b(e),e.$traceurRuntime={checkObjectCoercible:v,createPrivateName:r,defineProperties:M,defineProperty:S,exportStar:m,getOwnHashObject:u,getOwnPropertyDescriptor:O,getOwnPropertyNames:T,isObject:g,isPrivateName:o,isSymbolString:d,keys:k,setupGlobals:b,toObject:w,toProperty:h,typeof:s}}}(window),function(){"use strict";function e(){for(var e,n=[],o=0,r=0;r&lt;arguments.length;r++){var i=$traceurRuntime.checkObjectCoercible(arguments[r]);"function"!=typeof i[t(Symbol.iterator)]&amp;&amp;(i[t(Symbol.iterator)]=function(){var e=this,t=e.length,n=0;return{next:function(){var o={done:!0};return n&lt;t&amp;&amp;(o.done=!1,o.value=e[n],++n),o}}});for(var s=i[t(Symbol.iterator)]();!(e=s.next()).done;)n[o++]=e.value}return n}var t=$traceurRuntime.toProperty;$traceurRuntime.spread=e}(),function(){"use strict";function e(e,t){var n=m(e);do{var o=p(n,t);if(o)return o;n=m(n)}while(n)}function t(e){return e.__proto__}function n(e,t,n,r){return o(e,t,n).apply(e,r)}function o(t,n,o){var r=e(n,o);if(r)return r.get?r.get.call(t):r.value}function r(t,n,o,r){var i=e(n,o);if(i&amp;&amp;i.set)return i.set.call(t,r),r;throw c("super has no setter '"+o+"'.")}function i(e){for(var t={},n=v(e),o=0;o&lt;n.length;o++){var r=n[o];t[r]=p(e,r)}for(var i=y(e),o=0;o&lt;i.length;o++){var s=i[o];t[g(s)]=p(e,g(s))}return t}function s(e,t,n,o){return f(t,"constructor",{value:e,configurable:!0,enumerable:!1,writable:!0}),arguments.length&gt;3?("function"==typeof o&amp;&amp;(e.__proto__=o),e.prototype=d(a(o),i(t))):e.prototype=t,f(e,"prototype",{configurable:!1,writable:!1}),h(e,i(n))}function a(e){if("function"==typeof e){var t=e.prototype;if(u(t)===t||null===t)return e.prototype;throw new c("super prototype must be an Object or null")}if(null===e)return null;throw new c("Super expression must either be null or a function, not "+typeof e+".")}function l(e,t,o){null!==m(t)&amp;&amp;n(e,t,"constructor",o)}var u=Object,c=TypeError,d=u.create,h=$traceurRuntime.defineProperties,f=$traceurRuntime.defineProperty,p=$traceurRuntime.getOwnPropertyDescriptor,m=Object.getPrototypeOf,g=$traceurRuntime.toProperty,w=Object,v=w.getOwnPropertyNames,y=w.getOwnPropertySymbols;$traceurRuntime.createClass=s,$traceurRuntime.defaultSuperCall=l,$traceurRuntime.superCall=n,$traceurRuntime.superConstructor=t,$traceurRuntime.superGet=o,$traceurRuntime.superSet=r}()},{}],126:[function(e,t,n){"use strict";function o(e){var t=this,n=this;this.eventManager=M(e),this.instance=e,this.settings=e.getSettings(),this.selectionMouseDown=!1;var o=e.rootElement.getAttribute("style");o&amp;&amp;e.rootElement.setAttribute("data-originalstyle",o),p(e.rootElement,"handsontable");var r=document.createElement("TABLE");p(r,"htCore"),e.getSettings().tableClassName&amp;&amp;p(r,e.getSettings().tableClassName),this.THEAD=document.createElement("THEAD"),r.appendChild(this.THEAD),this.TBODY=document.createElement("TBODY"),r.appendChild(this.TBODY),e.table=r,e.container.insertBefore(r,e.container.firstChild),this.eventManager.addEventListener(e.rootElement,"mousedown",function(e){this.selectionMouseDown=!0,n.isTextSelectionAllowed(e.target)||(s(),e.preventDefault(),window.focus())}),this.eventManager.addEventListener(e.rootElement,"mouseup",function(e){this.selectionMouseDown=!1}),this.eventManager.addEventListener(e.rootElement,"mousemove",function(e){this.selectionMouseDown&amp;&amp;!n.isTextSelectionAllowed(e.target)&amp;&amp;(s(),e.preventDefault())}),this.eventManager.addEventListener(document.documentElement,"keyup",function(t){e.selection.isInProgress()&amp;&amp;!t.shiftKey&amp;&amp;e.selection.finish()});var i;this.isMouseDown=function(){return i},this.eventManager.addEventListener(document.documentElement,"mouseup",function(t){e.selection.isInProgress()&amp;&amp;1===t.which&amp;&amp;e.selection.finish(),i=!1,_(document.activeElement)&amp;&amp;e.unlisten()}),this.eventManager.addEventListener(document.documentElement,"mousedown",function(t){var o=t.target,r=t.target,s=t.x||t.clientX,a=t.y||t.clientY;if(!i&amp;&amp;e.rootElement){if(r===e.view.wt.wtTable.holder){var l=v();if(document.elementFromPoint(s+l,a)!==e.view.wt.wtTable.holder||document.elementFromPoint(s,a+l)!==e.view.wt.wtTable.holder)return}else for(;r!==document.documentElement;){if(null===r){if(t.isTargetWebComponent)break;return}if(r===e.rootElement)return;r=r.parentNode}var u="function"==typeof n.settings.outsideClickDeselects?n.settings.outsideClickDeselects(o):n.settings.outsideClickDeselects;u?e.deselectCell():e.destroyEditor()}}),this.eventManager.addEventListener(r,"selectstart",function(e){n.settings.fragmentSelection||C(e.target)||e.preventDefault()});var s=function(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&amp;&amp;window.getSelection().removeAllRanges():document.selection&amp;&amp;document.selection.empty()},a=[new D({className:"current",border:{width:2,color:"#5292F7",cornerVisible:function(){return n.settings.fillHandle&amp;&amp;!n.isCellEdited()&amp;&amp;!e.selection.isMultiple()},multipleSelectionHandlesVisible:function(){return!n.isCellEdited()&amp;&amp;!e.selection.isMultiple()}}}),new D({className:"area",border:{width:1,color:"#89AFF9",cornerVisible:function(){return n.settings.fillHandle&amp;&amp;!n.isCellEdited()&amp;&amp;e.selection.isMultiple()},multipleSelectionHandlesVisible:function(){return!n.isCellEdited()&amp;&amp;e.selection.isMultiple()}}}),new D({className:"highlight",highlightHeaderClassName:n.settings.currentHeaderClassName,highlightRowClassName:n.settings.currentRowClassName,highlightColumnClassName:n.settings.currentColClassName}),new D({className:"fill",border:{width:1,color:"red"}})];a.current=a[0],a.area=a[1],a.highlight=a[2],a.fill=a[3];var l={debug:function(){return n.settings.debug},externalRowCalculator:this.instance.getPlugin("autoRowSize")&amp;&amp;this.instance.getPlugin("autoRowSize").isEnabled(),table:r,preventOverflow:function(){return t.settings.preventOverflow},stretchH:function(){return n.settings.stretchH},data:e.getDataAtCell,totalRows:function(){return e.countRows()},totalColumns:function(){return e.countCols()},fixedColumnsLeft:function(){return n.settings.fixedColumnsLeft},fixedRowsTop:function(){return n.settings.fixedRowsTop},fixedRowsBottom:function(){return n.settings.fixedRowsBottom},minSpareRows:function(){return n.settings.minSpareRows},renderAllRows:n.settings.renderAllRows,rowHeaders:function(){var t=[];return e.hasRowHeaders()&amp;&amp;t.push(function(e,t){n.appendRowHeader(e,t)}),h.hooks.run(e,"afterGetRowHeaderRenderers",t),t},columnHeaders:function(){var t=[];return e.hasColHeaders()&amp;&amp;t.push(function(e,t){n.appendColHeader(e,t)}),h.hooks.run(e,"afterGetColumnHeaderRenderers",t),t},columnWidth:e.getColWidth,rowHeight:e.getRowHeight,cellRenderer:function(e,t,o){var r=n.instance.getCellMeta(e,t),i=n.instance.colToProp(t),s=n.instance.getDataAtRowProp(e,i);n.instance.hasHook("beforeValueRender")&amp;&amp;(s=n.instance.runHooks("beforeValueRender",s)),n.instance.runHooks("beforeRenderer",o,e,t,i,s,r),n.instance.getCellRenderer(r)(n.instance,o,e,t,i,s,r),n.instance.runHooks("afterRenderer",o,e,t,i,s,r)},selections:a,hideBorderOnMouseDownOver:function(){return n.settings.fragmentSelection},onCellMouseDown:function(t,o,r,s){var a={row:!1,column:!1,cells:!1};if(e.listen(),n.activeWt=s,i=!0,h.hooks.run(e,"beforeOnCellMouseDown",t,o,r,a),!O(t)){var l=e.getSelectedRange(),u=e.selection,c=u.selectedHeader;if(t.shiftKey&amp;&amp;l)o.row&gt;=0&amp;&amp;o.col&gt;=0&amp;&amp;!a.cells?(u.setSelectedHeaders(!1,!1),u.setRangeEnd(o)):(c.cols||c.rows)&amp;&amp;o.row&gt;=0&amp;&amp;o.col&gt;=0&amp;&amp;!a.cells?(u.setSelectedHeaders(!1,!1),u.setRangeEnd(new x(o.row,o.col))):c.cols&amp;&amp;o.row&lt;0&amp;&amp;!a.column?u.setRangeEnd(new x(l.to.row,o.col)):c.rows&amp;&amp;o.col&lt;0&amp;&amp;!a.row?u.setRangeEnd(new x(o.row,l.to.col)):(!c.cols&amp;&amp;!c.rows&amp;&amp;o.col&lt;0||c.cols&amp;&amp;o.col&lt;0)&amp;&amp;!a.row?(u.setSelectedHeaders(!0,!1),u.setRangeStartOnly(new x(l.from.row,0)),u.setRangeEnd(new x(o.row,e.countCols()-1))):(!c.cols&amp;&amp;!c.rows&amp;&amp;o.row&lt;0||c.rows&amp;&amp;o.row&lt;0)&amp;&amp;!a.column&amp;&amp;(u.setSelectedHeaders(!1,!0),u.setRangeStartOnly(new x(0,l.from.col)),u.setRangeEnd(new x(e.countRows()-1,o.col)));else{var d=!0;if(l){var f=l,m=f.from,g=f.to,w=!u.inInSelection(o);if(o.row&lt;0&amp;&amp;c.cols){var v=Math.min(m.col,g.col),y=Math.max(m.col,g.col);d=o.col&lt;v||o.col&gt;y}else if(o.col&lt;0&amp;&amp;c.rows){var b=Math.min(m.row,g.row),C=Math.max(m.row,g.row);d=o.row&lt;b||o.row&gt;C}else d=w}var _=T(t),M=k(t)||"touchstart"===t.type;o.row&lt;0&amp;&amp;o.col&gt;=0&amp;&amp;!a.column?(u.setSelectedHeaders(!1,!0),(M||_&amp;&amp;d)&amp;&amp;(u.setRangeStartOnly(new x(0,o.col)),u.setRangeEnd(new x(Math.max(e.countRows()-1,0),o.col),!1))):o.col&lt;0&amp;&amp;o.row&gt;=0&amp;&amp;!a.row?(u.setSelectedHeaders(!0,!1),(M||_&amp;&amp;d)&amp;&amp;(u.setRangeStartOnly(new x(o.row,0)),u.setRangeEnd(new x(o.row,Math.max(e.countCols()-1,0)),!1))):o.col&gt;=0&amp;&amp;o.row&gt;=0&amp;&amp;!a.cells?(M||_&amp;&amp;d)&amp;&amp;(u.setSelectedHeaders(!1,!1),u.setRangeStart(o)):o.col&lt;0&amp;&amp;o.row&lt;0&amp;&amp;(o.row=0,o.col=0,u.setSelectedHeaders(!1,!1,!0),u.setRangeStart(o))}u.selectedHeader.rows?(R(e.rootElement,"ht__selection--columns"),p(e.rootElement,"ht__selection--rows")):u.selectedHeader.cols?(R(e.rootElement,"ht__selection--rows"),p(e.rootElement,"ht__selection--columns")):R(e.rootElement,["ht__selection--rows","ht__selection--columns"]),h.hooks.run(e,"afterOnCellMouseDown",t,o,r),n.activeWt=n.wt}},onCellMouseOver:function(t,o,r,s){var a={row:!1,column:!1,cell:!1};n.activeWt=s,h.hooks.run(e,"beforeOnCellMouseOver",t,o,r,a),O(t)||(0===t.button&amp;&amp;i&amp;&amp;(o.row&gt;=0&amp;&amp;o.col&gt;=0?e.selection.selectedHeader.cols&amp;&amp;!a.column?e.selection.setRangeEnd(new x(e.countRows()-1,o.col),!1):e.selection.selectedHeader.rows&amp;&amp;!a.row?e.selection.setRangeEnd(new x(o.row,e.countCols()-1),!1):a.cell||e.selection.setRangeEnd(o):e.selection.selectedHeader.cols&amp;&amp;!a.column?e.selection.setRangeEnd(new x(e.countRows()-1,o.col),!1):e.selection.selectedHeader.rows&amp;&amp;!a.row?e.selection.setRangeEnd(new x(o.row,e.countCols()-1),!1):a.cell||e.selection.setRangeEnd(o)),h.hooks.run(e,"afterOnCellMouseOver",t,o,r),n.activeWt=n.wt)},onCellMouseUp:function(t,o,r,i){n.activeWt=i,h.hooks.run(e,"beforeOnCellMouseUp",t,o,r),h.hooks.run(e,"afterOnCellMouseUp",t,o,r),n.activeWt=n.wt},onCellCornerMouseDown:function(t){t.preventDefault(),h.hooks.run(e,"afterOnCellCornerMouseDown",t)},onCellCornerDblClick:function(t){t.preventDefault(),h.hooks.run(e,"afterOnCellCornerDblClick",t)},beforeDraw:function(e,t){n.beforeRender(e,t)},onDraw:function(e){n.onDraw(e)},onScrollVertically:function(){e.runHooks("afterScrollVertically")},onScrollHorizontally:function(){e.runHooks("afterScrollHorizontally")},onBeforeDrawBorders:function(t,n){e.runHooks("beforeDrawBorders",t,n)},onBeforeTouchScroll:function(){e.runHooks("beforeTouchScroll")},onAfterMomentumScroll:function(){e.runHooks("afterMomentumScroll")},onBeforeStretchingColumnWidth:function(t,n){return e.runHooks("beforeStretchingColumnWidth",t,n)},onModifyRowHeaderWidth:function(t){return e.runHooks("modifyRowHeaderWidth",t)},viewportRowCalculatorOverride:function(t){var o=e.countRows(),r=n.settings.viewportRowRenderingOffset;if("auto"===r&amp;&amp;n.settings.fixedRowsTop&amp;&amp;(r=10),"number"==typeof r&amp;&amp;(t.startRow=Math.max(t.startRow-r,0),t.endRow=Math.min(t.endRow+r,o-1)),"auto"===r){var i=t.startRow+t.endRow-t.startRow,s=Math.ceil(i/o*12);t.startRow=Math.max(t.startRow-s,0),t.endRow=Math.min(t.endRow+s,o-1)}e.runHooks("afterViewportRowCalculatorOverride",t)},viewportColumnCalculatorOverride:function(t){var o=e.countCols(),r=n.settings.viewportColumnRenderingOffset;if("auto"===r&amp;&amp;n.settings.fixedColumnsLeft&amp;&amp;(r=10),"number"==typeof r&amp;&amp;(t.startColumn=Math.max(t.startColumn-r,0),t.endColumn=Math.min(t.endColumn+r,o-1)),"auto"===r){var i=t.startColumn+t.endColumn-t.startColumn,s=Math.ceil(i/o*12);t.startRow=Math.max(t.startColumn-s,0),t.endColumn=Math.min(t.endColumn+s,o-1)}e.runHooks("afterViewportColumnCalculatorOverride",t)},rowHeaderWidth:function(){return n.settings.rowHeaderWidth},columnHeaderHeight:function(){var t=e.runHooks("modifyColumnHeaderHeight");return n.settings.columnHeaderHeight||t}};h.hooks.run(e,"beforeInitWalkontable",l),this.wt=new H(l),this.activeWt=this.wt,this.eventManager.addEventListener(n.wt.wtTable.spreader,"mousedown",function(e){e.target===n.wt.wtTable.spreader&amp;&amp;3===e.which&amp;&amp;E(e)}),this.eventManager.addEventListener(n.wt.wtTable.spreader,"contextmenu",function(e){e.target===n.wt.wtTable.spreader&amp;&amp;3===e.which&amp;&amp;E(e)}),this.eventManager.addEventListener(document.documentElement,"click",function(){n.settings.observeDOMVisibility&amp;&amp;n.wt.drawInterrupted&amp;&amp;(n.instance.forceFullRender=!0,n.render())})}Object.defineProperties(n,{TableView:{get:function(){return o}},__esModule:{value:!0}});var r,i,s,a,l,u,c,d,h=(r=e("browser"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).default,f=(i=e("helpers/dom/element"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}),p=f.addClass,m=f.empty,g=f.fastInnerHTML,w=f.fastInnerText,v=f.getScrollbarWidth,y=f.hasClass,b=f.isChildOf,C=f.isInput,_=f.isOutsideInput,R=f.removeClass,M=((s=e("helpers/object"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).createObjectPropListener,(a=e("eventManager"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).eventManager),S=(l=e("helpers/dom/event"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}),E=S.stopPropagation,O=S.isImmediatePropagationStopped,T=S.isRightClick,k=S.isLeftClick,x=(u=e("3rdparty/walkontable/src/cell/coords"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).WalkontableCellCoords,D=(c=e("3rdparty/walkontable/src/selection"),c&amp;&amp;c.__esModule&amp;&amp;c||{default:c}).WalkontableSelection,H=(d=e("3rdparty/walkontable/src/core"),d&amp;&amp;d.__esModule&amp;&amp;d||{default:d}).Walkontable;h.TableView=o,o.prototype.isTextSelectionAllowed=function(e){if(C(e))return!0;var t=b(e,this.instance.view.wt.wtTable.spreader);return!(this.settings.fragmentSelection!==!0||!t)||(!("cell"!==this.settings.fragmentSelection||!this.isSelectedOnlyCell()||!t)||!(this.settings.fragmentSelection||!this.isCellEdited()||!this.isSelectedOnlyCell()))},o.prototype.isSelectedOnlyCell=function(){var e=this.instance.getSelected()||[],t=e[0],n=e[1],o=e[2],r=e[3];return void 0!==t&amp;&amp;t===o&amp;&amp;n===r},o.prototype.isCellEdited=function(){var e=this.instance.getActiveEditor();return e&amp;&amp;e.isOpened()},o.prototype.beforeRender=function(e,t){e&amp;&amp;h.hooks.run(this.instance,"beforeRender",this.instance.forceFullRender,t)},o.prototype.onDraw=function(e){e&amp;&amp;h.hooks.run(this.instance,"afterRender",this.instance.forceFullRender)},o.prototype.render=function(){this.wt.draw(!this.instance.forceFullRender),this.instance.forceFullRender=!1,this.instance.renderCall=!1},o.prototype.getCellAtCoords=function(e,t){var n=this.wt.getCell(e,t);return n&lt;0?null:n},o.prototype.scrollViewport=function(e){this.wt.scrollViewport(e)},o.prototype.appendRowHeader=function(e,t){if(t.firstChild){var n=t.firstChild;if(!y(n,"relative"))return m(t),void this.appendRowHeader(e,t);this.updateCellHeader(n.querySelector(".rowHeader"),e,this.instance.getRowHeader)}else{var o=document.createElement("div"),r=document.createElement("span");o.className="relative",r.className="rowHeader",this.updateCellHeader(r,e,this.instance.getRowHeader),o.appendChild(r),t.appendChild(o)}h.hooks.run(this.instance,"afterGetRowHeader",e,t)},o.prototype.appendColHeader=function(e,t){if(t.firstChild){var n=t.firstChild;y(n,"relative")?this.updateCellHeader(n.querySelector(".colHeader"),e,this.instance.getColHeader):(m(t),this.appendColHeader(e,t))}else{var o=document.createElement("div"),r=document.createElement("span");o.className="relative",r.className="colHeader",this.updateCellHeader(r,e,this.instance.getColHeader),o.appendChild(r),
t.appendChild(o)}h.hooks.run(this.instance,"afterGetColHeader",e,t)},o.prototype.updateCellHeader=function(e,t,n){var o=t,r=this.wt.wtOverlays.getParentOverlay(e)||this.wt;e.parentNode&amp;&amp;(y(e,"colHeader")?o=r.wtTable.columnFilter.sourceToRendered(t):y(e,"rowHeader")&amp;&amp;(o=r.wtTable.rowFilter.sourceToRendered(t))),o&gt;-1?g(e,n(t)):(w(e,String.fromCharCode(160)),p(e,"cornerHeader"))},o.prototype.maximumVisibleElementWidth=function(e){var t=this.wt.wtViewport.getWorkspaceWidth(),n=t-e;return n&gt;0?n:0},o.prototype.maximumVisibleElementHeight=function(e){var t=this.wt.wtViewport.getWorkspaceHeight(),n=t-e;return n&gt;0?n:0},o.prototype.mainViewIsActive=function(){return this.wt===this.activeWt},o.prototype.destroy=function(){this.wt.destroy(),this.eventManager.destroy()}},{"3rdparty/walkontable/src/cell/coords":6,"3rdparty/walkontable/src/core":8,"3rdparty/walkontable/src/selection":19,browser:24,eventManager:42,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/object":53}],127:[function(e,t,n){"use strict";Object.defineProperties(n,{NodeStructure:{get:function(){return i}},LinkedList:{get:function(){return s}},__esModule:{value:!0}});var o,r=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,i=function(e){this.data=e,this.next=null,this.prev=null};$traceurRuntime.createClass(i,{},{});var s=function(){this.first=null,this.last=null};$traceurRuntime.createClass(s,{push:function(e){var t=new i(e);if(null===this.first)this.first=this.last=t;else{var n=this.last;this.last=t,t.prev=n,n.next=t}},unshift:function(e){var t=new i(e);if(null===this.first)this.first=this.last=t;else{var n=this.first;this.first=t,t.next=n,n.prev=t}},inorder:function(e){for(var t=this.first;t;)e(t),t=t.next},remove:function(e){if(null===this.first)return!1;for(var t,n,o=this.first;o;){if(o.data===e)return t=o.next,n=o.prev,t&amp;&amp;(t.prev=n),n&amp;&amp;(n.next=t),o===this.first&amp;&amp;(this.first=t),o===this.last&amp;&amp;(this.last=n),!0;o=o.next}return!1},hasCycle:function(){for(var e=this.first,t=this.first;;){if(null===e)return!1;if(e=e.next,null===e)return!1;if(e=e.next,t=t.next,e===t)return!0}},pop:function(){if(null===this.last)return null;var e=this.last;return this.last=this.last.prev,e},shift:function(){if(null===this.first)return null;var e=this.first;return this.first=this.first.next,e},recursiveReverse:function(){function e(t,n){n&amp;&amp;(e(n,n.next),n.next=t)}if(this.first){e(this.first,this.first.next),this.first.next=null;var t=this.first;this.first=this.last,this.last=t}},reverse:function(){if(this.first&amp;&amp;this.first.next){for(var e,t=this.first.next,n=this.first;t;)e=t.next,t.next=n,n.prev=t,n=t,t=e;this.first.next=null,this.last.prev=null,e=this.first,this.first=n,this.last=e}}},{}),r.utils.NodeStructure=i,r.utils.LinkedList=s},{browser:24}],128:[function(e,t,n){"use strict";Object.defineProperties(n,{GhostTable:{get:function(){return m}},__esModule:{value:!0}});var o,r,i,s,a,l,u=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,c=(r=e("helpers/dom/element"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}),d=c.addClass,h=c.outerHeight,f=c.outerWidth,p=(i=e("helpers/array"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).arrayEach,m=((s=e("helpers/object"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).objectEach,(a=e("helpers/number"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}).rangeEach,(l=e("helpers/mixed"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).stringify,function(e){this.hot=e,this.container=null,this.injected=!1,this.rows=[],this.columns=[],this.samples=null,this.settings={useHeaders:!0}});$traceurRuntime.createClass(m,{addRow:function(e,t){if(this.columns.length)throw new Error("Doesn't support multi-dimensional table");this.rows.length||(this.container=this.createContainer(this.hot.rootElement.className));var n={row:e};this.rows.push(n),this.samples=t,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.table.tr.appendChild(this.createRow(e)),this.container.container.appendChild(this.table.fragment),n.table=this.table.table},addColumnHeadersRow:function(e){if(null!=this.hot.getColHeader(0)){var t={row:-1};this.rows.push(t),this.container=this.createContainer(this.hot.rootElement.className),this.samples=e,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.table.tHead.appendChild(this.createColumnHeadersRow()),this.container.container.appendChild(this.table.fragment),t.table=this.table.table}},addColumn:function(e,t){if(this.rows.length)throw new Error("Doesn't support multi-dimensional table");this.columns.length||(this.container=this.createContainer(this.hot.rootElement.className));var n={col:e};this.columns.push(n),this.samples=t,this.table=this.createTable(this.hot.table.className),this.getSetting("useHeaders")&amp;&amp;null!==this.hot.getColHeader(e)&amp;&amp;this.hot.view.appendColHeader(e,this.table.th),this.table.tBody.appendChild(this.createCol(e)),this.container.container.appendChild(this.table.fragment),n.table=this.table.table},getHeights:function(e){this.injected||this.injectTable(),p(this.rows,function(t){e(t.row,h(t.table)-1)})},getWidths:function(e){this.injected||this.injectTable(),p(this.columns,function(t){e(t.col,f(t.table))})},setSettings:function(e){this.settings=e},setSetting:function(e,t){this.settings||(this.settings={}),this.settings[e]=t},getSettings:function(){return this.settings},getSetting:function(e){return this.settings?this.settings[e]:null},createColGroupsCol:function(){var e=this,t=document,n=t.createDocumentFragment();return this.hot.hasRowHeaders()&amp;&amp;n.appendChild(this.createColElement(-1)),this.samples.forEach(function(t){p(t.strings,function(t){n.appendChild(e.createColElement(t.col))})}),n},createRow:function(e){var t=this,n=document,o=n.createDocumentFragment(),r=n.createElement("th");return this.hot.hasRowHeaders()&amp;&amp;(this.hot.view.appendRowHeader(e,r),o.appendChild(r)),this.samples.forEach(function(r){p(r.strings,function(r){var i=r.col,s=t.hot.getCellMeta(e,i);s.col=i,s.row=e;var a=t.hot.getCellRenderer(s),l=n.createElement("td");a(t.hot,l,e,i,t.hot.colToProp(i),r.value,s),o.appendChild(l)})}),o},createColumnHeadersRow:function(){var e=this,t=document,n=t.createDocumentFragment();if(this.hot.hasRowHeaders()){var o=t.createElement("th");this.hot.view.appendColHeader(-1,o),n.appendChild(o)}return this.samples.forEach(function(o){p(o.strings,function(o){var r=o.col,i=t.createElement("th");e.hot.view.appendColHeader(r,i),n.appendChild(i)})}),n},createCol:function(e){var t=this,n=document,o=n.createDocumentFragment();return this.samples.forEach(function(r){p(r.strings,function(r){var i=r.row,s=t.hot.getCellMeta(i,e);s.col=e,s.row=i;var a=t.hot.getCellRenderer(s),l=n.createElement("td"),u=n.createElement("tr");a(t.hot,l,i,e,t.hot.colToProp(e),r.value,s),u.appendChild(l),o.appendChild(u)})}),o},clean:function(){this.rows.length=0,this.rows[-1]=void 0,this.columns.length=0,this.samples&amp;&amp;this.samples.clear(),this.samples=null,this.removeTable()},injectTable:function(){var e=void 0!==arguments[0]?arguments[0]:null;this.injected||((e||this.hot.rootElement).appendChild(this.container.fragment),this.injected=!0)},removeTable:function(){this.injected&amp;&amp;this.container.container.parentNode&amp;&amp;(this.container.container.parentNode.removeChild(this.container.container),this.container=null,this.injected=!1)},createColElement:function(e){var t=document,n=t.createElement("col");return n.style.width=this.hot.view.wt.wtTable.getStretchedColumnWidth(e)+"px",n},createTable:function(){var e=void 0!==arguments[0]?arguments[0]:"",t=document,n=t.createDocumentFragment(),o=t.createElement("table"),r=t.createElement("thead"),i=t.createElement("tbody"),s=t.createElement("colgroup"),a=t.createElement("tr"),l=t.createElement("th");return this.isVertical()&amp;&amp;o.appendChild(s),this.isHorizontal()&amp;&amp;(a.appendChild(l),r.appendChild(a),o.style.tableLayout="auto",o.style.width="auto"),o.appendChild(r),this.isVertical()&amp;&amp;i.appendChild(a),o.appendChild(i),d(o,e),n.appendChild(o),{fragment:n,table:o,tHead:r,tBody:i,colGroup:s,tr:a,th:l}},createContainer:function(){var e=void 0!==arguments[0]?arguments[0]:"",t=document,n=t.createDocumentFragment(),o=t.createElement("div");return e="htGhostTable htAutoSize "+e.trim(),d(o,e),n.appendChild(o),{fragment:n,container:o}},isVertical:function(){return!(!this.rows.length||this.columns.length)},isHorizontal:function(){return!(!this.columns.length||this.rows.length)}},{}),u.utils.GhostTable=m},{browser:24,"helpers/array":43,"helpers/dom/element":47,"helpers/mixed":51,"helpers/number":52,"helpers/object":53}],129:[function(e,t,n){"use strict";function o(e){return"string"==typeof e&amp;&amp;/fps$/.test(e)&amp;&amp;(e=1e3/parseInt(e.replace("fps","")||0,10)),e}Object.defineProperties(n,{Interval:{get:function(){return c}},__esModule:{value:!0}});var r,i,s=(r=e("browser"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).default,a=(i=e("helpers/feature"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}),l=a.requestAnimationFrame,u=a.cancelAnimationFrame,c=function(e,t){var n=this;this.timer=null,this.func=e,this.delay=o(t),this.stopped=!0,this._then=null,this._callback=function(){return n.__callback()}},d=c;$traceurRuntime.createClass(c,{start:function(){return this.stopped&amp;&amp;(this._then=Date.now(),this.stopped=!1,this.timer=l(this._callback)),this},stop:function(){return this.stopped||(this.stopped=!0,u(this.timer),this.timer=null),this},__callback:function(){if(this.timer=l(this._callback),this.delay){var e=Date.now(),t=e-this._then;t&gt;this.delay&amp;&amp;(this._then=e-t%this.delay,this.func())}else this.func()}},{create:function(e,t){return new d(e,t)}}),s.utils.Interval=c},{browser:24,"helpers/feature":49}],130:[function(e,t,n){"use strict";function o(e,t){c.set(e,t)}function r(e){var t;if(!(e instanceof a.Core)){if(!c.has(e))throw Error("Record translator was not registered for this object identity");e=c.get(e)}return d.has(e)?t=d.get(e):(t=new u(e),d.set(e,t)),t}Object.defineProperties(n,{registerIdentity:{get:function(){return o}},getTranslator:{get:function(){return r}},__esModule:{value:!0}});var i,s,a=(i=e("browser"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).default,l=(s=e("helpers/object"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).isObject,u=function(e){this.hot=e};$traceurRuntime.createClass(u,{toVisualRow:function(e){return this.hot.runHooks("unmodifyRow",e)},toVisualColumn:function(e){return this.hot.runHooks("unmodifyCol",e)},toVisual:function(e,t){var n;return n=l(e)?{row:this.toVisualRow(e.row),column:this.toVisualColumn(e.column)}:[this.toVisualRow(e),this.toVisualColumn(t)]},toPhysicalRow:function(e){return this.hot.runHooks("modifyRow",e)},toPhysicalColumn:function(e){return this.hot.runHooks("modifyCol",e)},toPhysical:function(e,t){var n;return n=l(e)?{row:this.toPhysicalRow(e.row),column:this.toPhysicalColumn(e.column)}:[this.toPhysicalRow(e),this.toPhysicalColumn(t)]}},{});var c=new WeakMap,d=new WeakMap;a.utils.RecordTranslator=u,a.utils.RecordTranslatorUtils={registerIdentity:o,getTranslator:r}},{browser:24,"helpers/object":53}],131:[function(e,t,n){"use strict";var o;Object.defineProperties(n,{SamplesGenerator:{get:function(){return g}},__esModule:{value:!0}});var r,i,s,a,l,u,c=(r=e("browser"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).default,d=(i=e("helpers/dom/element"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}),h=(d.addClass,d.outerHeight,d.outerWidth,(s=e("helpers/array"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).arrayEach,a=e("helpers/object"),a&amp;&amp;a.__esModule&amp;&amp;a||{default:a}),f=(h.objectEach,h.isObject),p=(l=e("helpers/number"),l&amp;&amp;l.__esModule&amp;&amp;l||{default:l}).rangeEach,m=(u=e("helpers/mixed"),u&amp;&amp;u.__esModule&amp;&amp;u||{default:u}).stringify,g=function(e){this.samples=null,this.dataFactory=e,this.customSampleCount=null,this.allowDuplicates=!1},w=g;$traceurRuntime.createClass(g,(o={},Object.defineProperty(o,"getSampleCount",{value:function(){return this.customSampleCount?this.customSampleCount:w.SAMPLE_COUNT},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"setSampleCount",{value:function(e){this.customSampleCount=e},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"setAllowDuplicates",{value:function(e){this.allowDuplicates=e},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"generateRowSamples",{value:function(e,t){return this.generateSamples("row",t,e)},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"generateColumnSamples",{value:function(e,t){return this.generateSamples("col",t,e)},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"generateSamples",{value:function(e,t,n){var o=this,r=new Map;return"number"==typeof n&amp;&amp;(n={from:n,to:n}),p(n.from,n.to,function(n){var i=o.generateSample(e,t,n);r.set(n,i)}),r},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,"generateSample",{value:function(e,t,n){var o,r=this,i=new Map,s=[];return p(t.from,t.to,function(t){var a,l;if("row"===e)l=r.dataFactory(n,t);else{if("col"!==e)throw new Error("Unsupported sample type");l=r.dataFactory(t,n)}o=f(l)?Object.keys(l).length:Array.isArray(l)?l.length:m(l).length,i.has(o)||i.set(o,{needed:r.getSampleCount(),strings:[]});var u=i.get(o);if(u.needed){var c=s.indexOf(l)&gt;-1;if(!c||r.allowDuplicates){var d="row"===e?"col":"row";u.strings.push((a={},Object.defineProperty(a,"value",{value:l,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(a,d,{value:t,configurable:!0,enumerable:!0,writable:!0}),a)),s.push(l),u.needed--}}}),i},configurable:!0,enumerable:!0,writable:!0}),o),{get SAMPLE_COUNT(){return 3}}),c.utils.SamplesGenerator=g},{browser:24,"helpers/array":43,"helpers/dom/element":47,"helpers/mixed":51,"helpers/number":52,"helpers/object":53}],132:[function(e,t,n){"use strict";function o(e){var t=void 0!==arguments[1]?arguments[1]:u,n=void 0!==arguments[2]?arguments[2]:0,i=void 0!==arguments[3]?arguments[3]:e.length;if(Math.abs(i-n)&lt;=1)return[];var s=Math.ceil((n+i)/2);return o(e,t,n,s),o(e,t,s,i),r(e,t,n,s,i)}function r(e,t,n,o,r){for(var i=new a,s=new a,l=o-n,u=r-o,c=Math.max(l,u),d=r-n,h=0;h&lt;c;h+=1)h&lt;l&amp;&amp;i.push(e[n+h]),h&lt;u&amp;&amp;s.push(e[o+h]);for(var f=0;f&lt;d;)i.first&amp;&amp;s.first?t(i.first.data,s.first.data)&gt;0?e[n+f]=s.shift().data:e[n+f]=i.shift().data:i.first?e[n+f]=i.shift().data:e[n+f]=s.shift().data,f+=1;return e}Object.defineProperties(n,{mergeSort:{get:function(){return o}},__esModule:{value:!0}});var i,s,a=(i=e("../dataStructures/linkedList"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).LinkedList,l=(s=e("browser"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).default,u=function(e,t){var n=e.toString(),o=t.toString();return n===o?0:n&lt;o?-1:1};l.utils.mergeSort=o},{"../dataStructures/linkedList":127,browser:24}],133:[function(e,t,n){"use strict";function o(e,t){var n=e;return function(e){for(var o=!1,r=0,i=e.length;r&lt;i;r++)if(n===e[r]){o=!0;break}t(o)}}var r,i,s=(r=e("browser"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).default;(i=e("helpers/mixed"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).stringify;s.AutocompleteValidator=function(e,t){return null==e&amp;&amp;(e=""),this.allowEmpty&amp;&amp;""===e?void t(!0):void(this.strict&amp;&amp;this.source?"function"==typeof this.source?this.source(e,o(e,t)):o(e,t)(this.source):t(!0))}},{browser:24,"helpers/mixed":51}],134:[function(e,t,n){"use strict";var o,r,i,s,a=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,l=(r=e("moment"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).default,u=(i=e("../helpers/date"),i&amp;&amp;i.__esModule&amp;&amp;i||{default:i}).getNormalizedDate,c=(s=e("editors"),s&amp;&amp;s.__esModule&amp;&amp;s||{default:s}).getEditor;a.DateValidator=function(e,t){var n=!0,o=c("date",this.instance);null==e&amp;&amp;(e="");var r=l(new Date(e)).isValid()||l(e,o.defaultDateFormat).isValid(),i=l(e,this.dateFormat||o.defaultDateFormat,!0).isValid();if(this.allowEmpty&amp;&amp;""===e&amp;&amp;(r=!0,i=!0),r||(n=!1),!r&amp;&amp;i&amp;&amp;(n=!0),r&amp;&amp;!i)if(this.correctFormat===!0){var s=d(e,this.dateFormat),a=this.instance.runHooks("unmodifyRow",this.row),u=this.instance.runHooks("unmodifyCol",this.col);this.instance.setDataAtCell(a,u,s,"dateValidator"),n=!0}else n=!1;t(n)};var d=function(e,t){var n,o=l(u(e)),r=l(e,t),i=e.search(/[A-z]/g)&gt;-1;return n=o.isValid()&amp;&amp;o.format("x")===r.format("x")||!r.isValid()||i?o:r,n.format(t)}},{"../helpers/date":46,browser:24,editors:30,moment:"moment"}],135:[function(e,t,n){"use strict";var o,r=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default;r.NumericValidator=function(e,t){null==e&amp;&amp;(e=""),t(this.allowEmpty&amp;&amp;""===e?!0:""===e?!1:/^-?\d*(\.|\,)?\d*$/.test(e))}},{browser:24}],136:[function(e,t,n){"use strict";var o,r,i=(o=e("browser"),o&amp;&amp;o.__esModule&amp;&amp;o||{default:o}).default,s=(r=e("moment"),r&amp;&amp;r.__esModule&amp;&amp;r||{default:r}).default,a=["YYYY-MM-DDTHH:mm:ss.SSSZ","X","x"];i.TimeValidator=function(e,t){var n=!0,o=this.timeFormat||"h:mm:ss a";null===e&amp;&amp;(e=""),e=/^\d{3,}$/.test(e)?parseInt(e,10):e;var r=/^\d{1,2}$/.test(e);r&amp;&amp;(e+=":00");var i=s(e,a,!0).isValid()?s(e):s(e,o),l=i.isValid(),u=s(e,o,!0).isValid()&amp;&amp;!r;if(this.allowEmpty&amp;&amp;""===e&amp;&amp;(l=!0,u=!0),l||(n=!1),!l&amp;&amp;u&amp;&amp;(n=!0),l&amp;&amp;!u)if(this.correctFormat===!0){var c=i.format(o),d=this.instance.runHooks("unmodifyRow",this.row),h=this.instance.runHooks("unmodifyCol",this.col);this.instance.setDataAtCell(d,h,c,"timeValidator"),n=!0}else n=!1;t(n)}},{browser:24,moment:"moment"}],SheetClip:[function(e,t,n){!function(e){"use strict";function t(e){return e.split('"').length-1}var o={parse:function(e){var n,o,r,i,s,a,l,u=[],c=0;for(r=e.split("\n"),r.length&gt;1&amp;&amp;""===r[r.length-1]&amp;&amp;r.pop(),n=0,o=r.length;n&lt;o;n+=1){for(r[n]=r[n].split("\t"),i=0,s=r[n].length;i&lt;s;i+=1)u[c]||(u[c]=[]),a&amp;&amp;0===i?(l=u[c].length-1,u[c][l]=u[c][l]+"\n"+r[n][0],a&amp;&amp;1&amp;t(r[n][0])&amp;&amp;(a=!1,u[c][l]=u[c][l].substring(0,u[c][l].length-1).replace(/""/g,'"'))):i===s-1&amp;&amp;0===r[n][i].indexOf('"')&amp;&amp;1&amp;t(r[n][i])?(u[c].push(r[n][i].substring(1).replace(/""/g,'"')),a=!0):(u[c].push(r[n][i].replace(/""/g,'"')),a=!1);a||(c+=1)}return u},stringify:function(e){var t,n,o,r,i,s="";for(t=0,n=e.length;t&lt;n;t+=1){for(r=e[t].length,o=0;o&lt;r;o+=1)o&gt;0&amp;&amp;(s+="\t"),i=e[t][o],s+="string"==typeof i?i.indexOf("\n")&gt;-1?'"'+i.replace(/"/g,'""')+'"':i:null===i||void 0===i?"":i;s+="\n"}return s}};"undefined"!=typeof n?(n.parse=o.parse,n.stringify=o.stringify):e.SheetClip=o}(window)},{}],autoResize:[function(e,t,n){function o(){function e(e){return e.currentStyle||document.defaultView.getComputedStyle(e)}var t,n={minHeight:200,maxHeight:300,minWidth:100,maxWidth:300},o=document.body,r=document.createTextNode(""),i=document.createElement("SPAN"),s=function(e,t,n){window.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)},a=function(e,t,n){window.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},l=function(s){var a,l;s?/^[a-zA-Z \.,\\\/\|0-9]$/.test(s)||(s="."):s="",void 0!==r.textContent?r.textContent=t.value+s:r.data=t.value+s,i.style.fontSize=e(t).fontSize,i.style.fontFamily=e(t).fontFamily,i.style.whiteSpace="pre",o.appendChild(i),a=i.clientWidth+2,o.removeChild(i),t.style.height=n.minHeight+"px",n.minWidth&gt;a?t.style.width=n.minWidth+"px":a&gt;n.maxWidth?t.style.width=n.maxWidth+"px":t.style.width=a+"px",l=t.scrollHeight?t.scrollHeight-1:0,n.minHeight&gt;l?t.style.height=n.minHeight+"px":n.maxHeight&lt;l?(t.style.height=n.maxHeight+"px",t.style.overflowY="visible"):t.style.height=l+"px"},u=function(){window.setTimeout(l,0)},c=function(e){if(e&amp;&amp;e.minHeight)if("inherit"==e.minHeight)n.minHeight=t.clientHeight;else{var o=parseInt(e.minHeight);isNaN(o)||(n.minHeight=o)}if(e&amp;&amp;e.maxHeight)if("inherit"==e.maxHeight)n.maxHeight=t.clientHeight;else{var s=parseInt(e.maxHeight);isNaN(s)||(n.maxHeight=s)}if(e&amp;&amp;e.minWidth)if("inherit"==e.minWidth)n.minWidth=t.clientWidth;else{var a=parseInt(e.minWidth);isNaN(a)||(n.minWidth=a)}if(e&amp;&amp;e.maxWidth)if("inherit"==e.maxWidth)n.maxWidth=t.clientWidth;else{var l=parseInt(e.maxWidth);isNaN(l)||(n.maxWidth=l)}i.firstChild||(i.className="autoResize",i.style.display="inline-block",i.appendChild(r))},d=function(e,o,r){t=e,c(o),"TEXTAREA"==t.nodeName&amp;&amp;(t.style.resize="none",t.style.overflowY="",t.style.height=n.minHeight+"px",t.style.minWidth=n.minWidth+"px",t.style.maxWidth=n.maxWidth+"px",t.style.overflowY="hidden"),r&amp;&amp;(s(t,"change",l),s(t,"cut",u),s(t,"paste",u),s(t,"drop",u),s(t,"keydown",u),s(t,"focus",l)),l()};return{init:function(e,t,n){d(e,t,n)},unObserve:function(){a(t,"change",l),a(t,"cut",u),a(t,"paste",u),a(t,"drop",u),a(t,"keydown",u),a(t,"focus",l)},resize:l}}"undefined"!=typeof n&amp;&amp;(t.exports=o)},{}],copyPaste:[function(e,t,n){function o(){return i?i.hasBeenDestroyed()&amp;&amp;i.init():i=new r,i.refCounter++,i}function r(){this.refCounter=0,this.init()}var i;"undefined"!=typeof n&amp;&amp;(t.exports=o),r.prototype.init=function(){var e,t;this.copyCallbacks=[],this.cutCallbacks=[],this.pasteCallbacks=[],t=document.body,document.getElementById("CopyPasteDiv")?(this.elDiv=document.getElementById("CopyPasteDiv"),this.elTextarea=this.elDiv.firstChild):(this.elDiv=document.createElement("div"),this.elDiv.id="CopyPasteDiv",e=this.elDiv.style,e.position="fixed",e.top="-10000px",e.left="-10000px",t.appendChild(this.elDiv),this.elTextarea=document.createElement("textarea"),this.elTextarea.className="copyPaste",this.elTextarea.onpaste=function(e){var t,n;"WebkitAppearance"in document.documentElement.style&amp;&amp;(t=e.clipboardData.getData("Text"),navigator.userAgent.indexOf("Safari")!==-1&amp;&amp;navigator.userAgent.indexOf("Chrome")===-1&amp;&amp;(n=t.split("\n"),""===n[n.length-1]&amp;&amp;n.pop(),t=n.join("\n")),this.value=t,e.preventDefault())},e=this.elTextarea.style,e.width="10000px",e.height="10000px",e.overflow="hidden",this.elDiv.appendChild(this.elTextarea),"undefined"!=typeof e.opacity&amp;&amp;(e.opacity=0)),this.onKeyDownRef=this.onKeyDown.bind(this),document.documentElement.addEventListener("keydown",this.onKeyDownRef,!1)},r.prototype.onKeyDown=function(e){function t(){var e=document.activeElement;return e.shadowRoot&amp;&amp;e.shadowRoot.activeElement&amp;&amp;(e=e.shadowRoot.activeElement),["INPUT","SELECT","TEXTAREA"].indexOf(e.nodeName)&gt;-1||"true"===e.contentEditable}var n=this,o=!1;if(e.metaKey?o=!0:e.ctrlKey&amp;&amp;navigator.userAgent.indexOf("Mac")===-1&amp;&amp;(o=!0),o){if(document.activeElement!==this.elTextarea&amp;&amp;(""!==this.getSelectionText()||t()))return;this.selectNodeText(this.elTextarea),setTimeout(function(){document.activeElement!==n.elTextarea&amp;&amp;n.selectNodeText(n.elTextarea)},0)}e.isImmediatePropagationEnabled===!1||!o||67!==e.keyCode&amp;&amp;86!==e.keyCode&amp;&amp;88!==e.keyCode||(88===e.keyCode?setTimeout(function(){n.triggerCut(e)},0):86===e.keyCode&amp;&amp;setTimeout(function(){n.triggerPaste(e)},0))},r.prototype.selectNodeText=function(e){e&amp;&amp;e.select()},r.prototype.getSelectionText=function(){var e="";return window.getSelection?e=window.getSelection().toString():document.selection&amp;&amp;"Control"!==document.selection.type&amp;&amp;(e=document.selection.createRange().text),e},r.prototype.copyable=function(e){if("string"!=typeof e&amp;&amp;void 0===e.toString)throw new Error("copyable requires string parameter");this.elTextarea.value=e,this.selectNodeText(this.elTextarea)},r.prototype.onCut=function(e){this.cutCallbacks.push(e)},r.prototype.onPaste=function(e){this.pasteCallbacks.push(e)},r.prototype.removeCallback=function(e){var t,n;for(t=0,n=this.copyCallbacks.length;t&lt;n;t++)if(this.copyCallbacks[t]===e)return this.copyCallbacks.splice(t,1),!0;for(t=0,n=this.cutCallbacks.length;t&lt;n;t++)if(this.cutCallbacks[t]===e)return this.cutCallbacks.splice(t,1),!0;for(t=0,n=this.pasteCallbacks.length;t&lt;n;t++)if(this.pasteCallbacks[t]===e)return this.pasteCallbacks.splice(t,1),!0;return!1},r.prototype.triggerCut=function(e){var t=this;t.cutCallbacks&amp;&amp;setTimeout(function(){for(var n=0,o=t.cutCallbacks.length;n&lt;o;n++)t.cutCallbacks[n](e)},50)},r.prototype.triggerPaste=function(e,t){var n=this;n.pasteCallbacks&amp;&amp;setTimeout(function(){for(var o=t||n.elTextarea.value,r=0,i=n.pasteCallbacks.length;r&lt;i;r++)n.pasteCallbacks[r](o,e)},50)},r.prototype.destroy=function(){this.hasBeenDestroyed()||0!==--this.refCounter||(this.elDiv&amp;&amp;this.elDiv.parentNode&amp;&amp;(this.elDiv.parentNode.removeChild(this.elDiv),this.elDiv=null,this.elTextarea=null),document.documentElement.removeEventListener("keydown",this.onKeyDownRef),this.onKeyDownRef=null)},r.prototype.hasBeenDestroyed=function(){return!this.refCounter}},{}],es6collections:[function(e,t,n){/*!
 * Copyright (C) 2011 by Andrea Giammarchi, @WebReflection
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
!function(e){"use strict";function t(e,t){function o(e){return this&amp;&amp;this.constructor===o?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=t,void(e&amp;&amp;n.call(this,e))):new o(e)}return t||y(e,"size",{get:g}),e.constructor=o,o.prototype=e,o}function n(e){this.add?e.forEach(this.add,this):e.forEach(function(e){this.set(e[0],e[1])},this)}function o(e){return this.has(e)&amp;&amp;(this._keys.splice(v,1),this._values.splice(v,1),this._itp.forEach(function(e){v&lt;e[0]&amp;&amp;e[0]--})),-1&lt;v}function r(e){return this.has(e)?this._values[v]:void 0}function i(e,t){if(this.objectOnly&amp;&amp;t!==Object(t))throw new TypeError("Invalid value used as weak collection key");if(t!=t||0===t)for(v=e.length;v--&amp;&amp;!b(e[v],t););else v=e.indexOf(t);return-1&lt;v}function s(e){return i.call(this,this._values,e)}function a(e){return i.call(this,this._keys,e)}function l(e,t){return this.has(e)?this._values[v]=t:this._values[this._keys.push(e)-1]=t,this}function u(e){return this.has(e)||this._values.push(e),this}function c(){this._values.length=0}function d(){return m(this._itp,this._keys)}function h(){return m(this._itp,this._values)}function f(){return m(this._itp,this._keys,this._values)}function p(){return m(this._itp,this._values,this._values)}function m(e,t,n){var o=[0],r=!1;return e.push(o),{next:function(){var i,s=o[0];return!r&amp;&amp;s&lt;t.length?(i=n?[t[s],n[s]]:t[s],o[0]++):(r=!0,e.splice(e.indexOf(o),1)),{done:r,value:i}}}}function g(){return this._values.length}function w(e,t){for(var n=this.entries();;){var o=n.next();if(o.done)break;e.call(t,o.value[1],o.value[0],this)}}var v,y=Object.defineProperty,b=function(e,t){return isNaN(e)?isNaN(t):e===t};"undefined"==typeof WeakMap&amp;&amp;(e.WeakMap=t({delete:o,clear:c,get:r,has:a,set:l},!0)),"undefined"==typeof Map&amp;&amp;(e.Map=t({delete:o,has:a,get:r,set:l,keys:d,values:h,entries:f,forEach:w,clear:c})),"undefined"==typeof Set&amp;&amp;(e.Set=t({has:s,add:u,delete:o,clear:c,keys:h,values:h,entries:p,forEach:w})),"undefined"==typeof WeakSet&amp;&amp;(e.WeakSet=t({delete:o,add:u,clear:c,has:s},!0))}("undefined"!=typeof n&amp;&amp;"undefined"!=typeof global?global:window)},{}],jsonpatch:[function(e,t,n){/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * json-patch-duplex.js version: 0.5.7
 * (c) 2013 Joachim Wester
 * MIT license
 */
var o,r=this&amp;&amp;this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&amp;&amp;(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=Error;!function(e){function t(e,n){switch(typeof e){case"undefined":case"boolean":case"string":case"number":return e===n;case"object":if(null===e)return null===n;if(E(e)){if(!E(n)||e.length!==n.length)return!1;for(var o=0,r=e.length;o&lt;r;o++)if(!t(e[o],n[o]))return!1;return!0}var i=y(n),s=i.length;if(y(e).length!==s)return!1;for(var o=0;o&lt;s;o++)if(!t(e[o],n[o]))return!1;return!0;default:return!1}}function n(e){return e.indexOf("/")===-1&amp;&amp;e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function o(e){for(var t=0,n=R.length;t&lt;n;t++)if(R[t].obj===e)return R[t]}function s(e,t){for(var n=0,o=e.observers.length;n&lt;o;n++)if(e.observers[n].callback===t)return e.observers[n].observer}function a(e,t){for(var n=0,o=e.observers.length;n&lt;o;n++)if(e.observers[n].observer===t)return void e.observers.splice(n,1)}function l(e,t){t.unobserve()}function u(e){return"object"==typeof e?JSON.parse(JSON.stringify(e)):e}function c(e,t){var n,r=[],l=o(e);if(l?n=s(l,t):(l=new M(e),R.push(l)),n)return n;if(n={},l.value=u(e),t){n.callback=t,n.next=null;var c=this.intervals||[100,1e3,1e4,6e4];if(void 0===c.push)throw new i("jsonpatch.intervals must be an array");var h=0,f=function(){d(n)},p=function(){clearTimeout(n.next),n.next=setTimeout(function(){f(),h=0,n.next=setTimeout(m,c[h++])},0)},m=function(){f(),h==c.length&amp;&amp;(h=c.length-1),n.next=setTimeout(m,c[h++])};"undefined"!=typeof window&amp;&amp;(window.addEventListener?(window.addEventListener("mousedown",p),window.addEventListener("mouseup",p),window.addEventListener("keydown",p)):(document.documentElement.attachEvent("onmousedown",p),document.documentElement.attachEvent("onmouseup",p),document.documentElement.attachEvent("onkeydown",p))),n.next=setTimeout(m,c[h++])}return n.patches=r,n.object=e,n.unobserve=function(){d(n),clearTimeout(n.next),a(l,n),"undefined"!=typeof window&amp;&amp;(window.removeEventListener?(window.removeEventListener("mousedown",p),window.removeEventListener("mouseup",p),window.removeEventListener("keydown",p)):(document.documentElement.detachEvent("onmousedown",p),document.documentElement.detachEvent("onmouseup",p),document.documentElement.detachEvent("onkeydown",p)))},l.observers.push(new S(t,n)),n}function d(e){for(var t,n=0,o=R.length;n&lt;o;n++)if(R[n].obj===e.object){t=R[n];break}h(t.value,e.object,e.patches,""),e.patches.length&amp;&amp;p(t.value,e.patches);var r=e.patches;return r.length&gt;0&amp;&amp;(e.patches=[],e.callback&amp;&amp;e.callback(r)),r}function h(e,t,o,r){for(var i=y(t),s=y(e),a=!1,l=!1,c=s.length-1;c&gt;=0;c--){var d=s[c],f=e[d];if(t.hasOwnProperty(d)){var p=t[d];"object"==typeof f&amp;&amp;null!=f&amp;&amp;"object"==typeof p&amp;&amp;null!=p?h(f,p,o,r+"/"+n(d)):f!=p&amp;&amp;(a=!0,o.push({op:"replace",path:r+"/"+n(d),value:u(p)}))}else o.push({op:"remove",path:r+"/"+n(d)}),l=!0}if(l||i.length!=s.length)for(var c=0;c&lt;i.length;c++){var d=i[c];e.hasOwnProperty(d)||o.push({op:"add",path:r+"/"+n(d),value:u(t[d])})}}function f(e){for(var t,n=0,o=e.length;n&lt;o;){t=e.charCodeAt(n);{if(!(t&gt;=48&amp;&amp;t&lt;=57))return!1;n++}}return!0}function p(e,t,n){for(var o,r,i=!1,s=0,a=t.length;s&lt;a;){o=t[s],s++;for(var l=o.path||"",u=l.split("/"),c=e,d=1,h=u.length,p=void 0;;){if(r=u[d],n&amp;&amp;void 0===p&amp;&amp;(void 0===c[r]?p=u.slice(0,d).join("/"):d==h-1&amp;&amp;(p=o.path),void 0!==p&amp;&amp;this.validator(o,s-1,e,p)),d++,void 0===r&amp;&amp;d&gt;=h){i=_[o.op].call(o,c,r,e);break}if(E(c)){if("-"===r)r=c.length;else{if(n&amp;&amp;!f(r))throw new O("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s-1,o.path,o);r=parseInt(r,10)}if(d&gt;=h){if(n&amp;&amp;"add"===o.op&amp;&amp;r&gt;c.length)throw new O("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s-1,o.path,o);i=C[o.op].call(o,c,r,e);break}}else if(r&amp;&amp;r.indexOf("~")!=-1&amp;&amp;(r=r.replace(/~1/g,"/").replace(/~0/g,"~")),d&gt;=h){i=b[o.op].call(o,c,r,e);break}c=c[r]}}return i}function m(e,t){var n=[];return h(e,t,n,""),n}function g(e){if(void 0===e)return!0;if("array"==typeof e||"object"==typeof e)for(var t in e)if(g(e[t]))return!0;return!1}function w(t,n,o,r){if("object"!=typeof t||null===t||E(t))throw new O("Operation is not an object","OPERATION_NOT_AN_OBJECT",n,t,o);if(!b[t.op])throw new O("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",n,t,o);if("string"!=typeof t.path)throw new O("Operation `path` property is not a string","OPERATION_PATH_INVALID",n,t,o);if(("move"===t.op||"copy"===t.op)&amp;&amp;"string"!=typeof t.from)throw new O("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",n,t,o);if(("add"===t.op||"replace"===t.op||"test"===t.op)&amp;&amp;void 0===t.value)throw new O("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",n,t,o);if(("add"===t.op||"replace"===t.op||"test"===t.op)&amp;&amp;g(t.value))throw new O("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",n,t,o);if(o)if("add"==t.op){var i=t.path.split("/").length,s=r.split("/").length;if(i!==s+1&amp;&amp;i!==s)throw new O("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",n,t,o)}else if("replace"===t.op||"remove"===t.op||"_get"===t.op){if(t.path!==r)throw new O("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",n,t,o)}else if("move"===t.op||"copy"===t.op){var a={op:"_get",path:t.from,value:void 0},l=e.validate([a],o);if(l&amp;&amp;"OPERATION_PATH_UNRESOLVABLE"===l.name)throw new O("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",n,t,o)}}function v(e,t){try{if(!E(e))throw new O("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)t=JSON.parse(JSON.stringify(t)),p.call(this,t,e,!0);else for(var n=0;n&lt;e.length;n++)this.validator(e[n],n)}catch(e){if(e instanceof O)return e;throw e}}var y=function(e){if(E(e)){for(var t=new Array(e.length),n=0;n&lt;t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var t=[];for(var o in e)e.hasOwnProperty(o)&amp;&amp;t.push(o);return t},b={add:function(e,t){return e[t]=this.value,!0},remove:function(e,t){return delete e[t],!0},replace:function(e,t){return e[t]=this.value,!0},move:function(e,t,n){var o={op:"_get",path:this.from};return p(n,[o]),p(n,[{op:"remove",path:this.from}]),p(n,[{op:"add",path:this.path,value:o.value}]),!0},copy:function(e,t,n){var o={op:"_get",path:this.from};return p(n,[o]),p(n,[{op:"add",path:this.path,value:o.value}]),!0},test:function(e,n){return t(e[n],this.value)},_get:function(e,t){this.value=e[t]}},C={add:function(e,t){return e.splice(t,0,this.value),!0},remove:function(e,t){return e.splice(t,1),!0},replace:function(e,t){return e[t]=this.value,!0},move:b.move,copy:b.copy,test:b.test,_get:b._get},_={add:function(e){_.remove.call(this,e);for(var t in this.value)this.value.hasOwnProperty(t)&amp;&amp;(e[t]=this.value[t]);return!0},remove:function(e){for(var t in e)e.hasOwnProperty(t)&amp;&amp;b.remove.call(this,e,t);return!0},replace:function(e){return p(e,[{op:"remove",path:this.path}]),p(e,[{op:"add",path:this.path,value:this.value}]),!0},move:b.move,copy:b.copy,test:function(e){return JSON.stringify(e)===JSON.stringify(this.value)},_get:function(e){this.value=e}},R=[],M=function(){function e(e){this.observers=[],this.obj=e}return e}(),S=function(){function e(e,t){this.callback=e,this.observer=t}return e}();e.unobserve=l,e.observe=c,e.generate=d;var E;E=Array.isArray?Array.isArray:function(e){return e.push&amp;&amp;"number"==typeof e.length},e.apply=p,e.compare=m;var O=function(e){function t(t,n,o,r,i){e.call(this,t),this.message=t,this.name=n,this.index=o,this.operation=r,this.tree=i}return r(t,e),t}(i);e.JsonPatchError=O,e.Error=O,e.validator=w,e.validate=v}(o||(o={})),"undefined"!=typeof n&amp;&amp;(n.apply=o.apply,n.observe=o.observe,n.unobserve=o.unobserve,n.generate=o.generate,n.compare=o.compare,n.validate=o.validate,n.validator=o.validator,n.JsonPatchError=o.JsonPatchError,n.Error=o.Error)},{}],moment:[function(t,n,o){!function(t,r){"object"==typeof o&amp;&amp;"undefined"!=typeof n?n.exports=r():"function"==typeof e&amp;&amp;e.amd?e(r):t.moment=r()}(this,function(){"use strict";function e(){return vo.apply(null,arguments)}function o(e){vo=e}function r(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function i(e){return null!=e&amp;&amp;"[object Object]"===Object.prototype.toString.call(e)}function s(e){var t;for(t in e)return!1;return!0}function a(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function l(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function u(e,t){var n,o=[];for(n=0;n&lt;e.length;++n)o.push(t(e[n],n));return o}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function d(e,t){for(var n in t)c(t,n)&amp;&amp;(e[n]=t[n]);return c(t,"toString")&amp;&amp;(e.toString=t.toString),c(t,"valueOf")&amp;&amp;(e.valueOf=t.valueOf),e}function h(e,t,n,o){return yt(e,t,n,o,!0).utc()}function f(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function p(e){return null==e._pf&amp;&amp;(e._pf=f()),e._pf}function m(e){if(null==e._isValid){var t=p(e),n=bo.call(t.parsedDateParts,function(e){return null!=e}),o=!isNaN(e._d.getTime())&amp;&amp;t.overflow&lt;0&amp;&amp;!t.empty&amp;&amp;!t.invalidMonth&amp;&amp;!t.invalidWeekday&amp;&amp;!t.nullInput&amp;&amp;!t.invalidFormat&amp;&amp;!t.userInvalidated&amp;&amp;(!t.meridiem||t.meridiem&amp;&amp;n);if(e._strict&amp;&amp;(o=o&amp;&amp;0===t.charsLeftOver&amp;&amp;0===t.unusedTokens.length&amp;&amp;void 0===t.bigHour),null!=Object.isFrozen&amp;&amp;Object.isFrozen(e))return o;e._isValid=o}return e._isValid}function g(e){var t=h(NaN);return null!=e?d(p(t),e):p(t).userInvalidated=!0,t}function w(e){return void 0===e}function v(e,t){var n,o,r;if(w(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),w(t._i)||(e._i=t._i),w(t._f)||(e._f=t._f),w(t._l)||(e._l=t._l),w(t._strict)||(e._strict=t._strict),w(t._tzm)||(e._tzm=t._tzm),w(t._isUTC)||(e._isUTC=t._isUTC),w(t._offset)||(e._offset=t._offset),w(t._pf)||(e._pf=p(t)),w(t._locale)||(e._locale=t._locale),Co.length&gt;0)for(n in Co)o=Co[n],r=t[o],w(r)||(e[o]=r);return e}function y(t){v(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),_o===!1&amp;&amp;(_o=!0,e.updateOffset(this),_o=!1)}function b(e){return e instanceof y||null!=e&amp;&amp;null!=e._isAMomentObject}function C(e){return e&lt;0?Math.ceil(e)||0:Math.floor(e)}function _(e){var t=+e,n=0;return 0!==t&amp;&amp;isFinite(t)&amp;&amp;(n=C(t)),n}function R(e,t,n){var o,r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0;for(o=0;o&lt;r;o++)(n&amp;&amp;e[o]!==t[o]||!n&amp;&amp;_(e[o])!==_(t[o]))&amp;&amp;s++;return s+i}function M(t){e.suppressDeprecationWarnings===!1&amp;&amp;"undefined"!=typeof console&amp;&amp;console.warn&amp;&amp;console.warn("Deprecation warning: "+t)}function S(t,n){var o=!0;return d(function(){if(null!=e.deprecationHandler&amp;&amp;e.deprecationHandler(null,t),o){for(var r,i=[],s=0;s&lt;arguments.length;s++){if(r="","object"==typeof arguments[s]){r+="\n["+s+"] ";for(var a in arguments[0])r+=a+": "+arguments[0][a]+", ";r=r.slice(0,-2)}else r=arguments[s];i.push(r)}M(t+"\nArguments: "+Array.prototype.slice.call(i).join("")+"\n"+(new Error).stack),o=!1}return n.apply(this,arguments)},n)}function E(t,n){null!=e.deprecationHandler&amp;&amp;e.deprecationHandler(t,n),Ro[t]||(M(n),Ro[t]=!0)}function O(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function T(e){var t,n;for(n in e)t=e[n],O(t)?this[n]=t:this["_"+n]=t;this._config=e,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function k(e,t){var n,o=d({},e);for(n in t)c(t,n)&amp;&amp;(i(e[n])&amp;&amp;i(t[n])?(o[n]={},d(o[n],e[n]),d(o[n],t[n])):null!=t[n]?o[n]=t[n]:delete o[n]);for(n in e)c(e,n)&amp;&amp;!c(t,n)&amp;&amp;i(e[n])&amp;&amp;(o[n]=d({},o[n]));return o}function x(e){null!=e&amp;&amp;this.set(e)}function D(e,t,n){var o=this._calendar[e]||this._calendar.sameElse;return O(o)?o.call(t,n):o}function H(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function A(){return this._invalidDate}function P(e){return this._ordinal.replace("%d",e)}function N(e,t,n,o){var r=this._relativeTime[n];return O(r)?r(e,t,n,o):r.replace(/%d/i,e)}function L(e,t){var n=this._relativeTime[e&gt;0?"future":"past"];return O(n)?n(t):n.replace(/%s/i,t)}function I(e,t){var n=e.toLowerCase();Ao[n]=Ao[n+"s"]=Ao[t]=e}function W(e){return"string"==typeof e?Ao[e]||Ao[e.toLowerCase()]:void 0}function j(e){var t,n,o={};for(n in e)c(e,n)&amp;&amp;(t=W(n),t&amp;&amp;(o[t]=e[n]));return o}function V(e,t){Po[e]=t}function B(e){var t=[];for(var n in e)t.push({unit:n,priority:Po[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}function F(t,n){return function(o){return null!=o?(Y(this,t,o),e.updateOffset(this,n),this):z(this,t)}}function z(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Y(e,t,n){e.isValid()&amp;&amp;e._d["set"+(e._isUTC?"UTC":"")+t](n)}function U(e){return e=W(e),O(this[e])?this[e]():this}function G(e,t){if("object"==typeof e){e=j(e);for(var n=B(e),o=0;o&lt;n.length;o++)this[n[o].unit](e[n[o].unit])}else if(e=W(e),O(this[e]))return this[e](t);return this}function $(e,t,n){var o=""+Math.abs(e),r=t-o.length,i=e&gt;=0;return(i?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+o}function K(e,t,n,o){var r=o;"string"==typeof o&amp;&amp;(r=function(){return this[o]()}),e&amp;&amp;(Wo[e]=r),t&amp;&amp;(Wo[t[0]]=function(){return $(r.apply(this,arguments),t[1],t[2])}),n&amp;&amp;(Wo[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function X(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function q(e){var t,n,o=e.match(No);for(t=0,n=o.length;t&lt;n;t++)Wo[o[t]]?o[t]=Wo[o[t]]:o[t]=X(o[t]);return function(t){var r,i="";for(r=0;r&lt;n;r++)i+=o[r]instanceof Function?o[r].call(t,e):o[r];return i}}function Z(e,t){return e.isValid()?(t=J(t,e.localeData()),Io[t]=Io[t]||q(t),Io[t](e)):e.localeData().invalidDate()}function J(e,t){function n(e){return t.longDateFormat(e)||e}var o=5;for(Lo.lastIndex=0;o&gt;=0&amp;&amp;Lo.test(e);)e=e.replace(Lo,n),Lo.lastIndex=0,o-=1;return e}function Q(e,t,n){nr[e]=O(t)?t:function(e,o){return e&amp;&amp;n?n:t}}function ee(e,t){return c(nr,e)?nr[e](t._strict,t._locale):new RegExp(te(e))}function te(e){return ne(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,o,r){return t||n||o||r}))}function ne(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&amp;")}function oe(e,t){var n,o=t;for("string"==typeof e&amp;&amp;(e=[e]),a(t)&amp;&amp;(o=function(e,n){n[t]=_(e)}),n=0;n&lt;e.length;n++)or[e[n]]=o}function re(e,t){oe(e,function(e,n,o,r){o._w=o._w||{},t(e,o._w,o,r)})}function ie(e,t,n){null!=t&amp;&amp;c(or,e)&amp;&amp;or[e](t,n._a,n,e)}function se(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function ae(e,t){return e?r(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||pr).test(t)?"format":"standalone"][e.month()]:this._months}function le(e,t){return e?r(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[pr.test(t)?"format":"standalone"][e.month()]:this._monthsShort}function ue(e,t,n){var o,r,i,s=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],o=0;o&lt;12;++o)i=h([2e3,o]),this._shortMonthsParse[o]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[o]=this.months(i,"").toLocaleLowerCase();return n?"MMM"===t?(r=fr.call(this._shortMonthsParse,s),r!==-1?r:null):(r=fr.call(this._longMonthsParse,s),r!==-1?r:null):"MMM"===t?(r=fr.call(this._shortMonthsParse,s),r!==-1?r:(r=fr.call(this._longMonthsParse,s),r!==-1?r:null)):(r=fr.call(this._longMonthsParse,s),r!==-1?r:(r=fr.call(this._shortMonthsParse,s),r!==-1?r:null))}function ce(e,t,n){var o,r,i;if(this._monthsParseExact)return ue.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),o=0;o&lt;12;o++){if(r=h([2e3,o]),n&amp;&amp;!this._longMonthsParse[o]&amp;&amp;(this._longMonthsParse[o]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[o]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[o]||(i="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[o]=new RegExp(i.replace(".",""),"i")),n&amp;&amp;"MMMM"===t&amp;&amp;this._longMonthsParse[o].test(e))return o;if(n&amp;&amp;"MMM"===t&amp;&amp;this._shortMonthsParse[o].test(e))return o;if(!n&amp;&amp;this._monthsParse[o].test(e))return o}}function de(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=_(t);else if(t=e.localeData().monthsParse(t),!a(t))return e;return n=Math.min(e.date(),se(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function he(t){return null!=t?(de(this,t),e.updateOffset(this,!0),this):z(this,"Month")}function fe(){return se(this.year(),this.month())}function pe(e){return this._monthsParseExact?(c(this,"_monthsRegex")||ge.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=wr),this._monthsShortStrictRegex&amp;&amp;e?this._monthsShortStrictRegex:this._monthsShortRegex)}function me(e){return this._monthsParseExact?(c(this,"_monthsRegex")||ge.call(this),e?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=vr),this._monthsStrictRegex&amp;&amp;e?this._monthsStrictRegex:this._monthsRegex)}function ge(){function e(e,t){return t.length-e.length}var t,n,o=[],r=[],i=[];for(t=0;t&lt;12;t++)n=h([2e3,t]),o.push(this.monthsShort(n,"")),r.push(this.months(n,"")),i.push(this.months(n,"")),i.push(this.monthsShort(n,""));for(o.sort(e),r.sort(e),i.sort(e),t=0;t&lt;12;t++)o[t]=ne(o[t]),r[t]=ne(r[t]);for(t=0;t&lt;24;t++)i[t]=ne(i[t]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+o.join("|")+")","i")}function we(e){return ve(e)?366:365}function ve(e){return e%4===0&amp;&amp;e%100!==0||e%400===0}function ye(){return ve(this.year())}function be(e,t,n,o,r,i,s){var a=new Date(e,t,n,o,r,i,s);return e&lt;100&amp;&amp;e&gt;=0&amp;&amp;isFinite(a.getFullYear())&amp;&amp;a.setFullYear(e),a}function Ce(e){var t=new Date(Date.UTC.apply(null,arguments));return e&lt;100&amp;&amp;e&gt;=0&amp;&amp;isFinite(t.getUTCFullYear())&amp;&amp;t.setUTCFullYear(e),t}function _e(e,t,n){var o=7+t-n,r=(7+Ce(e,0,o).getUTCDay()-t)%7;return-r+o-1}function Re(e,t,n,o,r){var i,s,a=(7+n-o)%7,l=_e(e,o,r),u=1+7*(t-1)+a+l;return u&lt;=0?(i=e-1,s=we(i)+u):u&gt;we(e)?(i=e+1,s=u-we(e)):(i=e,s=u),{year:i,dayOfYear:s}}function Me(e,t,n){var o,r,i=_e(e.year(),t,n),s=Math.floor((e.dayOfYear()-i-1)/7)+1;return s&lt;1?(r=e.year()-1,o=s+Se(r,t,n)):s&gt;Se(e.year(),t,n)?(o=s-Se(e.year(),t,n),r=e.year()+1):(r=e.year(),o=s),{week:o,year:r}}function Se(e,t,n){var o=_e(e,t,n),r=_e(e+1,t,n);return(we(e)-o+r)/7}function Ee(e){return Me(e,this._week.dow,this._week.doy).week}function Oe(){return this._week.dow}function Te(){return this._week.doy}function ke(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function xe(e){var t=Me(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function De(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function He(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Ae(e,t){return e?r(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:this._weekdays}function Pe(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Ne(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Le(e,t,n){var o,r,i,s=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],o=0;o&lt;7;++o)i=h([2e3,1]).day(o),this._minWeekdaysParse[o]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[o]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[o]=this.weekdays(i,"").toLocaleLowerCase();return n?"dddd"===t?(r=fr.call(this._weekdaysParse,s),r!==-1?r:null):"ddd"===t?(r=fr.call(this._shortWeekdaysParse,s),r!==-1?r:null):(r=fr.call(this._minWeekdaysParse,s),r!==-1?r:null):"dddd"===t?(r=fr.call(this._weekdaysParse,s),r!==-1?r:(r=fr.call(this._shortWeekdaysParse,s),r!==-1?r:(r=fr.call(this._minWeekdaysParse,s),r!==-1?r:null))):"ddd"===t?(r=fr.call(this._shortWeekdaysParse,s),r!==-1?r:(r=fr.call(this._weekdaysParse,s),r!==-1?r:(r=fr.call(this._minWeekdaysParse,s),r!==-1?r:null))):(r=fr.call(this._minWeekdaysParse,s),r!==-1?r:(r=fr.call(this._weekdaysParse,s),r!==-1?r:(r=fr.call(this._shortWeekdaysParse,s),r!==-1?r:null)))}function Ie(e,t,n){var o,r,i;if(this._weekdaysParseExact)return Le.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),o=0;o&lt;7;o++){if(r=h([2e3,1]).day(o),n&amp;&amp;!this._fullWeekdaysParse[o]&amp;&amp;(this._fullWeekdaysParse[o]=new RegExp("^"+this.weekdays(r,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[o]=new RegExp("^"+this.weekdaysShort(r,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[o]=new RegExp("^"+this.weekdaysMin(r,"").replace(".",".?")+"$","i")),this._weekdaysParse[o]||(i="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[o]=new RegExp(i.replace(".",""),"i")),n&amp;&amp;"dddd"===t&amp;&amp;this._fullWeekdaysParse[o].test(e))return o;if(n&amp;&amp;"ddd"===t&amp;&amp;this._shortWeekdaysParse[o].test(e))return o;if(n&amp;&amp;"dd"===t&amp;&amp;this._minWeekdaysParse[o].test(e))return o;if(!n&amp;&amp;this._weekdaysParse[o].test(e))return o}}function We(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=De(e,this.localeData()),this.add(e-t,"d")):t}function je(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Ve(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=He(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Be(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ye.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=Mr),this._weekdaysStrictRegex&amp;&amp;e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Fe(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ye.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Sr),this._weekdaysShortStrictRegex&amp;&amp;e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function ze(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ye.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Er),this._weekdaysMinStrictRegex&amp;&amp;e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ye(){function e(e,t){return t.length-e.length}var t,n,o,r,i,s=[],a=[],l=[],u=[];for(t=0;t&lt;7;t++)n=h([2e3,1]).day(t),o=this.weekdaysMin(n,""),r=this.weekdaysShort(n,""),i=this.weekdays(n,""),s.push(o),a.push(r),l.push(i),u.push(o),u.push(r),u.push(i);for(s.sort(e),a.sort(e),l.sort(e),u.sort(e),t=0;t&lt;7;t++)a[t]=ne(a[t]),l[t]=ne(l[t]),u[t]=ne(u[t]);this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Ue(){return this.hours()%12||12}function Ge(){return this.hours()||24}function $e(e,t){K(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Ke(e,t){return t._meridiemParse}function Xe(e){return"p"===(e+"").toLowerCase().charAt(0)}function qe(e,t,n){return e&gt;11?n?"pm":"PM":n?"am":"AM"}function Ze(e){return e?e.toLowerCase().replace("_","-"):e}function Je(e){for(var t,n,o,r,i=0;i&lt;e.length;){for(r=Ze(e[i]).split("-"),t=r.length,n=Ze(e[i+1]),n=n?n.split("-"):null;t&gt;0;){if(o=Qe(r.slice(0,t).join("-")))return o;if(n&amp;&amp;n.length&gt;=t&amp;&amp;R(r,n,!0)&gt;=t-1)break;t--}i++}return null}function Qe(e){var o=null;if(!Dr[e]&amp;&amp;"undefined"!=typeof n&amp;&amp;n&amp;&amp;n.exports)try{o=Or._abbr,t("./locale/"+e),et(o)}catch(e){}return Dr[e]}function et(e,t){var n;return e&amp;&amp;(n=w(t)?ot(e):tt(e,t),n&amp;&amp;(Or=n)),Or._abbr}function tt(e,t){if(null!==t){var n=xr;if(t.abbr=e,null!=Dr[e])E("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Dr[e]._config;else if(null!=t.parentLocale){if(null==Dr[t.parentLocale])return Hr[t.parentLocale]||(Hr[t.parentLocale]=[]),Hr[t.parentLocale].push({name:e,config:t}),null;n=Dr[t.parentLocale]._config}return Dr[e]=new x(k(n,t)),Hr[e]&amp;&amp;Hr[e].forEach(function(e){tt(e.name,e.config)}),et(e),Dr[e]}return delete Dr[e],null}function nt(e,t){if(null!=t){var n,o=xr;null!=Dr[e]&amp;&amp;(o=Dr[e]._config),t=k(o,t),n=new x(t),n.parentLocale=Dr[e],Dr[e]=n,et(e)}else null!=Dr[e]&amp;&amp;(null!=Dr[e].parentLocale?Dr[e]=Dr[e].parentLocale:null!=Dr[e]&amp;&amp;delete Dr[e]);return Dr[e]}function ot(e){var t;if(e&amp;&amp;e._locale&amp;&amp;e._locale._abbr&amp;&amp;(e=e._locale._abbr),!e)return Or;if(!r(e)){if(t=Qe(e))return t;e=[e]}return Je(e)}function rt(){return Eo(Dr)}function it(e){var t,n=e._a;return n&amp;&amp;p(e).overflow===-2&amp;&amp;(t=n[ir]&lt;0||n[ir]&gt;11?ir:n[sr]&lt;1||n[sr]&gt;se(n[rr],n[ir])?sr:n[ar]&lt;0||n[ar]&gt;24||24===n[ar]&amp;&amp;(0!==n[lr]||0!==n[ur]||0!==n[cr])?ar:n[lr]&lt;0||n[lr]&gt;59?lr:n[ur]&lt;0||n[ur]&gt;59?ur:n[cr]&lt;0||n[cr]&gt;999?cr:-1,p(e)._overflowDayOfYear&amp;&amp;(t&lt;rr||t&gt;sr)&amp;&amp;(t=sr),p(e)._overflowWeeks&amp;&amp;t===-1&amp;&amp;(t=dr),p(e)._overflowWeekday&amp;&amp;t===-1&amp;&amp;(t=hr),p(e).overflow=t),e}function st(e){var t,n,o,r,i,s,a=e._i,l=Ar.exec(a)||Pr.exec(a);if(l){for(p(e).iso=!0,t=0,n=Lr.length;t&lt;n;t++)if(Lr[t][1].exec(l[1])){r=Lr[t][0],o=Lr[t][2]!==!1;break}if(null==r)return void(e._isValid=!1);if(l[3]){for(t=0,n=Ir.length;t&lt;n;t++)if(Ir[t][1].exec(l[3])){i=(l[2]||" ")+Ir[t][0];break}if(null==i)return void(e._isValid=!1)}if(!o&amp;&amp;null!=i)return void(e._isValid=!1);if(l[4]){if(!Nr.exec(l[4]))return void(e._isValid=!1);s="Z"}e._f=r+(i||"")+(s||""),ht(e)}else e._isValid=!1}function at(t){var n=Wr.exec(t._i);return null!==n?void(t._d=new Date(+n[1])):(st(t),void(t._isValid===!1&amp;&amp;(delete t._isValid,e.createFromInputFallback(t))))}function lt(e,t,n){return null!=e?e:null!=t?t:n}function ut(t){var n=new Date(e.now());return t._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function ct(e){var t,n,o,r,i=[];if(!e._d){for(o=ut(e),e._w&amp;&amp;null==e._a[sr]&amp;&amp;null==e._a[ir]&amp;&amp;dt(e),e._dayOfYear&amp;&amp;(r=lt(e._a[rr],o[rr]),e._dayOfYear&gt;we(r)&amp;&amp;(p(e)._overflowDayOfYear=!0),n=Ce(r,0,e._dayOfYear),e._a[ir]=n.getUTCMonth(),e._a[sr]=n.getUTCDate()),t=0;t&lt;3&amp;&amp;null==e._a[t];++t)e._a[t]=i[t]=o[t];for(;t&lt;7;t++)e._a[t]=i[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ar]&amp;&amp;0===e._a[lr]&amp;&amp;0===e._a[ur]&amp;&amp;0===e._a[cr]&amp;&amp;(e._nextDay=!0,e._a[ar]=0),e._d=(e._useUTC?Ce:be).apply(null,i),null!=e._tzm&amp;&amp;e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&amp;&amp;(e._a[ar]=24)}}function dt(e){var t,n,o,r,i,s,a,l;if(t=e._w,null!=t.GG||null!=t.W||null!=t.E)i=1,s=4,n=lt(t.GG,e._a[rr],Me(bt(),1,4).year),o=lt(t.W,1),r=lt(t.E,1),(r&lt;1||r&gt;7)&amp;&amp;(l=!0);else{i=e._locale._week.dow,s=e._locale._week.doy;var u=Me(bt(),i,s);n=lt(t.gg,e._a[rr],u.year),o=lt(t.w,u.week),null!=t.d?(r=t.d,(r&lt;0||r&gt;6)&amp;&amp;(l=!0)):null!=t.e?(r=t.e+i,(t.e&lt;0||t.e&gt;6)&amp;&amp;(l=!0)):r=i}o&lt;1||o&gt;Se(n,i,s)?p(e)._overflowWeeks=!0:null!=l?p(e)._overflowWeekday=!0:(a=Re(n,o,r,i,s),e._a[rr]=a.year,e._dayOfYear=a.dayOfYear)}function ht(t){if(t._f===e.ISO_8601)return void st(t);t._a=[],p(t).empty=!0;var n,o,r,i,s,a=""+t._i,l=a.length,u=0;for(r=J(t._f,t._locale).match(No)||[],n=0;n&lt;r.length;n++)i=r[n],o=(a.match(ee(i,t))||[])[0],o&amp;&amp;(s=a.substr(0,a.indexOf(o)),s.length&gt;0&amp;&amp;p(t).unusedInput.push(s),a=a.slice(a.indexOf(o)+o.length),u+=o.length),Wo[i]?(o?p(t).empty=!1:p(t).unusedTokens.push(i),ie(i,o,t)):t._strict&amp;&amp;!o&amp;&amp;p(t).unusedTokens.push(i);p(t).charsLeftOver=l-u,a.length&gt;0&amp;&amp;p(t).unusedInput.push(a),t._a[ar]&lt;=12&amp;&amp;p(t).bigHour===!0&amp;&amp;t._a[ar]&gt;0&amp;&amp;(p(t).bigHour=void 0),p(t).parsedDateParts=t._a.slice(0),p(t).meridiem=t._meridiem,t._a[ar]=ft(t._locale,t._a[ar],t._meridiem),ct(t),it(t)}function ft(e,t,n){var o;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(o=e.isPM(n),o&amp;&amp;t&lt;12&amp;&amp;(t+=12),o||12!==t||(t=0),t):t}function pt(e){var t,n,o,r,i;if(0===e._f.length)return p(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r&lt;e._f.length;r++)i=0,t=v({},e),null!=e._useUTC&amp;&amp;(t._useUTC=e._useUTC),t._f=e._f[r],ht(t),m(t)&amp;&amp;(i+=p(t).charsLeftOver,i+=10*p(t).unusedTokens.length,p(t).score=i,(null==o||i&lt;o)&amp;&amp;(o=i,n=t));d(e,n||t)}function mt(e){if(!e._d){var t=j(e._i);e._a=u([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&amp;&amp;parseInt(e,10)}),ct(e)}}function gt(e){var t=new y(it(wt(e)));return t._nextDay&amp;&amp;(t.add(1,"d"),t._nextDay=void 0),t}function wt(e){var t=e._i,n=e._f;return e._locale=e._locale||ot(e._l),null===t||void 0===n&amp;&amp;""===t?g({nullInput:!0}):("string"==typeof t&amp;&amp;(e._i=t=e._locale.preparse(t)),b(t)?new y(it(t)):(l(t)?e._d=t:r(n)?pt(e):n?ht(e):vt(e),m(e)||(e._d=null),e))}function vt(t){var n=t._i;void 0===n?t._d=new Date(e.now()):l(n)?t._d=new Date(n.valueOf()):"string"==typeof n?at(t):r(n)?(t._a=u(n.slice(0),function(e){return parseInt(e,10)}),ct(t)):"object"==typeof n?mt(t):a(n)?t._d=new Date(n):e.createFromInputFallback(t)}function yt(e,t,n,o,a){var l={};return n!==!0&amp;&amp;n!==!1||(o=n,n=void 0),(i(e)&amp;&amp;s(e)||r(e)&amp;&amp;0===e.length)&amp;&amp;(e=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=a,l._l=n,l._i=e,l._f=t,l._strict=o,gt(l)}function bt(e,t,n,o){return yt(e,t,n,o,!1)}function Ct(e,t){var n,o;if(1===t.length&amp;&amp;r(t[0])&amp;&amp;(t=t[0]),!t.length)return bt();for(n=t[0],o=1;o&lt;t.length;++o)t[o].isValid()&amp;&amp;!t[o][e](n)||(n=t[o]);return n}function _t(){var e=[].slice.call(arguments,0);return Ct("isBefore",e)}function Rt(){var e=[].slice.call(arguments,0);return Ct("isAfter",e)}function Mt(e){var t=j(e),n=t.year||0,o=t.quarter||0,r=t.month||0,i=t.week||0,s=t.day||0,a=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*u+6e4*l+1e3*a*60*60,this._days=+s+7*i,this._months=+r+3*o+12*n,this._data={},this._locale=ot(),this._bubble()}function St(e){return e instanceof Mt}function Et(e){return e&lt;0?Math.round(-1*e)*-1:Math.round(e)}function Ot(e,t){K(e,0,0,function(){var e=this.utcOffset(),n="+";return e&lt;0&amp;&amp;(e=-e,n="-"),n+$(~~(e/60),2)+t+$(~~e%60,2)})}function Tt(e,t){var n=(t||"").match(e);if(null===n)return null;var o=n[n.length-1]||[],r=(o+"").match(Fr)||["-",0,0],i=+(60*r[1])+_(r[2]);return 0===i?0:"+"===r[0]?i:-i}function kt(t,n){var o,r;return n._isUTC?(o=n.clone(),r=(b(t)||l(t)?t.valueOf():bt(t).valueOf())-o.valueOf(),o._d.setTime(o._d.valueOf()+r),e.updateOffset(o,!1),o):bt(t).local()}function xt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Dt(t,n){var o,r=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(t=Tt(Qo,t),null===t)return this}else Math.abs(t)&lt;16&amp;&amp;(t*=60);return!this._isUTC&amp;&amp;n&amp;&amp;(o=xt(this)),this._offset=t,this._isUTC=!0,null!=o&amp;&amp;this.add(o,"m"),r!==t&amp;&amp;(!n||this._changeInProgress?$t(this,Ft(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:xt(this)}function Ht(e,t){return null!=e?("string"!=typeof e&amp;&amp;(e=-e),this.utcOffset(e,t),this):-this.utcOffset();
}function At(e){return this.utcOffset(0,e)}function Pt(e){return this._isUTC&amp;&amp;(this.utcOffset(0,e),this._isUTC=!1,e&amp;&amp;this.subtract(xt(this),"m")),this}function Nt(){if(null!=this._tzm)this.utcOffset(this._tzm);else if("string"==typeof this._i){var e=Tt(Jo,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Lt(e){return!!this.isValid()&amp;&amp;(e=e?bt(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function It(){return this.utcOffset()&gt;this.clone().month(0).utcOffset()||this.utcOffset()&gt;this.clone().month(5).utcOffset()}function Wt(){if(!w(this._isDSTShifted))return this._isDSTShifted;var e={};if(v(e,this),e=wt(e),e._a){var t=e._isUTC?h(e._a):bt(e._a);this._isDSTShifted=this.isValid()&amp;&amp;R(e._a,t.toArray())&gt;0}else this._isDSTShifted=!1;return this._isDSTShifted}function jt(){return!!this.isValid()&amp;&amp;!this._isUTC}function Vt(){return!!this.isValid()&amp;&amp;this._isUTC}function Bt(){return!!this.isValid()&amp;&amp;(this._isUTC&amp;&amp;0===this._offset)}function Ft(e,t){var n,o,r,i=e,s=null;return St(e)?i={ms:e._milliseconds,d:e._days,M:e._months}:a(e)?(i={},t?i[t]=e:i.milliseconds=e):(s=zr.exec(e))?(n="-"===s[1]?-1:1,i={y:0,d:_(s[sr])*n,h:_(s[ar])*n,m:_(s[lr])*n,s:_(s[ur])*n,ms:_(Et(1e3*s[cr]))*n}):(s=Yr.exec(e))?(n="-"===s[1]?-1:1,i={y:zt(s[2],n),M:zt(s[3],n),w:zt(s[4],n),d:zt(s[5],n),h:zt(s[6],n),m:zt(s[7],n),s:zt(s[8],n)}):null==i?i={}:"object"==typeof i&amp;&amp;("from"in i||"to"in i)&amp;&amp;(r=Ut(bt(i.from),bt(i.to)),i={},i.ms=r.milliseconds,i.M=r.months),o=new Mt(i),St(e)&amp;&amp;c(e,"_locale")&amp;&amp;(o._locale=e._locale),o}function zt(e,t){var n=e&amp;&amp;parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Yt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&amp;&amp;--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Ut(e,t){var n;return e.isValid()&amp;&amp;t.isValid()?(t=kt(t,e),e.isBefore(t)?n=Yt(e,t):(n=Yt(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Gt(e,t){return function(n,o){var r,i;return null===o||isNaN(+o)||(E(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=o,o=i),n="string"==typeof n?+n:n,r=Ft(n,o),$t(this,r,e),this}}function $t(t,n,o,r){var i=n._milliseconds,s=Et(n._days),a=Et(n._months);t.isValid()&amp;&amp;(r=null==r||r,i&amp;&amp;t._d.setTime(t._d.valueOf()+i*o),s&amp;&amp;Y(t,"Date",z(t,"Date")+s*o),a&amp;&amp;de(t,z(t,"Month")+a*o),r&amp;&amp;e.updateOffset(t,s||a))}function Kt(e,t){var n=e.diff(t,"days",!0);return n&lt;-6?"sameElse":n&lt;-1?"lastWeek":n&lt;0?"lastDay":n&lt;1?"sameDay":n&lt;2?"nextDay":n&lt;7?"nextWeek":"sameElse"}function Xt(t,n){var o=t||bt(),r=kt(o,this).startOf("day"),i=e.calendarFormat(this,r)||"sameElse",s=n&amp;&amp;(O(n[i])?n[i].call(this,o):n[i]);return this.format(s||this.localeData().calendar(i,this,bt(o)))}function qt(){return new y(this)}function Zt(e,t){var n=b(e)?e:bt(e);return!(!this.isValid()||!n.isValid())&amp;&amp;(t=W(w(t)?"millisecond":t),"millisecond"===t?this.valueOf()&gt;n.valueOf():n.valueOf()&lt;this.clone().startOf(t).valueOf())}function Jt(e,t){var n=b(e)?e:bt(e);return!(!this.isValid()||!n.isValid())&amp;&amp;(t=W(w(t)?"millisecond":t),"millisecond"===t?this.valueOf()&lt;n.valueOf():this.clone().endOf(t).valueOf()&lt;n.valueOf())}function Qt(e,t,n,o){return o=o||"()",("("===o[0]?this.isAfter(e,n):!this.isBefore(e,n))&amp;&amp;(")"===o[1]?this.isBefore(t,n):!this.isAfter(t,n))}function en(e,t){var n,o=b(e)?e:bt(e);return!(!this.isValid()||!o.isValid())&amp;&amp;(t=W(t||"millisecond"),"millisecond"===t?this.valueOf()===o.valueOf():(n=o.valueOf(),this.clone().startOf(t).valueOf()&lt;=n&amp;&amp;n&lt;=this.clone().endOf(t).valueOf()))}function tn(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function nn(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function on(e,t,n){var o,r,i,s;return this.isValid()?(o=kt(e,this),o.isValid()?(r=6e4*(o.utcOffset()-this.utcOffset()),t=W(t),"year"===t||"month"===t||"quarter"===t?(s=rn(this,o),"quarter"===t?s/=3:"year"===t&amp;&amp;(s/=12)):(i=this-o,s="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-r)/864e5:"week"===t?(i-r)/6048e5:i),n?s:C(s)):NaN):NaN}function rn(e,t){var n,o,r=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(r,"months");return t-i&lt;0?(n=e.clone().add(r-1,"months"),o=(t-i)/(i-n)):(n=e.clone().add(r+1,"months"),o=(t-i)/(n-i)),-(r+o)||0}function sn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function an(){var e=this.clone().utc();return 0&lt;e.year()&amp;&amp;e.year()&lt;=9999?O(Date.prototype.toISOString)?this.toDate().toISOString():Z(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Z(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ln(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',o=0&lt;this.year()&amp;&amp;this.year()&lt;=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",i=t+'[")]';return this.format(n+o+r+i)}function un(t){t||(t=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var n=Z(this,t);return this.localeData().postformat(n)}function cn(e,t){return this.isValid()&amp;&amp;(b(e)&amp;&amp;e.isValid()||bt(e).isValid())?Ft({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function dn(e){return this.from(bt(),e)}function hn(e,t){return this.isValid()&amp;&amp;(b(e)&amp;&amp;e.isValid()||bt(e).isValid())?Ft({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function fn(e){return this.to(bt(),e)}function pn(e){var t;return void 0===e?this._locale._abbr:(t=ot(e),null!=t&amp;&amp;(this._locale=t),this)}function mn(){return this._locale}function gn(e){switch(e=W(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&amp;&amp;this.weekday(0),"isoWeek"===e&amp;&amp;this.isoWeekday(1),"quarter"===e&amp;&amp;this.month(3*Math.floor(this.month()/3)),this}function wn(e){return e=W(e),void 0===e||"millisecond"===e?this:("date"===e&amp;&amp;(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function vn(){return this._d.valueOf()-6e4*(this._offset||0)}function yn(){return Math.floor(this.valueOf()/1e3)}function bn(){return new Date(this.valueOf())}function Cn(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function _n(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Rn(){return this.isValid()?this.toISOString():null}function Mn(){return m(this)}function Sn(){return d({},p(this))}function En(){return p(this).overflow}function On(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Tn(e,t){K(0,[e,e.length],0,t)}function kn(e){return An.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function xn(e){return An.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Dn(){return Se(this.year(),1,4)}function Hn(){var e=this.localeData()._week;return Se(this.year(),e.dow,e.doy)}function An(e,t,n,o,r){var i;return null==e?Me(this,o,r).year:(i=Se(e,o,r),t&gt;i&amp;&amp;(t=i),Pn.call(this,e,t,n,o,r))}function Pn(e,t,n,o,r){var i=Re(e,t,n,o,r),s=Ce(i.year,0,i.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function Nn(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Ln(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function In(e,t){t[cr]=_(1e3*("0."+e))}function Wn(){return this._isUTC?"UTC":""}function jn(){return this._isUTC?"Coordinated Universal Time":""}function Vn(e){return bt(1e3*e)}function Bn(){return bt.apply(null,arguments).parseZone()}function Fn(e){return e}function zn(e,t,n,o){var r=ot(),i=h().set(o,t);return r[n](i,e)}function Yn(e,t,n){if(a(e)&amp;&amp;(t=e,e=void 0),e=e||"",null!=t)return zn(e,t,n,"month");var o,r=[];for(o=0;o&lt;12;o++)r[o]=zn(e,o,n,"month");return r}function Un(e,t,n,o){"boolean"==typeof e?(a(t)&amp;&amp;(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,a(t)&amp;&amp;(n=t,t=void 0),t=t||"");var r=ot(),i=e?r._week.dow:0;if(null!=n)return zn(t,(n+i)%7,o,"day");var s,l=[];for(s=0;s&lt;7;s++)l[s]=zn(t,(s+i)%7,o,"day");return l}function Gn(e,t){return Yn(e,t,"months")}function $n(e,t){return Yn(e,t,"monthsShort")}function Kn(e,t,n){return Un(e,t,n,"weekdays")}function Xn(e,t,n){return Un(e,t,n,"weekdaysShort")}function qn(e,t,n){return Un(e,t,n,"weekdaysMin")}function Zn(){var e=this._data;return this._milliseconds=ti(this._milliseconds),this._days=ti(this._days),this._months=ti(this._months),e.milliseconds=ti(e.milliseconds),e.seconds=ti(e.seconds),e.minutes=ti(e.minutes),e.hours=ti(e.hours),e.months=ti(e.months),e.years=ti(e.years),this}function Jn(e,t,n,o){var r=Ft(t,n);return e._milliseconds+=o*r._milliseconds,e._days+=o*r._days,e._months+=o*r._months,e._bubble()}function Qn(e,t){return Jn(this,e,t,1)}function eo(e,t){return Jn(this,e,t,-1)}function to(e){return e&lt;0?Math.floor(e):Math.ceil(e)}function no(){var e,t,n,o,r,i=this._milliseconds,s=this._days,a=this._months,l=this._data;return i&gt;=0&amp;&amp;s&gt;=0&amp;&amp;a&gt;=0||i&lt;=0&amp;&amp;s&lt;=0&amp;&amp;a&lt;=0||(i+=864e5*to(ro(a)+s),s=0,a=0),l.milliseconds=i%1e3,e=C(i/1e3),l.seconds=e%60,t=C(e/60),l.minutes=t%60,n=C(t/60),l.hours=n%24,s+=C(n/24),r=C(oo(s)),a+=r,s-=to(ro(r)),o=C(a/12),a%=12,l.days=s,l.months=a,l.years=o,this}function oo(e){return 4800*e/146097}function ro(e){return 146097*e/4800}function io(e){var t,n,o=this._milliseconds;if(e=W(e),"month"===e||"year"===e)return t=this._days+o/864e5,n=this._months+oo(t),"month"===e?n:n/12;switch(t=this._days+Math.round(ro(this._months)),e){case"week":return t/7+o/6048e5;case"day":return t+o/864e5;case"hour":return 24*t+o/36e5;case"minute":return 1440*t+o/6e4;case"second":return 86400*t+o/1e3;case"millisecond":return Math.floor(864e5*t)+o;default:throw new Error("Unknown unit "+e)}}function so(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*_(this._months/12)}function ao(e){return function(){return this.as(e)}}function lo(e){return e=W(e),this[e+"s"]()}function uo(e){return function(){return this._data[e]}}function co(){return C(this.days()/7)}function ho(e,t,n,o,r){return r.relativeTime(t||1,!!n,e,o)}function fo(e,t,n){var o=Ft(e).abs(),r=wi(o.as("s")),i=wi(o.as("m")),s=wi(o.as("h")),a=wi(o.as("d")),l=wi(o.as("M")),u=wi(o.as("y")),c=r&lt;vi.s&amp;&amp;["s",r]||i&lt;=1&amp;&amp;["m"]||i&lt;vi.m&amp;&amp;["mm",i]||s&lt;=1&amp;&amp;["h"]||s&lt;vi.h&amp;&amp;["hh",s]||a&lt;=1&amp;&amp;["d"]||a&lt;vi.d&amp;&amp;["dd",a]||l&lt;=1&amp;&amp;["M"]||l&lt;vi.M&amp;&amp;["MM",l]||u&lt;=1&amp;&amp;["y"]||["yy",u];return c[2]=t,c[3]=+e&gt;0,c[4]=n,ho.apply(null,c)}function po(e){return void 0===e?wi:"function"==typeof e&amp;&amp;(wi=e,!0)}function mo(e,t){return void 0!==vi[e]&amp;&amp;(void 0===t?vi[e]:(vi[e]=t,!0))}function go(e){var t=this.localeData(),n=fo(this,!e,t);return e&amp;&amp;(n=t.pastFuture(+this,n)),t.postformat(n)}function wo(){var e,t,n,o=yi(this._milliseconds)/1e3,r=yi(this._days),i=yi(this._months);e=C(o/60),t=C(e/60),o%=60,e%=60,n=C(i/12),i%=12;var s=n,a=i,l=r,u=t,c=e,d=o,h=this.asSeconds();return h?(h&lt;0?"-":"")+"P"+(s?s+"Y":"")+(a?a+"M":"")+(l?l+"D":"")+(u||c||d?"T":"")+(u?u+"H":"")+(c?c+"M":"")+(d?d+"S":""):"P0D"}var vo,yo;yo=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length&gt;&gt;&gt;0,o=0;o&lt;n;o++)if(o in t&amp;&amp;e.call(this,t[o],o,t))return!0;return!1};var bo=yo,Co=e.momentProperties=[],_o=!1,Ro={};e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;var Mo;Mo=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)c(e,t)&amp;&amp;n.push(t);return n};var So,Eo=Mo,Oo={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},To={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},ko="Invalid date",xo="%d",Do=/\d{1,2}/,Ho={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Ao={},Po={},No=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Lo=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Io={},Wo={},jo=/\d/,Vo=/\d\d/,Bo=/\d{3}/,Fo=/\d{4}/,zo=/[+-]?\d{6}/,Yo=/\d\d?/,Uo=/\d\d\d\d?/,Go=/\d\d\d\d\d\d?/,$o=/\d{1,3}/,Ko=/\d{1,4}/,Xo=/[+-]?\d{1,6}/,qo=/\d+/,Zo=/[+-]?\d+/,Jo=/Z|[+-]\d\d:?\d\d/gi,Qo=/Z|[+-]\d\d(?::?\d\d)?/gi,er=/[+-]?\d+(\.\d{1,3})?/,tr=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,nr={},or={},rr=0,ir=1,sr=2,ar=3,lr=4,ur=5,cr=6,dr=7,hr=8;So=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t&lt;this.length;++t)if(this[t]===e)return t;return-1};var fr=So;K("M",["MM",2],"Mo",function(){return this.month()+1}),K("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),K("MMMM",0,0,function(e){return this.localeData().months(this,e)}),I("month","M"),V("month",8),Q("M",Yo),Q("MM",Yo,Vo),Q("MMM",function(e,t){return t.monthsShortRegex(e)}),Q("MMMM",function(e,t){return t.monthsRegex(e)}),oe(["M","MM"],function(e,t){t[ir]=_(e)-1}),oe(["MMM","MMMM"],function(e,t,n,o){var r=n._locale.monthsParse(e,o,n._strict);null!=r?t[ir]=r:p(n).invalidMonth=e});var pr=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,mr="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),gr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),wr=tr,vr=tr;K("Y",0,0,function(){var e=this.year();return e&lt;=9999?""+e:"+"+e}),K(0,["YY",2],0,function(){return this.year()%100}),K(0,["YYYY",4],0,"year"),K(0,["YYYYY",5],0,"year"),K(0,["YYYYYY",6,!0],0,"year"),I("year","y"),V("year",1),Q("Y",Zo),Q("YY",Yo,Vo),Q("YYYY",Ko,Fo),Q("YYYYY",Xo,zo),Q("YYYYYY",Xo,zo),oe(["YYYYY","YYYYYY"],rr),oe("YYYY",function(t,n){n[rr]=2===t.length?e.parseTwoDigitYear(t):_(t)}),oe("YY",function(t,n){n[rr]=e.parseTwoDigitYear(t)}),oe("Y",function(e,t){t[rr]=parseInt(e,10)}),e.parseTwoDigitYear=function(e){return _(e)+(_(e)&gt;68?1900:2e3)};var yr=F("FullYear",!0);K("w",["ww",2],"wo","week"),K("W",["WW",2],"Wo","isoWeek"),I("week","w"),I("isoWeek","W"),V("week",5),V("isoWeek",5),Q("w",Yo),Q("ww",Yo,Vo),Q("W",Yo),Q("WW",Yo,Vo),re(["w","ww","W","WW"],function(e,t,n,o){t[o.substr(0,1)]=_(e)});var br={dow:0,doy:6};K("d",0,"do","day"),K("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),K("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),K("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),K("e",0,0,"weekday"),K("E",0,0,"isoWeekday"),I("day","d"),I("weekday","e"),I("isoWeekday","E"),V("day",11),V("weekday",11),V("isoWeekday",11),Q("d",Yo),Q("e",Yo),Q("E",Yo),Q("dd",function(e,t){return t.weekdaysMinRegex(e)}),Q("ddd",function(e,t){return t.weekdaysShortRegex(e)}),Q("dddd",function(e,t){return t.weekdaysRegex(e)}),re(["dd","ddd","dddd"],function(e,t,n,o){var r=n._locale.weekdaysParse(e,o,n._strict);null!=r?t.d=r:p(n).invalidWeekday=e}),re(["d","e","E"],function(e,t,n,o){t[o]=_(e)});var Cr="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),_r="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Rr="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Mr=tr,Sr=tr,Er=tr;K("H",["HH",2],0,"hour"),K("h",["hh",2],0,Ue),K("k",["kk",2],0,Ge),K("hmm",0,0,function(){return""+Ue.apply(this)+$(this.minutes(),2)}),K("hmmss",0,0,function(){return""+Ue.apply(this)+$(this.minutes(),2)+$(this.seconds(),2)}),K("Hmm",0,0,function(){return""+this.hours()+$(this.minutes(),2)}),K("Hmmss",0,0,function(){return""+this.hours()+$(this.minutes(),2)+$(this.seconds(),2)}),$e("a",!0),$e("A",!1),I("hour","h"),V("hour",13),Q("a",Ke),Q("A",Ke),Q("H",Yo),Q("h",Yo),Q("HH",Yo,Vo),Q("hh",Yo,Vo),Q("hmm",Uo),Q("hmmss",Go),Q("Hmm",Uo),Q("Hmmss",Go),oe(["H","HH"],ar),oe(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),oe(["h","hh"],function(e,t,n){t[ar]=_(e),p(n).bigHour=!0}),oe("hmm",function(e,t,n){var o=e.length-2;t[ar]=_(e.substr(0,o)),t[lr]=_(e.substr(o)),p(n).bigHour=!0}),oe("hmmss",function(e,t,n){var o=e.length-4,r=e.length-2;t[ar]=_(e.substr(0,o)),t[lr]=_(e.substr(o,2)),t[ur]=_(e.substr(r)),p(n).bigHour=!0}),oe("Hmm",function(e,t,n){var o=e.length-2;t[ar]=_(e.substr(0,o)),t[lr]=_(e.substr(o))}),oe("Hmmss",function(e,t,n){var o=e.length-4,r=e.length-2;t[ar]=_(e.substr(0,o)),t[lr]=_(e.substr(o,2)),t[ur]=_(e.substr(r))});var Or,Tr=/[ap]\.?m?\.?/i,kr=F("Hours",!0),xr={calendar:Oo,longDateFormat:To,invalidDate:ko,ordinal:xo,ordinalParse:Do,relativeTime:Ho,months:mr,monthsShort:gr,week:br,weekdays:Cr,weekdaysMin:Rr,weekdaysShort:_r,meridiemParse:Tr},Dr={},Hr={},Ar=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Pr=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Nr=/Z|[+-]\d\d(?::?\d\d)?/,Lr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ir=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Wr=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=S("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),e.ISO_8601=function(){};var jr=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=bt.apply(null,arguments);return this.isValid()&amp;&amp;e.isValid()?e&lt;this?this:e:g()}),Vr=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=bt.apply(null,arguments);return this.isValid()&amp;&amp;e.isValid()?e&gt;this?this:e:g()}),Br=function(){return Date.now?Date.now():+new Date};Ot("Z",":"),Ot("ZZ",""),Q("Z",Qo),Q("ZZ",Qo),oe(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Tt(Qo,e)});var Fr=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var zr=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Yr=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Ft.fn=Mt.prototype;var Ur=Gt(1,"add"),Gr=Gt(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var $r=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});K(0,["gg",2],0,function(){return this.weekYear()%100}),K(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Tn("gggg","weekYear"),Tn("ggggg","weekYear"),Tn("GGGG","isoWeekYear"),Tn("GGGGG","isoWeekYear"),I("weekYear","gg"),I("isoWeekYear","GG"),V("weekYear",1),V("isoWeekYear",1),Q("G",Zo),Q("g",Zo),Q("GG",Yo,Vo),Q("gg",Yo,Vo),Q("GGGG",Ko,Fo),Q("gggg",Ko,Fo),Q("GGGGG",Xo,zo),Q("ggggg",Xo,zo),re(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,o){t[o.substr(0,2)]=_(e)}),re(["gg","GG"],function(t,n,o,r){n[r]=e.parseTwoDigitYear(t)}),K("Q",0,"Qo","quarter"),I("quarter","Q"),V("quarter",7),Q("Q",jo),oe("Q",function(e,t){t[ir]=3*(_(e)-1)}),K("D",["DD",2],"Do","date"),I("date","D"),V("date",9),Q("D",Yo),Q("DD",Yo,Vo),Q("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),oe(["D","DD"],sr),oe("Do",function(e,t){t[sr]=_(e.match(Yo)[0],10)});var Kr=F("Date",!0);K("DDD",["DDDD",3],"DDDo","dayOfYear"),I("dayOfYear","DDD"),V("dayOfYear",4),Q("DDD",$o),Q("DDDD",Bo),oe(["DDD","DDDD"],function(e,t,n){n._dayOfYear=_(e)}),K("m",["mm",2],0,"minute"),I("minute","m"),V("minute",14),Q("m",Yo),Q("mm",Yo,Vo),oe(["m","mm"],lr);var Xr=F("Minutes",!1);K("s",["ss",2],0,"second"),I("second","s"),V("second",15),Q("s",Yo),Q("ss",Yo,Vo),oe(["s","ss"],ur);var qr=F("Seconds",!1);K("S",0,0,function(){return~~(this.millisecond()/100)}),K(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),K(0,["SSS",3],0,"millisecond"),K(0,["SSSS",4],0,function(){return 10*this.millisecond()}),K(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),K(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),K(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),K(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),K(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),I("millisecond","ms"),V("millisecond",16),Q("S",$o,jo),Q("SS",$o,Vo),Q("SSS",$o,Bo);var Zr;for(Zr="SSSS";Zr.length&lt;=9;Zr+="S")Q(Zr,qo);for(Zr="S";Zr.length&lt;=9;Zr+="S")oe(Zr,In);var Jr=F("Milliseconds",!1);K("z",0,0,"zoneAbbr"),K("zz",0,0,"zoneName");var Qr=y.prototype;Qr.add=Ur,Qr.calendar=Xt,Qr.clone=qt,Qr.diff=on,Qr.endOf=wn,Qr.format=un,Qr.from=cn,Qr.fromNow=dn,Qr.to=hn,Qr.toNow=fn,Qr.get=U,Qr.invalidAt=En,Qr.isAfter=Zt,Qr.isBefore=Jt,Qr.isBetween=Qt,Qr.isSame=en,Qr.isSameOrAfter=tn,Qr.isSameOrBefore=nn,Qr.isValid=Mn,Qr.lang=$r,Qr.locale=pn,Qr.localeData=mn,Qr.max=Vr,Qr.min=jr,Qr.parsingFlags=Sn,Qr.set=G,Qr.startOf=gn,Qr.subtract=Gr,Qr.toArray=Cn,Qr.toObject=_n,Qr.toDate=bn,Qr.toISOString=an,Qr.inspect=ln,Qr.toJSON=Rn,Qr.toString=sn,Qr.unix=yn,Qr.valueOf=vn,Qr.creationData=On,Qr.year=yr,Qr.isLeapYear=ye,Qr.weekYear=kn,Qr.isoWeekYear=xn,Qr.quarter=Qr.quarters=Nn,Qr.month=he,Qr.daysInMonth=fe,Qr.week=Qr.weeks=ke,Qr.isoWeek=Qr.isoWeeks=xe,Qr.weeksInYear=Hn,Qr.isoWeeksInYear=Dn,Qr.date=Kr,Qr.day=Qr.days=We,Qr.weekday=je,Qr.isoWeekday=Ve,Qr.dayOfYear=Ln,Qr.hour=Qr.hours=kr,Qr.minute=Qr.minutes=Xr,Qr.second=Qr.seconds=qr,Qr.millisecond=Qr.milliseconds=Jr,Qr.utcOffset=Dt,Qr.utc=At,Qr.local=Pt,Qr.parseZone=Nt,Qr.hasAlignedHourOffset=Lt,Qr.isDST=It,Qr.isLocal=jt,Qr.isUtcOffset=Vt,Qr.isUtc=Bt,Qr.isUTC=Bt,Qr.zoneAbbr=Wn,Qr.zoneName=jn,Qr.dates=S("dates accessor is deprecated. Use date instead.",Kr),Qr.months=S("months accessor is deprecated. Use month instead",he),Qr.years=S("years accessor is deprecated. Use year instead",yr),Qr.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Ht),Qr.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Wt);var ei=x.prototype;ei.calendar=D,ei.longDateFormat=H,ei.invalidDate=A,ei.ordinal=P,ei.preparse=Fn,ei.postformat=Fn,ei.relativeTime=N,ei.pastFuture=L,ei.set=T,ei.months=ae,ei.monthsShort=le,ei.monthsParse=ce,ei.monthsRegex=me,ei.monthsShortRegex=pe,ei.week=Ee,ei.firstDayOfYear=Te,ei.firstDayOfWeek=Oe,ei.weekdays=Ae,ei.weekdaysMin=Ne,ei.weekdaysShort=Pe,ei.weekdaysParse=Ie,ei.weekdaysRegex=Be,ei.weekdaysShortRegex=Fe,ei.weekdaysMinRegex=ze,ei.isPM=Xe,ei.meridiem=qe,et("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===_(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),e.lang=S("moment.lang is deprecated. Use moment.locale instead.",et),e.langData=S("moment.langData is deprecated. Use moment.localeData instead.",ot);var ti=Math.abs,ni=ao("ms"),oi=ao("s"),ri=ao("m"),ii=ao("h"),si=ao("d"),ai=ao("w"),li=ao("M"),ui=ao("y"),ci=uo("milliseconds"),di=uo("seconds"),hi=uo("minutes"),fi=uo("hours"),pi=uo("days"),mi=uo("months"),gi=uo("years"),wi=Math.round,vi={s:45,m:45,h:22,d:26,M:11},yi=Math.abs,bi=Mt.prototype;return bi.abs=Zn,bi.add=Qn,bi.subtract=eo,bi.as=io,bi.asMilliseconds=ni,bi.asSeconds=oi,bi.asMinutes=ri,bi.asHours=ii,bi.asDays=si,bi.asWeeks=ai,bi.asMonths=li,bi.asYears=ui,bi.valueOf=so,bi._bubble=no,bi.get=lo,bi.milliseconds=ci,bi.seconds=di,bi.minutes=hi,bi.hours=fi,bi.days=pi,bi.weeks=co,bi.months=mi,bi.years=gi,bi.humanize=go,bi.toISOString=wo,bi.toString=wo,bi.toJSON=wo,bi.locale=pn,bi.localeData=mn,bi.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",wo),bi.lang=$r,K("X",0,0,"unix"),K("x",0,0,"valueOf"),Q("x",Zo),Q("X",er),oe("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),oe("x",function(e,t,n){n._d=new Date(_(e))}),e.version="2.17.1",o(bt),e.fn=Qr,e.min=_t,e.max=Rt,e.now=Br,e.utc=h,e.unix=Vn,e.months=Gn,e.isDate=l,e.locale=et,e.invalid=g,e.duration=Ft,e.isMoment=b,e.weekdays=Kn,e.parseZone=Bn,e.localeData=ot,e.isDuration=St,e.monthsShort=$n,e.weekdaysMin=qn,e.defineLocale=tt,e.updateLocale=nt,e.locales=rt,e.weekdaysShort=Xn,e.normalizeUnits=W,e.relativeTimeRounding=po,e.relativeTimeThreshold=mo,e.calendarFormat=Kt,e.prototype=Qr,e})},{}],numbro:[function(t,n,o){/*!
 * numbro.js
 * version : 1.9.3
 * author : FÃ¶retagsplatsen AB
 * license : MIT
 * http://www.foretagsplatsen.se
 */
(function(){"use strict";function o(e){this._value=e}function r(e){var t,n="";for(t=0;t&lt;e;t++)n+="0";return n}function i(e,t){var n,o,i,s,a,l,u,c;return c=e.toString(),n=c.split("e")[0],s=c.split("e")[1],o=n.split(".")[0],i=n.split(".")[1]||"",+s&gt;0?c=o+i+r(s-i.length):(a=+o&lt;0?"-0":"0",t&gt;0&amp;&amp;(a+="."),u=r(-1*s-1),l=(u+Math.abs(o)+i).substr(0,t),c=a+l),+s&gt;0&amp;&amp;t&gt;0&amp;&amp;(c+="."+r(t)),c}function s(e,t,n,o){var r,s,a=Math.pow(10,t);return e.toString().indexOf("e")&gt;-1?(s=i(e,t),"-"===s.charAt(0)&amp;&amp;+s&gt;=0&amp;&amp;(s=s.substr(1))):s=(n(e+"e+"+t)/a).toFixed(t),o&amp;&amp;(r=new RegExp("0{1,"+o+"}$"),s=s.replace(r,"")),s}function a(e,t,n){var o,r=t.replace(/\{[^\{\}]*\}/g,"");return o=r.indexOf("$")&gt;-1?u(e,O[k].currency.symbol,t,n):r.indexOf("%")&gt;-1?d(e,t,n):r.indexOf(":")&gt;-1?h(e,t):m(e._value,t,n)}function l(e,t){var n,o,r,i,s,a=t,l=!1;if(t.indexOf(":")&gt;-1)e._value=f(t);else if(t===x)e._value=0;else{for("."!==O[k].delimiters.decimal&amp;&amp;(t=t.replace(/\./g,"").replace(O[k].delimiters.decimal,".")),n=new RegExp("[^a-zA-Z]"+O[k].abbreviations.thousand+"(?:\\)|(\\"+O[k].currency.symbol+")?(?:\\))?)?$"),o=new RegExp("[^a-zA-Z]"+O[k].abbreviations.million+"(?:\\)|(\\"+O[k].currency.symbol+")?(?:\\))?)?$"),r=new RegExp("[^a-zA-Z]"+O[k].abbreviations.billion+"(?:\\)|(\\"+O[k].currency.symbol+")?(?:\\))?)?$"),i=new RegExp("[^a-zA-Z]"+O[k].abbreviations.trillion+"(?:\\)|(\\"+O[k].currency.symbol+")?(?:\\))?)?$"),s=1;s&lt;R.length&amp;&amp;!l;++s)t.indexOf(R[s])&gt;-1?l=Math.pow(1024,s):t.indexOf(M[s])&gt;-1&amp;&amp;(l=Math.pow(1e3,s));var u=t.replace(/[^0-9\.]+/g,"");""===u?e._value=NaN:(e._value=(l?l:1)*(a.match(n)?Math.pow(10,3):1)*(a.match(o)?Math.pow(10,6):1)*(a.match(r)?Math.pow(10,9):1)*(a.match(i)?Math.pow(10,12):1)*(t.indexOf("%")&gt;-1?.01:1)*((t.split("-").length+Math.min(t.split("(").length-1,t.split(")").length-1))%2?1:-1)*Number(u),e._value=l?Math.ceil(e._value):e._value)}return e._value}function u(e,t,n,o){var r,i,s=n,a=s.indexOf("$"),l=s.indexOf("("),u=s.indexOf("+"),c=s.indexOf("-"),d="",h="";if(s.indexOf("$")===-1?"infix"===O[k].currency.position?(h=t,O[k].currency.spaceSeparated&amp;&amp;(h=" "+h+" ")):O[k].currency.spaceSeparated&amp;&amp;(d=" "):s.indexOf(" $")&gt;-1?(d=" ",s=s.replace(" $","")):s.indexOf("$ ")&gt;-1?(d=" ",s=s.replace("$ ","")):s=s.replace("$",""),i=m(e._value,s,o,h),n.indexOf("$")===-1)switch(O[k].currency.position){case"postfix":i.indexOf(")")&gt;-1?(i=i.split(""),i.splice(-1,0,d+t),i=i.join("")):i=i+d+t;break;case"infix":break;case"prefix":i.indexOf("(")&gt;-1||i.indexOf("-")&gt;-1?(i=i.split(""),r=Math.max(l,c)+1,i.splice(r,0,t+d),i=i.join("")):i=t+d+i;break;default:throw Error('Currency position should be among ["prefix", "infix", "postfix"]')}else a&lt;=1?i.indexOf("(")&gt;-1||i.indexOf("+")&gt;-1||i.indexOf("-")&gt;-1?(i=i.split(""),r=1,(a&lt;l||a&lt;u||a&lt;c)&amp;&amp;(r=0),i.splice(r,0,t+d),i=i.join("")):i=t+d+i:i.indexOf(")")&gt;-1?(i=i.split(""),i.splice(-1,0,d+t),i=i.join("")):i=i+d+t;return i}function c(e,t,n,o){return u(e,t,n,o)}function d(e,t,n){var o,r="",i=100*e._value;return t.indexOf(" %")&gt;-1?(r=" ",t=t.replace(" %","")):t=t.replace("%",""),o=m(i,t,n),o.indexOf(")")&gt;-1?(o=o.split(""),o.splice(-1,0,r+"%"),o=o.join("")):o=o+r+"%",o}function h(e){var t=Math.floor(e._value/60/60),n=Math.floor((e._value-60*t*60)/60),o=Math.round(e._value-60*t*60-60*n);return t+":"+(n&lt;10?"0"+n:n)+":"+(o&lt;10?"0"+o:o)}function f(e){var t=e.split(":"),n=0;return 3===t.length?(n+=60*Number(t[0])*60,n+=60*Number(t[1]),n+=Number(t[2])):2===t.length&amp;&amp;(n+=60*Number(t[0]),n+=Number(t[1])),Number(n)}function p(e,t,n){var o,r,i,s=t[0],a=Math.abs(e);if(a&gt;=n){for(o=1;o&lt;t.length;++o)if(r=Math.pow(n,o),i=Math.pow(n,o+1),a&gt;=r&amp;&amp;a&lt;i){s=t[o],e/=r;break}s===t[0]&amp;&amp;(e/=Math.pow(n,t.length-1),s=t[t.length-1])}return{value:e,suffix:s}}function m(e,t,n,o){var i,a,l,u,c,d,h,f,m,g,w,v,y,b,C,_,R,M=!1,S=!1,T=!1,D="",H=!1,A=!1,P=!1,N=!1,L=!1,I="",W="",j=Math.abs(e),V="",B=!1,F=!1,z="";if(0===e&amp;&amp;null!==x)return x;if(!isFinite(e))return""+e;if(0===t.indexOf("{")){var Y=t.indexOf("}");if(Y===-1)throw Error('Format should also contain a "}"');g=t.slice(1,Y),t=t.slice(Y+1)}else g="";if(t.indexOf("}")===t.length-1){var U=t.indexOf("{");if(U===-1)throw Error('Format should also contain a "{"');w=t.slice(U+1,-1),t=t.slice(0,U+1)}else w="";var G;for(G=t.indexOf(".")===-1?t.match(/([0-9]+).*/):t.match(/([0-9]+)\..*/),_=null===G?-1:G[1].length,t.indexOf("-")!==-1&amp;&amp;(B=!0),t.indexOf("(")&gt;-1?(M=!0,t=t.slice(1,-1)):t.indexOf("+")&gt;-1&amp;&amp;(S=!0,t=t.replace(/\+/g,"")),t.indexOf("a")&gt;-1&amp;&amp;(f=t.split(".")[0].match(/[0-9]+/g)||["0"],f=parseInt(f[0],10),H=t.indexOf("aK")&gt;=0,A=t.indexOf("aM")&gt;=0,P=t.indexOf("aB")&gt;=0,N=t.indexOf("aT")&gt;=0,L=H||A||P||N,t.indexOf(" a")&gt;-1?(D=" ",t=t.replace(" a","")):t=t.replace("a",""),l=Math.floor(Math.log(j)/Math.LN10)+1,c=l%3,c=0===c?3:c,f&amp;&amp;0!==j&amp;&amp;(u=Math.floor(Math.log(j)/Math.LN10)+1-f,d=3*~~((Math.min(f,l)-c)/3),j/=Math.pow(10,d),t.indexOf(".")===-1&amp;&amp;f&gt;3&amp;&amp;(t+="[.]",b=0===u?0:3*~~(u/3)-u,b=b&lt;0?b+3:b,t+=r(b))),Math.floor(Math.log(Math.abs(e))/Math.LN10)+1!==f&amp;&amp;(j&gt;=Math.pow(10,12)&amp;&amp;!L||N?(D+=O[k].abbreviations.trillion,e/=Math.pow(10,12)):j&lt;Math.pow(10,12)&amp;&amp;j&gt;=Math.pow(10,9)&amp;&amp;!L||P?(D+=O[k].abbreviations.billion,e/=Math.pow(10,9)):j&lt;Math.pow(10,9)&amp;&amp;j&gt;=Math.pow(10,6)&amp;&amp;!L||A?(D+=O[k].abbreviations.million,e/=Math.pow(10,6)):(j&lt;Math.pow(10,6)&amp;&amp;j&gt;=Math.pow(10,3)&amp;&amp;!L||H)&amp;&amp;(D+=O[k].abbreviations.thousand,e/=Math.pow(10,3)))),R=0;R&lt;E.length;++R)if(i=E[R],t.indexOf(i.marker)&gt;-1){t.indexOf(" "+i.marker)&gt;-1&amp;&amp;(I=" "),t=t.replace(I+i.marker,""),a=p(e,i.suffixes,i.scale),e=a.value,I+=a.suffix;break}if(t.indexOf("o")&gt;-1&amp;&amp;(t.indexOf(" o")&gt;-1?(W=" ",t=t.replace(" o","")):t=t.replace("o",""),O[k].ordinal&amp;&amp;(W+=O[k].ordinal(e))),t.indexOf("[.]")&gt;-1&amp;&amp;(T=!0,t=t.replace("[.]",".")),h=e.toString().split(".")[0],m=t.split(".")[1],v=t.indexOf(","),m){if(m.indexOf("*")!==-1?V=s(e,e.toString().split(".")[1].length,n):m.indexOf("[")&gt;-1?(m=m.replace("]",""),m=m.split("["),V=s(e,m[0].length+m[1].length,n,m[1].length)):V=s(e,m.length,n),h=V.split(".")[0],V.split(".")[1].length){var $=o?D+o:O[k].delimiters.decimal;V=$+V.split(".")[1]}else V="";T&amp;&amp;0===Number(V.slice(1))&amp;&amp;(V="")}else h=s(e,0,n);return h.indexOf("-")&gt;-1&amp;&amp;(h=h.slice(1),F=!0),h.length&lt;_&amp;&amp;(h=r(_-h.length)+h),v&gt;-1&amp;&amp;(h=h.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+O[k].delimiters.thousands)),0===t.indexOf(".")&amp;&amp;(h=""),y=t.indexOf("("),C=t.indexOf("-"),z=y&lt;C?(M&amp;&amp;F?"(":"")+(B&amp;&amp;F||!M&amp;&amp;F?"-":""):(B&amp;&amp;F||!M&amp;&amp;F?"-":"")+(M&amp;&amp;F?"(":""),g+z+(!F&amp;&amp;S&amp;&amp;0!==e?"+":"")+h+V+(W?W:"")+(D&amp;&amp;!o?D:"")+(I?I:"")+(M&amp;&amp;F?")":"")+w}function g(e,t){O[e]=t}function w(e){k=e;var t=O[e].defaults;t&amp;&amp;t.format&amp;&amp;C.defaultFormat(t.format),t&amp;&amp;t.currencyFormat&amp;&amp;C.defaultCurrencyFormat(t.currencyFormat)}function v(){return"undefined"!=typeof process&amp;&amp;void 0===process.browser&amp;&amp;process.title&amp;&amp;(0===process.title.indexOf("node")||process.title.indexOf("meteor-tool")&gt;0||"grunt"===process.title||"gulp"===process.title)&amp;&amp;"undefined"!=typeof t}function y(e){var t=e.toString().split(".");return t.length&lt;2?1:Math.pow(10,t[1].length)}function b(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,t){var n=y(e),o=y(t);return n&gt;o?n:o},-(1/0))}var C,_="1.9.3",R=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],M=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],S={general:{scale:1024,suffixes:M,marker:"bd"},binary:{scale:1024,suffixes:R,marker:"b"},decimal:{scale:1e3,suffixes:M,marker:"d"}},E=[S.general,S.binary,S.decimal],O={},T=O,k="en-US",x=null,D="0,0",H="0$",A="undefined"!=typeof n&amp;&amp;n.exports,P={delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$",position:"prefix"},defaults:{currencyFormat:",0000 a"},formats:{fourDigits:"0000 a",fullWithTwoDecimals:"$ ,0.00",fullWithTwoDecimalsNoCurrency:",0.00"}};C=function(e){return C.isNumbro(e)?e=e.value():0===e||"undefined"==typeof e?e=0:Number(e)||(e=C.fn.unformat(e)),new o(Number(e))},C.version=_,C.isNumbro=function(e){return e instanceof o},C.setLanguage=function(e,t){console.warn("`setLanguage` is deprecated since version 1.6.0. Use `setCulture` instead");var n=e,o=e.split("-")[0],r=null;T[n]||(Object.keys(T).forEach(function(e){r||e.split("-")[0]!==o||(r=e)}),n=r||t||"en-US"),w(n)},C.setCulture=function(e,t){var n=e,o=e.split("-")[1],r=null;O[n]||(o&amp;&amp;Object.keys(O).forEach(function(e){r||e.split("-")[1]!==o||(r=e)}),n=r||t||"en-US"),w(n)},C.language=function(e,t){if(console.warn("`language` is deprecated since version 1.6.0. Use `culture` instead"),!e)return k;if(e&amp;&amp;!t){if(!T[e])throw new Error("Unknown language : "+e);w(e)}return!t&amp;&amp;T[e]||g(e,t),C},C.culture=function(e,t){if(!e)return k;if(e&amp;&amp;!t){if(!O[e])throw new Error("Unknown culture : "+e);w(e)}return!t&amp;&amp;O[e]||g(e,t),C},C.languageData=function(e){if(console.warn("`languageData` is deprecated since version 1.6.0. Use `cultureData` instead"),!e)return T[k];if(!T[e])throw new Error("Unknown language : "+e);return T[e]},C.cultureData=function(e){if(!e)return O[k];if(!O[e])throw new Error("Unknown culture : "+e);return O[e]},C.culture("en-US",P),C.languages=function(){return console.warn("`languages` is deprecated since version 1.6.0. Use `cultures` instead"),T},C.cultures=function(){return O},C.zeroFormat=function(e){x="string"==typeof e?e:null},C.defaultFormat=function(e){D="string"==typeof e?e:"0.0"},C.defaultCurrencyFormat=function(e){H="string"==typeof e?e:"0$"},C.validate=function(e,t){var n,o,r,i,s,a,l,u;if("string"!=typeof e&amp;&amp;(e+="",console.warn&amp;&amp;console.warn("Numbro.js: Value is not string. It has been co-erced to: ",e)),e=e.trim(),e=e.replace(/^[+-]?/,""),e.match(/^\d+$/))return!0;if(""===e)return!1;try{l=C.cultureData(t)}catch(e){l=C.cultureData(C.culture())}return r=l.currency.symbol,s=l.abbreviations,n=l.delimiters.decimal,o="."===l.delimiters.thousands?"\\.":l.delimiters.thousands,u=e.match(/^[^\d\.\,]+/),(null===u||(e=e.substr(1),u[0]===r))&amp;&amp;(u=e.match(/[^\d]+$/),(null===u||(e=e.slice(0,-1),u[0]===s.thousand||u[0]===s.million||u[0]===s.billion||u[0]===s.trillion))&amp;&amp;(a=new RegExp(o+"{2}"),!e.match(/[^\d.,]/g)&amp;&amp;(i=e.split(n),!(i.length&gt;2)&amp;&amp;(i.length&lt;2?!!i[0].match(/^\d+.*\d$/)&amp;&amp;!i[0].match(a):""===i[0]?!i[0].match(a)&amp;&amp;!!i[1].match(/^\d+$/):1===i[0].length?!!i[0].match(/^\d+$/)&amp;&amp;!i[0].match(a)&amp;&amp;!!i[1].match(/^\d+$/):!!i[0].match(/^\d+.*\d$/)&amp;&amp;!i[0].match(a)&amp;&amp;!!i[1].match(/^\d+$/)))))},C.loadLanguagesInNode=function(){console.warn("`loadLanguagesInNode` is deprecated since version 1.6.0. Use `loadCulturesInNode` instead"),C.loadCulturesInNode()},C.loadCulturesInNode=function(){var e=t("./languages");for(var n in e)n&amp;&amp;C.culture(n,e[n])},"function"!=typeof Array.prototype.reduce&amp;&amp;(Array.prototype.reduce=function(e,t){if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var n,o,r=this.length&gt;&gt;&gt;0,i=!1;for(1&lt;arguments.length&amp;&amp;(o=t,i=!0),n=0;r&gt;n;++n)this.hasOwnProperty(n)&amp;&amp;(i?o=e(o,this[n],n,this):(o=this[n],i=!0));if(!i)throw new TypeError("Reduce of empty array with no initial value");return o}),C.fn=o.prototype={clone:function(){return C(this)},format:function(e,t){return a(this,e?e:D,void 0!==t?t:Math.round)},formatCurrency:function(e,t){return u(this,O[k].currency.symbol,e?e:H,void 0!==t?t:Math.round)},formatForeignCurrency:function(e,t,n){return c(this,e,t?t:H,void 0!==n?n:Math.round)},unformat:function(e){if("number"==typeof e)return e;if("string"==typeof e){var t=l(this,e);return isNaN(t)?void 0:t}},binaryByteUnits:function(){return p(this._value,S.binary.suffixes,S.binary.scale).suffix},byteUnits:function(){return p(this._value,S.general.suffixes,S.general.scale).suffix},decimalByteUnits:function(){return p(this._value,S.decimal.suffixes,S.decimal.scale).suffix},value:function(){return this._value},valueOf:function(){return this._value},set:function(e){return this._value=Number(e),this},add:function(e){function t(e,t){return e+n*t}var n=b.call(null,this._value,e);return this._value=[this._value,e].reduce(t,0)/n,this},subtract:function(e){function t(e,t){return e-n*t}var n=b.call(null,this._value,e);return this._value=[e].reduce(t,this._value*n)/n,this},multiply:function(e){function t(e,t){var n=b(e,t),o=e*n;return o*=t*n,o/=n*n}return this._value=[this._value,e].reduce(t,1),this},divide:function(e){function t(e,t){var n=b(e,t);return e*n/(t*n)}return this._value=[this._value,e].reduce(t),this},difference:function(e){return Math.abs(C(this._value).subtract(e).value())}},v()&amp;&amp;C.loadCulturesInNode(),A?n.exports=C:("undefined"==typeof ender&amp;&amp;(this.numbro=C),"function"==typeof e&amp;&amp;e.amd&amp;&amp;e([],function(){return C}))}).call("undefined"==typeof window?this:window)},{languages:1}],pikaday:[function(t,n,o){/*!
 * Pikaday
 *
 * Copyright Â© 2014 David Bushell | BSD &amp; MIT license | https://github.com/dbushell/Pikaday
 */
!function(r,i){"use strict";var s;if("object"==typeof o){try{s=t("moment")}catch(e){}n.exports=i(s)}else"function"==typeof e&amp;&amp;e.amd?e(function(e){var t="moment";try{s=e(t)}catch(e){}return i(s)}):r.Pikaday=i(r.moment)}(this,function(e){"use strict";var t="function"==typeof e,n=!!window.addEventListener,o=window.document,r=window.setTimeout,i=function(e,t,o,r){n?e.addEventListener(t,o,!!r):e.attachEvent("on"+t,o)},s=function(e,t,o,r){n?e.removeEventListener(t,o,!!r):e.detachEvent("on"+t,o)},a=function(e,t,n){var r;o.createEvent?(r=o.createEvent("HTMLEvents"),r.initEvent(t,!0,!1),r=y(r,n),e.dispatchEvent(r)):o.createEventObject&amp;&amp;(r=o.createEventObject(),r=y(r,n),e.fireEvent("on"+t,r))},l=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},u=function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")!==-1},c=function(e,t){u(e,t)||(e.className=""===e.className?t:e.className+" "+t)},d=function(e,t){e.className=l((" "+e.className+" ").replace(" "+t+" "," "))},h=function(e){return/Array/.test(Object.prototype.toString.call(e))},f=function(e){return/Date/.test(Object.prototype.toString.call(e))&amp;&amp;!isNaN(e.getTime())},p=function(e){var t=e.getDay();return 0===t||6===t},m=function(e){return e%4===0&amp;&amp;e%100!==0||e%400===0},g=function(e,t){return[31,m(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},w=function(e){f(e)&amp;&amp;e.setHours(0,0,0,0)},v=function(e,t){return e.getTime()===t.getTime()},y=function(e,t,n){var o,r;for(o in t)r=void 0!==e[o],r&amp;&amp;"object"==typeof t[o]&amp;&amp;null!==t[o]&amp;&amp;void 0===t[o].nodeName?f(t[o])?n&amp;&amp;(e[o]=new Date(t[o].getTime())):h(t[o])?n&amp;&amp;(e[o]=t[o].slice(0)):e[o]=y({},t[o],n):!n&amp;&amp;r||(e[o]=t[o]);return e},b=function(e){return e.month&lt;0&amp;&amp;(e.year-=Math.ceil(Math.abs(e.month)/12),e.month+=12),e.month&gt;11&amp;&amp;(e.year+=Math.floor(Math.abs(e.month)/12),e.month-=12),e},C={field:null,bound:void 0,position:"bottom left",reposition:!0,format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:!1,firstDay:0,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,onSelect:null,onOpen:null,onClose:null,onDraw:null},_=function(e,t,n){for(t+=e.firstDay;t&gt;=7;)t-=7;return n?e.i18n.weekdaysShort[t]:e.i18n.weekdays[t]},R=function(e){var t=[],n="false";if(e.isEmpty){if(!e.showDaysInNextAndPreviousMonths)return'&lt;td class="is-empty"&gt;&lt;/td&gt;';t.push("is-outside-current-month")}return e.isDisabled&amp;&amp;t.push("is-disabled"),e.isToday&amp;&amp;t.push("is-today"),e.isSelected&amp;&amp;(t.push("is-selected"),n="true"),e.isInRange&amp;&amp;t.push("is-inrange"),e.isStartRange&amp;&amp;t.push("is-startrange"),e.isEndRange&amp;&amp;t.push("is-endrange"),'&lt;td data-day="'+e.day+'" class="'+t.join(" ")+'" aria-selected="'+n+'"&gt;&lt;button class="pika-button pika-day" type="button" data-pika-year="'+e.year+'" data-pika-month="'+e.month+'" data-pika-day="'+e.day+'"&gt;'+e.day+"&lt;/button&gt;&lt;/td&gt;"},M=function(e,t,n){var o=new Date(n,0,1),r=Math.ceil(((new Date(n,t,e)-o)/864e5+o.getDay()+1)/7);return'&lt;td class="pika-week"&gt;'+r+"&lt;/td&gt;"},S=function(e,t){return"&lt;tr&gt;"+(t?e.reverse():e).join("")+"&lt;/tr&gt;"},E=function(e){return"&lt;tbody&gt;"+e.join("")+"&lt;/tbody&gt;"},O=function(e){var t,n=[];for(e.showWeekNumber&amp;&amp;n.push("&lt;th&gt;&lt;/th&gt;"),t=0;t&lt;7;t++)n.push('&lt;th scope="col"&gt;&lt;abbr title="'+_(e,t)+'"&gt;'+_(e,t,!0)+"&lt;/abbr&gt;&lt;/th&gt;");return"&lt;thead&gt;&lt;tr&gt;"+(e.isRTL?n.reverse():n).join("")+"&lt;/tr&gt;&lt;/thead&gt;"},T=function(e,t,n,o,r,i){var s,a,l,u,c,d=e._o,f=n===d.minYear,p=n===d.maxYear,m='&lt;div id="'+i+'" class="pika-title" role="heading" aria-live="assertive"&gt;',g=!0,w=!0;for(l=[],s=0;s&lt;12;s++)l.push('&lt;option value="'+(n===r?s-t:12+s-t)+'"'+(s===o?' selected="selected"':"")+(f&amp;&amp;s&lt;d.minMonth||p&amp;&amp;s&gt;d.maxMonth?'disabled="disabled"':"")+"&gt;"+d.i18n.months[s]+"&lt;/option&gt;");for(u='&lt;div class="pika-label"&gt;'+d.i18n.months[o]+'&lt;select class="pika-select pika-select-month" tabindex="-1"&gt;'+l.join("")+"&lt;/select&gt;&lt;/div&gt;",h(d.yearRange)?(s=d.yearRange[0],a=d.yearRange[1]+1):(s=n-d.yearRange,a=1+n+d.yearRange),l=[];s&lt;a&amp;&amp;s&lt;=d.maxYear;s++)s&gt;=d.minYear&amp;&amp;l.push('&lt;option value="'+s+'"'+(s===n?' selected="selected"':"")+"&gt;"+s+"&lt;/option&gt;");return c='&lt;div class="pika-label"&gt;'+n+d.yearSuffix+'&lt;select class="pika-select pika-select-year" tabindex="-1"&gt;'+l.join("")+"&lt;/select&gt;&lt;/div&gt;",m+=d.showMonthAfterYear?c+u:u+c,f&amp;&amp;(0===o||d.minMonth&gt;=o)&amp;&amp;(g=!1),p&amp;&amp;(11===o||d.maxMonth&lt;=o)&amp;&amp;(w=!1),0===t&amp;&amp;(m+='&lt;button class="pika-prev'+(g?"":" is-disabled")+'" type="button"&gt;'+d.i18n.previousMonth+"&lt;/button&gt;"),t===e._o.numberOfMonths-1&amp;&amp;(m+='&lt;button class="pika-next'+(w?"":" is-disabled")+'" type="button"&gt;'+d.i18n.nextMonth+"&lt;/button&gt;"),m+="&lt;/div&gt;"},k=function(e,t,n){return'&lt;table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+n+'"&gt;'+O(e)+E(t)+"&lt;/table&gt;"},x=function(s){var a=this,l=a.config(s);a._onMouseDown=function(e){if(a._v){e=e||window.event;var t=e.target||e.srcElement;if(t)if(u(t,"is-disabled")||(!u(t,"pika-button")||u(t,"is-empty")||u(t.parentNode,"is-disabled")?u(t,"pika-prev")?a.prevMonth():u(t,"pika-next")&amp;&amp;a.nextMonth():(a.setDate(new Date(t.getAttribute("data-pika-year"),t.getAttribute("data-pika-month"),t.getAttribute("data-pika-day"))),l.bound&amp;&amp;r(function(){a.hide(),l.field&amp;&amp;l.field.blur()},100))),u(t,"pika-select"))a._c=!0;else{if(!e.preventDefault)return e.returnValue=!1,!1;e.preventDefault()}}},a._onChange=function(e){e=e||window.event;var t=e.target||e.srcElement;t&amp;&amp;(u(t,"pika-select-month")?a.gotoMonth(t.value):u(t,"pika-select-year")&amp;&amp;a.gotoYear(t.value))},a._onKeyChange=function(e){if(e=e||window.event,a.isVisible())switch(e.keyCode){case 13:case 27:l.field.blur();break;case 37:e.preventDefault(),a.adjustDate("subtract",1);break;case 38:a.adjustDate("subtract",7);break;case 39:a.adjustDate("add",1);break;case 40:a.adjustDate("add",7)}},a._onInputChange=function(n){var o;n.firedBy!==a&amp;&amp;(t?(o=e(l.field.value,l.format,l.formatStrict),o=o&amp;&amp;o.isValid()?o.toDate():null):o=new Date(Date.parse(l.field.value)),f(o)&amp;&amp;a.setDate(o),a._v||a.show())},a._onInputFocus=function(){a.show()},a._onInputClick=function(){a.show()},a._onInputBlur=function(){var e=o.activeElement;do if(u(e,"pika-single"))return;while(e=e.parentNode);a._c||(a._b=r(function(){a.hide()},50)),a._c=!1},a._onClick=function(e){e=e||window.event;var t=e.target||e.srcElement,o=t;if(t){!n&amp;&amp;u(t,"pika-select")&amp;&amp;(t.onchange||(t.setAttribute("onchange","return;"),i(t,"change",a._onChange)));do if(u(o,"pika-single")||o===l.trigger)return;while(o=o.parentNode);a._v&amp;&amp;t!==l.trigger&amp;&amp;o!==l.trigger&amp;&amp;a.hide()}},a.el=o.createElement("div"),a.el.className="pika-single"+(l.isRTL?" is-rtl":"")+(l.theme?" "+l.theme:""),i(a.el,"mousedown",a._onMouseDown,!0),i(a.el,"touchend",a._onMouseDown,!0),i(a.el,"change",a._onChange),i(o,"keydown",a._onKeyChange),l.field&amp;&amp;(l.container?l.container.appendChild(a.el):l.bound?o.body.appendChild(a.el):l.field.parentNode.insertBefore(a.el,l.field.nextSibling),i(l.field,"change",a._onInputChange),l.defaultDate||(t&amp;&amp;l.field.value?l.defaultDate=e(l.field.value,l.format).toDate():l.defaultDate=new Date(Date.parse(l.field.value)),l.setDefaultDate=!0));var c=l.defaultDate;f(c)?l.setDefaultDate?a.setDate(c,!0):a.gotoDate(c):a.gotoDate(new Date),l.bound?(this.hide(),a.el.className+=" is-bound",i(l.trigger,"click",a._onInputClick),i(l.trigger,"focus",a._onInputFocus),i(l.trigger,"blur",a._onInputBlur)):this.show()};return x.prototype={config:function(e){this._o||(this._o=y({},C,!0));var t=y(this._o,e,!0);t.isRTL=!!t.isRTL,t.field=t.field&amp;&amp;t.field.nodeName?t.field:null,t.theme="string"==typeof t.theme&amp;&amp;t.theme?t.theme:null,t.bound=!!(void 0!==t.bound?t.field&amp;&amp;t.bound:t.field),t.trigger=t.trigger&amp;&amp;t.trigger.nodeName?t.trigger:t.field,t.disableWeekends=!!t.disableWeekends,t.disableDayFn="function"==typeof t.disableDayFn?t.disableDayFn:null;var n=parseInt(t.numberOfMonths,10)||1;if(t.numberOfMonths=n&gt;4?4:n,f(t.minDate)||(t.minDate=!1),f(t.maxDate)||(t.maxDate=!1),t.minDate&amp;&amp;t.maxDate&amp;&amp;t.maxDate&lt;t.minDate&amp;&amp;(t.maxDate=t.minDate=!1),t.minDate&amp;&amp;this.setMinDate(t.minDate),t.maxDate&amp;&amp;this.setMaxDate(t.maxDate),h(t.yearRange)){var o=(new Date).getFullYear()-10;t.yearRange[0]=parseInt(t.yearRange[0],10)||o,t.yearRange[1]=parseInt(t.yearRange[1],10)||o}else t.yearRange=Math.abs(parseInt(t.yearRange,10))||C.yearRange,t.yearRange&gt;100&amp;&amp;(t.yearRange=100);return t},toString:function(n){return f(this._d)?t?e(this._d).format(n||this._o.format):this._d.toDateString():""},getMoment:function(){return t?e(this._d):null},setMoment:function(n,o){t&amp;&amp;e.isMoment(n)&amp;&amp;this.setDate(n.toDate(),o)},getDate:function(){return f(this._d)?new Date(this._d.getTime()):new Date},setDate:function(e,t){if(!e)return this._d=null,this._o.field&amp;&amp;(this._o.field.value="",a(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof e&amp;&amp;(e=new Date(Date.parse(e))),f(e)){var n=this._o.minDate,o=this._o.maxDate;f(n)&amp;&amp;e&lt;n?e=n:f(o)&amp;&amp;e&gt;o&amp;&amp;(e=o),this._d=new Date(e.getTime()),w(this._d),this.gotoDate(this._d),this._o.field&amp;&amp;(this._o.field.value=this.toString(),a(this._o.field,"change",{firedBy:this})),t||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},gotoDate:function(e){var t=!0;if(f(e)){if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),o=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),r=e.getTime();o.setMonth(o.getMonth()+1),o.setDate(o.getDate()-1),t=r&lt;n.getTime()||o.getTime()&lt;r}t&amp;&amp;(this.calendars=[{month:e.getMonth(),year:e.getFullYear()}],"right"===this._o.mainCalendar&amp;&amp;(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustDate:function(n,o){var r,i=this.getDate(),s=24*parseInt(o)*60*60*1e3;"add"===n?r=new Date(i.valueOf()+s):"subtract"===n&amp;&amp;(r=new Date(i.valueOf()-s)),t&amp;&amp;("add"===n?r=e(i).add(o,"days").toDate():"subtract"===n&amp;&amp;(r=e(i).subtract(o,"days").toDate())),this.setDate(r)},adjustCalendars:function(){this.calendars[0]=b(this.calendars[0]);for(var e=1;e&lt;this._o.numberOfMonths;e++)this.calendars[e]=b({month:this.calendars[0].month+e,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(e){isNaN(e)||(this.calendars[0].month=parseInt(e,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(e){isNaN(e)||(this.calendars[0].year=parseInt(e,10),this.adjustCalendars())},setMinDate:function(e){e instanceof Date?(w(e),this._o.minDate=e,this._o.minYear=e.getFullYear(),this._o.minMonth=e.getMonth()):(this._o.minDate=C.minDate,this._o.minYear=C.minYear,this._o.minMonth=C.minMonth,this._o.startRange=C.startRange),this.draw()},setMaxDate:function(e){e instanceof Date?(w(e),this._o.maxDate=e,this._o.maxYear=e.getFullYear(),this._o.maxMonth=e.getMonth()):(this._o.maxDate=C.maxDate,this._o.maxYear=C.maxYear,this._o.maxMonth=C.maxMonth,this._o.endRange=C.endRange),this.draw()},setStartRange:function(e){this._o.startRange=e},setEndRange:function(e){this._o.endRange=e},draw:function(e){if(this._v||e){var t,n=this._o,o=n.minYear,i=n.maxYear,s=n.minMonth,a=n.maxMonth,l="";this._y&lt;=o&amp;&amp;(this._y=o,!isNaN(s)&amp;&amp;this._m&lt;s&amp;&amp;(this._m=s)),this._y&gt;=i&amp;&amp;(this._y=i,!isNaN(a)&amp;&amp;this._m&gt;a&amp;&amp;(this._m=a)),t="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var u=0;u&lt;n.numberOfMonths;u++)l+='&lt;div class="pika-lendar"&gt;'+T(this,u,this.calendars[u].year,this.calendars[u].month,this.calendars[0].year,t)+this.render(this.calendars[u].year,this.calendars[u].month,t)+"&lt;/div&gt;";this.el.innerHTML=l,n.bound&amp;&amp;"hidden"!==n.field.type&amp;&amp;r(function(){n.trigger.focus()},1),"function"==typeof this._o.onDraw&amp;&amp;this._o.onDraw(this),n.bound&amp;&amp;n.field.setAttribute("aria-label","Use the arrow keys to pick a date")}},adjustPosition:function(){var e,t,n,r,i,s,a,l,u,c;if(!this._o.container){if(this.el.style.position="absolute",e=this._o.trigger,t=e,n=this.el.offsetWidth,r=this.el.offsetHeight,i=window.innerWidth||o.documentElement.clientWidth,s=window.innerHeight||o.documentElement.clientHeight,a=window.pageYOffset||o.body.scrollTop||o.documentElement.scrollTop,"function"==typeof e.getBoundingClientRect)c=e.getBoundingClientRect(),l=c.left+window.pageXOffset,u=c.bottom+window.pageYOffset;else for(l=t.offsetLeft,u=t.offsetTop+t.offsetHeight;t=t.offsetParent;)l+=t.offsetLeft,u+=t.offsetTop;(this._o.reposition&amp;&amp;l+n&gt;i||this._o.position.indexOf("right")&gt;-1&amp;&amp;l-n+e.offsetWidth&gt;0)&amp;&amp;(l=l-n+e.offsetWidth),(this._o.reposition&amp;&amp;u+r&gt;s+a||this._o.position.indexOf("top")&gt;-1&amp;&amp;u-r-e.offsetHeight&gt;0)&amp;&amp;(u=u-r-e.offsetHeight),this.el.style.left=l+"px",this.el.style.top=u+"px"}},render:function(e,t,n){var o=this._o,r=new Date,i=g(e,t),s=new Date(e,t,1).getDay(),a=[],l=[];w(r),o.firstDay&gt;0&amp;&amp;(s-=o.firstDay,s&lt;0&amp;&amp;(s+=7));for(var u=0===t?11:t-1,c=11===t?0:t+1,d=0===t?e-1:e,h=11===t?e+1:e,m=g(d,u),y=i+s,b=y;b&gt;7;)b-=7;y+=7-b;for(var C=0,_=0;C&lt;y;C++){var E=new Date(e,t,1+(C-s)),O=!!f(this._d)&amp;&amp;v(E,this._d),T=v(E,r),x=C&lt;s||C&gt;=i+s,D=1+(C-s),H=t,A=e,P=o.startRange&amp;&amp;v(o.startRange,E),N=o.endRange&amp;&amp;v(o.endRange,E),L=o.startRange&amp;&amp;o.endRange&amp;&amp;o.startRange&lt;E&amp;&amp;E&lt;o.endRange,I=o.minDate&amp;&amp;E&lt;o.minDate||o.maxDate&amp;&amp;E&gt;o.maxDate||o.disableWeekends&amp;&amp;p(E)||o.disableDayFn&amp;&amp;o.disableDayFn(E);x&amp;&amp;(C&lt;s?(D=m+D,H=u,A=d):(D-=i,H=c,A=h));var W={day:D,month:H,year:A,isSelected:O,isToday:T,isDisabled:I,isEmpty:x,isStartRange:P,isEndRange:N,isInRange:L,showDaysInNextAndPreviousMonths:o.showDaysInNextAndPreviousMonths};l.push(R(W)),7===++_&amp;&amp;(o.showWeekNumber&amp;&amp;l.unshift(M(C-s,t,e)),a.push(S(l,o.isRTL)),l=[],_=0)}return k(o,a,n)},isVisible:function(){return this._v},show:function(){this.isVisible()||(d(this.el,"is-hidden"),this._v=!0,this.draw(),this._o.bound&amp;&amp;(i(o,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&amp;&amp;this._o.onOpen.call(this))},hide:function(){var e=this._v;e!==!1&amp;&amp;(this._o.bound&amp;&amp;s(o,"click",this._onClick),this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto",c(this.el,"is-hidden"),this._v=!1,void 0!==e&amp;&amp;"function"==typeof this._o.onClose&amp;&amp;this._o.onClose.call(this))},destroy:function(){this.hide(),s(this.el,"mousedown",this._onMouseDown,!0),s(this.el,"touchend",this._onMouseDown,!0),s(this.el,"change",this._onChange),this._o.field&amp;&amp;(s(this._o.field,"change",this._onInputChange),this._o.bound&amp;&amp;(s(this._o.trigger,"click",this._onInputClick),s(this._o.trigger,"focus",this._onInputFocus),s(this._o.trigger,"blur",this._onInputBlur))),this.el.parentNode&amp;&amp;this.el.parentNode.removeChild(this.el)}},x})},{moment:"moment"}],zeroclipboard:[function(t,n,o){/*!
 * ZeroClipboard
 * The ZeroClipboard library provides an easy way to copy text to the clipboard using an invisible Adobe Flash movie and a JavaScript interface
 * Copyright (c) 2009-2016 Jon Rohan, James M. Greene
 * Licensed MIT
 * http://zeroclipboard.org/
 * v2.3.0
 */
!function(t,o){"use strict";var r,i,s,a=t,l=a.document,u=a.navigator,c=a.setTimeout,d=a.clearTimeout,h=a.setInterval,f=a.clearInterval,p=a.getComputedStyle,m=a.encodeURIComponent,g=a.ActiveXObject,w=a.Error,v=a.Number.parseInt||a.parseInt,y=a.Number.parseFloat||a.parseFloat,b=a.Number.isNaN||a.isNaN,C=a.Date.now,_=a.Object.keys,R=a.Object.prototype.hasOwnProperty,M=a.Array.prototype.slice,S=function(){var e=function(e){return e};if("function"==typeof a.wrap&amp;&amp;"function"==typeof a.unwrap)try{var t=l.createElement("div"),n=a.unwrap(t);1===t.nodeType&amp;&amp;n&amp;&amp;1===n.nodeType&amp;&amp;(e=a.unwrap)}catch(e){}return e}(),E=function(e){return M.call(e,0)},O=function(){var e,t,n,r,i,s,a=E(arguments),l=a[0]||{};for(e=1,t=a.length;e&lt;t;e++)if(null!=(n=a[e]))for(r in n)R.call(n,r)&amp;&amp;(i=l[r],s=n[r],l!==s&amp;&amp;s!==o&amp;&amp;(l[r]=s));return l},T=function(e){var t,n,o,r;if("object"!=typeof e||null==e||"number"==typeof e.nodeType)t=e;else if("number"==typeof e.length)for(t=[],n=0,o=e.length;n&lt;o;n++)R.call(e,n)&amp;&amp;(t[n]=T(e[n]));else{t={};for(r in e)R.call(e,r)&amp;&amp;(t[r]=T(e[r]))}return t},k=function(e,t){for(var n={},o=0,r=t.length;o&lt;r;o++)t[o]in e&amp;&amp;(n[t[o]]=e[t[o]]);return n},x=function(e,t){var n={};for(var o in e)t.indexOf(o)===-1&amp;&amp;(n[o]=e[o]);return n},D=function(e){if(e)for(var t in e)R.call(e,t)&amp;&amp;delete e[t];return e},H=function(e,t){if(e&amp;&amp;1===e.nodeType&amp;&amp;e.ownerDocument&amp;&amp;t&amp;&amp;(1===t.nodeType&amp;&amp;t.ownerDocument&amp;&amp;t.ownerDocument===e.ownerDocument||9===t.nodeType&amp;&amp;!t.ownerDocument&amp;&amp;t===e.ownerDocument))do{if(e===t)return!0;e=e.parentNode}while(e);return!1},A=function(e){var t;return"string"==typeof e&amp;&amp;e&amp;&amp;(t=e.split("#")[0].split("?")[0],t=e.slice(0,e.lastIndexOf("/")+1)),t},P=function(e){var t,n;return"string"==typeof e&amp;&amp;e&amp;&amp;(n=e.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&amp;&amp;n[1]?t=n[1]:(n=e.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&amp;&amp;n[1]&amp;&amp;(t=n[1]))),t},N=function(){var e,t;try{throw new w}catch(e){t=e}return t&amp;&amp;(e=t.sourceURL||t.fileName||P(t.stack)),e},L=function(){var e,t,n;if(l.currentScript&amp;&amp;(e=l.currentScript.src))return e;if(t=l.getElementsByTagName("script"),1===t.length)return t[0].src||o;if("readyState"in(t[0]||document.createElement("script")))for(n=t.length;n--;)if("interactive"===t[n].readyState&amp;&amp;(e=t[n].src))return e;return"loading"===l.readyState&amp;&amp;(e=t[t.length-1].src)?e:(e=N())?e:o},I=function(){var e,t,n,r=l.getElementsByTagName("script");for(e=r.length;e--;){if(!(n=r[e].src)){t=null;break}if(n=A(n),null==t)t=n;else if(t!==n){t=null;break}}return t||o},W=function(){var e=A(L())||I()||"";return e+"ZeroClipboard.swf"},j=function(){var e=/win(dows|[\s]?(nt|me|ce|xp|vista|[\d]+))/i;return!!u&amp;&amp;(e.test(u.appVersion||"")||e.test(u.platform||"")||(u.userAgent||"").indexOf("Windows")!==-1)},V=function(){return null==a.opener&amp;&amp;(!!a.top&amp;&amp;a!=a.top||!!a.parent&amp;&amp;a!=a.parent)}(),B="html"===l.documentElement.nodeName,F={bridge:null,version:"0.0.0",pluginType:"unknown",sandboxed:null,disabled:null,outdated:null,insecure:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null},z="11.0.0",Y={},U={},G=null,$=0,K=0,X={ready:"Flash communication is established",error:{"flash-sandboxed":"Attempting to run Flash in a sandboxed iframe, which is impossible","flash-disabled":"Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-insecure":"Flash will be unable to communicate due to a protocol mismatch between your `swfPath` configuration and the page","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-overdue":"Flash communication was established but NOT within the acceptable time limit","version-mismatch":"ZeroClipboard JS version number does not match ZeroClipboard SWF version number","clipboard-error":"At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard","config-mismatch":"ZeroClipboard configuration does not match Flash's reality","swf-not-found":"The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity","browser-unsupported":"The browser does not support the required HTML DOM and JavaScript features"}},q=["flash-unavailable","flash-degraded","flash-overdue","version-mismatch","config-mismatch","clipboard-error"],Z=["flash-sandboxed","flash-disabled","flash-outdated","flash-insecure","flash-unavailable","flash-degraded","flash-deactivated","flash-overdue"],J=new RegExp("^flash-("+Z.map(function(e){return e.replace(/^flash-/,"")}).join("|")+")$"),Q=new RegExp("^flash-("+Z.filter(function(e){return"flash-disabled"!==e}).map(function(e){return e.replace(/^flash-/,"")}).join("|")+")$"),ee={swfPath:W(),trustedDomains:a.location.host?[a.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,fixLineEndings:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},te=function(e){"object"!=typeof e||!e||"length"in e||_(e).forEach(function(t){if(/^(?:forceHandCursor|title|zIndex|bubbleEvents|fixLineEndings)$/.test(t))ee[t]=e[t];else if(null==F.bridge)if("containerId"===t||"swfObjectId"===t){if(!ve(e[t]))throw new Error("The specified `"+t+"` value is not valid as an HTML4 Element ID");ee[t]=e[t]}else ee[t]=e[t]});{if("string"!=typeof e||!e)return T(ee);if(R.call(ee,e))return ee[e]}},ne=function(){return Je(),{browser:O(k(u,["userAgent","platform","appName","appVersion"]),{isSupported:oe()}),flash:x(F,["bridge"]),zeroclipboard:{version:et.version,config:et.config()}}},oe=function(){return!!(l.addEventListener&amp;&amp;a.Object.keys&amp;&amp;a.Array.prototype.map)},re=function(){return!!(F.sandboxed||F.disabled||F.outdated||F.unavailable||F.degraded||F.deactivated)},ie=function(e,t){var n,i,s,a={};if("string"==typeof e&amp;&amp;e?s=e.toLowerCase().split(/\s+/):"object"!=typeof e||!e||"length"in e||"undefined"!=typeof t||_(e).forEach(function(t){var n=e[t];"function"==typeof n&amp;&amp;et.on(t,n)}),s&amp;&amp;s.length&amp;&amp;t){for(n=0,i=s.length;n&lt;i;n++)e=s[n].replace(/^on/,""),a[e]=!0,Y[e]||(Y[e]=[]),Y[e].push(t);if(a.ready&amp;&amp;F.ready&amp;&amp;et.emit({type:"ready"}),a.error){for(oe()||et.emit({type:"error",name:"browser-unsupported"}),n=0,i=Z.length;n&lt;i;n++)if(F[Z[n].replace(/^flash-/,"")]===!0){et.emit({type:"error",name:Z[n]});break}r!==o&amp;&amp;et.version!==r&amp;&amp;et.emit({type:"error",name:"version-mismatch",jsVersion:et.version,swfVersion:r})}}return et},se=function(e,t){var n,o,r,i,s;if(0===arguments.length?i=_(Y):"string"==typeof e&amp;&amp;e?i=e.toLowerCase().split(/\s+/):"object"!=typeof e||!e||"length"in e||"undefined"!=typeof t||_(e).forEach(function(t){var n=e[t];"function"==typeof n&amp;&amp;et.off(t,n)}),i&amp;&amp;i.length)for(n=0,o=i.length;n&lt;o;n++)if(e=i[n].replace(/^on/,""),s=Y[e],s&amp;&amp;s.length)if(t)for(r=s.indexOf(t);r!==-1;)s.splice(r,1),r=s.indexOf(t,r);else s.length=0;return et},ae=function(e){var t;return t="string"==typeof e&amp;&amp;e?T(Y[e])||null:T(Y)},le=function(e){var t,n,o;if(e=ye(e),e&amp;&amp;!Ee(e))return"ready"===e.type&amp;&amp;F.overdue===!0?et.emit({type:"error",name:"flash-overdue"}):(t=O({},e),Me.call(this,t),"copy"===e.type&amp;&amp;(o=Ne(U),n=o.data,G=o.formatMap),n)},ue=function(){var e=ee.swfPath||"",t=e.slice(0,2),n=e.slice(0,e.indexOf("://")+1);return"\\\\"===t?"file:":"//"===t||""===n?a.location.protocol:n},ce=function(){var e,t,n=F.sandboxed;return oe()?(Je(),"boolean"!=typeof F.ready&amp;&amp;(F.ready=!1),void(F.sandboxed!==n&amp;&amp;F.sandboxed===!0?(F.ready=!1,et.emit({type:"error",name:"flash-sandboxed"})):et.isFlashUnusable()||null!==F.bridge||(t=ue(),t&amp;&amp;t!==a.location.protocol?et.emit({type:"error",name:"flash-insecure"}):(e=ee.flashLoadTimeout,"number"==typeof e&amp;&amp;e&gt;=0&amp;&amp;($=c(function(){"boolean"!=typeof F.deactivated&amp;&amp;(F.deactivated=!0),F.deactivated===!0&amp;&amp;et.emit({type:"error",name:"flash-deactivated"})},e)),F.overdue=!1,Ae())))):(F.ready=!1,void et.emit({type:"error",name:"browser-unsupported"}))},de=function(){et.clearData(),et.blur(),et.emit("destroy"),Pe(),et.off()},he=function(e,t){var n;if("object"==typeof e&amp;&amp;e&amp;&amp;"undefined"==typeof t)n=e,et.clearData();else{if("string"!=typeof e||!e)return;n={},n[e]=t}for(var o in n)"string"==typeof o&amp;&amp;o&amp;&amp;R.call(n,o)&amp;&amp;"string"==typeof n[o]&amp;&amp;n[o]&amp;&amp;(U[o]=Ze(n[o]))},fe=function(e){"undefined"==typeof e?(D(U),G=null):"string"==typeof e&amp;&amp;R.call(U,e)&amp;&amp;delete U[e]},pe=function(e){return"undefined"==typeof e?T(U):"string"==typeof e&amp;&amp;R.call(U,e)?U[e]:void 0},me=function(e){if(e&amp;&amp;1===e.nodeType){i&amp;&amp;(ze(i,ee.activeClass),i!==e&amp;&amp;ze(i,ee.hoverClass)),i=e,Fe(e,ee.hoverClass);var t=e.getAttribute("title")||ee.title;if("string"==typeof t&amp;&amp;t){var n=De(F.bridge);n&amp;&amp;n.setAttribute("title",t)}var o=ee.forceHandCursor===!0||"pointer"===Ye(e,"cursor");Xe(o),Ke()}},ge=function(){var e=De(F.bridge);e&amp;&amp;(e.removeAttribute("title"),e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px"),i&amp;&amp;(ze(i,ee.hoverClass),ze(i,ee.activeClass),i=null)},we=function(){return i||null},ve=function(e){return"string"==typeof e&amp;&amp;e&amp;&amp;/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(e)},ye=function(e){var t;if("string"==typeof e&amp;&amp;e?(t=e,e={}):"object"==typeof e&amp;&amp;e&amp;&amp;"string"==typeof e.type&amp;&amp;e.type&amp;&amp;(t=e.type),t){t=t.toLowerCase(),!e.target&amp;&amp;(/^(copy|aftercopy|_click)$/.test(t)||"error"===t&amp;&amp;"clipboard-error"===e.name)&amp;&amp;(e.target=s),O(e,{type:t,target:e.target||i||null,relatedTarget:e.relatedTarget||null,currentTarget:F&amp;&amp;F.bridge||null,timeStamp:e.timeStamp||C()||null});var n=X[e.type];return"error"===e.type&amp;&amp;e.name&amp;&amp;n&amp;&amp;(n=n[e.name]),n&amp;&amp;(e.message=n),"ready"===e.type&amp;&amp;O(e,{target:null,version:F.version}),"error"===e.type&amp;&amp;(J.test(e.name)&amp;&amp;O(e,{target:null,minimumVersion:z}),Q.test(e.name)&amp;&amp;O(e,{version:F.version}),"flash-insecure"===e.name&amp;&amp;O(e,{pageProtocol:a.location.protocol,swfProtocol:ue()})),"copy"===e.type&amp;&amp;(e.clipboardData={setData:et.setData,clearData:et.clearData}),"aftercopy"===e.type&amp;&amp;(e=Le(e,G)),e.target&amp;&amp;!e.relatedTarget&amp;&amp;(e.relatedTarget=be(e.target)),Ce(e)}},be=function(e){var t=e&amp;&amp;e.getAttribute&amp;&amp;e.getAttribute("data-clipboard-target");return t?l.getElementById(t):null},Ce=function(e){if(e&amp;&amp;/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)){var t=e.target,n="_mouseover"===e.type&amp;&amp;e.relatedTarget?e.relatedTarget:o,r="_mouseout"===e.type&amp;&amp;e.relatedTarget?e.relatedTarget:o,i=Ue(t),s=a.screenLeft||a.screenX||0,u=a.screenTop||a.screenY||0,c=l.body.scrollLeft+l.documentElement.scrollLeft,d=l.body.scrollTop+l.documentElement.scrollTop,h=i.left+("number"==typeof e._stageX?e._stageX:0),f=i.top+("number"==typeof e._stageY?e._stageY:0),p=h-c,m=f-d,g=s+p,w=u+m,v="number"==typeof e.movementX?e.movementX:0,y="number"==typeof e.movementY?e.movementY:0;delete e._stageX,delete e._stageY,O(e,{srcElement:t,fromElement:n,toElement:r,screenX:g,screenY:w,pageX:h,pageY:f,clientX:p,clientY:m,x:p,y:m,movementX:v,movementY:y,offsetX:0,offsetY:0,layerX:0,layerY:0})}return e},_e=function(e){var t=e&amp;&amp;"string"==typeof e.type&amp;&amp;e.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(t)},Re=function(e,t,n,o){o?c(function(){e.apply(t,n)},0):e.apply(t,n)},Me=function(e){if("object"==typeof e&amp;&amp;e&amp;&amp;e.type){var t=_e(e),n=Y["*"]||[],o=Y[e.type]||[],r=n.concat(o);if(r&amp;&amp;r.length){var i,s,l,u,c,d=this;for(i=0,s=r.length;i&lt;s;i++)l=r[i],u=d,"string"==typeof l&amp;&amp;"function"==typeof a[l]&amp;&amp;(l=a[l]),"object"==typeof l&amp;&amp;l&amp;&amp;"function"==typeof l.handleEvent&amp;&amp;(u=l,l=l.handleEvent),"function"==typeof l&amp;&amp;(c=O({},e),Re(l,u,[c],t))}return this}},Se=function(e){var t=null;return(V===!1||e&amp;&amp;"error"===e.type&amp;&amp;e.name&amp;&amp;q.indexOf(e.name)!==-1)&amp;&amp;(t=!1),t},Ee=function(e){var t=e.target||i||null,n="swf"===e._source;switch(delete e._source,e.type){case"error":var o="flash-sandboxed"===e.name||Se(e);"boolean"==typeof o&amp;&amp;(F.sandboxed=o),"browser-unsupported"===e.name?O(F,{disabled:!1,outdated:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1}):Z.indexOf(e.name)!==-1?O(F,{disabled:"flash-disabled"===e.name,outdated:"flash-outdated"===e.name,insecure:"flash-insecure"===e.name,unavailable:"flash-unavailable"===e.name,degraded:"flash-degraded"===e.name,deactivated:"flash-deactivated"===e.name,overdue:"flash-overdue"===e.name,ready:!1}):"version-mismatch"===e.name&amp;&amp;(r=e.swfVersion,O(F,{disabled:!1,outdated:!1,insecure:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1})),$e();break;case"ready":r=e.swfVersion;var a=F.deactivated===!0;O(F,{sandboxed:!1,disabled:!1,outdated:!1,insecure:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:a,ready:!a}),$e();break;case"beforecopy":s=t;break;case"copy":var l,u,c=e.relatedTarget;!U["text/html"]&amp;&amp;!U["text/plain"]&amp;&amp;c&amp;&amp;(u=c.value||c.outerHTML||c.innerHTML)&amp;&amp;(l=c.value||c.textContent||c.innerText)?(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",l),u!==l&amp;&amp;e.clipboardData.setData("text/html",u)):!U["text/plain"]&amp;&amp;e.target&amp;&amp;(l=e.target.getAttribute("data-clipboard-text"))&amp;&amp;(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",l));break;case"aftercopy":Oe(e),et.clearData(),t&amp;&amp;t!==Be()&amp;&amp;t.focus&amp;&amp;t.focus();break;case"_mouseover":et.focus(t),ee.bubbleEvents===!0&amp;&amp;n&amp;&amp;(t&amp;&amp;t!==e.relatedTarget&amp;&amp;!H(e.relatedTarget,t)&amp;&amp;Te(O({},e,{type:"mouseenter",bubbles:!1,cancelable:!1})),Te(O({},e,{type:"mouseover"})));break;case"_mouseout":et.blur(),ee.bubbleEvents===!0&amp;&amp;n&amp;&amp;(t&amp;&amp;t!==e.relatedTarget&amp;&amp;!H(e.relatedTarget,t)&amp;&amp;Te(O({},e,{type:"mouseleave",bubbles:!1,cancelable:!1})),Te(O({},e,{type:"mouseout"})));break;case"_mousedown":Fe(t,ee.activeClass),ee.bubbleEvents===!0&amp;&amp;n&amp;&amp;Te(O({},e,{type:e.type.slice(1)}));break;case"_mouseup":ze(t,ee.activeClass),ee.bubbleEvents===!0&amp;&amp;n&amp;&amp;Te(O({},e,{type:e.type.slice(1)}));break;case"_click":s=null,ee.bubbleEvents===!0&amp;&amp;n&amp;&amp;Te(O({},e,{type:e.type.slice(1)}));break;case"_mousemove":ee.bubbleEvents===!0&amp;&amp;n&amp;&amp;Te(O({},e,{type:e.type.slice(1)}))}if(/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type))return!0},Oe=function(e){if(e.errors&amp;&amp;e.errors.length&gt;0){var t=T(e);O(t,{type:"error",name:"clipboard-error"}),delete t.success,c(function(){et.emit(t)},0)}},Te=function(e){if(e&amp;&amp;"string"==typeof e.type&amp;&amp;e){var t,n=e.target||null,o=n&amp;&amp;n.ownerDocument||l,r={view:o.defaultView||a,canBubble:!0,cancelable:!0,detail:"click"===e.type?1:0,button:"number"==typeof e.which?e.which-1:"number"==typeof e.button?e.button:o.createEvent?0:1},i=O(r,e);n&amp;&amp;o.createEvent&amp;&amp;n.dispatchEvent&amp;&amp;(i=[i.type,i.canBubble,i.cancelable,i.view,i.detail,i.screenX,i.screenY,i.clientX,i.clientY,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.button,i.relatedTarget],t=o.createEvent("MouseEvents"),t.initMouseEvent&amp;&amp;(t.initMouseEvent.apply(t,i),t._source="js",n.dispatchEvent(t)))}},ke=function(){var e=ee.flashLoadTimeout;if("number"==typeof e&amp;&amp;e&gt;=0){var t=Math.min(1e3,e/10),n=ee.swfObjectId+"_fallbackContent";K=h(function(){var e=l.getElementById(n);Ge(e)&amp;&amp;($e(),F.deactivated=null,et.emit({type:"error",name:"swf-not-found"}))},t)}},xe=function(){var e=l.createElement("div");return e.id=ee.containerId,e.className=ee.containerClass,e.style.position="absolute",e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px",e.style.zIndex=""+qe(ee.zIndex),e},De=function(e){for(var t=e&amp;&amp;e.parentNode;t&amp;&amp;"OBJECT"===t.nodeName&amp;&amp;t.parentNode;)t=t.parentNode;return t||null},He=function(e){return"string"==typeof e&amp;&amp;e?e.replace(/["&amp;'&lt;&gt;]/g,function(e){switch(e){case'"':return"&amp;quot;";case"&amp;":return"&amp;amp;";case"'":return"&amp;apos;";case"&lt;":return"&amp;lt;";case"&gt;":return"&amp;gt;";default:return e}}):e},Ae=function(){var e,t=F.bridge,n=De(t);if(!t){var o=Ve(a.location.host,ee),r="never"===o?"none":"all",i=We(O({jsVersion:et.version},ee)),s=ee.swfPath+Ie(ee.swfPath,ee);B&amp;&amp;(s=He(s)),n=xe();var u=l.createElement("div");n.appendChild(u),l.body.appendChild(n);var c=l.createElement("div"),d="activex"===F.pluginType;c.innerHTML='&lt;object id="'+ee.swfObjectId+'" name="'+ee.swfObjectId+'" width="100%" height="100%" '+(d?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+s+'"')+"&gt;"+(d?'&lt;param name="movie" value="'+s+'"/&gt;':"")+'&lt;param name="allowScriptAccess" value="'+o+'"/&gt;&lt;param name="allowNetworking" value="'+r+'"/&gt;&lt;param name="menu" value="false"/&gt;&lt;param name="wmode" value="transparent"/&gt;&lt;param name="flashvars" value="'+i+'"/&gt;&lt;div id="'+ee.swfObjectId+'_fallbackContent"&gt;&amp;nbsp;&lt;/div&gt;&lt;/object&gt;',t=c.firstChild,c=null,S(t).ZeroClipboard=et,n.replaceChild(t,u),ke()}return t||(t=l[ee.swfObjectId],t&amp;&amp;(e=t.length)&amp;&amp;(t=t[e-1]),!t&amp;&amp;n&amp;&amp;(t=n.firstChild)),F.bridge=t||null,t},Pe=function(){var e=F.bridge;if(e){var t=De(e);t&amp;&amp;("activex"===F.pluginType&amp;&amp;"readyState"in e?(e.style.display="none",function n(){if(4===e.readyState){for(var o in e)"function"==typeof e[o]&amp;&amp;(e[o]=null);e.parentNode&amp;&amp;e.parentNode.removeChild(e),t.parentNode&amp;&amp;t.parentNode.removeChild(t)}else c(n,10)}()):(e.parentNode&amp;&amp;e.parentNode.removeChild(e),t.parentNode&amp;&amp;t.parentNode.removeChild(t))),$e(),F.ready=null,F.bridge=null,F.deactivated=null,F.insecure=null,r=o}},Ne=function(e){var t={},n={};if("object"==typeof e&amp;&amp;e){for(var o in e)if(o&amp;&amp;R.call(e,o)&amp;&amp;"string"==typeof e[o]&amp;&amp;e[o])switch(o.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":t.text=e[o],n.text=o;break;case"text/html":case"html":case"air:html":case"flash:html":t.html=e[o],n.html=o;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":t.rtf=e[o],n.rtf=o}return{data:t,formatMap:n}}},Le=function(e,t){if("object"!=typeof e||!e||"object"!=typeof t||!t)return e;var n={};for(var o in e)if(R.call(e,o))if("errors"===o){n[o]=e[o]?e[o].slice():[];for(var r=0,i=n[o].length;r&lt;i;r++)n[o][r].format=t[n[o][r].format]}else if("success"!==o&amp;&amp;"data"!==o)n[o]=e[o];else{n[o]={};var s=e[o];for(var a in s)a&amp;&amp;R.call(s,a)&amp;&amp;R.call(t,a)&amp;&amp;(n[o][t[a]]=s[a])}return n},Ie=function(e,t){var n=null==t||t&amp;&amp;t.cacheBust===!0;return n?(e.indexOf("?")===-1?"?":"&amp;")+"noCache="+C():""},We=function(e){var t,n,o,r,i="",s=[];if(e.trustedDomains&amp;&amp;("string"==typeof e.trustedDomains?r=[e.trustedDomains]:"object"==typeof e.trustedDomains&amp;&amp;"length"in e.trustedDomains&amp;&amp;(r=e.trustedDomains)),r&amp;&amp;r.length)for(t=0,n=r.length;t&lt;n;t++)if(R.call(r,t)&amp;&amp;r[t]&amp;&amp;"string"==typeof r[t]){if(o=je(r[t]),!o)continue;if("*"===o){s.length=0,s.push(o);break}s.push.apply(s,[o,"//"+o,a.location.protocol+"//"+o])}return s.length&amp;&amp;(i+="trustedOrigins="+m(s.join(","))),e.forceEnhancedClipboard===!0&amp;&amp;(i+=(i?"&amp;":"")+"forceEnhancedClipboard=true"),"string"==typeof e.swfObjectId&amp;&amp;e.swfObjectId&amp;&amp;(i+=(i?"&amp;":"")+"swfObjectId="+m(e.swfObjectId)),"string"==typeof e.jsVersion&amp;&amp;e.jsVersion&amp;&amp;(i+=(i?"&amp;":"")+"jsVersion="+m(e.jsVersion)),i},je=function(e){if(null==e||""===e)return null;if(e=e.replace(/^\s+|\s+$/g,""),""===e)return null;var t=e.indexOf("//");e=t===-1?e:e.slice(t+2);var n=e.indexOf("/");return e=n===-1?e:t===-1||0===n?null:e.slice(0,n),e&amp;&amp;".swf"===e.slice(-4).toLowerCase()?null:e||null},Ve=function(){var e=function(e){var t,n,o,r=[];if("string"==typeof e&amp;&amp;(e=[e]),"object"!=typeof e||!e||"number"!=typeof e.length)return r;for(t=0,n=e.length;t&lt;n;t++)if(R.call(e,t)&amp;&amp;(o=je(e[t]))){if("*"===o){r.length=0,r.push("*");break}r.indexOf(o)===-1&amp;&amp;r.push(o)}return r};return function(t,n){var o=je(n.swfPath);null===o&amp;&amp;(o=t);var r=e(n.trustedDomains),i=r.length;if(i&gt;0){if(1===i&amp;&amp;"*"===r[0])return"always";if(r.indexOf(t)!==-1)return 1===i&amp;&amp;t===o?"sameDomain":"always"}return"never"}}(),Be=function(){try{return l.activeElement}catch(e){return null}},Fe=function(e,t){var n,o,r,i=[];if("string"==typeof t&amp;&amp;t&amp;&amp;(i=t.split(/\s+/)),e&amp;&amp;1===e.nodeType&amp;&amp;i.length&gt;0){for(r=(" "+(e.className||"")+" ").replace(/[\t\r\n\f]/g," "),n=0,o=i.length;n&lt;o;n++)r.indexOf(" "+i[n]+" ")===-1&amp;&amp;(r+=i[n]+" ");r=r.replace(/^\s+|\s+$/g,""),r!==e.className&amp;&amp;(e.className=r)}return e},ze=function(e,t){var n,o,r,i=[];if("string"==typeof t&amp;&amp;t&amp;&amp;(i=t.split(/\s+/)),e&amp;&amp;1===e.nodeType&amp;&amp;i.length&gt;0&amp;&amp;e.className){for(r=(" "+e.className+" ").replace(/[\t\r\n\f]/g," "),n=0,o=i.length;n&lt;o;n++)r=r.replace(" "+i[n]+" "," ");r=r.replace(/^\s+|\s+$/g,""),r!==e.className&amp;&amp;(e.className=r)}return e},Ye=function(e,t){var n=p(e,null).getPropertyValue(t);return"cursor"!==t||n&amp;&amp;"auto"!==n||"A"!==e.nodeName?n:"pointer"},Ue=function(e){var t={left:0,top:0,width:0,height:0};if(e.getBoundingClientRect){var n=e.getBoundingClientRect(),o=a.pageXOffset,r=a.pageYOffset,i=l.documentElement.clientLeft||0,s=l.documentElement.clientTop||0,u=0,c=0;if("relative"===Ye(l.body,"position")){var d=l.body.getBoundingClientRect(),h=l.documentElement.getBoundingClientRect();u=d.left-h.left||0,c=d.top-h.top||0}t.left=n.left+o-i-u,t.top=n.top+r-s-c,t.width="width"in n?n.width:n.right-n.left,t.height="height"in n?n.height:n.bottom-n.top}return t},Ge=function(e){if(!e)return!1;var t=p(e,null);if(!t)return!1;var n=y(t.height)&gt;0,o=y(t.width)&gt;0,r=y(t.top)&gt;=0,i=y(t.left)&gt;=0,s=n&amp;&amp;o&amp;&amp;r&amp;&amp;i,a=s?null:Ue(e),l="none"!==t.display&amp;&amp;"collapse"!==t.visibility&amp;&amp;(s||!!a&amp;&amp;(n||a.height&gt;0)&amp;&amp;(o||a.width&gt;0)&amp;&amp;(r||a.top&gt;=0)&amp;&amp;(i||a.left&gt;=0));return l},$e=function(){d($),$=0,f(K),K=0},Ke=function(){var e;if(i&amp;&amp;(e=De(F.bridge))){var t=Ue(i);O(e.style,{width:t.width+"px",height:t.height+"px",top:t.top+"px",left:t.left+"px",zIndex:""+qe(ee.zIndex)})}},Xe=function(e){F.ready===!0&amp;&amp;(F.bridge&amp;&amp;"function"==typeof F.bridge.setHandCursor?F.bridge.setHandCursor(e):F.ready=!1)},qe=function(e){if(/^(?:auto|inherit)$/.test(e))return e;var t;return"number"!=typeof e||b(e)?"string"==typeof e&amp;&amp;(t=qe(v(e,10))):t=e,"number"==typeof t?t:"auto"},Ze=function(e){var t=/(\r\n|\r|\n)/g;return"string"==typeof e&amp;&amp;ee.fixLineEndings===!0&amp;&amp;(j()?/((^|[^\r])\n|\r([^\n]|$))/.test(e)&amp;&amp;(e=e.replace(t,"\r\n")):/\r/.test(e)&amp;&amp;(e=e.replace(t,"\n"))),e},Je=function(e){var n,o,r,i=F.sandboxed,s=null;if(e=e===!0,V===!1)s=!1;else{try{o=t.frameElement||null}catch(e){r={name:e.name,message:e.message}}if(o&amp;&amp;1===o.nodeType&amp;&amp;"IFRAME"===o.nodeName)try{s=o.hasAttribute("sandbox")}catch(e){s=null}else{try{n=document.domain||null}catch(e){n=null}(null===n||r&amp;&amp;"SecurityError"===r.name&amp;&amp;/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(r.message.toLowerCase()))&amp;&amp;(s=!0)}}return F.sandboxed=s,i===s||e||Qe(g),s},Qe=function(e){function t(e){var t=e.match(/[\d]+/g);return t.length=3,t.join(".")}function n(e){return!!e&amp;&amp;(e=e.toLowerCase())&amp;&amp;(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(e)||"chrome.plugin"===e.slice(-13))}function o(e){e&amp;&amp;(a=!0,e.version&amp;&amp;(d=t(e.version)),!d&amp;&amp;e.description&amp;&amp;(d=t(e.description)),e.filename&amp;&amp;(c=n(e.filename)))}var r,i,s,a=!1,l=!1,c=!1,d="";if(u.plugins&amp;&amp;u.plugins.length)r=u.plugins["Shockwave Flash"],o(r),u.plugins["Shockwave Flash 2.0"]&amp;&amp;(a=!0,d="2.0.0.11");else if(u.mimeTypes&amp;&amp;u.mimeTypes.length)s=u.mimeTypes["application/x-shockwave-flash"],r=s&amp;&amp;s.enabledPlugin,o(r);else if("undefined"!=typeof e){l=!0;try{i=new e("ShockwaveFlash.ShockwaveFlash.7"),a=!0,d=t(i.GetVariable("$version"))}catch(n){try{i=new e("ShockwaveFlash.ShockwaveFlash.6"),a=!0,d="6.0.21"}catch(n){try{i=new e("ShockwaveFlash.ShockwaveFlash"),a=!0,d=t(i.GetVariable("$version"))}catch(e){l=!1}}}}F.disabled=a!==!0,F.outdated=d&amp;&amp;y(d)&lt;y(z),F.version=d||"0.0.0",F.pluginType=c?"pepper":l?"activex":a?"netscape":"unknown"};Qe(g),Je(!0);var et=function(){return this instanceof et?void("function"==typeof et._createClient&amp;&amp;et._createClient.apply(this,E(arguments))):new et};et.version="2.3.0",et.config=function(){return te.apply(this,E(arguments))},et.state=function(){return ne.apply(this,E(arguments))},et.isFlashUnusable=function(){return re.apply(this,E(arguments))},et.on=function(){return ie.apply(this,E(arguments))},et.off=function(){return se.apply(this,E(arguments))},et.handlers=function(){return ae.apply(this,E(arguments))},et.emit=function(){return le.apply(this,E(arguments))},et.create=function(){return ce.apply(this,E(arguments))},et.destroy=function(){return de.apply(this,E(arguments))},et.setData=function(){return he.apply(this,E(arguments))},et.clearData=function(){return fe.apply(this,E(arguments))},et.getData=function(){return pe.apply(this,E(arguments))},et.focus=et.activate=function(){return me.apply(this,E(arguments))},et.blur=et.deactivate=function(){return ge.apply(this,E(arguments))},et.activeElement=function(){return we.apply(this,E(arguments))};var tt=0,nt={},ot=0,rt={},it={};O(ee,{autoActivate:!0});var st=function(e){var t,n=this;n.id=""+tt++,t={instance:n,elements:[],handlers:{},coreWildcardHandler:function(e){return n.emit(e)}},nt[n.id]=t,e&amp;&amp;n.clip(e),et.on("*",t.coreWildcardHandler),et.on("destroy",function(){n.destroy()}),et.create()},at=function(e,t){var n,i,s,a={},l=this,u=nt[l.id],c=u&amp;&amp;u.handlers;if(!u)throw new Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");if("string"==typeof e&amp;&amp;e?s=e.toLowerCase().split(/\s+/):"object"!=typeof e||!e||"length"in e||"undefined"!=typeof t||_(e).forEach(function(t){var n=e[t];"function"==typeof n&amp;&amp;l.on(t,n)}),s&amp;&amp;s.length&amp;&amp;t){for(n=0,i=s.length;n&lt;i;n++)e=s[n].replace(/^on/,""),a[e]=!0,c[e]||(c[e]=[]),c[e].push(t);if(a.ready&amp;&amp;F.ready&amp;&amp;this.emit({type:"ready",client:this}),a.error){for(n=0,i=Z.length;n&lt;i;n++)if(F[Z[n].replace(/^flash-/,"")]){this.emit({type:"error",name:Z[n],client:this});break}r!==o&amp;&amp;et.version!==r&amp;&amp;this.emit({type:"error",name:"version-mismatch",jsVersion:et.version,swfVersion:r})}}return l},lt=function(e,t){var n,o,r,i,s,a=this,l=nt[a.id],u=l&amp;&amp;l.handlers;if(!u)return a;if(0===arguments.length?i=_(u):"string"==typeof e&amp;&amp;e?i=e.split(/\s+/):"object"!=typeof e||!e||"length"in e||"undefined"!=typeof t||_(e).forEach(function(t){var n=e[t];"function"==typeof n&amp;&amp;a.off(t,n)}),i&amp;&amp;i.length)for(n=0,o=i.length;n&lt;o;n++)if(e=i[n].toLowerCase().replace(/^on/,""),s=u[e],s&amp;&amp;s.length)if(t)for(r=s.indexOf(t);r!==-1;)s.splice(r,1),r=s.indexOf(t,r);else s.length=0;return a},ut=function(e){var t=null,n=nt[this.id]&amp;&amp;nt[this.id].handlers;return n&amp;&amp;(t="string"==typeof e&amp;&amp;e?n[e]?n[e].slice(0):[]:T(n)),t},ct=function(e){var t,n=this;return mt.call(n,e)&amp;&amp;("object"==typeof e&amp;&amp;e&amp;&amp;"string"==typeof e.type&amp;&amp;e.type&amp;&amp;(e=O({},e)),t=O({},ye(e),{client:n}),gt.call(n,t)),n},dt=function(e){if(!nt[this.id])throw new Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");e=wt(e);for(var t=0;t&lt;e.length;t++)if(R.call(e,t)&amp;&amp;e[t]&amp;&amp;1===e[t].nodeType){e[t].zcClippingId?rt[e[t].zcClippingId].indexOf(this.id)===-1&amp;&amp;rt[e[t].zcClippingId].push(this.id):(e[t].zcClippingId="zcClippingId_"+ot++,rt[e[t].zcClippingId]=[this.id],ee.autoActivate===!0&amp;&amp;vt(e[t]));var n=nt[this.id]&amp;&amp;nt[this.id].elements;n.indexOf(e[t])===-1&amp;&amp;n.push(e[t])}return this},ht=function(e){var t=nt[this.id];if(!t)return this;var n,o=t.elements;e="undefined"==typeof e?o.slice(0):wt(e);for(var r=e.length;r--;)if(R.call(e,r)&amp;&amp;e[r]&amp;&amp;1===e[r].nodeType){for(n=0;(n=o.indexOf(e[r],n))!==-1;)o.splice(n,1);var i=rt[e[r].zcClippingId];if(i){for(n=0;(n=i.indexOf(this.id,n))!==-1;)i.splice(n,1);0===i.length&amp;&amp;(ee.autoActivate===!0&amp;&amp;yt(e[r]),delete e[r].zcClippingId)}}return this},ft=function(){var e=nt[this.id];return e&amp;&amp;e.elements?e.elements.slice(0):[]},pt=function(){var e=nt[this.id];e&amp;&amp;(this.unclip(),this.off(),et.off("*",e.coreWildcardHandler),delete nt[this.id])},mt=function(e){if(!e||!e.type)return!1;if(e.client&amp;&amp;e.client!==this)return!1;var t=nt[this.id],n=t&amp;&amp;t.elements,o=!!n&amp;&amp;n.length&gt;0,r=!e.target||o&amp;&amp;n.indexOf(e.target)!==-1,i=e.relatedTarget&amp;&amp;o&amp;&amp;n.indexOf(e.relatedTarget)!==-1,s=e.client&amp;&amp;e.client===this;return!(!t||!(r||i||s))},gt=function(e){var t=nt[this.id];if("object"==typeof e&amp;&amp;e&amp;&amp;e.type&amp;&amp;t){var n=_e(e),o=t&amp;&amp;t.handlers["*"]||[],r=t&amp;&amp;t.handlers[e.type]||[],i=o.concat(r);if(i&amp;&amp;i.length){var s,l,u,c,d,h=this;for(s=0,l=i.length;s&lt;l;s++)u=i[s],c=h,"string"==typeof u&amp;&amp;"function"==typeof a[u]&amp;&amp;(u=a[u]),"object"==typeof u&amp;&amp;u&amp;&amp;"function"==typeof u.handleEvent&amp;&amp;(c=u,u=u.handleEvent),"function"==typeof u&amp;&amp;(d=O({},e),Re(u,c,[d],n))}}},wt=function(e){return"string"==typeof e&amp;&amp;(e=[]),"number"!=typeof e.length?[e]:e},vt=function(e){if(e&amp;&amp;1===e.nodeType){var t=function(e){(e||(e=a.event))&amp;&amp;("js"!==e._source&amp;&amp;(e.stopImmediatePropagation(),e.preventDefault()),delete e._source)},n=function(n){(n||(n=a.event))&amp;&amp;(t(n),et.focus(e))};e.addEventListener("mouseover",n,!1),e.addEventListener("mouseout",t,!1),e.addEventListener("mouseenter",t,!1),e.addEventListener("mouseleave",t,!1),e.addEventListener("mousemove",t,!1),it[e.zcClippingId]={mouseover:n,mouseout:t,mouseenter:t,mouseleave:t,mousemove:t}}},yt=function(e){if(e&amp;&amp;1===e.nodeType){var t=it[e.zcClippingId];if("object"==typeof t&amp;&amp;t){for(var n,o,r=["move","leave","enter","out","over"],i=0,s=r.length;i&lt;s;i++)n="mouse"+r[i],o=t[n],"function"==typeof o&amp;&amp;e.removeEventListener(n,o,!1);delete it[e.zcClippingId]}}};et._createClient=function(){st.apply(this,E(arguments))},et.prototype.on=function(){return at.apply(this,E(arguments))},et.prototype.off=function(){return lt.apply(this,E(arguments))},et.prototype.handlers=function(){return ut.apply(this,E(arguments))},et.prototype.emit=function(){return ct.apply(this,E(arguments))},et.prototype.clip=function(){return dt.apply(this,E(arguments))},et.prototype.unclip=function(){return ht.apply(this,E(arguments))},et.prototype.elements=function(){return ft.apply(this,E(arguments))},et.prototype.destroy=function(){return pt.apply(this,E(arguments))},et.prototype.setText=function(e){if(!nt[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return et.setData("text/plain",e),this},et.prototype.setHtml=function(e){if(!nt[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return et.setData("text/html",e),this},et.prototype.setRichText=function(e){if(!nt[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return et.setData("application/rtf",e),this},et.prototype.setData=function(){if(!nt[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return et.setData.apply(this,E(arguments)),this},et.prototype.clearData=function(){if(!nt[this.id])throw new Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");return et.clearData.apply(this,E(arguments)),this},et.prototype.getData=function(){if(!nt[this.id])throw new Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");return et.getData.apply(this,E(arguments))},"function"==typeof e&amp;&amp;e.amd?e(function(){return et}):"object"==typeof n&amp;&amp;n&amp;&amp;"object"==typeof n.exports&amp;&amp;n.exports?n.exports=et:t.ZeroClipboard=et}(function(){return this||window}())},{}]},{},[24,63,65,66,64,67,110,111,112,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,99,100,101,102,103,105,106,107,108,109,113,114,115,116,133,134,135,136,119,120,121,122,123,124,32,36,33,34,41,35,37,38,39,40])(24)});
//}}}
// %/ //
/***
!!! .setHiddenSection helper
***/
//{{{
// Sets the section value if it is present, appends a hidden one otherwise
// (code adapted from SetManagerPlugin, Tiddler.prototype.setSection)
//
Tiddler.prototype.setHiddenSection = function(sectionName,value)
{
	var beginSectionRegExp = new RegExp("(^!{1,6}[ \t]*" + sectionName.escapeRegExp() + "[ \t]*(\n|$))","mg"),
	    sectionTerminatorRegExp = /^!/mg,
	    match = beginSectionRegExp.exec(this.text);

	if(match) // edit existing section
	{
		var sectionTitle = match[1],
		    emptyAtEnd = match[2] != "\n",
		    beforeSection = this.text.substr(0,match.index),
		    sectionAndAfter = this.text.substr(match.index + match[1].length);

		match = sectionTerminatorRegExp.exec(sectionAndAfter);
		var afterSection = match ? sectionAndAfter.substr(match.index) : "";

		this.text = beforeSection + sectionTitle + (emptyAtEnd ? "\n" : "") +
				value + (afterSection ? ("\n" + afterSection) : "");
	}
	  else // append to the end, but don't break TW tables

		this.text = this.text + (this.text[this.text.length-1] == "|" ? "\n":"") +
			"/%\n!"+sectionName + "\n"+value+"\n!%/";

	// setting dirty, notifying is not done here
};
//}}}
/***
!!! {{{handsontable}}} macro
***/
//{{{
config.macros.handsontable = {
	defaultOptions: {
		//rowHeaders: true, //alphanumerical headers, not very useful,
		colHeaders: true, //but needed for resizing
		contextMenu: true,
		//manualRowResize: true,
		manualColumnResize: true
	},
	createContainer: function(place,id)
	{
		// create a container with a unique id so that 2 HOTs don't interfere
		var containerId = id || ("handsontable" + Math.floor(Math.random()*1000));
		while(document.getElementById(containerId))
			containerId += Math.floor(Math.random()*10);
		return createTiddlyElement(place,"div",containerId);
	},
	wikifiedRenderer: function(instance, td, row, col, prop, value, cellProperties)
	{
	    	Handsontable.Dom.empty(td);
	    	wikify(""+(value || ""),td);
		return td;
	},
	allowBrowserTabSwitch: function(event){
		var $tab = 9;
		if(event.which == $tab &amp;&amp; event.ctrlKey)
			Handsontable.Dom.stopImmediatePropagation(event);
	},
	expandOnNavigatingBeyondBoundaries: function(event)
	{
		var $right = 39, $down = 40, $left = 37, $up = 38,
		    selected = this.getSelected(),
		    isEditMode = this.getActiveEditor().isOpened();
		if(isEditMode) return;

		// calc dimensions
		var startRowNum	= selected ? (selected[0]+1) : null,
		    startColNum	= selected ? (selected[1]+1) : null,
		    endRowNum	= selected ? (selected[2]+1) : null,
		    endColNum	= selected ? (selected[3]+1) : null,
		// endRowNum is not necessarily &gt;= startRowNum, it is where selection /has ended/
		    rowsNum	= this.countRows(),
		    colsNum	= this.countCols(),
		    isFirstRow	= endRowNum == 0,
		    isLastRow	= endRowNum == rowsNum,
		    isFirstCol	= endColNum == 0,
		    isLastCol	= endColNum == colsNum,
		    i, noData, data = this.getData();

//# test with selections (not just one cell) from right to left/from bottom to top: probably behaves inadequately

		// handle arrow keys
		if(isLastRow) {
			if(event.which == $down)
				this.alter('insert_row');
			if(event.which == $up &amp;&amp; !isFirstRow) {
				noData = true;
				for(i = 0; i &lt; colsNum; i++)
					if(data[endRowNum-1][i])
						noData = false;
				if(noData) {
					this.alter('remove_row');
					Handsontable.Dom
						.stopImmediatePropagation(event);
					// don't scroll the page
					if(event.preventDefault)
						event.preventDefault();
				}
			}
		}
		if(isLastCol) {
			if(event.which == $right)
				this.alter('insert_col');
			if(event.which == $left &amp;&amp; !isFirstCol) {
				noData = true;
				for(i = 0; i &lt; rowsNum; i++)
					if(data[i][endColNum-1])
						noData = false;
				if(noData) {
					this.alter('remove_col');
					Handsontable.Dom
						.stopImmediatePropagation(event);
					// don't scroll the page
					if(event.preventDefault)
						event.preventDefault();
				}
			}
		}
	},
	handler: function(place,macroName,params,wikifier,paramString,tiddler)
	{
		// parse macro params
		var pParams    = paramString.parseParams("dataAndOptions",null,true,false, true),
		    filter     = getParam(pParams,"filter"),
		    containers = pParams[0]["containers"], //containers:"!" ":slice" ...
		    macroData  = JSON.parse(getParam(pParams,"data","[ [\"\"] ]")),
		    macroOptions; //= JSON.parse(getParam(pParams,"options","{}"))
		eval("macroOptions = "+getParam(pParams,"options","{}"));
		var dataAndOptionsSection = getParam(pParams,"dataAndOptions",""),
		    separator  = config.textPrimitives.sectionSeparator,
		    dataAndOptionsText, dataAndOptions, storedData, storedOptions,
		    nonStoredOptions = macroOptions;
		merge(nonStoredOptions, this.defaultOptions, true);
		// priority is: storedOptions (highest), macroOptions, defaultOptions

//# refreshing should start here (seems to be only needed for aggregated data)
 // probably updating data and may be calling hot.render() is enough

		// get stored data and options
		if(dataAndOptionsSection) {
			if(dataAndOptionsSection.indexOf(separator) == 0)
				dataAndOptionsSection = tiddler.title + dataAndOptionsSection;
			dataAndOptionsText = store.getTiddlerText(dataAndOptionsSection);
			dataAndOptions	   = dataAndOptionsText ?
				JSON.parse(dataAndOptionsText) : {};
			storedData	   = dataAndOptions.data;
			storedOptions	   = dataAndOptions.options;
		}
		if(filter) {
			containers = containers || ["!"];
			var tiddlers = store.filterTiddlers(filter),
			    granulatedData = tiddlers.map(function(tiddler,i,arr){
				var tiddlerData = [], i, partName;
				for(i = 0; i &lt; containers.length; i++)
				{
// looks like .getData from InsertEditable/SetManagerPlugin may be used here
					partName = containers[i].substr(1);
					switch(containers[i][0]) {
							case "!":
						tiddlerData.push(tiddler.title);
					  break;case "t":
						tiddlerData.push(tiddler.text);
					  break;case "#":
						tiddlerData.push(tiddler .getSection(partName||""));
					  break;case ":":
						tiddlerData.push(tiddler .getSlice(partName||""));
					  break;case "@":
						tiddlerData.push(store .getValue(tiddler,partName)||"");
					  break;default:
						tiddlerData.push("");
					}
				}
				return tiddlerData;
			    });
		}

		var container = this.createContainer(place);

		// collect options
		var options = storedOptions || {};
		merge(options,nonStoredOptions,true);
		merge(options,{
			data:        filter ? granulatedData : (storedData || macroData),
			afterChange: filter ? this.saveToContainers : this.saveToTiddler
		},true);

//# change stuff below for the case of aggregated data (both storedOptions and nonStoredOptions may still be useful)
//   colHeaders: ["","[[not wikified..]]","..but custom","headers",""],
//   renderer: config.macros.handsontable.wikifiedRenderer,

		// store options and other stuff in container and init handsontable
		if(filter) {
			jQuery(container).data("containers",containers);
			jQuery(container).data("tiddlers",tiddlers);
		}
//# implement saving options in the case of containers as well
		jQuery(container).data("sourceTiddler",tiddler.title);
		jQuery(container).data("dataAndOptionsSection",dataAndOptionsSection);
		jQuery(container).data("hotOptions",options);
		jQuery(container).data("nonStoredOptions",nonStoredOptions);

		var handsontable = new Handsontable(container,options);

		Handsontable.hooks.add('beforeKeyDown',this.allowBrowserTabSwitch,
			handsontable);

//# temporal simplification
if(filter) return;

		// save data to tiddler when a row/column is created/removed as well
		Handsontable.hooks.add('afterRemoveCol',this.saveToTiddler, handsontable);
		Handsontable.hooks.add('afterRemoveRow',this.saveToTiddler, handsontable);
		Handsontable.hooks.add('afterCreateCol',this.saveToTiddler, handsontable);
		Handsontable.hooks.add('afterCreateRow',this.saveToTiddler, handsontable);
		// automatically add/remove empty rows/columns
		Handsontable.hooks.add('beforeKeyDown',
			this.expandOnNavigatingBeyondBoundaries, handsontable);
	},
	saveToContainers: function(change,source)
	{
		var data = this.getData(),
		    container = this.container.parentElement,
		    tiddlers = jQuery(container).data("tiddlers"), i, row, tid,
		    containers = jQuery(container).data("containers"), j, value, partName;

		// simple tiddlers updating assuming no rows were moved, deleted or added
		for(i = 0; i &lt; tiddlers.length; i++)
		{
			row = data[i]; // data correspoding to this tiddler
			tid = tiddlers[i];
			for(j = 0; j &lt; containers.length; j++)
			{
				value = row[j] || "";
				partName = containers[j].substr(1);
// looks like .setData from InsertEditable/SetManagerPlugin may be used here, except if noNotify is required (saveTiddler does notifying)
				switch(containers[j][0])
				{
					case "!": // title
					if(!value || tid.title == value) break;
					store.saveTiddler(tid,value); // requires my fix to .sT
				  break;case "t": // text
					if(tid.text == value) break;
					store.saveTiddler(tid,null,value);
				  break;case "#":
					tid.setSection(partName,value);
					//if(tid.getSection(partName)!=value) store.notify(tid.title,true);
				  break;case ":":
					tid.setSlice(partName,value);
					//if(tid.getSlice(partName)!=) store.notify(tid.title,true);
				  break;case "@":
					//if(store.getValue(tid,partName)==value) break;
					store.setValue(tid,partName,value);
				  break;default:
					//# warn somehow?
				  break;
				}
			}
		}
		if(change &amp;&amp; change[2] != change[3]) // a real change
			store.setDirty(true);

	// advanced implementation:
	//# add new tiddlers
	 //# if there's no title field, how to add tiddler?
	//# ? when a row is removed/a title is deleted in it, do ? with the tiddler
	//# how to detect moved rows? which row was removed? probably requires extra hooks
	},
	convertDataToJSON: function(data)
	{
//# for a nicer storage format: turn edited numbers into numbers, not strings:
//  http://stackoverflow.com/questions/18302890/json-stringify-input-values-as-numbers
//  and also turn nulls into ""

		return JSON.stringify(data,"",4)
			.replace(/\n {8}([^\n]*)\n {4}\]/gm,function($0,$1){
				return $1+"]";
			})
			.replace(/\n {8}/gm,"")
			.replace(/^ {4}/gm,"\t");
	},
	saveToTiddler: function(change,source)
	{
		// get tiddler, HOT options
		var tiddlyContainer = this.container.parentElement, // or .parentNode?
		    dataAndOptionsSection = jQuery(tiddlyContainer)
			.data("dataAndOptionsSection"),
		    nonStoredOptions = jQuery(tiddlyContainer).data("nonStoredOptions"),
		    re = new RegExp("^(.*)" + config.textPrimitives.sectionSeparator + "(.+)$"),
		    match = re.exec(dataAndOptionsSection),
		    tiddlerNameByMacro = jQuery(tiddlyContainer).data("sourceTiddler"),
		    // dataAndOptionsSection may be
		    tiddlerName = match ? match[1] : // tiddler name##section name
			dataAndOptionsSection || tiddlerNameByMacro, // tid name; nothing?
		    sectionName = match ? match[2] : "",
		    // fetches if exists and creates otherwise:
		    tiddler = store.createTiddler(tiddlerName);
console.log("saveToTiddler: tiddlerName is "+tiddlerName);

		// get updated data
		var data = this.getData(), dataText, optionsText, fullJSON,
		    hotMacro = config.macros.handsontable;
		//# get updated col widths, merged cells, update hotOptions
/*
if(this.mergeCells)
  console.log(this.mergeCells.mergedCellInfoCollection);
else
  { console.log("this.mergeCells is ");console.log(this.mergeCells); }
*/		var hotOptions = jQuery(tiddlyContainer).data("hotOptions");

		// prepare/format data and options for saving
		delete hotOptions.data; // we don't need 2 copies of data stored
		for(var key in nonStoredOptions) // remove also nonStoredOptions
			if(nonStoredOptions[key] == hotOptions[key])
				delete hotOptions[key];
		dataText    = hotMacro.convertDataToJSON(data);
		optionsText = hotMacro.convertDataToJSON(hotOptions);
		fullJSON    = '{"data":' + dataText + ',\n"options":' + optionsText +'}';

		// determine portion of tiddler's text to update, update tiddler text
		if(sectionName)
			tiddler.setHiddenSection(sectionName,fullJSON);
		else if(tiddlerName != tiddlerNameByMacro)
			tiddler.text = fullJSON;
		else
			; //# notify: won't save
		//# refresh/notify? refreshing is unwanted

//# requirements: updating must be successful even after several successive changes,
//  including changes of other reflexive formatters in the same tiddler
//  (most importantly earlier in the tw-code), without overwriting those changes

//# options to implement:
// + use section for data and options (implemented)
// - set/require an id and search macro text by id
// - substitute the whole text of macro each time (by search: this won't be hurt by editing other parts)
//  . there may be multiple macros with the same tw-code (including in code blocks), but taht's a ~rare case
// - extend wikifier by a "virtual text-tree" layer which knows a) what text corresponds to each formatter; b) how to assemble wikitext from those texts. The tree is to be updated on edit and to notify other trees if other wikifiers are showing (parts of) the same tiddler

 // (change wikifier's .source? will this affect other formatters' wikifier? will this help without changing .matchStart etc?)
 // this probably still doesn't help when there's several wikifiers wikified (parts of) the same tiddler

 // wikifier.matchStart contains the position of the first &lt;
 // wikifier.nextMatch  contains the position of the symbol after the last &gt;
 // macroName and paramString contain all but &lt;&lt;, &gt;&gt; and whitespace between macroName and paramString
 // also, wikifier.tiddler, .source and .output (and others) may be used
	}
};

// for research purposes:
config.macros.testIfWikifierIsShared = {
	handler: function(place,macroName,params,wikifier,paramString,tiddler)
	{
		if(!window.wikifiersCollection)
			window.wikifiersCollection = [];
		window.wikifiersCollection.push(wikifier);
	}
};
//}}}
/***
!!! config.extensions.Handsontable (deprecated tools from the first version)
***/
//{{{
config.extensions.Handsontable = {
	major: 0, minor: 2, revision: 0,
	date: new Date('2017/04/06'),

	afterChange: function(change,source)
	{
		if ( source == 'loadData' ) return;

		// Find the tiddler containing this table.
		var container = this.container;
		var parent = story.findContainingTiddler(container);
		var tiddler = store.getTiddler(
			parent.getAttribute("tiddler")
		);
		// Get the tiddler text.
		var text = tiddler.text;

		// Find the start and end of table data.

		// First we find the index number of this Handsontable.
		var hots = parent.querySelectorAll('div.ht_master');
		var ndx = -1;
		for(var t = 0; t &lt; hots.length; t++)
			if(hots[t] == container){
				ndx = t;
				break;
			}
		// Then we find the variable name for the table data, we assume it exists.
		// The variable name is assigned to the data property
		// of the new Handsontable() constructor call option.
		// Hence we look for the right new Handsontable() statement
		// and the data property of its option.
		var p1 = -1;
		var regexp = /new\s+Handsontable/gm;
		while(ndx &gt;= 0) {
			if (regexp.test(text))
				p1 = regexp.lastIndex;
			ndx--;
		}
		regexp = /data\s*:/gm;
		regexp.lastIndex = p1;
		if (regexp.test(text))  p1 = regexp.lastIndex;
		var p2 = text.indexOf(',',p1+1);
		var dataname = text.substring(p1,p2).trim();
		//
		// Now we look back for the beginning of data definition.
		// If there are multiple tables created using the Handsontable,
		// each of their data sets must have a unique variable name
		// or the update may go to the wrong place.
		p1 = text.lastIndexOf(dataname,p1)+dataname.length;
		//
		// and then we look for the end of data definition.
		p2 = text.indexOf('];',p1)+2;

		// Convert the modified data into text with some nice formatting
		var data = this.getData();
		var txtdata = ' = ' +
			config.macros.handsontable.convertDataToJSON(data)+";";

		// Replace the original definition string with the modified one.
		text = text.substring(0,p1) + txtdata + text.substring(p2);
		// Set it back to the tiddler,
		tiddler.set(tiddler.title,text,tiddler.modifier,new Date());
		// and mark TiddlyWiki as modified.
		store.setDirty(true);
	}
};
//}}}
// /%
/***
!handsontable.min.css
***/
///***
//handsontable.min.css 0.31.0
//downloaded from http://handsontable.com/dist/handsontable.full.min.css
//which redirected to http://docs.handsontable.com/0.31.0/bower_components/handsontable/dist/handsontable.full.min.css
//
//(The MIT License)
//
//Copyright (c) 2012-2014 Marcin Warpechowski
//Copyright (c) 2015 Handsoncode sp. z o.o. &lt;hello@handsoncode.net&gt;
//
//Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the 'Software'), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
//
//The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
//
//THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
//IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
//***/
///*{{{*/
//.handsontable{position:relative}.handsontable .hide{display:none}.handsontable .relative{position:relative}.handsontable.htAutoSize{visibility:hidden;left:-99000px;position:absolute;top:-99000px}.handsontable .wtHider{width:0}.handsontable .wtSpreader{position:relative;width:0;height:auto}.handsontable table,.handsontable tbody,.handsontable thead,.handsontable td,.handsontable th,.handsontable input,.handsontable textarea,.handsontable div{box-sizing:content-box;-webkit-box-sizing:content-box;-moz-box-sizing:content-box}.handsontable input,.handsontable textarea{min-height:initial}.handsontable table.htCore{border-collapse:separate;border-spacing:0;margin:0;border-width:0;table-layout:fixed;width:0;outline-width:0;max-width:none;max-height:none}.handsontable col{width:50px}.handsontable col.rowHeader{width:50px}.handsontable th,.handsontable td{border-top-width:0;border-left-width:0;border-right:1px solid #CCC;border-bottom:1px solid #CCC;height:22px;empty-cells:show;line-height:21px;padding:0 4px 0 4px;background-color:#FFF;vertical-align:top;overflow:hidden;outline-width:0;white-space:pre-line;background-clip:padding-box}.handsontable td.htInvalid{background-color:#ff4c42!important}.handsontable td.htNoWrap{white-space:nowrap}.handsontable th:last-child{border-right:1px solid #CCC;border-bottom:1px solid #CCC}.handsontable tr:first-child th.htNoFrame,.handsontable th:first-child.htNoFrame,.handsontable th.htNoFrame{border-left-width:0;background-color:white;border-color:#FFF}.handsontable th:first-child,.handsontable th:nth-child(2),.handsontable td:first-of-type,.handsontable .htNoFrame+th,.handsontable .htNoFrame+td{border-left:1px solid #CCC}.handsontable.htRowHeaders thead tr th:nth-child(2){border-left:1px solid #CCC}.handsontable tr:first-child th,.handsontable tr:first-child td{border-top:1px solid #CCC}.ht_master:not(.innerBorderLeft):not(.emptyColumns) ~ .handsontable tbody tr th,.ht_master:not(.innerBorderLeft):not(.emptyColumns) ~ .handsontable:not(.ht_clone_top) thead tr th:first-child{border-right-width:0}.ht_master:not(.innerBorderTop) thead tr:last-child th,.ht_master:not(.innerBorderTop) ~ .handsontable thead tr:last-child th,.ht_master:not(.innerBorderTop) thead tr.lastChild th,.ht_master:not(.innerBorderTop) ~ .handsontable thead tr.lastChild th{border-bottom-width:0}.handsontable th{background-color:#f3f3f3;color:#222;text-align:center;font-weight:normal;white-space:nowrap}.handsontable thead th{padding:0}.handsontable th.active{background-color:#CCC}.handsontable thead th .relative{padding:2px 4px}.handsontable tbody th.ht__highlight,.handsontable thead th.ht__highlight{background-color:#dcdcdc}.handsontable.ht__selection--columns thead th.ht__highlight,.handsontable.ht__selection--rows tbody th.ht__highlight{background-color:#8eb0e7;color:#000}.handsontable .manualColumnResizer{position:fixed;top:0;cursor:col-resize;z-index:110;width:5px;height:25px}.handsontable .manualRowResizer{position:fixed;left:0;cursor:row-resize;z-index:110;height:5px;width:50px}.handsontable .manualColumnResizer:hover,.handsontable .manualColumnResizer.active,.handsontable .manualRowResizer:hover,.handsontable .manualRowResizer.active{background-color:#AAB}.handsontable .manualColumnResizerGuide{position:fixed;right:0;top:0;background-color:#AAB;display:none;width:0;border-right:1px dashed #777;margin-left:5px}.handsontable .manualRowResizerGuide{position:fixed;left:0;bottom:0;background-color:#AAB;display:none;height:0;border-bottom:1px dashed #777;margin-top:5px}.handsontable .manualColumnResizerGuide.active,.handsontable .manualRowResizerGuide.active{display:block;z-index:199}.handsontable .columnSorting{position:relative}.handsontable .columnSorting:hover{text-decoration:underline;cursor:pointer}.handsontable .columnSorting.ascending::after{content:'\25B2';color:#5f5f5f;position:absolute;right:-15px}.handsontable .columnSorting.descending::after{content:'\25BC';color:#5f5f5f;position:absolute;right:-15px}.handsontable .wtBorder{position:absolute;font-size:0}.handsontable .wtBorder.hidden{display:none!important}.handsontable td.area{background:-moz-linear-gradient(top,rgba(181,209,255,0.34) 0,rgba(181,209,255,0.34) 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0%,rgba(181,209,255,0.34)),color-stop(100%,rgba(181,209,255,0.34)));background:-webkit-linear-gradient(top,rgba(181,209,255,0.34) 0,rgba(181,209,255,0.34) 100%);background:-o-linear-gradient(top,rgba(181,209,255,0.34) 0,rgba(181,209,255,0.34) 100%);background:-ms-linear-gradient(top,rgba(181,209,255,0.34) 0,rgba(181,209,255,0.34) 100%);background:linear-gradient(to bottom,rgba(181,209,255,0.34) 0,rgba(181,209,255,0.34) 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#57b5d1ff',endColorstr='#57b5d1ff',GradientType=0);background-color:#fff}.handsontable .wtBorder.corner{font-size:0;cursor:crosshair}.handsontable .htBorder.htFillBorder{background:red;width:1px;height:1px}.handsontableInput{border:0;outline-width:0;margin:0;padding:1px 5px 0 5px;font-family:inherit;line-height:21px;font-size:inherit;box-shadow:0 0 0 2px #5292f7 inset;resize:none;display:inline-block;color:#000;border-radius:0;background-color:#FFF}.handsontableInputHolder{position:absolute;top:0;left:0;z-index:100}.htSelectEditor{-webkit-appearance:menulist-button!important;position:absolute;width:auto}.handsontable .htDimmed{color:#777}.handsontable .htSubmenu{position:relative}.handsontable .htSubmenu :after{content:'▶';color:#777;position:absolute;right:5px}.handsontable .htLeft{text-align:left}.handsontable .htCenter{text-align:center}.handsontable .htRight{text-align:right}.handsontable .htJustify{text-align:justify}.handsontable .htTop{vertical-align:top}.handsontable .htMiddle{vertical-align:middle}.handsontable .htBottom{vertical-align:bottom}.handsontable .htPlaceholder{color:#999}.handsontable .htAutocompleteArrow{float:right;font-size:10px;color:#EEE;cursor:default;width:16px;text-align:center}.handsontable td .htAutocompleteArrow:hover{color:#777}.handsontable td.area .htAutocompleteArrow{color:#d3d3d3}.handsontable .htCheckboxRendererInput{display:inline-block;vertical-align:middle}.handsontable .htCheckboxRendererInput.noValue{opacity:.5}.handsontable .htCheckboxRendererLabel{cursor:pointer;display:inline-block;width:100%}@-webkit-keyframes opacity-hide{from{opacity:1}to{opacity:0}}@keyframes opacity-hide{from{opacity:1}to{opacity:0}}@-webkit-keyframes opacity-show{from{opacity:0}to{opacity:1}}@keyframes opacity-show{from{opacity:0}to{opacity:1}}.handsontable .handsontable.ht_clone_top .wtHider{padding:0 0 5px 0}.handsontable .autocompleteEditor.handsontable{padding-right:17px}.handsontable .autocompleteEditor.handsontable.htMacScroll{padding-right:15px}.handsontable.listbox{margin:0}.handsontable.listbox .ht_master table{border:1px solid #ccc;border-collapse:separate;background:white}.handsontable.listbox th,.handsontable.listbox tr:first-child th,.handsontable.listbox tr:last-child th,.handsontable.listbox tr:first-child td,.handsontable.listbox td{border-color:transparent}.handsontable.listbox th,.handsontable.listbox td{white-space:nowrap;text-overflow:ellipsis}.handsontable.listbox td.htDimmed{cursor:default;color:inherit;font-style:inherit}.handsontable.listbox .wtBorder{visibility:hidden}.handsontable.listbox tr td.current,.handsontable.listbox tr:hover td{background:#eee}.ht_clone_top{z-index:101}.ht_clone_left{z-index:102}.ht_clone_top_left_corner,.ht_clone_bottom_left_corner{z-index:103}.ht_clone_debug{z-index:103}.handsontable td.htSearchResult{background:#fcedd9;color:#583707}.htBordered{border-width:1px}.htBordered.htTopBorderSolid{border-top-style:solid;border-top-color:#000}.htBordered.htRightBorderSolid{border-right-style:solid;border-right-color:#000}.htBordered.htBottomBorderSolid{border-bottom-style:solid;border-bottom-color:#000}.htBordered.htLeftBorderSolid{border-left-style:solid;border-left-color:#000}.handsontable tbody tr th:nth-last-child(2){border-right:1px solid #CCC}.handsontable thead tr:nth-last-child(2) th.htGroupIndicatorContainer{border-bottom:1px solid #CCC;padding-bottom:5px}.ht_clone_top_left_corner thead tr th:nth-last-child(2){border-right:1px solid #CCC}.htCollapseButton{width:10px;height:10px;line-height:10px;text-align:center;border-radius:5px;border:1px solid #f3f3f3;-webkit-box-shadow:1px 1px 3px rgba(0,0,0,0.4);box-shadow:1px 1px 3px rgba(0,0,0,0.4);cursor:pointer;margin-bottom:3px;position:relative}.htCollapseButton:after{content:"";height:300%;width:1px;display:block;background:#ccc;margin-left:4px;position:absolute;bottom:10px}thead .htCollapseButton{right:5px;position:absolute;top:5px;background:#fff}thead .htCollapseButton:after{height:1px;width:700%;right:10px;top:4px}.handsontable tr th .htExpandButton{position:absolute;width:10px;height:10px;line-height:10px;text-align:center;border-radius:5px;border:1px solid #f3f3f3;-webkit-box-shadow:1px 1px 3px rgba(0,0,0,0.4);box-shadow:1px 1px 3px rgba(0,0,0,0.4);cursor:pointer;top:0;display:none}.handsontable thead tr th .htExpandButton{top:5px}.handsontable tr th .htExpandButton.clickable{display:block}.collapsibleIndicator{position:absolute;top:50%;transform:translate(0%,-50%);right:5px;border:1px solid #a6a6a6;line-height:10px;color:#222;border-radius:10px;font-size:10px;width:10px;height:10px;cursor:pointer;-webkit-box-shadow:0 0 0 6px rgba(238,238,238,1);-moz-box-shadow:0 0 0 6px rgba(238,238,238,1);box-shadow:0 0 0 6px rgba(238,238,238,1);background:#eee}.handsontable col.hidden{width:0!important}.handsontable table tr th.lightRightBorder{border-right:1px solid #e6e6e6}.handsontable tr.hidden,.handsontable tr.hidden td,.handsontable tr.hidden th{display:none}.ht_master,.ht_clone_left,.ht_clone_top,.ht_clone_bottom{overflow:hidden}.ht_master .wtHolder{overflow:auto}.ht_clone_left .wtHolder{overflow-x:hidden;overflow-y:auto}.ht_clone_top .wtHolder,.ht_clone_bottom .wtHolder{overflow-x:auto;overflow-y:hidden}.wtDebugHidden{display:none}.wtDebugVisible{display:block;-webkit-animation-duration:.5s;-webkit-animation-name:wtFadeInFromNone;animation-duration:.5s;animation-name:wtFadeInFromNone}@keyframes wtFadeInFromNone{0%{display:none;opacity:0}1%{display:block;opacity:0}100%{display:block;opacity:1}}@-webkit-keyframes wtFadeInFromNone{0%{display:none;opacity:0}1%{display:block;opacity:0}100%{display:block;opacity:1}}.handsontable.mobile,.handsontable.mobile .wtHolder{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-overflow-scrolling:touch}.htMobileEditorContainer{display:none;position:absolute;top:0;width:70%;height:54pt;background:#f8f8f8;border-radius:20px;border:1px solid #ebebeb;z-index:999;box-sizing:border-box;-webkit-box-sizing:border-box;-webkit-text-size-adjust:none}.topLeftSelectionHandle:not(.ht_master .topLeftSelectionHandle),.topLeftSelectionHandle-HitArea:not(.ht_master .topLeftSelectionHandle-HitArea){z-index:9999}.topLeftSelectionHandle,.topLeftSelectionHandle-HitArea,.bottomRightSelectionHandle,.bottomRightSelectionHandle-HitArea{left:-10000px;top:-10000px}.htMobileEditorContainer.active{display:block}.htMobileEditorContainer .inputs{position:absolute;right:210pt;bottom:10pt;top:10pt;left:14px;height:34pt}.htMobileEditorContainer .inputs textarea{font-size:13pt;border:1px solid #a1a1a1;-webkit-appearance:none;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;position:absolute;left:14px;right:14px;top:0;bottom:0;padding:7pt}.htMobileEditorContainer .cellPointer{position:absolute;top:-13pt;height:0;width:0;left:30px;border-left:13pt solid transparent;border-right:13pt solid transparent;border-bottom:13pt solid #ebebeb}.htMobileEditorContainer .cellPointer.hidden{display:none}.htMobileEditorContainer .cellPointer:before{content:'';display:block;position:absolute;top:2px;height:0;width:0;left:-13pt;border-left:13pt solid transparent;border-right:13pt solid transparent;border-bottom:13pt solid #f8f8f8}.htMobileEditorContainer .moveHandle{position:absolute;top:10pt;left:5px;width:30px;bottom:0;cursor:move;z-index:9999}.htMobileEditorContainer .moveHandle:after{content:"..\a..\a..\a..";white-space:pre;line-height:10px;font-size:20pt;display:inline-block;margin-top:-8px;color:#ebebeb}.htMobileEditorContainer .positionControls{width:205pt;position:absolute;right:5pt;top:0;bottom:0}.htMobileEditorContainer .positionControls&gt;div{width:50pt;height:100%;float:left}.htMobileEditorContainer .positionControls&gt;div:after{content:" ";display:block;width:15pt;height:15pt;text-align:center;line-height:50pt}.htMobileEditorContainer .leftButton:after,.htMobileEditorContainer .rightButton:after,.htMobileEditorContainer .upButton:after,.htMobileEditorContainer .downButton:after{transform-origin:5pt 5pt;-webkit-transform-origin:5pt 5pt;margin:21pt 0 0 21pt}.htMobileEditorContainer .leftButton:after{border-top:2px solid #288ffe;border-left:2px solid #288ffe;-webkit-transform:rotate(-45deg)}.htMobileEditorContainer .leftButton:active:after{border-color:#cfcfcf}.htMobileEditorContainer .rightButton:after{border-top:2px solid #288ffe;border-left:2px solid #288ffe;-webkit-transform:rotate(135deg)}.htMobileEditorContainer .rightButton:active:after{border-color:#cfcfcf}.htMobileEditorContainer .upButton:after{border-top:2px solid #288ffe;border-left:2px solid #288ffe;-webkit-transform:rotate(45deg)}.htMobileEditorContainer .upButton:active:after{border-color:#cfcfcf}.htMobileEditorContainer .downButton:after{border-top:2px solid #288ffe;border-left:2px solid #288ffe;-webkit-transform:rotate(225deg)}.htMobileEditorContainer .downButton:active:after{border-color:#cfcfcf}.handsontable.hide-tween{-webkit-animation:opacity-hide .3s;animation:opacity-hide .3s;animation-fill-mode:forwards;-webkit-animation-fill-mode:forwards}.handsontable.show-tween{-webkit-animation:opacity-show .3s;animation:opacity-show .3s;animation-fill-mode:forwards;-webkit-animation-fill-mode:forwards}.htCommentCell{position:relative}.htCommentCell:after{content:'';position:absolute;top:0;right:0;border-left:6px solid transparent;border-top:6px solid black}.htComments{display:none;z-index:1059;position:absolute}.htCommentTextArea{box-shadow:rgba(0,0,0,0.117647) 0 1px 3px,rgba(0,0,0,0.239216) 0 1px 2px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;border:0;border-left:3px solid #ccc;background-color:#fff;width:215px;height:90px;font-size:12px;padding:5px;outline:0!important;-webkit-appearance:none}.htCommentTextArea:focus{box-shadow:rgba(0,0,0,0.117647) 0 1px 3px,rgba(0,0,0,0.239216) 0 1px 2px,inset 0 0 0 1px #5292f7;border-left:3px solid #5292f7}/*!
// * Handsontable ContextMenu
// */.htContextMenu{display:none;position:absolute;z-index:1060}.htContextMenu .ht_clone_top,.htContextMenu .ht_clone_left,.htContextMenu .ht_clone_corner,.htContextMenu .ht_clone_debug{display:none}.htContextMenu table.htCore{border:1px solid #ccc;border-bottom-width:2px;border-right-width:2px}.htContextMenu .wtBorder{visibility:hidden}.htContextMenu table tbody tr td{background:white;border-width:0;padding:4px 6px 0 6px;cursor:pointer;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.htContextMenu table tbody tr td:first-child{border:0}.htContextMenu table tbody tr td.htDimmed{font-style:normal;color:#323232}.htContextMenu table tbody tr td.current,.htContextMenu table tbody tr td.zeroclipboard-is-hover{background:#f3f3f3}.htContextMenu table tbody tr td.htSeparator{border-top:1px solid #bbb;height:0;padding:0;cursor:default}.htContextMenu table tbody tr td.htDisabled{color:#999;cursor:default}.htContextMenu table tbody tr td.htDisabled:hover{background:#fff;color:#999;cursor:default}.htContextMenu table tbody tr.htHidden{display:none}.htContextMenu table tbody tr td .htItemWrapper{margin-left:10px;margin-right:6px}.htContextMenu table tbody tr td div span.selected{margin-top:-2px;position:absolute;left:4px}.htContextMenu .ht_master .wtHolder{overflow:hidden}.htRowHeaders .ht_master.innerBorderLeft ~ .ht_clone_top_left_corner th:nth-child(2),.htRowHeaders .ht_master.innerBorderLeft ~ .ht_clone_left td:first-of-type{border-left:0 none}.handsontable .wtHider{position:relative}.handsontable.ht__manualColumnMove.after-selection--columns thead th.ht__highlight{cursor:move;cursor:-moz-grab;cursor:-webkit-grab;cursor:grab}.handsontable.ht__manualColumnMove.on-moving--columns,.handsontable.ht__manualColumnMove.on-moving--columns thead th.ht__highlight{cursor:move;cursor:-moz-grabbing;cursor:-webkit-grabbing;cursor:grabbing}.handsontable.ht__manualColumnMove.on-moving--columns .manualColumnResizer{display:none}.handsontable .ht__manualColumnMove--guideline,.handsontable .ht__manualColumnMove--backlight{position:absolute;height:100%;display:none}.handsontable .ht__manualColumnMove--guideline{background:#757575;width:2px;top:0;margin-left:-1px;z-index:105}.handsontable .ht__manualColumnMove--backlight{background:#343434;background:rgba(52,52,52,0.25);display:none;z-index:105;pointer-events:none}.handsontable.on-moving--columns.show-ui .ht__manualColumnMove--guideline,.handsontable.on-moving--columns .ht__manualColumnMove--backlight{display:block}.handsontable .wtHider{position:relative}.handsontable.ht__manualRowMove.after-selection--rows tbody th.ht__highlight{cursor:move;cursor:-moz-grab;cursor:-webkit-grab;cursor:grab}.handsontable.ht__manualRowMove.on-moving--rows,.handsontable.ht__manualRowMove.on-moving--rows tbody th.ht__highlight{cursor:move;cursor:-moz-grabbing;cursor:-webkit-grabbing;cursor:grabbing}.handsontable.ht__manualRowMove.on-moving--rows .manualRowResizer{display:none}.handsontable .ht__manualRowMove--guideline,.handsontable .ht__manualRowMove--backlight{position:absolute;width:100%;display:none}.handsontable .ht__manualRowMove--guideline{background:#757575;height:2px;left:0;margin-top:-1px;z-index:105}.handsontable .ht__manualRowMove--backlight{background:#343434;background:rgba(52,52,52,0.25);display:none;z-index:105;pointer-events:none}.handsontable.on-moving--rows.show-ui .ht__manualRowMove--guideline,.handsontable.on-moving--rows .ht__manualRowMove--backlight{display:block}/*!
// * Pikaday
// * Copyright © 2014 David Bushell | BSD &amp; MIT license | http://dbushell.com/
// */.pika-single{z-index:9999;display:block;position:relative;color:#333;background:#fff;border:1px solid #ccc;border-bottom-color:#bbb;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif}.pika-single:before,.pika-single:after{content:" ";display:table}.pika-single:after{clear:both}.pika-single{*zoom:1}.pika-single.is-hidden{display:none}.pika-single.is-bound{position:absolute;box-shadow:0 5px 15px -5px rgba(0,0,0,.5)}.pika-lendar{float:left;width:240px;margin:8px}.pika-title{position:relative;text-align:center}.pika-label{display:inline-block;*display:inline;position:relative;z-index:9999;overflow:hidden;margin:0;padding:5px 3px;font-size:14px;line-height:20px;font-weight:bold;background-color:#fff}.pika-title select{cursor:pointer;position:absolute;z-index:9998;margin:0;left:0;top:5px;filter:alpha(opacity=0);opacity:0}.pika-prev,.pika-next{display:block;cursor:pointer;position:relative;outline:0;border:0;padding:0;width:20px;height:30px;text-indent:20px;white-space:nowrap;overflow:hidden;background-color:transparent;background-position:center center;background-repeat:no-repeat;background-size:75% 75%;opacity:.5;*position:absolute;*top:0}.pika-prev:hover,.pika-next:hover{opacity:1}.pika-prev,.is-rtl .pika-next{float:left;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAYAAAAsEj5rAAAAUklEQVR42u3VMQoAIBADQf8Pgj+OD9hG2CtONJB2ymQkKe0HbwAP0xucDiQWARITIDEBEnMgMQ8S8+AqBIl6kKgHiXqQqAeJepBo/z38J/U0uAHlaBkBl9I4GwAAAABJRU5ErkJggg==');*left:0}.pika-next,.is-rtl .pika-prev{float:right;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAYAAAAsEj5rAAAAU0lEQVR42u3VOwoAMAgE0dwfAnNjU26bYkBCFGwfiL9VVWoO+BJ4Gf3gtsEKKoFBNTCoCAYVwaAiGNQGMUHMkjGbgjk2mIONuXo0nC8XnCf1JXgArVIZAQh5TKYAAAAASUVORK5CYII=');*right:0}.pika-prev.is-disabled,.pika-next.is-disabled{cursor:default;opacity:.2}.pika-select{display:inline-block;*display:inline}.pika-table{width:100%;border-collapse:collapse;border-spacing:0;border:0}.pika-table th,.pika-table td{width:14.285714285714286%;padding:0}.pika-table th{color:#999;font-size:12px;line-height:25px;font-weight:bold;text-align:center}.pika-button{cursor:pointer;display:block;box-sizing:border-box;-moz-box-sizing:border-box;outline:0;border:0;margin:0;width:100%;padding:5px;color:#666;font-size:12px;line-height:15px;text-align:right;background:#f5f5f5}.pika-week{font-size:11px;color:#999}.is-today .pika-button{color:#3af;font-weight:bold}.is-selected .pika-button{color:#fff;font-weight:bold;background:#3af;box-shadow:inset 0 1px 3px #178fe5;border-radius:3px}.is-inrange .pika-button{background:#d5e9f7}.is-startrange .pika-button{color:#fff;background:#6cb31d;box-shadow:none;border-radius:3px}.is-endrange .pika-button{color:#fff;background:#3af;box-shadow:none;border-radius:3px}.is-disabled .pika-button,.is-outside-current-month .pika-button{pointer-events:none;cursor:default;color:#999;opacity:.3}.pika-button:hover{color:#fff;background:#ff8000;box-shadow:none;border-radius:3px}.pika-table abbr{border-bottom:0;cursor:help}
///*}}}*/
/***
!end of handsontable.min.css
***/
// %/ //
//{{{
var cssName = "handsontable.min.css",
    css = store.getTiddlerText("HandsontablePlugin"+"##"+cssName).replace(/^\/\//gm,"");
css = css.substring(4,css.length-4); // cut leading ***/ and trailing /*** of the section
config.shadowTiddlers[cssName] = css;
store.addNotification(cssName, refreshStyles);
//}}}</pre>
</div>
<div changecount="19" content-type="text/javascript" created="201601081437" modified="201705012215" modifier="Яков Литвин" tags="systemConfig" title="HelpfulPermaViewPlugin">
<pre>/***
|Version|custom version forked from 0.4.5|
|Requires|FoldTiddlerPlugin CustomSettingsPlugin|
|~|doesn't require FoldTiddlerPlugin, but if used, that one must be launched first|
***/
//{{{
var permaViewClass = "permaviewButton";
config.options.chkSinglePageMode = readOnly;
config.options.chkKeepPermaview = readOnly;

config.macros.reopenPermaview =
{
	reopen: function()
	{
		var params = getParameters(); // paramifiers in hash
		story.closeAllTiddlers();
		if(!params)
			story.displayDefaultTiddlers();
		else {
			params = params.parseParams("open",null,false);
			invokeParamifier(params,"onstart");
		}
	},
	handler: function(place,macroName,params,wikifier,paramString)
	{
		// parse params
		var pParams = paramString.parseParams("label",null,true,false,true),
		    label = getParam(pParams,"label","⟳"),
		    prompt = getParam(pParams,"prompt","reopen permaview/default tiddlers");

		// create button
		createTiddlyButton(place,label,prompt,this.reopen);
	}
};

// extend the permaview macro:
// when chkAddReopenToPermaview is true, add the reopen button next to the permaview
// also add the permaviewButton class to display the "non-permaview" state
config.macros.permaview.HPVP_orig_handler = config.macros.permaview.handler;
config.macros.permaview.handler = function(place,macroName,params,wikifier,paramString,tid)
{
	if(config.options.chkAddReopenToPermaview) {
		var wrapper = createTiddlyElement(place,"span");
		place = wrapper;
	}
	this.HPVP_orig_handler.apply(this,arguments);
	place.lastChild.classList.add(permaViewClass);
	if(config.options.chkAddReopenToPermaview) {
		place.lastChild.style.display = "inline";
		config.macros.reopenPermaview.handler(place,"",[],wikifier,"");
		place.lastChild.style.display = "inline";
		// inline styling is needed for the sidebar
	}
};

// keep permaview on any tiddler open/close:
story.HPVP_orig_displayTiddler = story.displayTiddler;
story.displayTiddler = function(srcElement,tiddler,template,animate,unused,customFields,toggle,animationSrc)
{
	if(config.options.chkSinglePageMode)
	{
		var savedPermaView = this.permaView;
		this.permaView = function(){}; // prevent intermediate "empty hash" state
		story.closeAllTiddlers();
	}
	var result = this.HPVP_orig_displayTiddler.apply(this,arguments);
	tiddler = (tiddler instanceof Tiddler) ? tiddler : store.fetchTiddler(tiddler);
	var title = tiddler.getVisibleName();
	if(config.options.chkSinglePageMode) {
		this.permaView = savedPermaView;
		document.title = title.replace(/&amp;nbsp;/gm," ") +" - "+ store.getTiddlerText("SiteSubtitle");
	}
	if(config.options.chkKeepPermaview)
		this.permaView();
	if(config.options.chkSinglePageMode) window.scroll(0,0);
//# scroll to the top of #tiddlerDisplay , take animation into account
	return result;
};
story.HPVP_orig_closeTiddler = story.closeTiddler;
story.closeTiddler = function(title,animate,unused)
{
	var result = story.HPVP_orig_closeTiddler.apply(this,arguments);
	if(config.options.chkKeepPermaview) {
		if(config.options.chkAnimate)
		// animated closing keeps tiddler visible for .permaView() for some time
			setTimeout("story.permaView()",config.animDuration+10);
		else
		// delay without animation causes "sometimes fail to close" bug
		// (ensureOpenedByURI fires earlier)
			story.permaView();
	}
	return result;
};

// enable "back" button (both browser and keyboard) by regularly checking permaview
var ensureOpenedByURI = function()
{
	if(!config.options.chkKeepPermaview) return;
	
	var correctTiddlersAreOpen = true,
	    paramifiersString = getParameters(), paramifiers, filter, tiddlers,
	    exoticParamifiersPresent = false, i, currentlyOpenTiddlers = [];
	
	// check if some tiddlers are missing/extra compared to permaview
	if(paramifiersString) {
		paramifiers = paramifiersString.parseParams("open",null,false);
		filter = "";
		// paramifiers[0] is a "summary" object, skip that one
		for(i = 1; i &lt; paramifiers.length; i++)
		   switch(paramifiers[i].name) {
		// since permaview only generates either filter or open we only take them into account
			case "filter": filter += paramifiers[i].value; break;
			case "open": filter += "[["+paramifiers[i].value+"]]"; break;
			default: exoticParamifiersPresent = true;
		   }
	} else
		filter = store.getTiddlerText("DefaultTiddlers");
	if(exoticParamifiersPresent) return;
	
	// compare the open tiddler set and the set suggested by paramifiers
	tiddlers = store.filterTiddlers(filter);
	story.forEachTiddler(function(title,e){currentlyOpenTiddlers.push(title);});
	if(tiddlers.length != currentlyOpenTiddlers.length)
		correctTiddlersAreOpen = false;
	else
		for(i = 0; i &lt; tiddlers.length; i++)
			if(currentlyOpenTiddlers.indexOf(tiddlers[i].title) == -1)
				correctTiddlersAreOpen = false;

	// save scroll position
	var posX = findScrollX();
	var posY = findScrollY();

	// reopen if none are edited
	if(!correctTiddlersAreOpen &amp;&amp; !story.areAnyDirty()) {
		config.macros.reopenPermaview.reopen();
		window.scrollTo(posX,posY);
	}
}
setInterval(ensureOpenedByURI,300);
//# see also https://css-tricks.com/using-the-html5-history-api/ , "ajax browser history html5"
//  pragmatics: permalinks well-distinguished by social networks

// apply different styling to the permaview button, depending on permaview/"non-permaview" state
var css = "."+permaViewClass+" { font-weight: bold; color: red !important; }";
//# trace displayed stuff, on story change apply styles to .permaviewButton
//	setStylesheet(css,"highlightSaving");
//# on permaview, change the styles back
//	removeStyleSheet("highlightSaving");
//}}}</pre>
</div>
<div changecount="59" content-type="text/javascript" created="201505232246" modified="201509050849" modifier="Yakov Litvin" ordermytweaks="6" statecomment='{{PoG{добавить синтаксисы {{{smth**(ind), smth_(ind) }}}и, возможно, без "{}": {{{smth_12, smth_t}}}; ...}}}' tags="[[YL core tweaks]] systemConfig viewing" title="IndicesFormattersPlugin">
<pre>/***
|Description|This plugin introduces new formatters that generate sub- and superscripts|
|Version|1.0|
|Short status|&lt;&lt;insertEditable container:"@stateComment" size:max cell&gt;&gt;|
subscript syntax: {{{text,,with subscript,,}}} → text,,with subscript,,
superscript containing float syntaxes:
{{{10^1.1}}} → 10^1.1, {{{10^+1,1}}} → 10^+1,1, {{{10^-0.2}}} → 10^-0.2, {{{2^8}}} → 2^8, {{{n^3}}} → n^3
***/
//{{{
config.formatters.push({
	name: "subscript",
	match: ",,(?!\\s|$)",
	handler: function(w) {
		w.subWikifyTerm(createTiddlyElement(w.output,"sub"),/(,,)/mg);
	}
},{
	name: "power",
	match: "\\^(?:\\+|-|±|\\+-|∓|-\\+)?\\d+(?:(?:\\.|,)\\d+)?",
	lookaheadRegExp: /\^((?:\+|-|±|\+-|∓|-\+)?\d+(?:(?:\.|,)\d+)?)/g,
	handler: function(w) {
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source),
		    power = lookaheadMatch[1].replace("+-","±").replace("-+","∓");
		
		createTiddlyElement(w.output,'sup',null,null/*class*/,power);
		
		w.nextMatch = this.lookaheadRegExp.lastIndex;
	}
})
//}}}</pre>
</div>
<div changecount="1" created="201704101622" creator="YourName" modifier="YourName" statecomment="retagging works, {{PoG{add listing of tiddlers to retag}}}" tags="systemConfig" title="LinkRebindingPlugin">
<pre>/***
|Short status|&lt;&lt;insertEditable container:"@stateComment" size:max cell&gt;&gt;|
|Version|0.1.1|
***/
//{{{
config.options.chkRebindLinksSilently = false;

Tiddler.prototype.orig_assign_rename = Tiddler.prototype.assign;
Tiddler.prototype.assign = function(title,text,modifier,modified,tags,created,fields,creator)
{
	var tagsOnly = true; // only tags renaming is implemented, not link rebuilding
	
	var oldTitle = this.title, renaming = title &amp;&amp; (oldTitle != title),
	    tagged, linking = [], i;
	var msgConfirmRetag = "Some tiddlers are tagged with the tiddler being renamed, change their tags accordingly?",
	    msgConfirmRelink = "Some tiddlers have links to the tiddler being renamed, change them to keep links alive?",
	    msgConfirmRelinkAndRetag = "Some tiddlers are tagged with the tiddler being renamed, some have links to it, change them accordingly?";
	var fixTags = function(){
		for(var i = 0; i &lt; tagged.length; i++)
			// rename the tag (.indexOf is always &gt; -1)
			tagged[i].tags[tagged[i].tags.indexOf(oldTitle)] = title;
	};
//# add notifying/refreshing (at least optional): renamed tags are not shown
	var fixLinks = function(tiddler){
		//# build this, use oldTitle and title
		//  see how links are found in .changed (take into account BetterReferencesPlugin)
	};
	if (renaming) {
		tagged = store.getTaggedTiddlers(this.title);
		linking = store.getReferringTiddlers(this.title);
		
		if(tagged.length) {
			if(!tagsOnly &amp;&amp; linking.length) {
				if(config.options.chkRebindLinksSilently ||
				   confirm(msgConfirmRelinkAndRetag))
					fixTags();
					for(i = 0; i &lt; linking.length; i++)
						fixLinks(linking[i]);
			} else
				if(config.options.chkRebindLinksSilently ||
				   confirm(msgConfirmRetag)) {
					fixTags();
				}
		} else if(!tagsOnly &amp;&amp; linking.length)
			if(config.options.chkRebindLinksSilently ||
			   confirm(msgConfirmRelink))
				for(i = 0; i &lt; linking.length; i++)
					fixLinks(linking[i]);
	}
	return Tiddler.prototype.orig_assign_rename.apply(this,arguments);
};
//}}}</pre>
</div>
<div changecount="10" created="201610300720" creator="Яков Литвин" modified="201610311036" modifier="Яков Литвин" tags="systemConfig" title="LoadBootstrapPlugin">
<pre>/***
тестируем в [[test bootstrap]]
***/
//{{{
// using actual link elements in the template works much better as CSS is applied only in that contex
//jQuery("head").append("&lt;link rel='stylesheet' type='text/css' href='css/bootstrap.min.css' /&gt;");
//jQuery("head").append("&lt;link rel='stylesheet' type='text/css' href='css/course.css' /&gt;");

/*
//# use jQuery.getScript("js/bootstrap.min.js") on "test bootstrap" tiddler open
story.bs_orig_displayTiddler = story.displayTiddler;
story.displayTiddler = function (srcElement,tiddler,template,animate,unused,customFields,toggle,animationSrc)
{
	var res = this.bs_orig_displayTiddler.apply(this,arguments);
	var title = (tiddler instanceof Tiddler) ? tiddler.title : tiddler;
	if(title == "test bootstrap")
		jQuery.getScript("js/bootstrap.min.js");
	return res;
};
*/
//}}}
/***
1. loading bs.js in MarkupPostBody via {{{&lt;script src="js/bootstrap.min.js"&gt;&lt;/script&gt;}}} doesn't work: looks like it must be launched when the DOM is built already

retest js, notes below may be a misinterpretation (it is CSS which was missing):
2. [[loading|LoadBootstrapPlugin]] bs.js async on tiddler open doesn't work "as expected" as well!
----
3. ???
4. check what happens if bs.js is loaded twice?
5. check if bs.js has to be loaded each time the tiddler is reopened after closing (try to just reopen first)
6. check how 2+ bs.js interact
***/
</pre>
</div>
<div changecount="1" created="201705221744" creator="Яков Литвин" modifier="Яков Литвин" tags="systemConfig" title="MarkDownCodeFormatter">
<pre>/***
|''Version''|1.0|
|Short status|&lt;&lt;insertEditable container:"@stateComment" size:max cell&gt;&gt;|
text `some.code` more text more `code`, two {{{`}}} one by one: ``; and finally `multiline
code` and
* `multiline code
in a list`
the behaviour is the same as with {{{{{{}}}.
***/
//{{{
config.formatters.push({
	name: "markDownCode",
	match: "`",
	handler: function(w)
	{
		// version based on the "characterFormat", {{{ case, not tested yet:
		var lookaheadRegExp = /`((?:.|\n)*?)`/mg;
		lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = lookaheadRegExp.exec(w.source);
		if(!lookaheadMatch || lookaheadMatch.index != w.matchStart)
			return;
		createTiddlyElement(w.output,"code",null,null,lookaheadMatch[1]);
		w.nextMatch = lookaheadRegExp.lastIndex;
	}
});
//}}}</pre>
</div>
<div changecount="5" created="201302231128" creator="Yakov Litvin" modified="201302231130" modifier="Yakov Litvin" tags="systemConfig" title="NestedSlidersPlugin">
<pre>/***
|Name|NestedSlidersPlugin|
|Source|http://www.TiddlyTools.com/#NestedSlidersPlugin|
|Documentation|http://www.TiddlyTools.com/#NestedSlidersPluginInfo|
|Version|2.4.9|
|Author|Eric Shulman|
|License|http://www.TiddlyTools.com/#LegalStatements|
|~CoreVersion|2.1|
|Type|plugin|
|Description|show content in nest-able sliding/floating panels, without creating separate tiddlers for each panel's content|
!!!!!Configuration
&lt;&lt;&lt;
&lt;&lt;option chkFloatingSlidersAnimate&gt;&gt; allow floating sliders to animate when opening/closing
Note: for floating slider animation to occur you must also allow animation in general (see [[AdvancedOptions]]).
&lt;&lt;&lt;
!!!!!Code
***/
//{{{
version.extensions.NestedSlidersPlugin= {major: 2, minor: 4, revision: 9, date: new Date(2008,11,15)};

// options for deferred rendering of sliders that are not initially displayed
if (config.options.chkFloatingSlidersAnimate===undefined)
	config.options.chkFloatingSlidersAnimate=false; // avoid clipping problems in IE

// default styles for 'floating' class
setStylesheet(".floatingPanel { position:absolute; z-index:10; padding:0.5em; margin:0em; \
	background-color:#eee; color:#000; border:1px solid #000; text-align:left; }","floatingPanelStylesheet");

// if removeCookie() function is not defined by TW core, define it here.
if (window.removeCookie===undefined) {
	window.removeCookie=function(name) {
		document.cookie = name+'=; expires=Thu, 01-Jan-1970 00:00:01 UTC; path=/;'; 
	}
}

config.formatters.push( {
	name: "nestedSliders",
	match: "\\n?\\+{3}",
	terminator: "\\s*\\={3}\\n?",
	lookahead: "\\n?\\+{3}(\\+)?(\\([^\\)]*\\))?(\\!*)?(\\^(?:[^\\^\\*\\@\\[\\&gt;]*\\^)?)?(\\*)?(\\@)?(?:\\{\\{([\\w]+[\\s\\w]*)\\{)?(\\[[^\\]]*\\])?(\\[[^\\]]*\\])?(?:\\}{3})?(\\#[^:]*\\:)?(\\&gt;)?(\\.\\.\\.)?\\s*",
	handler: function(w)
		{
			lookaheadRegExp = new RegExp(this.lookahead,"mg");
			lookaheadRegExp.lastIndex = w.matchStart;
			var lookaheadMatch = lookaheadRegExp.exec(w.source)
			if(lookaheadMatch &amp;&amp; lookaheadMatch.index == w.matchStart)
			{
				var defopen=lookaheadMatch[1];
				var cookiename=lookaheadMatch[2];
				var header=lookaheadMatch[3];
				var panelwidth=lookaheadMatch[4];
				var transient=lookaheadMatch[5];
				var hover=lookaheadMatch[6];
				var buttonClass=lookaheadMatch[7];
				var label=lookaheadMatch[8];
				var openlabel=lookaheadMatch[9];
				var panelID=lookaheadMatch[10];
				var blockquote=lookaheadMatch[11];
				var deferred=lookaheadMatch[12];

				// location for rendering button and panel
				var place=w.output;

				// default to closed, no cookie, no accesskey, no alternate text/tip
				var show="none"; var cookie=""; var key="";
				var closedtext="&gt;"; var closedtip="";
				var openedtext="&lt;"; var openedtip="";

				// extra "+", default to open
				if (defopen) show="block";

				// cookie, use saved open/closed state
				if (cookiename) {
					cookie=cookiename.trim().slice(1,-1);
					cookie="chkSlider"+cookie;
					if (config.options[cookie]==undefined)
						{ config.options[cookie] = (show=="block") }
					show=config.options[cookie]?"block":"none";
				}

				// parse label/tooltip/accesskey: [label=X|tooltip]
				if (label) {
					var parts=label.trim().slice(1,-1).split("|");
					closedtext=parts.shift();
					if (closedtext.substr(closedtext.length-2,1)=="=")	
						{ key=closedtext.substr(closedtext.length-1,1); closedtext=closedtext.slice(0,-2); }
					openedtext=closedtext;
					if (parts.length) closedtip=openedtip=parts.join("|");
					else { closedtip="show "+closedtext; openedtip="hide "+closedtext; }
				}

				// parse alternate label/tooltip: [label|tooltip]
				if (openlabel) {
					var parts=openlabel.trim().slice(1,-1).split("|");
					openedtext=parts.shift();
					if (parts.length) openedtip=parts.join("|");
					else openedtip="hide "+openedtext;
				}

				var title=show=='block'?openedtext:closedtext;
				var tooltip=show=='block'?openedtip:closedtip;

				// create the button
				if (header) { // use "Hn" header format instead of button/link
					var lvl=(header.length&gt;5)?5:header.length;
					var btn = createTiddlyElement(createTiddlyElement(place,"h"+lvl,null,null,null),"a",null,buttonClass,title);
					btn.onclick=onClickNestedSlider;
					btn.setAttribute("href","javascript:;");
					btn.setAttribute("title",tooltip);
				}
				else
					var btn = createTiddlyButton(place,title,tooltip,onClickNestedSlider,buttonClass);
				btn.innerHTML=title; // enables use of HTML entities in label

				// set extra button attributes
				btn.setAttribute("closedtext",closedtext);
				btn.setAttribute("closedtip",closedtip);
				btn.setAttribute("openedtext",openedtext);
				btn.setAttribute("openedtip",openedtip);
				btn.sliderCookie = cookie; // save the cookiename (if any) in the button object
				btn.defOpen=defopen!=null; // save default open/closed state (boolean)
				btn.keyparam=key; // save the access key letter ("" if none)
				if (key.length) {
					btn.setAttribute("accessKey",key); // init access key
					btn.onfocus=function(){this.setAttribute("accessKey",this.keyparam);}; // **reclaim** access key on focus
				}
				btn.setAttribute("hover",hover?"true":"false");
				btn.onmouseover=function(ev) {
					// optional 'open on hover' handling
					if (this.getAttribute("hover")=="true" &amp;&amp; this.sliderPanel.style.display=='none') {
						document.onclick.call(document,ev); // close transients
						onClickNestedSlider(ev); // open this slider
					}
					// mouseover on button aligns floater position with button
					if (window.adjustSliderPos) window.adjustSliderPos(this.parentNode,this,this.sliderPanel);
				}

				// create slider panel
				var panelClass=panelwidth?"floatingPanel":"sliderPanel";
				if (panelID) panelID=panelID.slice(1,-1); // trim off delimiters
				var panel=createTiddlyElement(place,"div",panelID,panelClass,null);
				panel.button = btn; // so the slider panel know which button it belongs to
				btn.sliderPanel=panel; // so the button knows which slider panel it belongs to
				panel.defaultPanelWidth=(panelwidth &amp;&amp; panelwidth.length&gt;2)?panelwidth.slice(1,-1):"";
				panel.setAttribute("transient",transient=="*"?"true":"false");
				panel.style.display = show;
				panel.style.width=panel.defaultPanelWidth;
				panel.onmouseover=function(event) // mouseover on panel aligns floater position with button
					{ if (window.adjustSliderPos) window.adjustSliderPos(this.parentNode,this.button,this); }

				// render slider (or defer until shown) 
				w.nextMatch = lookaheadMatch.index + lookaheadMatch[0].length;
				if ((show=="block")||!deferred) {
					// render now if panel is supposed to be shown or NOT deferred rendering
					w.subWikify(blockquote?createTiddlyElement(panel,"blockquote"):panel,this.terminator);
					// align floater position with button
					if (window.adjustSliderPos) window.adjustSliderPos(place,btn,panel);
				}
				else {
					var src = w.source.substr(w.nextMatch);
					var endpos=findMatchingDelimiter(src,"+++","===");
					panel.setAttribute("raw",src.substr(0,endpos));
					panel.setAttribute("blockquote",blockquote?"true":"false");
					panel.setAttribute("rendered","false");
					w.nextMatch += endpos+3;
					if (w.source.substr(w.nextMatch,1)=="\n") w.nextMatch++;
				}
			}
		}
	}
)

function findMatchingDelimiter(src,starttext,endtext) {
	var startpos = 0;
	var endpos = src.indexOf(endtext);
	// check for nested delimiters
	while (src.substring(startpos,endpos-1).indexOf(starttext)!=-1) {
		// count number of nested 'starts'
		var startcount=0;
		var temp = src.substring(startpos,endpos-1);
		var pos=temp.indexOf(starttext);
		while (pos!=-1)  { startcount++; pos=temp.indexOf(starttext,pos+starttext.length); }
		// set up to check for additional 'starts' after adjusting endpos
		startpos=endpos+endtext.length;
		// find endpos for corresponding number of matching 'ends'
		while (startcount &amp;&amp; endpos!=-1) {
			endpos = src.indexOf(endtext,endpos+endtext.length);
			startcount--;
		}
	}
	return (endpos==-1)?src.length:endpos;
}
//}}}
//{{{
window.onClickNestedSlider=function(e)
{
	if (!e) var e = window.event;
	var theTarget = resolveTarget(e);
	while (theTarget &amp;&amp; theTarget.sliderPanel==undefined) theTarget=theTarget.parentNode;
	if (!theTarget) return false;
	var theSlider = theTarget.sliderPanel;
	var isOpen = theSlider.style.display!="none";

	// if SHIFT-CLICK, dock panel first (see [[MoveablePanelPlugin]])
	if (e.shiftKey &amp;&amp; config.macros.moveablePanel) config.macros.moveablePanel.dock(theSlider,e);

	// toggle label
	theTarget.innerHTML=isOpen?theTarget.getAttribute("closedText"):theTarget.getAttribute("openedText");
	// toggle tooltip
	theTarget.setAttribute("title",isOpen?theTarget.getAttribute("closedTip"):theTarget.getAttribute("openedTip"));

	// deferred rendering (if needed)
	if (theSlider.getAttribute("rendered")=="false") {
		var place=theSlider;
		if (theSlider.getAttribute("blockquote")=="true")
			place=createTiddlyElement(place,"blockquote");
		wikify(theSlider.getAttribute("raw"),place);
		theSlider.setAttribute("rendered","true");
	}

	// show/hide the slider
	if(config.options.chkAnimate &amp;&amp; (!hasClass(theSlider,'floatingPanel') || config.options.chkFloatingSlidersAnimate))
		anim.startAnimating(new Slider(theSlider,!isOpen,e.shiftKey || e.altKey,"none"));
	else
		theSlider.style.display = isOpen ? "none" : "block";

	// reset to default width (might have been changed via plugin code)
	theSlider.style.width=theSlider.defaultPanelWidth;

	// align floater panel position with target button
	if (!isOpen &amp;&amp; window.adjustSliderPos) window.adjustSliderPos(theSlider.parentNode,theTarget,theSlider);

	// if showing panel, set focus to first 'focus-able' element in panel
	if (theSlider.style.display!="none") {
		var ctrls=theSlider.getElementsByTagName("*");
		for (var c=0; c&lt;ctrls.length; c++) {
			var t=ctrls[c].tagName.toLowerCase();
			if ((t=="input" &amp;&amp; ctrls[c].type!="hidden") || t=="textarea" || t=="select")
				{ try{ ctrls[c].focus(); } catch(err){;} break; }
		}
	}
	var cookie=theTarget.sliderCookie;
	if (cookie &amp;&amp; cookie.length) {
		config.options[cookie]=!isOpen;
		if (config.options[cookie]!=theTarget.defOpen) window.saveOptionCookie(cookie);
		else window.removeCookie(cookie); // remove cookie if slider is in default display state
	}

	// prevent SHIFT-CLICK from being processed by browser (opens blank window... yuck!)
	// prevent clicks *within* a slider button from being processed by browser
	// but allow plain click to bubble up to page background (to close transients, if any)
	if (e.shiftKey || theTarget!=resolveTarget(e))
		{ e.cancelBubble=true; if (e.stopPropagation) e.stopPropagation(); }
	Popup.remove(); // close open popup (if any)
	return false;
}
//}}}
//{{{
// click in document background closes transient panels 
document.nestedSliders_savedOnClick=document.onclick;
document.onclick=function(ev) { if (!ev) var ev=window.event; var target=resolveTarget(ev);

	if (document.nestedSliders_savedOnClick)
		var retval=document.nestedSliders_savedOnClick.apply(this,arguments);
	// if click was inside a popup... leave transient panels alone
	var p=target; while (p) if (hasClass(p,"popup")) break; else p=p.parentNode;
	if (p) return retval;
	// if click was inside transient panel (or something contained by a transient panel), leave it alone
	var p=target; while (p) {
		if ((hasClass(p,"floatingPanel")||hasClass(p,"sliderPanel"))&amp;&amp;p.getAttribute("transient")=="true") break;
		p=p.parentNode;
	}
	if (p) return retval;
	// otherwise, find and close all transient panels...
	var all=document.all?document.all:document.getElementsByTagName("DIV");
	for (var i=0; i&lt;all.length; i++) {
		 // if it is not a transient panel, or the click was on the button that opened this panel, don't close it.
		if (all[i].getAttribute("transient")!="true" || all[i].button==target) continue;
		// otherwise, if the panel is currently visible, close it by clicking it's button
		if (all[i].style.display!="none") window.onClickNestedSlider({target:all[i].button})
		if (!hasClass(all[i],"floatingPanel")&amp;&amp;!hasClass(all[i],"sliderPanel")) all[i].style.display="none";
	}
	return retval;
};
//}}}
//{{{
// adjust floating panel position based on button position
if (window.adjustSliderPos==undefined) window.adjustSliderPos=function(place,btn,panel) {
	if (hasClass(panel,"floatingPanel") &amp;&amp; !hasClass(panel,"undocked")) {
		// see [[MoveablePanelPlugin]] for use of 'undocked'
		var rightEdge=document.body.offsetWidth-1;
		var panelWidth=panel.offsetWidth;
		var left=0;
		var top=btn.offsetHeight; 
		if (place.style.position=="relative" &amp;&amp; findPosX(btn)+panelWidth&gt;rightEdge) {
			left-=findPosX(btn)+panelWidth-rightEdge; // shift panel relative to button
			if (findPosX(btn)+left&lt;0) left=-findPosX(btn); // stay within left edge
		}
		if (place.style.position!="relative") {
			var left=findPosX(btn);
			var top=findPosY(btn)+btn.offsetHeight;
			var p=place; while (p &amp;&amp; !hasClass(p,'floatingPanel')) p=p.parentNode;
			if (p) { left-=findPosX(p); top-=findPosY(p); }
			if (left+panelWidth&gt;rightEdge) left=rightEdge-panelWidth;
			if (left&lt;0) left=0;
		}
		panel.style.left=left+"px"; panel.style.top=top+"px";
	}
}
//}}}
//{{{
// TW2.1 and earlier:
// hijack Slider stop handler so overflow is visible after animation has completed
Slider.prototype.coreStop = Slider.prototype.stop;
Slider.prototype.stop = function()
	{ this.coreStop.apply(this,arguments); this.element.style.overflow = "visible"; }

// TW2.2+
// hijack Morpher stop handler so sliderPanel/floatingPanel overflow is visible after animation has completed
if (version.major+.1*version.minor+.01*version.revision&gt;=2.2) {
	Morpher.prototype.coreStop = Morpher.prototype.stop;
	Morpher.prototype.stop = function() {
		this.coreStop.apply(this,arguments);
		var e=this.element;
		if (hasClass(e,"sliderPanel")||hasClass(e,"floatingPanel")) {
			// adjust panel overflow and position after animation
			e.style.overflow = "visible";
			if (window.adjustSliderPos) window.adjustSliderPos(e.parentNode,e.button,e);
		}
	};
}
//}}}</pre>
</div>
<div changecount="238" created="201309222222" creator="Yakov Litvin" modified="201505301344" modifier="Yakov Litvin" tags="systemConfig hideTags" title="NestedSwitchersPlugin">
<pre>/***
|Version|0.7.0|
О плагине и разработке &lt;&lt;tiddler [[to do list template##main]] with:"regarding NestedSwitcherPlugin" with:orderNtpNotes noedit&gt;&gt;
***/
//{{{
// regexp helpers:
var begin = "^",
    someDotsDontRemember = "\\.*",
    someDots = "("+someDotsDontRemember+")",
    mainHead = "%((?: tabs[_&gt;&lt;]? )|(?: js )|(?:%+))%\\((\\w*)\\($",
    mainHeadDontRemember = "%(?:(?: tabs[_&gt;&lt;]? )|(?: js )|(?:%+))%\\(\\w*\\($",
    terminator = "\\)\\)%%\\n?";

var nestedSwitchersFormatter =
{
	name: "nestedSwitchers",
	match: begin + someDotsDontRemember + mainHeadDontRemember,
	matchAgain: begin + someDots + mainHead
}
nestedSwitchersFormatter.handler = function(w)
{
	// check how many dots go before the %...% (the nesting level)
	var matchAgainRegExp = new RegExp(this.matchAgain,"mg");
	matchAgainRegExp.lastIndex = w.matchStart;
	var dots = matchAgainRegExp.exec(w.source)[1];

	var lookahead = begin + dots + mainHead +"((?:.|\n)*?)"+ begin + dots + terminator;
	lookaheadRegExp = new RegExp(lookahead,"mg");
	lookaheadRegExp.lastIndex = w.matchStart;
	var lookaheadMatch = lookaheadRegExp.exec(w.source);
	if(lookaheadMatch &amp;&amp; lookaheadMatch.index == w.matchStart)
	{
		var param = lookaheadMatch[2];
		switch(lookaheadMatch[1])
		{
			case " tabs&lt; ":
			case " tabs&gt; ":
			case " tabs_ ":
//# do extra stuff here, propagate
			case " tabs ":
			case "%":
				if(param.substr(0,7) != "txtTabs")
					param = "txtTabs" + param.substr(0,1).toUpperCase() +
						param.substr(1);
				this.tabsHandler(lookaheadMatch[3],w.output,dots,param,w);
				break;
			case " js ":
			case "%%":
				this.jsHandler(lookaheadMatch[3],w.output,dots,param,w);
				break;
		}
		w.nextMatch = lookaheadMatch.index + lookaheadMatch[0].length;
	}
};
var tabNameAddition = "_text_:";
nestedSwitchersFormatter.tabsHandler = function(text,place,dots,cookieName,wikifier)
{
	// create the place where tabs should be put
	var el = "div", validTab = false,
	    wrapper = createTiddlyElement(null,el,null,"tabsetWrapper " + cookieName),
	    tabset = createTiddlyElement(wrapper,el,null,"tabset",null,{cookie:cookieName});

	// parse the text
	// .%% label 1 % tooltip 1 % or .&lt;% label 1 %
	// content 1
	// ...
	var match, startTextIndex, endTextIndex,
	    tabText, tabLabel, tabTooltip, transclusionArguments, tab, defaultTab,
	    dotsPattern = dots.replace(".","\\."),
	    labelTextPattern = "(?:[^%\\n]|(?:%%))*?", // any of ((not % or linebreak) or %%)
	    labelPattern = "%% +("+labelTextPattern+") +(?:% +("+labelTextPattern+") +)?"+
			   "(?:%(\\[\\["+labelTextPattern+"\\]\\]"+labelTextPattern+"))?%%$",
	    headPattern = begin + dotsPattern + labelPattern,
	    headRegExp = new RegExp(headPattern,"mg");

	match = headRegExp.exec(text);
	defaultTab = match ? match[1] : "";
	while(match)
	{
		startTextIndex = match.index + match[0].length;
		tabLabel		=  match[1]       .replace("%%","%");
		tabTooltip		= (match[2] || "").replace("%%","%");
		transclusionArguments	= (match[3] || "").replace("%%","%");
		if(match = headRegExp.exec(text))
			endTextIndex = match.index;
		else
			endTextIndex = text.length;
		tabText = transclusionArguments ? "&lt;&lt;tiddler "+transclusionArguments+"&gt;&gt;" :
				jQuery.trim(text.substring(startTextIndex,endTextIndex));

		tab = createTiddlyElement(tabset,"a",null,"tab tabUnselected",null,{
			tab : tabLabel, content: tabNameAddition + tabText,
			href: "javascript:;"
		})
		if(tabTooltip)
			tab.setAttribute("title",tabTooltip);
		if(tabLabel)
			// tab.appendChild(document.createTextNode(tabLabel));
			wikify(tabLabel,tab,null,wikifier.tiddler)

		tab.onclick = config.macros.tabs.onClickTab;
		tab.title = tabTooltip;
		createTiddlyElement(tab,"span",null,null," ",{style:"font-size:0pt;line-height:0px"});
//# is this necessary? this was taken from config.macros.tabs.handler
		if(config.options[cookieName] == tabLabel)
			validTab = true;
	}
	if(!validTab)
		config.options[cookieName] = defaultTab;

	place.appendChild(wrapper);
	config.macros.tabs.switchTab(tabset,config.options[cookieName]);
};

// hijack config.macros.tabs.switchTab so that is takes into account "text" params
// (aside normal "where text is" params)
config.macros.tabs.bare_switchTab = config.macros.tabs.switchTab;
config.macros.tabs.switchTab = function(tabset,tab)
{
	if(!store.ntp_orig_getTiddlerText)
	{
		store.ntp_orig_getTiddlerText = store.getTiddlerText;
		store.getTiddlerText = function(title,defaultText)
		{
			if(title.substr(0,tabNameAddition.length) == tabNameAddition)
				return title.substr(tabNameAddition.length);
			return this.ntp_orig_getTiddlerText(title,defaultText);
		};
		store.ntp_orig_getTiddler = store.getTiddler;
		store.getTiddler = function(title)
		{
			if(title.substr(0,tabNameAddition.length) == tabNameAddition) {
				var tidElem = story.findContainingTiddler(tabset),
				    tidName = tidElem ? tidElem.getAttribute("tiddler") : "";
				return store.fetchTiddler(tidName);
			}
			return this.ntp_orig_getTiddler(title);
		};
	}
	this.bare_switchTab.apply(this,arguments);
	if(store.ntp_orig_getTiddlerText)
	{
		store.getTiddlerText = store.ntp_orig_getTiddlerText;
		store.getTiddler     = store.ntp_orig_getTiddler;
	}
	store.ntp_orig_getTiddlerText = null;
	// this complicated stuff about .getTiddlerText is needed for nested tabs
	// the stuff about .getTiddler gives the right "tiddler" context for the wikification
};


nestedSwitchersFormatter.jsHandler = function(text,place,dots,param,wikifier)
{
//# for testing:
createTiddlyElement(place,"div",null,null,"js: "+text,{style: "color:green; white-space:pre;"})
	
};

config.formatters.push(nestedSwitchersFormatter);
//}}}</pre>
</div>
<div changecount="2" content-type="text/javascript" created="201511271041" modified="201604171820" modifier="Yakov Litvin" tags="systemConfig" title="RearrangeTiddlersPlugin">
<pre>/***
|Name|RearrangeTiddlersPlugin|
|Source|{{DDn{old:}}} http://www.TiddlyTools.com/#RearrangeTiddlersPlugin|
|Version|2.0.2|
|Author|Yakov Litvin|
|Contributor|Eric Shulman|
|OriginalAuthor|Joe Raii|
|License|{{DDn{old:}}} http://www.TiddlyTools.com/#LegalStatements|
|~CoreVersion|2.4.0|
|Type|plugin|
|Description|drag tiddlers by title to re-order story column display|
***/
//{{{
if (Story.prototype.rearrangeTiddlersHijack_refreshTiddler === undefined) {
 Story.prototype.rearrangeTiddlersHijack_refreshTiddler = Story.prototype.refreshTiddler;
 Story.prototype.refreshTiddler = function(title,template)
 {
	this.rearrangeTiddlersHijack_refreshTiddler.apply(this,arguments);
	var theTiddler = document.getElementById(this.tiddlerId(title));
	if(!theTiddler) return;
	
	// find title element
	var theHandle = jQuery(theTiddler).children(".title")[0];
	if(!theHandle) return theTiddler;

	Drag.init(theHandle, theTiddler, 0, 0, null, null);
	theHandle.style.cursor = "move";
	theHandle.title = "drag title to re-arrange tiddlers, click for more options...";
	theTiddler.onDrag = function(x,y,myElem)
	{
		if (this.style.position != "relative") {
			this.savedstyle = this.style.position;
			this.style.position = "relative";
		}
		y = myElem.offsetTop;
		var next = myElem.nextSibling;
		var prev = myElem.previousSibling;
		if (next &amp;&amp; y + myElem.offsetHeight &gt; next.offsetTop + next.offsetHeight/2) {
			myElem.parentNode.removeChild(myElem);
			next.parentNode.insertBefore(myElem, next.nextSibling);//elems[pos+1]);
			myElem.style["top"] = -next.offsetHeight/2+"px";
		}
		if (prev &amp;&amp; y &lt; prev.offsetTop + prev.offsetHeight/2) { 
			myElem.parentNode.removeChild(myElem);
			prev.parentNode.insertBefore(myElem, prev);
			myElem.style["top"] = prev.offsetHeight/2+"px";
		}
	};
	theTiddler.onDragEnd = function(x,y,myElem)
	{
		myElem.style["top"] = "0px";
		if (this.savedstyle != undefined)
			this.style.position = this.savedstyle;
	};
	theHandle.onclick = function(ev)
	{
		ev = ev || window.event;
		var p = Popup.create(this); if (!p) return;
		var b = createTiddlyButton(createTiddlyElement(p,"li"),
			"\u25B2 move to top of column ","move this tiddler to the top of the story column",
			function() {
				var t = story.getTiddler(this.getAttribute("tid"));
				t.parentNode.insertBefore(t,t.parentNode.firstChild); // move to top of column
				window.scrollTo(0,ensureVisible(t));
				return false;
			});
		b.setAttribute("tid",title);
		var b = createTiddlyButton(createTiddlyElement(p,"li"),
			"\u25BC move to bottom of column ","move this tiddler to the bottom of the story column",
			function() {
				var t = story.getTiddler(this.getAttribute("tid"));
				t.parentNode.insertBefore(t,null); // move to bottom of column
				window.scrollTo(0,ensureVisible(t));
				return false;
			});
		b.setAttribute("tid",title);
		Popup.show();
		ev.cancelBubble = true;
		if (ev.stopPropagation) ev.stopPropagation();
		return false;
	};
	return theTiddler;
 }
}

/**************************************************
 * dom-drag.js
 * 09.25.2001
 * www.youngpup.net
 **************************************************
 * 10.28.2001 - fixed minor bug where events
 * sometimes fired off the handle, not the root.
 **************************************************/

var Drag = {
	
	obj: null,
	
	init: function(o, oRoot, minX, maxX, minY, maxY)
	{
		o.onmousedown = Drag.start;
		o.root = oRoot &amp;&amp; oRoot != null ? oRoot : o ;
		if (isNaN(parseInt(o.root.style.left))) o.root.style.left = "0px";
		if (isNaN(parseInt(o.root.style.top ))) o.root.style.top  = "0px";
		o.minX = typeof minX != 'undefined' ? minX : null;
		o.minY = typeof minY != 'undefined' ? minY : null;
		o.maxX = typeof maxX != 'undefined' ? maxX : null;
		o.maxY = typeof maxY != 'undefined' ? maxY : null;
		o.root.onDragStart = new Function();
		o.root.onDragEnd = new Function();
		o.root.onDrag = new Function();
	},

	start: function(e)
	{
		var o = Drag.obj = this;
		e = Drag.fixE(e);
		var y = parseInt(o.root.style.top);
		var x = parseInt(o.root.style.left);
		o.root.onDragStart(x, y, Drag.obj.root);
		o.lastMouseX = e.clientX;
		o.lastMouseY = e.clientY;
		if (o.minX != null) o.minMouseX = e.clientX - x + o.minX;
		if (o.maxX != null) o.maxMouseX = o.minMouseX + o.maxX - o.minX;
		if (o.minY != null) o.minMouseY = e.clientY - y + o.minY;
		if (o.maxY != null) o.maxMouseY = o.minMouseY + o.maxY - o.minY;
		document.onmousemove = Drag.drag;
		document.onmouseup = Drag.end;
		Drag.obj.root.style["z-index"] = "10";
		return false;
	},

	drag: function(e)
	{
		e = Drag.fixE(e);
		var o = Drag.obj;
		var ey = e.clientY;
		var ex = e.clientX;
		var y = parseInt(o.root.style.top);
		var x = parseInt(o.root.style.left);
		var nx, ny;
		if (o.minX != null) ex = Math.max(ex, o.minMouseX);
		if (o.maxX != null) ex = Math.min(ex, o.maxMouseX);
		if (o.minY != null) ey = Math.max(ey, o.minMouseY);
		if (o.maxY != null) ey = Math.min(ey, o.maxMouseY);
		nx = x + (ex - o.lastMouseX);
		ny = y + (ey - o.lastMouseY);
		Drag.obj.root.style["left"] = nx + "px";
		Drag.obj.root.style["top"]  = ny + "px";
		Drag.obj.lastMouseX = ex;
		Drag.obj.lastMouseY = ey;
		Drag.obj.root.onDrag(nx, ny, Drag.obj.root);
		return false;
	},

	end: function()
	{
		document.onmousemove = null;
		document.onmouseup = null;
		Drag.obj.root.style["z-index"] = "0";
		Drag.obj.root.onDragEnd(parseInt(Drag.obj.root.style["left"]), parseInt(Drag.obj.root.style["top"]), Drag.obj.root);
		Drag.obj = null;
	},

	fixE: function(e)
	{
		if (typeof e == 'undefined') e = window.event;
		if (typeof e.layerX == 'undefined') e.layerX = e.offsetX;
		if (typeof e.layerY == 'undefined') e.layerY = e.offsetY;
		return e;
	}
};
//}}}</pre>
</div>
<div changecount="11" created="201607061356" creator="Яков Литвин" modified="201607131745" modifier="Яков Литвин" tags="systemConfig" title="RuTranslationPlugin">
<pre>/***
***/
//{{{
// tagging macro
config.macros.tagging.label = "записи с этим тэгом:";
config.macros.tagging.labelNotTag = "нет записей с этим тэгом";
config.macros.tagging.tooltip = "Список записей с тэгом '%0'";

// tags macro
config.views.wikified.tag.labelNoTags = "нет тэгов";
config.views.wikified.tag.labelTags = "тэги:";
config.views.wikified.tag.openTag = "Открыть тэг '%0'";
config.views.wikified.tag.tooltip = "Показать записи с тэгом '%0'";
config.views.wikified.tag.openAllText = "Открыть все";
config.views.wikified.tag.openAllTooltip = "Открыть все эти записи";
config.views.wikified.tag.popupNone = "Других записей с тэгом '%0' нет";

// closeAll macro
config.macros.closeAll.label = "закрыть все";
config.macros.closeAll.prompt = readOnly ? "закрыть все открытые записи" : "закрыть все открытые записи (кроме редактируемых)";

// search macro
config.macros.search.label = "искать";
config.macros.search.prompt = "Искать на этом сайте (в этой TiddlyWiki)";

// toolbar commands (some)
config.commands.closeTiddler.text = "закрыть";
config.commands.closeTiddler.tooltip = "закрыть эту запись";

// simple translation of view-&gt;date (uses numerical representation of months)
//# to do: convert to "13 июля 2016"
config.macros.view.views.date = function(value,place,params,wikifier,paramString,tiddler) {
	value = Date.convertFromYYYYMMDDHHMM(value);
	dateString = params[2] ? value.formatString(params[2]) : value.toLocaleDateString(); // "13.07.2016"
	createTiddlyText(place,dateString);
}

// "created" above tiddler's title
config.views.wikified.createdPrompt = "создано";
//}}}</pre>
</div>
<div changecount="1" created="201702060951" creator="Яков Литвин" modifier="Яков Литвин" tags="systemConfig" title="SaveAsPlugin">
<pre>/***
|Name|SaveAsPlugin|
|Source||
|Documentation||
|Version|2.10.1|
|Author|Eric Shulman|
|Tweaked by|Yakov Litvin (after v2.7.1)|
|License||
|~CoreVersion|2.1|
|Type|plugin|
|Description|Save current document to another path/filename|
***/
//{{{
version.extensions.SaveAsPlugin = { major: 2, minor: 10, revision: 1, date: new Date(2016,5,6) };

/* YL tweak+ */ // code adapted from SharedTiddlersPlugin to handle relative paths
var getPathFromURL = function(url) {

	return (url.lastIndexOf("/") &gt; -1) ?
		url.substr(0, url.lastIndexOf("/") + 1) : "";
};

// limitedly turns URI (URL) reference into an absolute URI (URL) and windows paths into URL
var resolveURL = function(url) {

	if (url.search(/^((http(s)?)|(file)):/) != 0) {
	// no protocol prefix..

		if (url.search(/^(.\:\\)|(\\\\)|(\/)/) != 0) // is relative?
		// as Unix filesystem root is "/", urls starting with it are not considered as relative

			url = getPathFromURL(document.location.toString()) + url;
		else
		// "url" is an "absolute" path to a local file. Prefix it with file://

			url = "file://" + url;

		// replace every \ by a /, to cover Windows style pathes
		url = url.replace(/\\/mg,"/");
	}
	return url;
};
/* YL tweak= */

config.macros.saveAs = {
	label: 'save as...',
	labelparam: 'label:',
	prompt: 'Save current document to a different path/file',
	promptparam: 'prompt:',
	filePrompt: 'Please select or enter a target path/filename',
	targetparam: 'target:',
	defaultFilename: 'new.html',
	filenameparam: 'filename:',
	currfilekeyword: 'here',
	typeparam: 'type:',
	type_TW: 'tw', type_PS: 'ps', type_TX: 'tx', type_CS: 'cs', type_NF: 'nf', // file type tokens
	type_map: {
		tiddlywiki:'tw', tw:'tw', wiki: 'tw',
		purestore: 'ps', ps:'ps', store:'ps',
		plaintext: 'tx', tx:'tx', text: 'tx',
		comma:     'cs', cs:'cs', csv:  'cs',
		newsfeed:  'nf', nf:'nf', xml:  'nf', rss:'nf'
	},
/* YL tweak */	filterExpression: 'filter:',
	limitparam: 'limit:',
/* YL tweak */	scriptparam: 'process:',
	replaceparam: 'replace',
	mergeparam: 'merge',
	quietparam: 'quiet',
	openparam: 'open',
	askParam: 'ask',
	hereParam: 'here',
	askMsg: "Enter a tag filter (use * for all tiddlers, 'none' for blank document)",
	hereMsg: 'Enter a tiddler title',
	emptyParam: 'none',
	confirmmsg: "Found %0 tiddlers matching\n\n'%1'\n\nPress OK to proceed",
	mergeprompt: '%0\nalready contains tiddler definitions.\n'
		+'\nPress OK to add new/revised tiddlers to current file contents.'
		+'\nPress Cancel to completely replace file contents',
	mergestatus: 'Merged %0 new/revised tiddlers and %1 existing tiddlers',
	okmsg: '%0 tiddlers written to %1',
	failmsg: 'An error occurred while creating %1',
	filter: '',
	handler: function(place,macroName,params) {
		if ((params[0]||'').startsWith(this.labelparam))
			var label=params.shift().substr(this.labelparam.length);
		if ((params[0]||'').startsWith(this.promptparam))
			var prompt=params.shift().substr(this.promptparam.length);
		if ((params[0]||'').startsWith(this.targetparam))
			var target=params.shift().substr(this.targetparam.length);
		if ((params[0]||'').startsWith(this.filenameparam))
			var filename=params.shift().substr(this.filenameparam.length);
		if ((params[0]||'').startsWith(this.typeparam))
			var filetype=this.type_map[params.shift().substr(this.typeparam.length).toLowerCase()];
/* YL tweak */	if ((params[0]||'').startsWith(this.filterExpression))
			var filterExpression=params.shift().substr(this.filterExpression.length);
		if ((params[0]||'').startsWith(this.limitparam))
			var limit=params.shift().substr(this.limitparam.length);
/* YL tweak */	if ((params[0]||'').startsWith(this.scriptparam))
			var script=params.shift().substr(this.scriptparam.length);
		var q=((params[0]||'')==this.quietparam);   if (q) params.shift();
		var o=((params[0]||'')==this.replaceparam); if (o) params.shift();
		var m=((params[0]||'')==this.mergeparam);   if (m) params.shift();
		var a=((params[0]||'')==this.openparam);    if (a) params.shift();
		var btn=createTiddlyButton(place,label||this.label,prompt||this.prompt,
			function(){ config.macros.saveAs.go( this.getAttribute('target'),
				this.getAttribute('filename'), this.getAttribute('filetype'),
				this.getAttribute('filter'),
/* YL tweak */			this.getAttribute('filterExpression'),
				this.getAttribute('limit'),
/* YL tweak */			this.getAttribute('modScript'),
				this.getAttribute('quiet')=='true',
				this.getAttribute('overwrite')=='true',
				this.getAttribute('merge')=='true',
				this.getAttribute('autoopen')=='true',
				this);
				return false;
			});
		if (target) btn.setAttribute('target',target);
		if (filename) btn.setAttribute('filename',filename);
		btn.setAttribute('filetype',filetype||this.type_TW);
/* YL tweak */	btn.setAttribute('filterExpression',filterExpression||'');
		btn.setAttribute('filter',params.join(' '));
/* YL tweak */	btn.setAttribute('modScript',script||'');
		btn.setAttribute('limit',limit||0);
		btn.setAttribute('quiet',q?'true':'false');
		btn.setAttribute('overwrite',o?'true':'false');
		btn.setAttribute('merge',m?'true':'false');
		btn.setAttribute('autoopen',a?'true':'false');
	},
	go: function(target,filename,filetype,filter,filterExpr,limit,script,quiet,overwrite,merge,autoopen,here){
/* YL tweak */	// added the "filterExpr" and "script" params
		var cm=config.messages; // abbreviation
		var cms=config.macros.saveAs; // abbreviation
		if (window.location.protocol!='file:') // make sure we are local
			{ displayMessage(cm.notFileUrlError); return; }

		// get tidders, confirm filtered results
/* YL tweak+ */	filter = filter.length ? "[tag["+filter+"]]" : null;
/* YL tweak= */	filterExpr = filterExpr.length ? filterExpr + (filter ? " "+filter : "") : (filter ? filter : "");
		var tids=cms.selectTiddlers(filterExpr,here);
		if (tids===false) return; // cancelled by user
		if (cms.filter!=cms.emptyParam &amp;&amp; cms.filter.length &amp;&amp; !quiet)
			if (!confirm(cms.confirmmsg.format([tids.length,cms.filter]))) return;

/* YL tweak+ */	// switch tiddlers from store to their copies, launch the script
		for(var i = 0; i &lt; tids.length; i++) {
			tids[i] = jQuery.extend(true, new Tiddler(), tids[i]);
			// keep the original titles for correct markup blocks updating and other things
			tids[i].orig_title = tids[i].title;
		}
		// wrap the script so that the "tids" var can be used even if the code is minified
		script = "config.macros.saveAs.f = function(tids) {" + script + "};"
		eval(script);
/* YL tweak= */	this.f(tids);

		// get target path/filename
		if (!filetype) filetype=this.type_TW;
		target=target||cms.getTarget(filename,filetype==this.type_TX?'txt':filetype==this.type_CS?'csv':'html');
		if (!target) return; // cancelled by user

/* YL tweak+ */	var link = resolveURL(target);
/* YL tweak= */	target = getLocalPath(link);
		var samefile=link==decodeURIComponent(window.location.href);
		var p=getLocalPath(document.location.href);
		if (samefile) {
			if (config.options.chkSaveBackups)
				{ var t=loadOriginal(p);if(t)saveBackup(p,t); }
			if (config.options.chkGenerateAnRssFeed &amp;&amp; saveRss instanceof Function)
				saveRss(p);
		}
		var notes='';
		var total={val:0};
		var out=this.assembleFile(target,filetype,tids,limit||0,notes,quiet,overwrite,merge,total);
		var ok=saveFile(target,out);
		if (ok &amp;&amp; autoopen) {
			if (!samefile) window.open(link).focus();
			else { store.setDirty(false); window.location.reload(); }
		}
		if (!quiet || !(ok &amp;&amp; autoopen))
			displayMessage((ok?this.okmsg:this.failmsg).format([total.val,target]),link);
	},
	selectTiddlers: function(filter,here) {
		var cms=config.macros.saveAs; // abbreviation
		var tids=[]; cms.filter=filter||'';
		if (filter==cms.emptyParam)
			return tids;
		if (filter==config.macros.saveAs.hereParam) {
			var here=story.findContainingTiddler(here);
			if (here) var tid=here.getAttribute('tiddler');
			else var tid=prompt(config.macros.saveAs.hereMsg,'');
			while (tid &amp;&amp; !store.tiddlerExists(tid)) {
				var err='"'+tid+'" not found.\nPlease try again.\n\n';
				var tid=prompt(err+config.macros.saveAs.hereMsg,tid);
			}
			if (!tid) return false;  // cancelled by user
			return [store.getTiddler(tid)];
		}
		if (filter==config.macros.saveAs.askParam) {
			filter=prompt(config.macros.saveAs.askMsg,'');
			if (!filter) return false;  // cancelled by user
			cms.filter=filter=='*'?'':filter;
		}
		if (!filter||!filter.length||filter=='*') tids=store.getTiddlers('title');
/* YL tweak */	else tids=store.filterTiddlers(filter);
		return tids;
	},
	getTarget: function(defName,defExt) {
		var cms=config.macros.saveAs; // abbreviation
		// get new target path/filename
		var newPath=getLocalPath(window.location.href);
		var slashpos=newPath.lastIndexOf('/'); if (slashpos==-1) slashpos=newPath.lastIndexOf('\\'); 
		if (slashpos!=-1) newPath=newPath.substr(0,slashpos+1); // trim filename
		if (!defName||!defName.length) { // use current filename as default
			var p=getLocalPath(window.location.href);
			var s=p.lastIndexOf('/'); if (s==-1) s=p.lastIndexOf('\\'); 
			if (s!=-1) defName=p.substr(s+1);
		}
		var defFilename=(defName||cms.defaultFilename).replace(/.html$/,'.'+defExt);
		var target=cms.askForFilename(cms.filePrompt,newPath,defFilename,defExt);
		if (!target) return; // cancelled by user
		// if specified file does not include a path, assemble fully qualified path and filename
		var slashpos=target.lastIndexOf('/'); if (slashpos==-1) slashpos=target.lastIndexOf('\\');
		if (slashpos==-1) target=target+(defName||cms.defaultFilename).replace(/.html$/,'.'+defExt);
		return target;
	},
	askForFilename: function(msg,path,file,defExt) {
/*		if(window.Components) { // moz
			try {
				netscape.security.PrivilegeManager.enablePrivilege('UniversalXPConnect');
				var nsIFilePicker = window.Components.interfaces.nsIFilePicker;
				var picker = Components.classes['@mozilla.org/filepicker;1'].createInstance(nsIFilePicker);
				picker.init(window, msg, nsIFilePicker.modeSave);
				var thispath = Components.classes['@mozilla.org/file/local;1'].createInstance(Components.interfaces.nsILocalFile);
				thispath.initWithPath(path);
				picker.displayDirectory=thispath;
				picker.defaultExtension=defExt||'html';
				picker.defaultString=file;
				picker.appendFilters(nsIFilePicker.filterAll|nsIFilePicker.filterText|nsIFilePicker.filterHTML);
				if (picker.show()!=nsIFilePicker.returnCancel) var result=picker.file.path;
			}
			catch(e) { alert('error during local file access: '+e.toString()) }
		} else {
*/			try { // IE, XP/Vista only
				var s = new ActiveXObject('UserAccounts.CommonDialog');
				s.Filter='All files|*.*|Text files|*.txt|HTML files|*.htm;*.html|';
				s.FilterIndex=(defExt=='txt')?2:3; // default to HTML files;
				s.InitialDir=path;
				s.FileName=file;
				if (s.showOpen()) var result=s.FileName;
			}
			catch(e) { var result=prompt(msg,path+file); } // fallback for other browsers
//		}
		return result;
	},
	plainTextHeader:
		 'Source:\n\t%0\n'
		+'Title:\n\t%1\n'
		+'Subtitle:\n\t%2\n'
		+'Created:\n\t%3 by %4\n'
		+'Application:\n\tTiddlyWiki %5 / %6 %7\n\n',
	plainTextTiddler:
		'- - - - - - - - - - - - - - -\n'
		+'|     title: %0\n'
		+'|   created: %1\n'
		+'|  modified: %2\n'
		+'| edited by: %3\n'
		+'|      tags: %4\n'
		+'- - - - - - - - - - - - - - -\n'
		+'%5\n',
	plainTextFooter:
		'',
	newsFeedHeader:
		 '&lt;'+'?xml version="1.0"?'+'&gt;\n'
		+'&lt;rss version="2.0"&gt;\n'
		+'&lt;channel&gt;\n'
		+'&lt;title&gt;%1&lt;/title&gt;\n'
		+'&lt;link&gt;%0&lt;/link&gt;\n'
		+'&lt;description&gt;%2&lt;/description&gt;\n'
		+'&lt;language&gt;en-us&lt;/language&gt;\n'
		+'&lt;copyright&gt;Copyright '+(new Date().getFullYear())+' %4&lt;/copyright&gt;\n'
		+'&lt;pubDate&gt;%3&lt;/pubDate&gt;\n'
		+'&lt;lastBuildDate&gt;%3&lt;/lastBuildDate&gt;\n'
		+'&lt;docs&gt;http://blogs.law.harvard.edu/tech/rss&lt;/docs&gt;\n'
		+'&lt;generator&gt;TiddlyWiki %5 / %6 %7&lt;/generator&gt;\n',
	newsFeedTiddler:
		'\n%0\n',
	newsFeedFooter:
		'&lt;/channel&gt;&lt;/rss&gt;',
	pureStoreHeader:
		 '&lt;html&gt;&lt;body&gt;'
		+'&lt;style type="text/css"&gt;'
		+'	#storeArea {display:block;margin:1em;}'
		+'	#storeArea div {padding:0.5em;margin:1em;border:2px solid black;height:10em;overflow:auto;}'
		+'	#pureStoreHeading {width:100%;text-align:left;background-color:#eeeeee;padding:1em;}'
		+'&lt;/style&gt;'
		+'&lt;div id="pureStoreHeading"&gt;'
		+'	TiddlyWiki "PureStore" export file&lt;br&gt;'
		+'	Source'+': &lt;b&gt;%0&lt;/b&gt;&lt;br&gt;'
		+'	Title: &lt;b&gt;%1&lt;/b&gt;&lt;br&gt;'
		+'	Subtitle: &lt;b&gt;%2&lt;/b&gt;&lt;br&gt;'
		+'	Created: &lt;b&gt;%3&lt;/b&gt; by &lt;b&gt;%4&lt;/b&gt;&lt;br&gt;'
		+'	TiddlyWiki %5 / %6 %7&lt;br&gt;'
		+'	Notes:&lt;hr&gt;&lt;pre&gt;%8&lt;/pre&gt;'
		+'&lt;/div&gt;'
		+'&lt;div id="storeArea"&gt;',
	pureStoreTiddler:
		'%0\n%1',
	pureStoreFooter:
		'&lt;/div&gt;&lt;!--POST-BODY-START--&gt;\n&lt;!--POST-BODY-END--&gt;&lt;/body&gt;&lt;/html&gt;',
	assembleFile: function(target,filetype,tids,limit,notes,quiet,overwrite,merge,total) {
		var revised='';
		var now = new Date().toLocaleString();
		var src=convertUnicodeToUTF8(document.location.href);
		var title = convertUnicodeToUTF8(wikifyPlain('SiteTitle').htmlEncode());
		var subtitle = convertUnicodeToUTF8(wikifyPlain('SiteSubtitle').htmlEncode());
		var user = convertUnicodeToUTF8(config.options.txtUserName.htmlEncode());
		var twver = version.major+'.'+version.minor+'.'+version.revision;
		var v=version.extensions.SaveAsPlugin; var pver = v.major+'.'+v.minor+'.'+v.revision;
		var headerargs=[src,title,subtitle,now,user,twver,'SaveAsPlugin',pver,notes];
		switch (filetype) {
			case this.type_TX: // plain text
				var header=this.plainTextHeader.format(headerargs);
				var footer=this.plainTextFooter;
				break;
			case this.type_CS: // comma-separated
				var fields={};
				for (var i=0; i&lt;tids.length; i++) for (var f in tids[i].fields) fields[f]=f;
				var names=['title','created','modified','modifier','tags','text'];
				for (var f in fields) names.push(f);
				var header=names.join(',')+'\n';
				var footer='';
				break;
			case this.type_NF: // news feed (XML)
				headerargs[0]=store.getTiddlerText('SiteUrl','');
				var header=this.newsFeedHeader.format(headerargs);
				var footer=this.newsFeedFooter;
				tids=store.sortTiddlers(tids,'-modified');
				break;
			case this.type_PS: // PureStore (no code)
				var header=this.pureStoreHeader.format(headerargs);
				var footer=this.pureStoreFooter;
				break;
			case this.type_TW: // full TiddlyWiki
			default:
				var currPath=getLocalPath(window.location.href);
				var original=loadFile(currPath);
				if (!original) { alert(config.messages.cantSaveError); return; }
				var posDiv = locateStoreArea(original);
				if (!posDiv) { alert(config.messages.invalidFileError.format([currPath])); return; }
				var header = original.substr(0,posDiv[0]+startSaveArea.length)+'\n';
				var footer = '\n'+original.substr(posDiv[1]);
				break;
		}
		if (parseInt(limit)!=0) tids=tids.slice(0,limit);
		var out=this.getData(target,filetype,tids,quiet,overwrite,merge,fields);
		var revised = header+convertUnicodeToUTF8(out.join('\n'))+footer;
		// if full TW, insert page title and language attr, and reset MARKUP blocks as needed...

/* YL tweak+ */	// for that, temporary change the store so that already processed tiddlers are used
		var createContextStore = function(tids) {

			var contextStore = new TiddlyWiki();

			// copy all the tiddlers:
			store.forEachTiddler(function(title,tiddler){ contextStore.addTiddler(tiddler); });
			// substitute original tiddlers with their processed "images":
			for(var i = 0; i &lt; tids.length; i++) {
				contextStore.deleteTiddler(tids[i].orig_title);
				contextStore.addTiddler(tids[i]);
			}
			return contextStore;
/* YL tweak= */	}

		if (filetype==this.type_TW) {
/* YL tweak+ */		// change the store so that in this context already processed tiddlers are used:
			var mainStore = store;
/* YL tweak= */		store = createContextStore(tids);
			var newSiteTitle=convertUnicodeToUTF8(getPageTitle()).htmlEncode();
			revised=revised.replaceChunk('&lt;title'+'&gt;','&lt;/title'+'&gt;',' ' + newSiteTitle + ' ');
			revised=updateLanguageAttribute(revised);
			var titles=[]; for (var i=0; i&lt;tids.length; i++) titles.push(tids[i].title);
			revised=updateMarkupBlock(revised,'PRE-HEAD',
				titles.contains('MarkupPreHead')? 'MarkupPreHead' :null);
			revised=updateMarkupBlock(revised,'POST-HEAD',
				titles.contains('MarkupPostHead')?'MarkupPostHead':null);
			revised=updateMarkupBlock(revised,'PRE-BODY',
				titles.contains('MarkupPreBody')? 'MarkupPreBody' :null);
			revised=updateMarkupBlock(revised,'POST-SCRIPT',
				titles.contains('MarkupPostBody')?'MarkupPostBody':null);
/* YL tweak */		// return the original store:
/* YL tweak */		store = mainStore;
		}
		total.val=out.length;
		return revised;
	},
	getData: function(target,filetype,tids,quiet,overwrite,merge,fields) {
		// output selected tiddlers and gather list of titles (for use with merge)
		var out=[]; var titles=[];
		var url=store.getTiddlerText('SiteUrl','');
		for (var i=0; i&lt;tids.length; i++) {
			out.push(this.formatItem(store,filetype,tids[i],url,fields));
			titles.push(tids[i].title);
		}
		// if TW or PureStore format, ask to merge with existing tiddlers (if any)
		if (filetype==this.type_TW || filetype==this.type_PS) {
			if (overwrite) return out; // skip merge... forced overwrite
			var txt=loadFile(target);
			if (txt &amp;&amp; txt.length) {
				var remoteStore=new TiddlyWiki();
				if (version.major+version.minor*.1+version.revision*.01&lt;2.52) txt=convertUTF8ToUnicode(txt);
				if (remoteStore.importTiddlyWiki(txt) &amp;&amp; (merge||confirm(this.mergeprompt.format([target])))) {
					var existing=remoteStore.getTiddlers('title');
					for (var i=0; i&lt;existing.length; i++)
						if (!titles.contains(existing[i].title))
							out.push(this.formatItem(remoteStore,filetype,existing[i],url));
					if (!quiet) displayMessage(this.mergestatus.format([tids.length,out.length-tids.length]));
				}
			}
		}
		return out;
	},
	formatItem: function(s,f,t,u,fields) {
		if (f==this.type_TW)
			var r=s.getSaver().externalizeTiddler(s,t);
		if (f==this.type_PS)
			var r=this.pureStoreTiddler.format([t.title,s.getSaver().externalizeTiddler(s,t)]);
		if (f==this.type_NF)
			var r=this.newsFeedTiddler.format([t.saveToRss(u)]);
		if (f==this.type_TX)
			var r=this.plainTextTiddler.format([t.title, t.created.toLocaleString(), t.modified.toLocaleString(),
				t.modifier, String.encodeTiddlyLinkList(t.tags), t.text]);
		if (f==this.type_CS) {
			function toCSV(t) { return '"'+t.replace(/"/g,'""')+'"'; } // always encode CSV
			var out=[ toCSV(t.title), toCSV(t.created.toLocaleString()), toCSV(t.modified.toLocaleString()),
				toCSV(t.modifier), toCSV(String.encodeTiddlyLinkList(t.tags)), toCSV(t.text) ];
			for (var f in fields) out.push(toCSV(t.fields[f]||''));
			var r=out.join(',');
		}
		return r||'';
	}
};
//}}}
//{{{
// automatically add saveAs to backstage
config.tasks.saveAs = {
	text: 'saveAs',
	tooltip: config.macros.saveAs.prompt,
	action: function(){ clearMessage(); config.macros.saveAs.go(); }
}
config.backstageTasks.splice(config.backstageTasks.indexOf('save')+1,0,'saveAs');
//}}}</pre>
</div>
<div changecount="37" created="201407041601" creator="Yakov Litvin" modified="201410181751" modifier="Yakov Litvin" tags="systemConfig" title="SavingWithRenamingFix">
<pre>/***
|''Version''|0.1.1|
|''Author''|Yakov Litvin|
|''Description''|This plugin fixes [[issue 146|https://github.com/TiddlyWiki/tiddlywiki/issues/146]] and ... [{{{TiddlyWiki.prototype.saveTiddler}}}]|
|''Overwriting notice''|This plugin overwrites the {{{Story.prototype.saveTiddler}}} and {{{TiddlyWiki.prototype.saveTiddler}}} methods. So any plugin that hijack any of these should use the {{{Requires}}} slice mentioning this plugin (if it is installed); plugins that overwrite these functions will likely cause conflicts/won't work.|
***/
//{{{
Story.prototype.saveTiddler = function(title,minorUpdate)
{
	var tiddlerElem = this.getTiddler(title);
	if(!tiddlerElem)
		return null;

	var fields = {};
	this.gatherSaveFields(tiddlerElem,fields);
	var newTitle = fields.title || title;
	if(!store.tiddlerExists(newTitle)) {
		newTitle = newTitle.trim();
		var creator = config.options.txtUserName;
	}
	if(store.tiddlerExists(newTitle) &amp;&amp; newTitle != title) {
		if(!confirm(config.messages.overwriteWarning.format([newTitle.toString()])))
			return null;
// was:			title = newTitle;
//		title = newTitle; // this line causes the bug
// this line is to be deleted; learn when and why this was introduced
// the next 4 usages of "title" marked with "+&gt;" should work fine without this
	}
/*+&gt;*/	if(newTitle != title)
		this.closeTiddler(newTitle,false);
	tiddlerElem.id = this.tiddlerId(newTitle);
	tiddlerElem.setAttribute("tiddler",newTitle);
	tiddlerElem.setAttribute("template",DEFAULT_VIEW_TEMPLATE);
	tiddlerElem.setAttribute("dirty","false");
	if(config.options.chkForceMinorUpdate)
		minorUpdate = !minorUpdate;
	if(!store.tiddlerExists(newTitle))
		minorUpdate = false;
	var newDate = new Date();
/*+&gt;*/	if(store.tiddlerExists(title)) {
/*+&gt;*/		var t = store.fetchTiddler(title);
		var extendedFields = t.fields;
		creator = t.creator;
	} else
		extendedFields = merge({},config.defaultCustomFields);
	
	for(var n in fields)
		if(!TiddlyWiki.isStandardField(n))
			extendedFields[n] = fields[n];

/*+&gt;*/	var tiddler = store.saveTiddler(title,newTitle,fields.text,minorUpdate ? undefined : config.options.txtUserName,minorUpdate ? undefined : newDate,fields.tags,extendedFields,null,null,creator);
	autoSaveChanges(null,[tiddler]);
	return newTitle;
};
//}}}

// // Ещё один, более мелкий фикс (делает более ясным код {{{TiddlyWiki.prototype.saveTiddler}}}, исправляет назначение custom fields в случае, когда ...); важен для renaming в SMP!
//{{{
TiddlyWiki.prototype.saveTiddler = function(title,newTitle,newBody,modifier,modified,tags,fields,clearChangeCount,created,creator)
{
	var tiddler;
	if(title instanceof Tiddler) {
		tiddler = title;
		title = tiddler.title;
	} else
		tiddler = this.fetchTiddler(title);

	if(tiddler) {
		created = created || tiddler.created; // Preserve created date
		creator = creator || tiddler.creator;
		this.deleteTiddler(title);
	} else {
		created = created || modified;
		tiddler = new Tiddler();
	}
	fields = merge(merge(tiddler ? tiddler.fields : {},fields), config.defaultCustomFields,true);
	tiddler.set(newTitle,newBody,modifier,modified,tags,created,fields,creator);

	this.addTiddler(tiddler);
	if(clearChangeCount)
		tiddler.clearChangeCount();
	else
		tiddler.incChangeCount();

	if(title != newTitle)
		this.notify(title,true);
	this.notify(newTitle,true);
	if(window.location.protocol == "file:")
		this.setDirty(true);
	return tiddler;
};
//}}}</pre>
</div>
<div changecount="115" created="201303231108" creator="Yakov Litvin" modified="201611251222" modifier="Яков Литвин" tags="systemConfig StyleSheet [[shared not by tag]]" title="SetCommonStylesPlugin">
<pre>/***
|''Version''|1.6.5|
***/
//{{{
// styling helpers
var getStylesFromSection = function(sectionName) {
	var css = store.getTiddlerText("SetCommonStylesPlugin##"+sectionName,"");
	return css.replace("{{{","/"+"*{{{*"+"/").replace("}}}","/"+"*}}}*"+"/");
};
var setCssShadow = function(sectionName,shadowName) {
	config.shadowTiddlers[shadowName] = getStylesFromSection(sectionName);
	store.addNotification(shadowName, refreshStyles);

	store.addNotification("ColorPalette",function(smth,doc) {
		refreshStyles(shadowName,doc);
	});
};

// set styles
setCssShadow("Semantics",		"CommonSemanticsStyleSheet");
setCssShadow("Representation",		"CommonRepresenationStyleSheet");
setCssShadow("Representation tools",	"CommonRepresToolsStyleSheet");
//if(jQuery.browser.mozilla) // now done via CSS
	setCssShadow("FireFox CSS",	"FireFoxFixesStyleSheet");

csp_old_wikify = wikify;
wikify = function(source,output,highlightRegExp,tiddler) {
	csp_old_wikify.apply(this,arguments);
	jQuery(".NTerm").each(function(){
		// avoid multiple wrapping because of ~ wikifications:
		if(!jQuery(this.parentNode).hasClass("NTermWrap"))
			jQuery(this).wrap("&lt;span class='NTermWrap'&gt;&lt;/span&gt;");
	});
	jQuery(".LimitGeneral").each(function(){
		// avoid multiple wrapping because of ~ wikifications:
		if(!jQuery(this.parentNode).hasClass("LimitGeneralWrap"))
			jQuery(this).wrap("&lt;span class='LimitGeneralWrap'&gt;&lt;/span&gt;");
	});
};
// to get green underlined, add a wrapper with the NTermWrap class; apply the styling to both wrappers (.NTermWrap) and the element itself (.NTerm)

// hide message area on click elsewhere (useful for touchscreen devices
var positiveClearMessage = function() {
	clearMessage();
	return true;
};
jQuery("body").on("click",positiveClearMessage);
if(!config.extensions.postponeMsg) {
	config.extensions.postponeMsg = true;
	config.extensions.orig_displayMessage = displayMessage;
	displayMessage = function(a,b) {
		var doDisplay = function() { config.extensions.orig_displayMessage(a,b); };
		setTimeout(doDisplay,100);
	};
}
//}}}
/***
!!!Semantics
{{{
div[tags~="code"] .editor, #tiddlerStyleSheet .editor,
div[tags~="systemConfig"] .editor
		{ font-family: monospace; }

.PoG, .PoGc	{ color: green; }

.DDn, .DDnc	{ color: purple; }

.FpG, .FpGc	{ color: blue; }

.PoGc:before, .DDnc:before, .FpGc:before,
.c:before	{ content: "["; color: [[ColorPalette::Foreground]]; }

.PoGc:after, .DDnc:after, .FpGc:after,
.c:after	{ content: "]"; color: [[ColorPalette::Foreground]]; }

.NTerm		  { color: [[ColorPalette::Foreground]]; font-weight: normal; }
.NTermWrap	  { color: #00aa00; text-decoration: underline; font-weight: bold; }
.LimitGeneral	  { color: [[ColorPalette::Foreground]]; font-weight: normal; }
.LimitGeneralWrap { color: #0000ff; text-decoration: underline; font-weight: bold; }
}}}
!!!Semantics details
* possibilities of growth (including comments): {{{.PoG}}}, {{{.PoGc}}}
* done [written] to be done, but not ideally: {{{.DDn}}}, {{{.DDnc}}}
* frozen possibilities of growth or things done/written not ideally: {{{.FpG}}}, {{{.FpGc}}}
* just comments or implied things: {{{.c}}}
* {{{code}}} tag is to be used in tiddlers with code (CSS, ~JavaScript etc) which changes representation when editing
* {{PoGc{лучше перевести все описания на русский -- слишком много неопределённости}}}
* {{PoGc{стоит что-то придумать с {{{[[ColorPalette::Foreground]]}}} на случай night mode}}}
!!!Representation
{{{
#sidebarOptions .sliderPanel	{ background-color:[[ColorPalette::Background]] !important;
				  font-size: 95% !important; }
#tiddlerStyleSheet .viewer pre	{ clear: both !important; }

.headerForeground,
.headerShadow			{ padding-top: 1em !important; }

.viewer .tabContents		{ background-color: inherit; }
}}}
!!!Representation details
* ...
* {{{margin-bottom}}} of {{{#displayArea}}} -- to be able to keep the content on the eye level
!!!Representation tools
{{{
table.borderless,
table.borderless tr,
table.borderless td,
table.borderless th	{ border: 0 !important; }

div[tags~="hideTagged"]
.tagging		{ display: none; }
div[tags~="hideTags"]
.tagged			{ display: none; }
}}}
!!!Representation tools details
* ...
!!!FireFox CSS
{{{
@-moz-document url-prefix() {
  pre, code, div[tags~="code"] .editor,
  div[tags~="systemConfig"] .editor,
  #tiddlerStyleSheet .editor
	{ font-family: 'Droid Sans Mono', Consolas !important; font-size: 100% !important; }
}
}}}
!!!!
***/</pre>
</div>
<div changecount="22" content-type="text/javascript" created="201509050813" modified="201509050855" modifier="Yakov Litvin" ordermytweaks="0" statecomment="{{PoG{протестировать новый параметр {{{noNotify}}} в {{{.SetValue}}}; *добавить редактор полей}}}" tags="[[YL core tweaks]] systemConfig editing" title="SetFieldPlugin">
<pre>/***
|Version|0.1|
|Short status|&lt;&lt;insertEditable container:"@stateComment" size:max cell&gt;&gt;|
***/
//{{{
// adapted from the 2.7.1 core:

// Sets the value of the given field of the tiddler to the value.
// Setting an ExtendedField's value to null or undefined removes the field.
// Setting a namespace to undefined removes all fields of that namespace.
// The fieldName is case-insensitive.
// All values will be converted to a string value.
TiddlyWiki.prototype.setValue = function(tiddler,fieldName,value,noNotify)
{
	TiddlyWiki.checkFieldName(fieldName);
	var t = this.resolveTiddler(tiddler);
	if(!t)
		return;
	fieldName = fieldName.toLowerCase();
	var isRemove = (value === undefined) || (value === null);
	var accessor = TiddlyWiki.standardFieldAccess[fieldName];
	if(accessor) {
		if(isRemove)
			// don't remove StandardFields
			return;
		var h = TiddlyWiki.standardFieldAccess[fieldName];
		if(!h.set(t,value))
			return;
	} else {
		var oldValue = t.fields[fieldName];
		if(isRemove) {
			if(oldValue !== undefined)
				// deletes a single field
				delete t.fields[fieldName];
			else {
				// no concrete value is defined for the fieldName
				// so we guess this is a namespace path.
				// delete all fields in a namespace
				var re = new RegExp("^"+fieldName+"\\.");
				var dirty = false;
				var n;
				for(n in t.fields)
					if(n.match(re)) {
						delete t.fields[n];
						dirty = true;
					}
				if(!dirty)
					return;
			}
		} else {
			// the "normal" set case. value is defined (not null/undefined)
			// For convenience provide a nicer conversion Date-&gt;String
			value = value instanceof Date ? value.convertToYYYYMMDDHHMMSSMMM() : String(value);
			if(oldValue == value)
				return;
			t.fields[fieldName] = value;
		}
	}
	// When we are here the tiddler/store really was changed.
	if(!noNotify)
		this.notify(t.title,true);
	if(!fieldName.match(/^temp\./))
		this.setDirty(true);
};
//}}}</pre>
</div>
<div changecount="2366" created="201410101905" modified="201705291530" modifier="Яков Литвин" tags="systemConfig" title="SetManagerPlugin">
<pre>/***
|Version|0.11.2'|
|Requires|ForEachTiddlerPlugin SetFieldPlugin SharedTiddlersPlugin|
|~|ForEachTiddlerPlugin is not required for the operation of the plugin, but if FETP is present, it should be evaluated before this plugin (same for SharedTiddlersPlugin); also, there's no other simple way to use this plugin aside with FETP; SetFieldPlugin is required for quality (removes extra refreshing which quickens some actions and removes some representation bugs|
|Documentation|[[SetManagerPluginInfo]]|
|Author|Yakov Litvin|
***/

//{{{
// sort counters methods ("S" stands for "sort")
Tiddler.prototype.getSCounterPlace = function(storageName)
{
	storageName = storageName || config.macros.itemMenu.defaultField
	var withFieldNameRegExp = /(.*?)@@(.*)/,
	    withFieldNameMatch  = withFieldNameRegExp.exec(storageName);
	return {
		storageName: withFieldNameMatch ? withFieldNameMatch[1] : null,
		fieldName: withFieldNameMatch ? withFieldNameMatch[2] : storageName
	}
};
Tiddler.prototype.getRawSData = function(fieldName)
{
	fieldName = fieldName || config.macros.itemMenu.defaultField;

	if(!this.getIncludeURL || !this.getIncludeURL())
		return store.getValue(this,fieldName);
};
Tiddler.prototype.getSCounter = function(fieldName)
{
	var storageData  = this.getSCounterPlace(fieldName),
	    storageName  = storageData.storageName,
	    storageField = storageData.fieldName,
	    indexText;

	if(!this.getIncludeURL || !this.getIncludeURL())
		return parseInt(this.getRawSData(storageField));

	// for included tiddlers use a separate tiddler as a stored index
	if(storageName) {
		var storageTiddler = store.fetchTiddler(storageName);
		indexText = storageTiddler ?
				storageTiddler.getRawSData(storageField) : "";
	} else
		indexText = store.getTiddlerText(storageField);

	// find the line in the index which describes the tiddler, if present
	var indexLineRegExp = config.macros.itemMenu.getIndexLineRegExp(this.title),
	    indexMatch      = indexLineRegExp.exec(indexText);

	return indexMatch ? parseInt(indexMatch[1]) : undefined;
};
Tiddler.prototype.setRawSData = function(fieldName,value)
{
	fieldName = fieldName || config.macros.itemMenu.defaultField;

	// reduced version of store.setValue(this,fieldName,value) for SData
	TiddlyWiki.checkFieldName(fieldName);
	fieldName = fieldName.toLowerCase();
	if(TiddlyWiki.standardFieldAccess[fieldName])
		return;

	if(this.fields[fieldName] == value)
		return;
	this.fields[fieldName] = ""+value; // as a String, only string values are stored

	store.setDirty(true);
};
Tiddler.prototype.updateSIndex = function(indexText,value)
{
	// find the line in the index which describes the tiddler, if present
	var indexLineRegExp = config.macros.itemMenu.getIndexLineRegExp(this.title),
	    indexMatch      = indexLineRegExp.exec(indexText);

	var newIndexLine = config.macros.itemMenu.createIndexLine(this.title,value);
	if(indexMatch)
		indexText = indexText.replace(indexLineRegExp,newIndexLine);
	else
		indexText += (newIndexLine+"\n");
	return indexText;
};
Tiddler.prototype.setSCounter = function(fieldName,value)
{
	var storageData  = this.getSCounterPlace(fieldName),
	    storageName  = storageData.storageName,
	    storageField = storageData.fieldName,
	    indexText;

	if(!this.getIncludeURL || !this.getIncludeURL()) {
		this.setRawSData(storageField,value);
		return;
	};

	// for included tiddlers use a separate tiddler as a stored index
	// for orderField@@tiddlerName syntax, use the storageName tiddler
	//  for storage, otherwise use the fieldName tiddler
	var indexTid = store.fetchTiddler(storageName || fieldName);
	if(!indexTid)
		indexTid = store.createTiddler(storageName || fieldName);

	if(storageName) {
		indexText = indexTid.getRawSData(storageField) || "";
		indexText = this.updateSIndex(indexText,value);
		indexTid.setRawSData(storageField,indexText);
	} else
		indexTid.text = this.updateSIndex(indexTid.text,value);
};
Tiddler.prototype.deleteSCounter = function(fieldName)
{
	fieldName = fieldName.toLowerCase();
	if(TiddlyWiki.standardFieldAccess[fieldName])
		return; // use of StandardFields is unlikely, but don't remove them anyway

	if(this.getSCounter(fieldName) !== undefined)
		delete this.fields[fieldName];
};
// --------------------------------------------------------------------------------

TiddlyWiki.prototype.saveModifiedTiddler = function(title, newTitle, newBody, tags, fields, clearChangeCount, created, creator) {
	var tidBeingChanged = (title instanceof Tiddler) ? title : this.fetchTiddler(title);
	title = tidBeingChanged.title;
	var conflictingTiddler = this.fetchTiddler(newTitle) || this.fetchTiddler(title);
	if(conflictingTiddler &amp;&amp; conflictingTiddler != tidBeingChanged)
		if(!confirm("A tiddler named \""+title+"\" already exists. Do you want to overwrite it?"))
			return;

	return this.saveTiddler(title,newTitle,newBody,
		config.options.txtUserName,
		new Date(),
	  tags,fields,clearChangeCount,created,creator)
};

var preventOtherHandling = window.preventOtherHandling = function(e)
{
	// prevent propagation
	if (e.stopPropagation)
		e.stopPropagation();
	e.cancelBubble = true;

	// prevent browser action from firing
	if(e.preventDefault)
		e.preventDefault();
	e.returnValue = false;
	// see https://learn.javascript.ru/default-browser-action
}

// helps to avoid popup closing on event
var wrapNoClose = window.wrapNoClose = function(func)
{
	return function(ev)
	{
		if(func) func.apply(this,arguments);

		var e = ev || window.event; // support old IE
		if(!e)
			return false;

		preventOtherHandling(e);
	};
};

// helps to make the height of textareas appropriate (a working prototype)
//#  defaultHeight should be calced as a height of one line;
//#  maxHeight - not more than 1/2 or 3/4 of the screen
//#  also, better to get rid of shrinking scrollbar..
var adjustHeightToContent = function()
{
	var defaultHeight = 30;
	var maxHeight = 400;
	jQuery(this).height(defaultHeight);
	jQuery(this).height(Math.min(this.scrollHeight , maxHeight));
};

// --------------------------------------------------------------------------------
// constants for using with jQuery .which()
var $tab =	9,
    $enter =	13,
    $esc =	27,
    $delete =	46,
    $home =	36,
    $end =	35,
    $up =	38,
    $down =	40,
    $pgUp =     33,
    $pgDn =     34,
    $plus =	61,
    $r =	82,
    $e =	69,
    $t =	84,
    $i =	73,
    $x =	88;

// --------------------------------------------------------------------------------
// detecting touch-screens (see http://stackoverflow.com/a/4819886/3995261)
window.isOpenedOnTouchScreen = function()
{
	return !!('ontouchstart' in this);
}
//}}}
//{{{
config.macros.itemMenu =
{
	getIndexLineRegExp: function(tiddlerName) {
		return new RegExp(tiddlerName.escapeRegExp() + ": ([0-9]+)");
	},
	createIndexLine: function(tiddlerName, value) {
		return tiddlerName+": "+value;
	},
	defaultField: "orderCounter",
	itemMenuClass: "listMenuButton",
	sortByCounter: function(tiddlerArray, fieldName)
	{
		var defaultValue = -1; // undefinedUp (1000 for undefinedDown)
		return tiddlerArray.sort(function(t1,t2){
			var c1 = t1.getSCounter(fieldName), c2 = t2.getSCounter(fieldName);
			c1 = (!c1 &amp;&amp; c1 != 0) ? defaultValue : c1;
			c2 = (!c2 &amp;&amp; c2 != 0) ? defaultValue : c2;
			return  c1 - c2;
		});
	},

	currentlyDragged: [],
	setCurrentlyDragged: function(tidName,sortField,dropAction,itemMenuElement,
					onKeyDown,onKeyUp)
	{
		this.currentlyDragged.push({
			name:		 tidName,
			field:		 sortField,
			dropAction:	 dropAction,
			itemMenuElement: itemMenuElement,
			onKeyDown:	 onKeyDown,
			onKeyUp:	 onKeyUp
		});

		if(itemMenuElement) {
			jQuery(itemMenuElement).bind("keyup",onKeyUp);
			jQuery(itemMenuElement).bind("keydown",onKeyDown);
		}
	},
	clearCurrentlyDragged: function()
	{
		if(!this.currentlyDragged[0]) return;
		var i, context, upHandler, downHandler;
		for(i = 0; i &lt; this.currentlyDragged.length; i++)
		{
			context = this.currentlyDragged[i];
			upHandler = context.onKeyUp;
			downHandler = context.onKeyDown;

			if(!context.itemMenuElement) continue;

			if(downHandler)
			    jQuery(context.itemMenuElement).unbind("keydown",downHandler);
			if(upHandler)
			    jQuery(context.itemMenuElement).unbind("keyup",upHandler);
		}
		this.currentlyDragged = [];

		jQuery(".buttonSortState").parent().parent().removeClass("selected");
		//# check if /\ grandparent is &lt;tr&gt; and remove only in that case
		jQuery(".buttonSortState").removeClass("buttonSortState");
	},
	getCurrentlyDragged: function() {
	//# for now, works only with the first selection (if multiple)
		return this.currentlyDragged[0] ? this.currentlyDragged[0].name : null;
	},
	getCurrentSourceListContext: function() {
	//# for now, works only with the first selection (if multiple)
		return this.currentlyDragged[0];
	},
	markSelected: function(itemMenu)
	{
		if(!itemMenu) return;
		jQuery(itemMenu).addClass("buttonSortState").focus();
		if(itemMenu.parentElement.tagName.toLowerCase() == "td")
			jQuery(itemMenu).parent().parent().addClass("selected");
	},
	ensureFocusOnCurrentlyDragged: function()
	{
		var currentlyDragged = this.getCurrentSourceListContext();
console.log("currentlyDragged:");console.log(currentlyDragged);
		if(!currentlyDragged) return;

		var itemMenu = currentlyDragged.itemMenuElement;
		// because of refreshing, itemMenu can be no longer attached to the ~root
		// element (document? html?). If that's the case, find the new one
		var newItemMenu, itemMenus = jQuery("."+this.itemMenuClass+
			'[filter=\''+itemMenu.getAttribute("filter")+'\']')
			.each(function(i,el){
				if(el.tiddler == itemMenu.tiddler)
					newItemMenu = el;
			});
		if(newItemMenu != itemMenu) {
			// remember actual element, reattach onkeyup, onkeydown handlers
			currentlyDragged.itemMenuElement = newItemMenu;
			jQuery(newItemMenu).bind("keyup",currentlyDragged.onKeyUp);
			jQuery(newItemMenu).bind("keydown",currentlyDragged.onKeyDown);
		}
		this.markSelected(newItemMenu);
	},

	actionStepsWithArguments: {},
	actionStepsWithoutArguments: {},
	applyActionStep: function(tiddler, actionStep, rootElement)
	{
		var actionRegExp = /(.\w+)\.\.(.*)/,
		    match = actionRegExp.exec(actionStep),
		    actionStepName;

		if(match) { // action with an argument
			for(actionStepName in this.actionStepsWithArguments)
				if(actionStepName == match[1])
					return this.actionStepsWithArguments[actionStepName](tiddler,match[2],rootElement);
			//# may be throw an error/warning?
			return;
		} else      // actionStep without arguments
			for(actionStepName in this.actionStepsWithoutArguments)
				if(actionStepName == actionStep)
					return this.actionStepsWithoutArguments[actionStepName](tiddler,rootElement);

		//# may be throw an error/warning?
		return;
	},
	parseAndApplyAction: function(tiddler, actionLine, rootElement, noNotify)
	{
		if(!tiddler || !actionLine)
			return;
		var actionStepsArray = actionLine.split(",,");

		for(var i = 0; i &lt; actionStepsArray.length; i++)
			this.applyActionStep(tiddler,jQuery.trim(actionStepsArray[i]), rootElement);

		if(!noNotify)
			store.notify(tiddler.title,true);
	},
	parseAndSeparateActions: function(actionsLine)
	{
		var actionsArray = actionsLine.split(";;");
		if(actionsArray.length == 1 &amp;&amp; !actionsArray[0].contains("::"))
			return jQuery.trim(actionsArray[0]);

		var actionMap = {},
		    name_and_action_RegExp = /(.+?)::(.*)/, match;
		for(var i = 0; i &lt; actionsArray.length; i++)
		{
			match = name_and_action_RegExp.exec(actionsArray[i]);
			if(!match || !match[1] || !match[2])
				//# may be throw an error/warning?
				continue;
			actionMap[jQuery.trim(match[1])] = jQuery.trim(match[2]);
			actionMap["default"] = actionMap["default"] || jQuery.trim(match[2]);
		}
		return actionMap;
	},

	// moving helpers
	checkCounters: function(filter,field)
	{
		var tids = store.filterTiddlers(filter);
		tids = this.sortByCounter(tids, field);
	
		for(var i = 0; i &lt; tids.length; i++)
			tids[i].setSCounter(field,i);

		return tids;
	},
	moveToArbitraryPlace: function(filter,tiddler,field,index,doCycle)
	{
		var tids     = this.checkCounters(filter,field), i,
		    tidIndex = tids.indexOf(tiddler),
		    tidsNum  = tids.length;

		// parse "top"/"bottom" values
		index = (index == "top") ? 0 : (index == "bottom" ? tidsNum-1 : index);
		if(doCycle) {
			index = index % tidsNum;
			index = (index &lt; 0) ? (index + tidsNum) : index;
		}
		// do nothing in cases.. ("tidIndex &lt; 0" = "tiddler is not in the list")
		if(tidIndex == index || tidIndex &lt; 0 || index &lt; 0 || index &gt;= tids.length)
			return;

		// move items
		tiddler.setSCounter(field,index);
		if(tidIndex &gt; index)
			for(i = index; i &lt; tidIndex; i++)
				tids[i].setSCounter(field,i+1);
		else
			for(i = index; i &gt; tidIndex; i--)
				tids[i].setSCounter(field,i-1);

		// refresh the list (order)
		store.notify(field,true);
// ~200 ms for notifying / in which browser?
	},
	moveToTop: function(filter,tiddler,field)
		{ this.moveToArbitraryPlace(filter,tiddler,field,"top"); },
	moveToBottom: function(filter,tiddler,field)
		{ this.moveToArbitraryPlace(filter,tiddler,field,"bottom"); },

	// syntax: &lt;&lt;itemMenu tiddlerName filter field:fieldName addAction:actionSyntax
	//		dropAction:actionSyntax switchActions:actionsSyntax&gt;&gt;
	handler: function(place,macroName,params,wikifier,paramString,tiddler)
	{
		// parse params: tiddlerName, context filter; field, noConflicts
		var pParams = paramString.parseParams("pP",null,true,false,true),
		    tName   = pParams[0]["pP"][0], // name of the tid governed by itemMenu
		    tid     = store.fetchTiddler(tName),
		    filter  = pParams[0]["pP"][1], // tids among which the sorting is done
		    field   = getParam(pParams,"field",this.defaultField), // field which holds the counter value
		    addAction     = getParam(pParams,"addAction",""),     // 
		    dropAction    = getParam(pParams,"dropAction",""),    // 
		    switchActions = getParam(pParams,"switchActions",""); // 

		var cmi = config.macros.itemMenu; // shortcut

		var serapartedSwitchActions = this.parseAndSeparateActions(switchActions);

		var checkCounters = function()
			{ return cmi.checkCounters(filter,field); };
		
		// selecting/rearranging helpers
		var cancelSelection = function()
		{
			cmi.clearCurrentlyDragged();
			Popup.remove(); // close the popup, including on esc
		};
		var getSelected = function()
		{
			// get currently "dragged" itemMenu element
			var draggedContext = cmi.getCurrentSourceListContext();
			return draggedContext ? draggedContext.itemMenuElement : null;
		};
		// jQuery of itemMenu elements with the same filter
		var getJMenus = function()
		{
			return jQuery("."+cmi.itemMenuClass+"[filter='"+filter+"']");
		};
		var reselectByIndex = function(jMenus,index) // jMenus is "jQuery(menus)"
		{
			var menuToSelect = jMenus[index];
			if(!menuToSelect) return;

			cancelSelection();

			// select (focus is needed for keyboard events to fire)
			jQuery(menuToSelect).focus().click();
console.log("click generated in reselectByIndex");

			//# may be optimize the two previous steps (do reselection directly)
		};
		var selectNext = function()
		{
			var itemMenu = getSelected();
			if(!itemMenu) return;

			// other item menus, found by the same filter
			var menus = getJMenus(),
			    currentIndex = menus.index(itemMenu);
			reselectByIndex(menus,currentIndex+1);
		};
		var selectPrev = function()
		{
			var itemMenu = getSelected();
			if(!itemMenu) return;

			// other item menus, found by the same filter
			var menus = getJMenus(),
			    currentIndex = menus.index(itemMenu);
			reselectByIndex(menus,currentIndex-1);
		};
		var selectNeighbour = function()
		{
			var itemMenu = getSelected();
			if(!itemMenu) return;

			// other item menus, found by the same filter
			var menus = getJMenus(),
			    currentIndex = menus.index(itemMenu);
			if(currentIndex &gt; 0)
				reselectByIndex(menus,currentIndex-1);
			else
				reselectByIndex(menus,currentIndex+1);

			// returns true when successfully selected another item
			return getSelected() != itemMenu;
		};
		var selectFirst = function()
		{
			// other item menus, found by the same filter
			var menus = getJMenus();
			reselectByIndex(menus,0);
		};
		var selectLast = function()
		{
			// other item menus, found by the same filter
			var menus = getJMenus();
			reselectByIndex(menus,menus.length-1);
		};
		var moveDown = function(doReselect)
		{
			var tids = checkCounters(), i = tids.indexOf(tid);
			if(i &lt; 0) return; // not among tids
			if(i &gt;= tids.length-1) // out of boundaries
				return doReselect ? "" : cancelSelection();

			// make the switch with the neighbour
			tids[i].setSCounter(field,i+1);
			tids[i+1].setSCounter(field,i);

			// refresh the list (order)
			store.notify(field,true);
			//# try to avoid extra refreshing on long press down

			if(doReselect) reselectByIndex(getJMenus(),i+1);
		};
		var moveUp = function(doReselect)
		{
			var tids = checkCounters(), i = tids.indexOf(tid);
			if(i &lt; 0) return; // not among tids
			if(i &lt;= 0) // out of boundaries
				return doReselect ? "" : cancelSelection();

			// make the switch with the neighbour
			tids[i].setSCounter(field,i-1);
			tids[i-1].setSCounter(field,i);

			// refresh the list (order)
			store.notify(field,true);

			if(doReselect) reselectByIndex(getJMenus(),i-1);
		};
		var moveToTop = function(doReselect)
		{
			cmi.moveToTop(filter,tid,field);
			if(doReselect) reselectByIndex(getJMenus(),0);
		};
		var moveToBottom = function(doReselect)
		{
			cmi.moveToBottom(filter,tid,field);
			var menus = getJMenus();
			if(doReselect) reselectByIndex(menus,menus.length-1);
		};
		var moveToArbitraryPlace = function(movingTidName, above)
		{ // filter, targetTidName is got via enclosure
			var tids = checkCounters(),
			    movingTid = store.fetchTiddler(movingTidName),
			    targetTid = store.fetchTiddler(tName),
			    movingInd = tids.indexOf(movingTid),
			    targetInd = tids.indexOf(targetTid),
			    index = targetInd + ((movingInd &gt; targetInd) ? (above ? 0 : 1) : (above ? -1 : 0));
			cmi.moveToArbitraryPlace(filter,movingTid,field, index);
		};
		var onClickItemMenu = wrapNoClose(function(e)
		{
			if(!cmi.getCurrentlyDragged())		// ~drag
			{
				clearMessage(); // useful on smartphones

				// open the popup menu:
				var manageButton = this;
				var popup = Popup.create(this);
				jQuery(popup).addClass("itemMenu");
				// then, add buttons there:

				// the "cancel selection" button
				createTiddlyButton(popup,"","cancel selection",
					cancelSelection,"cancelSelectionButton button");

				// switch action(s) button
				var createActionButtonInPopup = function(place,actionName)
				{
					var li = createTiddlyElement(place,"li"),
					    action = serapartedSwitchActions[actionName];

					createTiddlyButton(li,actionName,"",function(){
						cmi.parseAndApplyAction(tid,action,this);
						cancelSelection();
					},"listedDoActionButton button");
				};
				var bringActions = wrapNoClose(function() {
					if(serapartedSwitchActions["default"])
					{
						// named actions
						var dPopup = Popup.create(this), li, actName;
						for(actName in serapartedSwitchActions) {
							if(actName == "default")
								continue;
							createActionButtonInPopup(dPopup, actName);
						}
						Popup.show("bottom","left");
					} else { // single unnamed action is defined
						cmi.parseAndApplyAction(tid,switchActions, this);
						cancelSelection();
					}

					cmi.clearCurrentlyDragged();
					// no class removing since refreshing is applied
				});
				if(serapartedSwitchActions &amp;&amp; tid)
					createTiddlyButton(popup,"","drop this item",
						bringActions,"doActionButton button");

				// tag toggler
				var macroText = "&lt;&lt;tagToggler [["+tName+"]] \"\"&gt;&gt;";
				wikify(macroText, popup);
				var tagButton = popup.lastChild,
				    startTagToggling = function() {
					jQuery(tagButton).click();
console.log("click generated in startTagToggling");
				    };

				// the "info" button
				var showTiddlerInfo = wrapNoClose(function(){
					var infoPopup = Popup.create(popup);
					createTiddlyText(infoPopup,"references:");
					config.commands.references.handlePopup(infoPopup, tid.title);
					Popup.show("bottom","left");
					return false;
				});
				createTiddlyButton(popup,"","tiddler info", showTiddlerInfo,"tiddlerInfoButton button");

				// the "rename" button
				var startRenaming = wrapNoClose(function(){
					var renamePopup = Popup.create(popup),
					    li = createTiddlyElement(renamePopup,"li"),
					    initTitle = tid.title,
					    nameField = createTiddlyElement(li,"textarea",null,"nameInput"),
					    changeName = function(doSave,goOnSelected)
					    {
					       var newTitle = jQuery.trim(nameField.value);
					       store.saveModifiedTiddler(initTitle,newTitle);
					       story.refreshTiddler(tid.title,null,true);
					       if(doSave) autoSaveChanges();
					       if(!goOnSelected)
							cancelSelection();
					       else
							cmi.ensureFocusOnCurrentlyDragged();
					    };

					nameField.value = tid.title;
					createTiddlyButton(li,"rename","rename \""+tid.title
						+"\"",changeName,"button renameButton");
					nameField.onclick = wrapNoClose(); // prevent popup closing
					// press enter to apply or esc to exit
					// (shift and ctrl are also taken into account)
					nameField.onkeydown = function(ev)
					{
						var e = ev || window.event;
						if(e.which == $enter) {
							changeName(e.ctrlKey,e.shiftKey);
							Popup.remove(1); // renamePopup only

							window.preventOtherHandling(e);
						}
						if(e.which == $esc) {
						    if(e.shiftKey) {
							cmi.ensureFocusOnCurrentlyDragged();
							Popup.remove(1);
							window.preventOtherHandling(e);
						    } else
							cancelSelection();
						}
					};

					Popup.show("bottom","left");
					nameField.focus(); // put the cursor inside the name edit area
				});
				createTiddlyButton(popup,"","rename this tiddler", startRenaming,"renameTiddlerButton button");

				// the "edit text" button
				var startEditing = wrapNoClose(function()
				{
					var textEditPopup = Popup.create(popup),
					    li = createTiddlyElement(textEditPopup,"li"),
					    textField = createTiddlyElement(li,"textarea",null,"ttextInput"),
					    changeText = function(e)
					    // e is either click or keydown (enter) event
					    {
						var goOnSelected = e.shiftKey;
						tid.set(null,textField.value);
						store.saveModifiedTiddler(tid);
						story.refreshTiddler(tid.title,null,true);
						autoSaveChanges();
						if(goOnSelected)
							cmi.ensureFocusOnCurrentlyDragged();
						else
							cancelSelection();
					    };


					textField.value = tid.text;
					// change the width of the popup and hence of {{{textField}}}
					textEditPopup.style.width = "100%";
					createTiddlyButton(li,"save","save the text of \""+
								tid.title+"\"",changeText,
								"button saveTextButton");
					textField.onclick = wrapNoClose(); // prevent popup closing
					// press enter to apply or esc to exit
					// (shift and ctrl are also taken into account)
					textField.onkeydown = function(ev)
					{
						var e = ev || window.event;
						if(e.ctrlKey &amp;&amp; e.which == $enter) {
							changeText(e);
							Popup.remove(1); //textEditPopup only

							window.preventOtherHandling(e);
						}
						if(e.which == $esc) {
						    if(e.shiftKey) {
							cmi.ensureFocusOnCurrentlyDragged();
							Popup.remove(1);
							window.preventOtherHandling(e);
						    } else {
							Popup.remove();
							cancelSelection();
						    }
						}
					};
					textField.onkeypress = function(e)
					{
						adjustHeightToContent.apply(this);
						// avoid firing of story.onTiddlerKeyPress
						if(e.which == $enter) {
							if(e.stopPropagation)
								e.stopPropagation();
							e.cancelBubble = true;
						}
						// don't return false to insert linebreaks
						// on enter (when typing)
					}

					Popup.show("bottom","left");
					adjustHeightToContent.apply(textField);
					textField.focus(); // put the cursor inside the text edit area
				});
				createTiddlyButton(popup,"","edit the tiddler text",
					startEditing,"editTiddlerTextButton button");

				// the "open" button
				var i = getTiddlyLinkInfo(tName,"openTiddlerButton button"),
				    openTiddler = function(e) {
					onClickTiddlerLink(e);
					cancelSelection();
				    },
				    openButton = createTiddlyButton(popup,"","open "+tName,
					openTiddler,i.classes,null,null,{
						refresh: "link", tiddlyLink: tName
					}), // see createTiddlyLink source
				    clickOpenTiddler = function(){
					jQuery(openButton).click();
console.log("click generated in clickOpenTiddler");
				    };

				// "add" button
				var cma = config.macros.addTiddler;
				if(cma &amp;&amp; addAction) {
					var btn = createTiddlyButton(popup,"",
						"add tiddler here",cma.onClick,
						"addTiddlerButton button"),
					    currentIndex = getJMenus().index(this);
					btn.params = { title:"", text:"", commonTags:[],
						addAction:	addAction,
						orderCounter:	field,
						orderFilter:	filter,
						orderMode:	currentIndex+1
					}
					var addTiddler = function() {
 						jQuery(btn).click();
					};
				}

				// the "delete" button
				var confirmDeleteMsg = config.commands.deleteTiddler.warning,
				    deleteTiddler = function(e,goOnSelected)
				    {
					if(e) // on click
						goOnSelected = goOnSelected || e.shiftKey;
					if(confirm(confirmDeleteMsg.format([tName]))) {
						if(goOnSelected)
							goOnSelected = selectNeighbour();
						  // if no neighbour, nothing to reselect
						store.removeTiddler(tName);
						autoSaveChanges();
					}
					if(goOnSelected)
						cmi.ensureFocusOnCurrentlyDragged();
					else
						cancelSelection();
				    };
				createTiddlyButton(popup,"","delete this tiddler",
					deleteTiddler,"deleteTiddlerButton button");

				// support keyboard
				//  keypress ignores "delete", arrows etc, hence keydown
				var onKeyDownItemMenu = function(e) {
					switch(e.which) {
						case $enter: clickOpenTiddler();break;
						case $down:
							if(e.ctrlKey) moveDown(true);
							else selectNext();
							break;
						case $up:
							if(e.ctrlKey) moveUp(true);
							else selectPrev();
							break;
						case $home:
							if(e.ctrlKey) moveToTop(true);
							else selectFirst();
							break;
						case $end:
							if(e.ctrlKey) moveToBottom(true);
							else selectLast();
							break;
						case $esc:
						// onkeydown here, because onkeyup ~can't be
						// prevented from ~propagation in subpopups
							if(!e.shiftKey)
								cancelSelection();
							else
								//for the info and tag popups
								Popup.remove(1);
							break;
						
//# add keyboard support for moving to the beginning/end (ctrl+)"Home"/"End"
					}
					// allow browser tab switching
					if(e.which != $tab || !e.ctrlKey)
						return false;
				};
				var onKeyUpItemMenu = function(e) {
					switch(e.which) {
						case $i:  showTiddlerInfo();	break;
						case $r:  startRenaming();	break;
						case $e:  startEditing();	break;
						case $t:  startTagToggling();	break;
						case $plus:
							if(cma &amp;&amp; addAction)
								addTiddler(e);
						break;
						case $delete: case $x:
							// tries to reselect if e.shiftKey!
							deleteTiddler(null,e.shiftKey);
						break;
						
//# add keyboard support for actions D[A?]
					}
					return false;
				};

				cmi.setCurrentlyDragged(tName, field, dropAction, this, onKeyDownItemMenu, onKeyUpItemMenu);
				cmi.markSelected(this);

/*# create array of { handler: .. ,  label: .. , activationKeys: .. }
    and try to make button creation, keyboard support "for each ..", extendable set of .. */

				Popup.show("top","right");
jQuery(popup).addClass("hide");
			} else {				// ~drop
				// if taken from another list, the item must be changed by the drop+add actions
				var dragListContext = cmi.getCurrentSourceListContext(),
				    dropActionNow = dragListContext.dropAction,
/* not 100% accurate */		    sameList = (dropActionNow == dropAction) &amp;&amp; (dragListContext.field == field),
					dropFromOtherList = !sameList &amp;&amp; (dropActionNow || addAction),
					dropAndAddAction = (dropActionNow &amp;&amp; addAction) ?
						(dropActionNow+",,"+addAction)
						: (dropActionNow || addAction);

				if(dropFromOtherList)
				{
					var draggedTid = store.fetchTiddler(cmi.getCurrentlyDragged());
					cmi.parseAndApplyAction(draggedTid,dropAndAddAction);
					draggedTid.deleteSCounter(dragListContext.field);
				}

				// move the item
				Popup.remove(); // close the popup
				if(cmi.getCurrentlyDragged() == tName) {
					jQuery(this).removeClass("buttonSortState");
					moveDown(); // on drop-on-self
				} else
					moveToArbitraryPlace(cmi.getCurrentlyDragged(),true);
					// refreshing removes the "buttonSortState" class
				cmi.clearCurrentlyDragged();
			}
		});

		// create the 2 sets of classes for the button and for the table row
		// (if itemMenu is inside a td element) based on the tiddler's tags
		var itemMenuClasses = this.itemMenuClass,
		    rowClasses = "",
		    badSymbolsRE = /[\.,;:`!@#\$%\^&amp;\*\(\)\+=\[\]\{\}\|\\/'"~ ]/g;
		for(var i = 0 ; tid &amp;&amp; i &lt; tid.tags.length ; i++) {
			// process each tag: substitute spaces and symbols .,;:!'"()[]{}=+\|/*&amp;^%$#@`~ with "_"
			itemMenuClasses += " marker_"+ tid.tags[i].replace(badSymbolsRE,"_");
			rowClasses += "line_"+ tid.tags[i].replace(badSymbolsRE,"_")+" ";
		}

		// create the button(s) // text is set via CSS
		var btn = createTiddlyButton(place,"","",onClickItemMenu,itemMenuClasses);
		btn.setAttribute("filter",filter);
		btn.tiddler = tid;

		// in table, add the line_className classes based on the tiddler's tags
		if(place.tagName.toLowerCase() == "td")
			jQuery(place).parent().addClass(rowClasses);
	}
}

// define the actions
  // add tag
config.macros.itemMenu.actionStepsWithArguments["+tag"] = function(tiddler,tag)
{
	if(!tiddler.isTagged(tag)) {
		tiddler.tags.push(tag);
		tiddler.modifier = config.options.txtUserName;
		tiddler.modified = new Date();
	}
};
  // remove tag
config.macros.itemMenu.actionStepsWithArguments["-tag"] = function(tiddler,tag)
{
	if(tiddler.isTagged(tag)) {
		tiddler.tags.splice(tiddler.tags.indexOf(tag),1);
		tiddler.modifier = config.options.txtUserName;
		tiddler.modified = new Date();
	}
};
  // toggle tag
config.macros.itemMenu.actionStepsWithArguments["!tag"] = function(tiddler,tag)
{
	if(tiddler.isTagged(tag))
		tiddler.tags.splice(tiddler.tags.indexOf(tag),1);
	else
		tiddler.tags.push(tag);
	tiddler.modifier = config.options.txtUserName;
	tiddler.modified = new Date();
};
  // set field
config.macros.itemMenu.actionStepsWithArguments["setField"] = function(tiddler,argument)
{
	var argRE = /(\w+)\.\.(.*)/, argMatch = argRE.exec(argument);
	if(!argMatch) return;
	var field = argMatch[1], value = argMatch[2];
	value = value || null; // to remove the field if empty

	store.setValue(tiddler,field,value,true);
};
  // delete field
config.macros.itemMenu.actionStepsWithArguments["deleteField"] = function(tiddler,argument)
{
	store.setValue(tiddler,argument,null,true);
};
//config.macros.itemMenu.actionStepsWithArguments["&lt;name&gt;"] = function(tiddler,arg) {
//};
  // save changes
config.macros.itemMenu.actionStepsWithoutArguments["save"] = function() {
	saveChanges();
};
config.macros.itemMenu.actionStepsWithoutArguments["delete"] = function(tiddler) {
	var confirmDeleteMsg = config.commands.deleteTiddler.warning;
	if(confirm(confirmDeleteMsg.format([tiddler.name])))
	{
		store.removeTiddler(tiddler.title);
		autoSaveChanges();
	}
};
//config.macros.itemMenu.actionStepsWithoutArguments["&lt;name&gt;"] = function(tiddler) {
//};

// implement the styling
var iMenuClass = config.macros.itemMenu.itemMenuClass;
config.shadowTiddlers["StyleSheetManualSorter"] = "/*{{{*/\n"+
	".editTTextItem  { width: 100% }\n"+
	".ttextInput     { width:  99%; margin-right: 0.5%; margin-left: 0.5%; }\n\n"+

	"."+iMenuClass+"               { color: inherit; font-weight: bold; }\n"+
	"."+iMenuClass+":hover         { background-color: inherit; color: green; }\n"+ // use ColorPalette?
	"."+iMenuClass+":before        { content: \"⊙\"; }\n"+
	".cancelSelectionButton:before { content: \"⊗\"; }\n"+
	".doActionButton:before        { content: \"D\"; }\n"+
	".tiddlerInfoButton:before     { content: \"I\"; }\n"+
	".renameTiddlerButton:before   { content: \"R\"; }\n"+
	".editTiddlerTextButton:before { content: \"E\"; }\n"+
	".openTiddlerButton:before     { content: \"O\"; font-weight: normal; }\n"+
	".addTiddlerButton:before      { content: \"+\"; }\n"+
	".deleteTiddlerButton:before   { content: \"X\"; }\n"+
	".itemMenu .tagTogglerButton:before { content: \"T\"; }\n"+
	".itemMenu .button                  { padding-left: 0.25em; padding-right: 0.25em; }\n"+
	".buttonSortState:hover,\n"+
	".buttonSortState { background-color: inherit; color: #00B000; }\n"+
	// for "lists" with buttons as "markers" (using tables)
	".tableList,\n"+
	".tableList &gt; tbody,\n"+
	".tableList &gt; tbody &gt; tr,\n"+
	".tableList &gt; tbody &gt; tr &gt; td,\n"+
	".tableList .button { border: none !important; }\n"+
	".tableList td            { vertical-align: top; padding: 0px 3px; }\n"+
	".tableList ul,\n"+
	".tableList ol,\n"+
	"li .tableList,\n"+
	".tableList .tableList    { margin: 0; }\n"+
	".tableList &gt; tbody &gt; .selected { background-color: #ddddff; }\n\n"+

	// full width of table with minimal width of the first column
	".tableList { width: calc(100% - 2em); }\n"+ // 2em of margins on both sides
	".tableList &gt; tbody &gt; tr &gt; td:first-child { width: 1px; }\n"+
	/* is some cases
	 *	.tableList td { width: 1px; }
	 *	.tableList td:last-child { width: 100%; }
	 * would be more suitable */
	"/*}}}*/";
store.addNotification("StyleSheetManualSorter", refreshStyles);
//}}}
/***
!!!Tagging helpers and tagToggler macro
***/
//{{{
config.filters.existingTags = function(results,match)
{
	var allTags = store.getTags();
	for(var i = 0; i &lt; allTags.length; i++)
		allTags[i] = allTags[i][0];

	if(match[3] == "-") {
		for(i = 0; i &lt; results.length; i++)
			if(!allTags.contains(results[i].title))
				results.splice(i--,1);
		return results;
	}

	for(var i = 0; i &lt; allTags.length; i++)
		allTags[i] = store.fetchTiddler(allTags[i]) || new Tiddler(allTags[i]);

	// default action: add all the tags
	for(i = 0; i &lt; allTags.length; i++)
		results.pushUnique(allTags[i]);
	return results;
};

config.filters.tagging = function(results,match)
{
	var prefix = match[3].substr(0,1), title = match[3].substr(1), tid = store.fetchTiddler(title),
	    tagging = [], notTagging = [];

	if(!tid)
		return [];
//# this behaviour may be changed after some testing

	for(var i = 0; i &lt; results.length; i++)
		if(tid.tags.contains(results[i].title))
			tagging.push(results[i]);
		else
			notTagging.push(results[i]);

	switch(prefix) {
		case "&gt;":
			return tagging.concat(notTagging)
		case "&lt;":
			return notTagging.concat(tagging)
		case "+":
			return tagging
		case "-":
			return notTagging
	}
	displayMessage("Warning: the \"tagging\" filter must be used with one of the prefixes +, -, &gt; or &lt;, which is not the case.");
// use cookie to decide whether to suppress the message?
	return results;
};

config.macros.tagToggler = {};
config.macros.tagToggler.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	// parse params
	var pParams = paramString.parseParams("pParams",null,true,false,true),
	    tid     = store.fetchTiddler(pParams[0]["pParams"][0]) || tiddler; // tid. which tags will be toggled
	if(!tid) return;

	var label = pParams[0]["pParams"][1];
	if(label == "." || label == undefined)
		label = "toggle tags";

	var tooltip = getParam(pParams,"tooltip","toggle tags of "+tid.title),
	    doAutoSave = params.contains('doAutoSave') || false,
	    tagsSet = getParam(pParams,"tags","[existingTags[+]] [tagging[&gt;"+tid.title+"]]");

	// for compability with SetManagerPlugin
	var cmi = config.macros.itemMenu,
	    clearSelected = function()
	    {
		if(cmi) cmi.clearCurrentlyDragged();
	    },
	    returnItemMenuSelection = function()
	    {
		if(cmi) cmi.ensureFocusOnCurrentlyDragged();
	    };

	var whereToScroll;
	var toggleTag = function(tid,tag,refreshTagListIfNotClosing)
	{
		if(tid.isTagged(tag))
			tid.tags.splice(tid.tags.indexOf(tag),1);
		else
			tid.tags.push(tag);

		if(refreshTagListIfNotClosing) return refreshTagListIfNotClosing();
		
		store.saveModifiedTiddler(tid);
		story.refreshTiddler(tid.title,null,true);
		if(doAutoSave)
			autoSaveChanges();
		
		if(whereToScroll)
			window.scrollTo(0,ensureVisible(whereToScroll));
		clearSelected();
	};

	// define the onclick handlers
	var onTagClick = wrapNoClose(function(e)
	{
		var tag = this.getAttribute("tag"),
		    shiftWasHold = (e || window.event).shiftKey;
		toggleTag(tid,tag,shiftWasHold ? this.refreshTagList : null);
		return false;
	});
	var onClick = wrapNoClose(function()
	{
		// form the list of the tags to choose from, all tags to start somewhere
		var availableTags = [],
		    allTags = store.getTags(),
		    noTagsMsg = "No tags found by the provided criterion";
		for(var i = 0; i &lt; allTags.length; i++)
			availableTags.push(allTags[i][0]);

		// build the list of tags and labels
		var tagsToWorkWith = store.filterTiddlers(tagsSet);
		for(i = 0; i &lt; tagsToWorkWith.length; i++)
			tagsToWorkWith[i] = tagsToWorkWith[i].title;
		var menuTags = [], menuLabels = [], menuItems = [], t;
		for(i = 0; i &lt; tagsToWorkWith.length; i++) {
			t = tagsToWorkWith[i];
			menuItems.push({
				tag: t,
				label: t // '[x] ' or '[ ] ' addition is now defined via css
			})
		}

		// create the popup menu
		var popup = Popup.create(this), li, tagButton;

		// arbitrary tag toggler
		li = createTiddlyElement(popup,"li");
		var newTagField = createTiddlyElement(li,"input",null,"newTagInput",{type:"text"});
		newTagField.onclick = wrapNoClose(); // prevent the popup from closing on click here

		var selectedTagIndex = 0, // 0 means "not selected"
		    selectNextTag = function()
		    {
			var nextListItem = popup.childNodes[selectedTagIndex+1];
			if(!nextListItem) return // out of boundaries, won't move

			jQuery(popup).children().children().removeClass("selectedTag");
			selectedTagIndex++;
			nextListItem.childNodes[0].classList.add("selectedTag");
		    },
		    selectTag15ahead = function()
		    {
			var numberOfItems = jQuery(popup).children().length; // tags+1
			selectedTagIndex  = Math.min(selectedTagIndex + 15,numberOfItems-1);
			var newListItem   = popup.childNodes[selectedTagIndex];
			jQuery(popup).children().children().removeClass("selectedTag");
			newListItem.childNodes[0].classList.add("selectedTag");
		    },
		    selectPrevTag = function()
		    {
			var prevListItem = popup.childNodes[selectedTagIndex-1];
			if(selectedTagIndex == 0) return;

			jQuery(popup).children().children().removeClass("selectedTag");
			selectedTagIndex--;
			if(selectedTagIndex == 0) return; // don't color the main field
				//# or do so but color it in the beginning as well
			prevListItem.childNodes[0].classList.add("selectedTag");
		    },
		    selectTag15back = function()
		    {
			var numberOfItems = jQuery(popup).children().length; // tags+1
			selectedTagIndex  = Math.max(selectedTagIndex - 15,0);
			var newListItem   = popup.childNodes[selectedTagIndex];
			jQuery(popup).children().children().removeClass("selectedTag");
			if(selectedTagIndex &gt; 0)
				newListItem.childNodes[0].classList.add("selectedTag");
		    },
		    selectTag = function(tag)
		    {
			var button = jQuery(popup).children().children("*[tag='"+tag+"']");
			if(!button.length) return;

			button.addClass("selectedTag");
			// get index, set selectedTagIndex
			selectedTagIndex = jQuery(popup).children().children().index(button)
				- 1;
		    },
		    getSelectedTagButton = function() {
			if(selectedTagIndex == 0) // fosuced on new tag field
				return null;
			return popup.childNodes[selectedTagIndex].childNodes[0];
		    },
		    toggleSelected = function(goOnToggling)
		    {
			var button = getSelectedTagButton();
			if(!button) return;
			tag = button.getAttribute("tag");
			fieldValue = newTagField.value;
			toggleTag(tid,tag,goOnToggling ? refreshTagList : null);

			newTagField.value = fieldValue;
			newTagField.select();
			selectTag(tag);
			return tag;
		    },
		    toggleNew = function(goOnToggling) {

			var tag = jQuery.trim(newTagField.value), isNewTag = true, i;

			// add the tag to the list if it's totally new:
			for(i = 0; i &lt; menuItems.length; i++)
				if(menuItems[i].tag == tag)
					isNewTag = false;
			if(isNewTag)
				menuItems.push({ tag:tag, label:tag });

			toggleTag(tid,tag,goOnToggling ? refreshTagList : null);
		    };

		// push the button to apply/click elsewhere to cancel..
		createTiddlyButton(li,"toggle","toggle the entered tag in the tiddler",
						toggleNew,"button tagAdderButton");
		// ..or use keyboard (see below)

		// tags from the set
		var refreshTagList = function()
		{
//console.log("caller is " + arguments.callee.caller.toString());
			// clear the list (but don't remove the first item)
			while(popup.childNodes[1])
				popup.removeChild(popup.childNodes[1]);
			newTagField.focus();
			selectedTagIndex = 0;

			// refill the list
			if(menuItems.length == 0) {
				createTiddlyText(createTiddlyElement(popup,"li"),noTagsMsg);
				return;
			}

			var fieldValueLowered = newTagField.value.toLocaleLowerCase(),
			    sortedMenuItems = menuItems.concat([]).sort(function(a,b){
				if(!fieldValueLowered) return 0;
				// store where the value from the field starts in the tag
				a.index= a.tag.toLocaleLowerCase().search(fieldValueLowered);
				b.index= b.tag.toLocaleLowerCase().search(fieldValueLowered);
//				if(tid.tags.contains(a.tag) &amp;&amp; a.index != -1) a.index = -2;
//				if(tid.tags.contains(b.tag) &amp;&amp; b.index != -1) b.index = -2;
				return a.index &gt; b.index;
			    }),
			    item;

			for(i = 0; i &lt; sortedMenuItems.length; i++)
			{
				item = fieldValueLowered ? sortedMenuItems[i] : menuItems[i];
				if(fieldValueLowered &amp;&amp; item.index == -1) continue;

				li = createTiddlyElement(popup,"li");
				tagButton = createTiddlyButton(li,item.label,
					"toggle '"+item.tag+"'",onTagClick,"button tag"+
					(tid.tags.contains(item.tag)? "" : "Not")+"Present");
				tagButton.setAttribute("tag",item.tag);
				tagButton.refreshTagList = refreshTagList;
			}
		};
		refreshTagList();

		// show the popup menu
		Popup.show("bottom","left");

		// support keyboard navigation
		jQuery(newTagField).bind('input',function(e)
		{
			refreshTagList();
		});
		jQuery(newTagField).bind('keyup',function(e)
		{
			goOnToggling = e.shiftKey;
			if(e.which == $enter) {
				toggleSelected(goOnToggling) || toggleNew(goOnToggling);
				if(!goOnToggling) Popup.remove();
//document.getElementById("displayArea").focus()
				return;
			}
			if(e.which == $esc) {
				if(whereToScroll)
					window.scrollTo(0,ensureVisible(whereToScroll));
				if(e.shiftKey) {
					returnItemMenuSelection();
					Popup.remove(1);
//# make sure doesn't get propagated?
				} else {
					clearSelected();
					Popup.remove();
				}
//document.getElementById("displayArea").focus()
			}
		});
		jQuery(newTagField).bind('keydown',function(e)
		{
			if(e.which == $down &amp;&amp; !e.ctrlKey)
				selectNextTag();
			if(e.which == $up &amp;&amp; !e.ctrlKey)
				selectPrevTag();
			if(e.which == $pgDn || (e.which == $down &amp;&amp; e.ctrlKey))
				selectTag15ahead();
			if(e.which == $pgUp || (e.which == $up &amp;&amp; e.ctrlKey))
				selectTag15back();
			if(selectedTagIndex)
				window.scrollTo(0,ensureVisible(getSelectedTagButton()));
			else
				window.scrollTo(0,ensureVisible(newTagField));
		});
	});

	// create the button
	whereToScroll = createTiddlyButton(place,label,tooltip,onClick,"button tagTogglerButton");
}

// set styling
config.shadowTiddlers["TagAdderStyleSheet"] = "/*{{{*/\n"+
	".tagPresent:before	{ content: \"[x] \"; }\n"+
	".tagNotPresent:before	{ content: \"[ ] \"; }\n"+
	".newTagInput		{ float: left; margin-right: 0.5em; }\n"+
	".tagAdderButton	{ text-align: center; }\n"+
	".selectedTag		{ color: blue !important; }\n"+
	"/*}}}*/";
store.addNotification("TagAdderStyleSheet", refreshStyles);
//}}}
/***
!!!Hijack forEachTiddler macro to enable the new params
***/
//{{{
// helper filter for hiding hidden tiddlers
config.filters.hideFromFet = function(results,match)
{
	var contextName = match[3], noContext = contextName == "-";
	for(var i = 0; i &lt; results.length; i++)
		if(results[i].fields["hideInFet".toLowerCase()] &amp;&amp;
		   (results[i].fields["hideInFet".toLowerCase()] &amp;&amp; noContext ||
		    results[i].fields["hideInFet".toLowerCase()]
							.split(" ").contains(contextName)))
			results.splice(i--,1);
	return results;
};

// hijack config.macros.forEachTiddler.parseParams so that it handles
//  "set", "sortable"/"sortableBy", "addAction", "dropAction", "switchAction" params
// the "params" array is not changed as its usages in parseParams don't need it,
//  same story for preParsedParams[i] (i &gt; 0)
if(config.macros.forEachTiddler &amp;&amp; !config.macros.forEachTiddler.hijacked_sortable)
{
//# check if the proper version of FET (1.3.0 or above) is used
	config.macros.forEachTiddler.hijacked_sortable = true;
	config.macros.forEachTiddler.oldFashionParams =
		config.macros.forEachTiddler.oldFashionParams.concat([
		"sortableBy", "addAction", "dropAction", "switchActions", "writeToList"]);

	config.extensions.ManualSortMacroPlugin = {
		orig_fet_parseParams: config.macros.forEachTiddler.parseParams
	};
	var origParse = config.extensions.ManualSortMacroPlugin.orig_fet_parseParams;
	config.macros.forEachTiddler.parseParams = function(preParsedParams,params)
	{
		// parse the "set" param
		var setDescription = getParam(preParsedParams,"set",""), filter, sortField,
		    setAddAction, setDropAction, cmd = config.macros.defineSet;
		if(setDescription) {
			if(!setDescription.contains("[")) {
				filter = "[set["+ setDescription +"]]"; // named set
				sortField = cmd.getSortFieldForNamedSet(setDescription);
				setAddAction = cmd.getAddToNamedSetAction(setDescription);
				setDropAction= cmd.getDropFromNamedSetAction(setDescription);
			} else {
				filter = "set: "+setDescription; // inline set
				var setDefinition = cmd.parseSetDefinition(setDescription);
				// don't overwrite setDefinition as it is passed to adder
				sortField = setDefinition.sortField;
				setAddAction = cmd.getAddToSetAction(setDefinition);
				setDropAction = cmd.getDropFromSetAction(setDefinition);
			}
			sortField = sortField || config.macros.itemMenu.defaultField;
		}

		// remember the filter (calc from both "set" and "filter" params)
		var filterParam = getParam(preParsedParams,"filter","") +
				 (setDescription ? " [hideFromFet[-]]" : "");
		if(filter &amp;&amp; filterParam) {
			if(filter.indexOf("set: ") == 0)
				filter = filter + " modify: " + filterParam;
			else
				filter = filter + " " + filterParam;
		} else if(filterParam)
			filter = filterParam;
		if(!filter)
			return origParse.apply(this,arguments);

		// the "in", "where" params stay untouched; change the filter param
		preParsedParams[0]["filter"] = [filter];

		// hijack the "script" param (define the "editable" and "adder" helpers)
		//  for now, deprecated "insert" helper is supported (same as "editable")
		var usedScript = getParam(preParsedParams,"script",""),
		    insertDefinition = "var editable = "+
		        "function(container,params,defaultText,preprocessScript) {"+
			"container = container || 't';"+
			"params = params || '';"+
			"if(defaultText)"+
			"	params = 'showIfNoValue:\\''+defaultText+'\\' '+params;"+
			"if(preprocessScript)"+
			"	params = 'preprocess:\\''+preprocessScript+'\\''+params;"+
			"return '&lt;&lt;insertEditable tiddler:['+'['+tiddler.title+']] container:\"'+container+'\" '+(params||'')+'&gt;&gt;';"+
		    "}, insert = editable;";
		    adderDefinitionBegin = 'var adder = '+
			'function(args,label,orderMode,title) {'+
			'return "&lt;&lt;addTiddler"'+
			'	+(" label:\'"+(label || "+")+"\'")'+
			'	'+(setDescription ? ('+" set:\''+setDescription+'\'"') : ''),
		    adderDefinitionEnd =
			'	+(" title:\'"+(title || "")+"\'")'+ // empty by default
			'	+" "+(args||"")'+
			'	+"&gt;&gt;"'+
		    '};',
		    adderDefinition = adderDefinitionBegin + adderDefinitionEnd,
			// unless sortableBy is defined, orderMode is ignored (see below)
		    fullScript = insertDefinition + adderDefinition + usedScript;

		preParsedParams[0]["script"] = [fullScript];

		// process and apply sortable/sortableBy params/sortField from set definition
		var sortableParamIndex = params.indexOf("sortable"),
		    justSortable       = sortableParamIndex != -1,
		    sortableBy         = getParam(preParsedParams,"sortableBy");

		if(params.contains("sortableBy") &amp;&amp; !sortableBy // empty = default
		   || justSortable)
			sortableBy = config.macros.itemMenu.defaultField;

		 // support the deprecated {{{sortableBy '"orderCountName"'}}} syntax
		var fieldWithQuotsMatch = /^"(.+)"$/.exec(sortableBy);
		sortableBy = fieldWithQuotsMatch ? fieldWithQuotsMatch[1] : sortableBy;
		 // sortField can be defined directly or from the set (see above)
		sortField = sortableBy || sortField;

//# rethink from here: either move this stuff below actions parsing etc (more meaninglful)
//	or add "&amp;&amp; !setDescription" (this is to enable actions and other stuff for sets,
//	even if sortField is not defined)
//+ from here
		if(!justSortable &amp;&amp; !sortField)
			return origParse.apply(this,arguments);

		// support the "extended scope for sorting"
//# is it extended or narrowed?
		var fieldAndFilterMatch = /^(\w+) (\[.+)$/.exec(sortField),
		    sortFilter = fieldAndFilterMatch ? fieldAndFilterMatch[2] : filter;
		sortField = fieldAndFilterMatch ? fieldAndFilterMatch[1] : sortField;

		// set the "sortBy" param
		var undefinedUp = true;
		var sortScript = "(function(){ var c = tiddler.getSCounter(\"" + sortField +
				"\"); return (c != 0 &amp;&amp; !c)?" + (undefinedUp ? "-1" : "1000") + ": c; })()";
				// lists of 999+ tiddlers long are not supposed to be used with manual sorting

		preParsedParams[0]["sortBy"] = [sortScript];
		// the sortable/sortableBy part is left in preParsedParams[0] as is

		// extend the "adder" helper in the "script" param using specified sortField
		adderDefinition = adderDefinitionBegin +
			'	+(orderMode ? (" order:\''+sortField+','
					+filter.replace(/"/g,'\\"')
//# do smth about "'"s in filter (macro param parsing)
					+',"+orderMode+"\'") : "")'+
			adderDefinitionEnd;
		fullScript = insertDefinition + adderDefinition + usedScript;

		preParsedParams[0]["script"] = [fullScript];
//= up to here

		// for actions other than "write" (and "writeToList" ~action), do no more
		for(var knownActionName in config.macros.forEachTiddler.actions)
			if(knownActionName != "write" &amp;&amp; params.contains(knownActionName))
				return origParse.apply(this,arguments);
		// in original FETP, that's "addToList" action only

		// parse the [SMP] actions-defining params
		var addAction     = getParam(preParsedParams,"addAction",setAddAction),
		    dropAction    = getParam(preParsedParams,"dropAction",setDropAction),
		    switchActions = preParsedParams ? (
				preParsedParams[0]["switchActions"] ?
					preParsedParams[0]["switchActions"].join(";;")
				: ""
			) : "";
		    // allow multiple switchActions params (but each must have a name..)

		var commonText = "description is expected behind";
		if(!addAction &amp;&amp; !(addAction == "") &amp;&amp; params.contains("addAction"))
			return { errorText: "An action "+commonText+" 'addAction'." };
		if(!dropAction &amp;&amp; !(dropAction == "") &amp;&amp; params.contains("dropAction"))
			return { errorText: "An action "+commonText+" 'dropAction'." };
		if(!switchActions &amp;&amp; !(switchActions=="")&amp;&amp; params.contains("switchActions"))
			return { errorText: "An action(s) "+commonText+" 'switchActions'."};

		// parse [FET] action
		var action = "writeToList"; // default pseudo-action

		//  when action is not specified it is considered as writeToList with..
		var defaultText = '"["+"["+tiddler.title+"]]"';
//# unknown actions are considered as the default one.. which is bad for other extensions

		//  when "writeToList" is used, in fact it preparses the argument for "write"
		writeToListText = getParam(preParsedParams,"writeToList",defaultText);
		var writeText = '"| "+itemMenu()+" |"+(' +writeToListText+ ')+"|\\n"';

		//  when "write" is used, its argument is used after only "minimal"preparsing
		if(preParsedParams[0]["write"])
			action = "write";
		writeText = getParam(preParsedParams,"write",writeText);

		//  substitute all the "itemMenu()" expressions in the argument of "write"
		//   with their intended "meaning" (hence use non-greedy regexp)
		var itemMenuRegExp = /(.*?)itemMenu\(\)/g;
		var insertItemMenu = function($0,$1) {
			var escapedFilter = sortFilter.contains('"') ?
				('\\\''+sortFilter.replace(/"/g,'\\\"')+'\\\'') :
				("\\\""+sortFilter.replace(/'/g,"\\\'")+"\\\"") ;
// this is a semi-fix: tags with both ' and " will cause troubles with manual sorting..
// escape the actions as well

			return $1 + "\"&lt;&lt;itemMenu [[\"+tiddler.title+\"]] "+ escapedFilter +
				(sortField ? (" field:\\\""+ sortField +"\\\"") : "")+
				(addAction ? " addAction:\\\""+addAction+"\\\"" : "")+
				(dropAction ? " dropAction:\\\""+dropAction+"\\\"" : "")+
				(switchActions ? " switchActions:\\\""+switchActions+"\\\"" : "")+"&gt;&gt;\"";
		}
		writeText = writeText.replace(itemMenuRegExp,insertItemMenu);

		//  change preParsedParams accordingly (use writeText, "write" action)
		preParsedParams[0]["write"] = [writeText];

		// change the begin argument (leave end, none, toFile parts unchanged)
		if(action == "writeToList")
			preParsedParams[0]["begin"] = [(preParsedParams[0]["begin"] ?
				preParsedParams[0]["begin"][0]:'""') + '+"|tableList|k\\n"'];

		// call the parser with the new arguments
		return origParse.apply(this,arguments);
	}
}
//}}}
/***
!!!addTiddler macro
***/
//{{{
config.macros.addTiddler = {
	handler: function(place,macroName,params,wikifier,paramString) {
		if(readOnly)
			return;

		// param parsing (partially taken from the newTiddler macro)
		params = paramString.parseParams("anon",null,true,false,false);
		var title  = params[1] &amp;&amp; params[1].name == "anon" ? params[1].value : config.macros.newTiddler.title;
		    title  = getParam(params,"title",title);
		var label  = getParam(params,"label",label),
		    prompt = getParam(params,"prompt",config.macros.newTiddler.prompt),
		    text   = getParam(params,"text",""),
		    set    = getParam(params,"set",""),
		    commonTags = [], t,

		    orderParts      = getParam(params,"order",""),
		    orderPartsMatch = /^(\w*),(.+),([\w\d\-]+(?:,\w+)?)$/.exec(orderParts),
		    orderCounter    = orderPartsMatch ? orderPartsMatch[1] : undefined,
		    orderFilter     = orderPartsMatch ? orderPartsMatch[2] : undefined,
		    orderMode       = orderPartsMatch ? orderPartsMatch[3] : undefined,
		    orderParamDefault;
		if(orderMode) {
			orderPartsMatch = /^(\w+),(\w+)$/.exec(orderMode);
			orderMode = orderPartsMatch ? orderPartsMatch[1] : orderMode;
			orderParamDefault = orderPartsMatch ? orderPartsMatch[2] : undefined;
		}
		var cmd = config.macros.defineSet;
		// get addAction for the set and orderCounter
		if(set &amp;&amp; cmd) {
			// set may be either set name or set definition
			if(!set.contains("[")) {
				orderCounter = orderCounter ||
					cmd.getSortFieldForNamedSet(set);
				var action = cmd.getAddToNamedSetAction(set);
			} else {
				var setDefinition = cmd.parseSetDefinition(set);
				orderCounter = orderCounter || setDefinition.sortField;
				var action = cmd.getAddToSetAction(setDefinition)
			}
		}

		for(t = 1; t &lt; params.length; t++)
			if((params[t].name == "anon" &amp;&amp; t != 1) || (params[t].name == "tag"))
				commonTags.push(params[t].value);
		if((orderCounter =="default" || orderCounter =="") &amp;&amp; config.macros.itemMenu)
			orderCounter = config.macros.itemMenu.defaultField;

		// create button, attach params to it
		var btn = createTiddlyButton(place,label,prompt,this.onClick);
		btn.params =
		{
			title:		title,
			commonTags:	commonTags,
			addAction:	(set &amp;&amp; cmd) ? action : "",
			text:		text,
			orderCounter:	orderCounter,
			orderFilter:	orderFilter,
			orderMode:	orderMode,
			orderParamDefault: orderParamDefault
		};
	},
	onClick: window.wrapNoClose(function()
	{
		// extract params
		var title = this.params.title,
		    text  = this.params.text,
		    tags  = [].concat(this.params.commonTags), // should be a new array
			//# do the same "copying" for fields, if are set here
		    addAction		= this.params.addAction,
		    orderCounter	= this.params.orderCounter,
		    orderFilter		= this.params.orderFilter,
		    orderMode		= this.params.orderMode,
		    orderParamDefault	= this.params.orderParamDefault,

		// create DOM
		    popup = Popup.create(this),
		    wrapper = createTiddlyElement(popup,"li"),
		    nameField = createTiddlyElement(wrapper,"input",null,"newTitleInput",{type:"text"});

		nameField.onclick = window.wrapNoClose();
		nameField.value = title;

		var cmi = config.macros.itemMenu,
		    addTidToSet = function(tiddler)
		    {
			if(!addAction || !cmi) return;
			cmi.parseAndApplyAction(tiddler, addAction, null, true);
		    };

		var createTheTiddler = function(goOnSelected)
		{
			var theTiddler = new Tiddler(jQuery.trim(nameField.value)),
			    modifier   = config.options.txtUserName;
			theTiddler.assign(null,text,modifier,null,tags);

			if(store.fetchTiddler(theTiddler.title) &amp;&amp; !confirm("A tiddler named \""+theTiddler.title+"\" already exists. Do you want to overwrite it?"))
				return;
			addTidToSet(theTiddler);

			store.saveTiddler(theTiddler);

			if(orderCounter &amp;&amp; Tiddler.prototype.setSCounter &amp;&amp; cmi)
			{
				if(orderMode == "top")
				    cmi.moveToTop(orderFilter, theTiddler, orderCounter);
				if(orderMode == "bottom")
				    cmi.moveToBottom(orderFilter,theTiddler,orderCounter);
				var orderModeIndex = parseInt(orderMode);
				if(!isNaN(orderModeIndex))
				    cmi.moveToArbitraryPlace(orderFilter,theTiddler, orderCounter,orderModeIndex,true);
//  use:  orderParamDefault
			}

			// for compability with SetManagerPlugin (usage in itemMenus)
			if(cmi)
			{
				if(goOnSelected)
					cmi.ensureFocusOnCurrentlyDragged();
				else
					cmi.clearCurrentlyDragged();
			}

			// bad fix for SMP: if autoSaveChanges(); is called directly,
			// reselection doesn't work; but it's enough to set timeout
			// of 1 ms and the bug disappears
			setTimeout(autoSaveChanges,1);
		};

		// process enter/esc key presses
		// compatible with SetManagerPlugin (for usage in itemMenus)
		nameField.onkeydown = function(ev)
		{
			var e = ev || window.event;
			if(e.which == $enter)
			{
				createTheTiddler(e.shiftKey);

				if(e.shiftKey)
					Popup.remove(1);
				else
					Popup.remove();

				window.preventOtherHandling(e);
			}
			if(e.which == $esc) {
				if(e.shiftKey) {
					if(cmi) cmi.ensureFocusOnCurrentlyDragged();
					Popup.remove(1);
				} else {
					if(cmi) cmi.clearCurrentlyDragged();
					Popup.remove();
				}
			}
		};

if(orderMode == "checkboxes") {
// add possibilities to put the tiddler on top/bottom of a certain list (certain orderCounter):
//    create 2 checkboxes (t: [] b: []), add .. behaviour
			createTiddlyText(popup,"t:");
			var checkBoxTop = createTiddlyElement(popup,"input","test"/*null*/,null,null,{
				type:'checkbox',
				value:false
// calc the value the way it should be calced (chkAddToTop, ..)
			});
			checkBoxTop.onclick = window.wrapNoClose(function(){
				checkBoxTop.setAttribute(!checkBoxTop.value);
// checkboxes should deactivate each other, ..
			});
// add the onclick handler (change .., no close)
createTiddlyText(popup,"b:");
config.macros.option.handler(popup,"option",null,wikifier,"chkAddToBottom");
checkBox = popup.lastChild;
checkBox.onclick = window.wrapNoClose(checkBox.onclick);
// this works, but the checkbox being checked/unchecked is not displayed unless the popup is reopened
// - try config.macros.option.genericCreate(place,type,opt,className,desc)
// process the orderCounter taken from the check box
}

		// "add" button
		createTiddlyButton(popup,"add","add the tiddler",createTheTiddler);
		// cancel - on click elsewhere

		// show the popup menu, focus inside the text field
		Popup.show();
		nameField.focus();
		nameField.select()
	})
}
//}}}
/***
!!!insertEditable macro
***/
//{{{
// Sets the section value if it is present, appends otherwise
//  tip: if sectionName is "!!smth", then "!!!smth" is appended
//
Tiddler.prototype.setSection = function(sectionName,value)
{
	var beginSectionRegExp = new RegExp("(^!{1,6}[ \t]*" + sectionName.escapeRegExp() + "[ \t]*(\n|$))","mg"),
	    sectionTerminatorRegExp = /^!/mg,
	    match = beginSectionRegExp.exec(this.text);

	if(match) // edit existing section
	{
		var sectionTitle = match[1],
		    emptyAtEnd = match[2] != "\n",
		    beforeSection = this.text.substr(0,match.index),
		    sectionAndAfter = this.text.substr(match.index + match[1].length);

		match = sectionTerminatorRegExp.exec(sectionAndAfter);
		var afterSection = match ? sectionAndAfter.substr(match.index) : "";

		this.text = beforeSection + sectionTitle + (emptyAtEnd ? "\n" : "") + value
				+ (afterSection ? ("\n" + afterSection) : "");
	} else // add anew
		this.text = this.text + "\n!"+sectionName + "\n"+value;

	// setting dirty, notifying is not done here
};

// Sets the slice value if it is present, otherwise appends it as |name|value|
//  either after the last slice or to the beginning of the text (if no slices are present)
//
Tiddler.prototype.setSlice = function(sliceName,value)
{
	var replaceSliceSubPart = function(text,part,oldValue)
	{
		if(oldValue == value)
			return text;
		var eOldValue  = oldValue.escapeRegExp(),
		    eSliceName = sliceName.escapeRegExp();

		// "table" notation
		var simplifiedPattern = "^(.*"+eSliceName+".*\\|.*)"+eOldValue+"(.*\\|)$",
		    simplifiedRegExp = new RegExp(simplifiedPattern),
		    newPart = part.replace(simplifiedRegExp,function($0,$1,$2){
			return $1 + value + $2;
		    });
		if(newPart != part)
			return text.replace(part, newPart);

		// "sliceName: sliceValue" notation
		simplifiedPattern = "^(.*"+eSliceName+"\\:[\\s\\t])"+eOldValue+"(.*)$";
		simplifiedRegExp = new RegExp(simplifiedPattern),
		newPart = part.replace(simplifiedRegExp,function($0,$1,$2){
			return $1 + value + $2;
		});
		if(newPart != part)
			return text.replace(part, newPart);
	};
	// modification of TiddlyWiki.prototype.slicesRE to process "|..sliceName..||" syntax
	// empty slices in the "sliceName:" notation are not supported
	var re = /(?:^([\'\/]{0,2})~?([\.\w]+)\:\1[\t\x20]*([^\n]+)[\t\x20]*$)|(?:^\|\x20?([\'\/]{0,2})~?([^\|\s\:\~\'\/]|(?:[^\|\s~\'\/][^\|\n\f\r]*[^\|\s\:\'\/]))\:?\4[\x20\t]*\|[\t\x20]*([^\n\t\x20]?(?:[^\n]*[^\n\t\x20])?)[\t\x20]*\|$)/gm;
	re.lastIndex = 0;
	var m = re.exec(this.text);
	while(m) {
		if(m[2]) {
			if(m[2] == sliceName) {
				this.text = replaceSliceSubPart(this.text,m[0],m[3]);
				break;
			}
		} else {
			if(m[5] == sliceName) {
				this.text = replaceSliceSubPart(this.text,m[0],m[6]);
				break;
			}
		}
		m = re.exec(this.text);
	}

	if(!m || !m[2] &amp;&amp; !m[5]) // if the slice is not present
	{
		// append after the last slice/to the start of text (adapted from GridPlugin)
		var matches = this.text.match(re),
		    lastSlice = matches ? matches[matches.length-1] : null,
		    where = lastSlice ? this.text.indexOf(lastSlice)+lastSlice.length : 0;

		this.text = this.text.substr(0,where)+
			(lastSlice ? '\n|%0|%1|' : '|%0|%1|\n').format(sliceName,value)+
			this.text.substr(where);
	}

	// recalc "stored" slices for this tiddler:
	delete store.slices[this.title];

	// setting dirty, notifying is not done here
};

config.macros.insertEditable = {
	handler: function(place,macroName,params,wikifier,paramString,tiddler)
	{
		// parse and attach params to DOM
		var pParams   = paramString.parseParams("tiddler",null,true,false,true),
		    cell      = params.contains("cell"),
		    fill      = cell || params.contains("fillElement"),
		    wrapper   = fill ? place : createTiddlyElement(place,"span"),
		    tidName   = getParam(pParams,"tiddler",""),
		    partName  = getParam(pParams,"container","t"),
		    applyOnEnter = getParam(pParams,"applyOnEnter");

		wrapper.options = {
			tiddler:	tidName ? store.fetchTiddler(tidName) : tiddler,
			part:		partName,
			viewType:	getParam(pParams,"viewType","wikified"),
			withButton:	params.contains("button") || window.isOpenedOnTouchScreen(), // default for touch screens
			defaultShowText:  getParam(pParams,"showIfNoValue"),
			preprocess:	getParam(pParams,"preprocess",""),
			size:		getParam(pParams,"size",""),
			fill:		fill,
			transparentEmpty: cell || params.contains("transparentEmpty"),
			saveOnApply:	params.contains("saveOnApply"),
			applyOnEnter:	(partName[0] == ":") || (partName[0] == "!") ||
					(applyOnEnter === undefined ?
					params.contains("applyOnEnter") : applyOnEnter),
			keepOnBlur:	params.contains("keepOnBlur"),
			noNotify_partial: cell || params.contains("noNotify"),
			noedit:		params.contains("noedit")
		};

		this.turnViewMode(wrapper);
	},
	getData: function(tiddler, part)
	{
		var partName = part.substr(1);
		switch(part[0]) {
			case "t":
				return tiddler.text || "";
			case "!":
				return tiddler.title;
			case "#":
				return (tiddler.getSection ? tiddler.getSection(partName)
					: store.getTiddlerText(tiddler.title+"##"+partName))
						|| "";
			case ":":
				return (tiddler.getSlice ? tiddler.getSlice(partName)
					: store.getTiddlerText(tiddler.title+"::"+partName))
						|| "";
			case "@":
				return store.getValue(tiddler,partName) || "";
		}
	},
	setData: function(tiddler, part, value, noNotify_partial)
	{
		var partName = part.substr(1);
		//# deal with the case when tiddler doesn't exist yet

		switch(part[0]) {
			case "t":
				store.saveTiddler(tiddler,null,value);
				break;
			case "!":
				store.saveTiddler(tiddler,value); // requires my fix to .sT
				break;
			case "#":
				tiddler.setSection(partName,value);
				store.setDirty(true);
				// refresh display of the corresponding tiddler:
				if(!noNotify_partial) store.notify(tiddler.title,true);
				break;
			case ":":
				tiddler.setSlice(partName,value);
				store.setDirty(true);
				if(!noNotify_partial) store.notify(tiddler.title,true);
				break;
			case "@":
				store.setValue(tiddler,partName,value);
				break;
		}
		//# change the "modifier/d" fields?
	},
	turnViewMode: function(place)
	{
		if(place.options.part[0] != "c" &amp;&amp; !place.options.tiddler)
			return;
		//# may be add warning; also, do same for unsupported container types

		var value  = this.getData(place.options.tiddler, place.options.part) ||
				place.options.defaultShowText || "",
		    fill   = place.options.fill,
		    noedit = place.options.noedit,
		    classEmpty = place.options.transparentEmpty ? "transparentEmptyViewer" : "emptyViewer";
 		var preprocessScript = place.options.preprocess;
 		if(preprocessScript) {
			var fullScript =
				"place.options.preprocessFunc = function(text){"+
				"var q = \"'\"\n"+
				preprocessScript+
				"\nreturn text;};";
			eval(fullScript);
			value = place.options.preprocessFunc(value);
		}
 		if(fill)
			place.style.padding = (place.options.initialPadding !== undefined)
 				? place.options.initialPadding
				: place.style.padding;
		if(fill &amp;&amp; !noedit &amp;&amp; !value)
			place.classList.add(classEmpty);
		var html = '&lt;span'+
		(!fill &amp;&amp; !value ? ' class="'+classEmpty+'"' : '')+
		'&gt;&lt;/span&gt;';
		place.innerHTML = html;
		place.onclick = function(e)
		{	
			// prevent editor-containing popup closing etc:
			if(e.stopPropagation) e.stopPropagation();
			e.cancelBubble = true;
			// prevent editing when clicking on links,buttons,images; if noedit:
			if(noedit || e.target.tagName in {A:1,IMG:1}) return true;

			place.classList.remove(classEmpty);
			config.macros.insertEditable.turnEditMode(this);
			return false;
		}
		var container = fill ? place : place.firstChild;
		switch(place.options.viewType) {
			case "plain":
				createTiddlyText(container,value);
				break;
			case "html":
				container.innerHTML = value;
				break;
			case "wikified":
			default:
				wikify(value,container,null,place.options.tiddler);
		}
	},
	turnEditMode: function(place)
	{
		// add the edit area
		var value = this.getData(place.options.tiddler, place.options.part),
		    rowslimit = 1,
		    size = place.options.size;
		place.innerHTML = (size == "minimal" || size == "min") ?
			  '&lt;input type="text" class="mini-inline-editor"&gt;&lt;/input&gt;'
			:('&lt;textarea class="inline-editor"' +
			  ' style="height: '+rowslimit+'.1em;'+
			  (size == "max" ? 'width:100%;' : 
			   (place.options.fill ? 'width:98%;' : ''))+'"' +
			  '&gt;&lt;/textarea&gt;');
		if(place.options.fill) {
			place.options.initialPadding = place.style.padding;
			place.style.padding = "0";
		}
		var editarea = place.firstChild, button;
		editarea.value = value;

		// define apply/cancel helpers
		var turnOffEditing = function()
		    {
			config.macros.insertEditable.turnViewMode(place);
			jQuery('html').off("click",onClick);
		    },
		    applyChanges = function()
		    {
			config.macros.insertEditable.setData(place.options.tiddler, place.options.part, editarea.value, place.options.noNotify_partial);
			turnOffEditing();
			if(place.options.saveOnApply)
				autoSaveChanges();
		    };

		if(place.options.withButton)
			button = createTiddlyButton(place,"save",null,applyChanges);
		// on click outside the edit area, switch to the view mode
		var onClick = function(e) {
			if(place.options.keepOnBlur || jQuery(e.target).parents()/*and self*/.addBack().is(place))
				return;
			turnOffEditing();
		};
		place.onclick = null;
		jQuery('html').click(onClick);
//# avoid creating of a "global" handler? (to remove extra code from .onkeydown handler)
		editarea.onkeydown = function(ev)
		{
			var e = ev || window.event;
			if(e.which == $esc)
				// for now, don't check if was changed
				turnOffEditing()
			if((e.which == $enter) &amp;&amp; (e.ctrlKey || place.options.applyOnEnter))
			{
				applyChanges();
				e.cancelBubble = true;
				if(e.stopPropagation) e.stopPropagation();
				return false;
			}
		};
		editarea.onkeypress = function(){
			adjustHeightToContent.apply(this);
			//# check here for changes to visualize (bgcolor/..)
		}

		// set initial "state"
		editarea.focus();
		if(!window.isOpenedOnTouchScreen()) // with FF for Android, better not to
			editarea.select();
		adjustHeightToContent.apply(editarea);
	}
};

// define styles
var bgColor = store.getTiddlerText("ColorPalette::Background");
setStylesheet(
	'.emptyViewer { color: #dddddd; background-color: #dddddd; }\n'+
	'.emptyViewer:before, .transparentEmptyViewer:before { content: "__" }\n'+
	'.mini-inline-editor { width: 1.5em; }\n'+
	'@-moz-document url-prefix() {.inline-editor { font-family: Consolas !important; font-size: 100% !important; }}\n'+
	'.transparentEmptyViewer { color: '+bgColor+'; background-color: '+bgColor+'; }',
"StyleSheetInsertEditable");
//# think about better styling (no "__" when copying)

// =========== Extras ===========
// hijack edit macro to make tiddler titles editable inline
(function(){
/* config.macros.chkEditableTitles = (config.macros.chkEditableTitles === undefined) ?
	!('ontouchstart' in window) : config.macros.chkEditableTitles;
	// default for non-touch screens for now

 if(!config.macros.chkEditableTitles)
	return;

 config.macros.view.iep_orig_handler = config.macros.view.handler;
 config.macros.view.handler = function(place,macroName,params,wikifier,paramString,tiddler) {

	if(readOnly || !(tiddler instanceof Tiddler) || tiddler.isReadOnly() ||
	   params[0] != "title" || !place.classList.contains("title"))
	// the last is a hack for avoiding insertEditable in the &lt;&lt;list&gt;&gt; macro
		return this.iep_orig_handler.apply(this,arguments);

	wikify('&lt;&lt;insertEditable container:"!" size:max viewType:plain&gt;&gt;',place,null,tiddler);
	//story.setDirty(tiddler.title,true); ?
 };
*/
})()
//}}}
/***
!!!Sets API and macros
***/
//{{{
// overwrite filterTiddlers to enable different kinds of hijacking
//# to be incorporated into the core
TiddlyWiki.prototype.filterTiddlers = function(filter,results)
{
	var re = /([^\s\[\]]+)|(?:\[([ \w\.\-]+)\[([^\]]+)\]\])|(?:\[\[([^\]]+)\]\])/mg;

	results = results || [];
	var match, handler;
	if(filter)
		while(match = re.exec(filter)) {
			handler = ( match[1] || match[4] ) ? 'tiddler' :
					config.filters[match[2]] ? match[2] : 'field';
			results = config.filters[handler].call(this,results,match);
		}

	return results;
};

// extendable set of elementary sets definitions
// "?" is for the belongCheck, "+" - for addAction getter, "-" - for dropAction getter
config.elementarySets =
{
	tiddler: {
		"?": function(title,tiddler) {
			return tiddler.title == title;
		},
		"+": function(title) {
			return ""; // no action for now
		},
		"-": function(title) {
			return ""; // no action for now
		}
	},
	tag: {
		"?": function(tagName,tiddler) {
			return tiddler.tags.contains(tagName);
		},
		"+": function(tagName) {
			//# check the absence of ",,","::",";;"
			return "+tag.."+tagName;
		},
		"-": function(tagName) {
			//# check the absence of ",,","::",";;"
			return "-tag.."+tagName;
		}
	}
}

config.macros.defineSet =
{
	sets: {},

	add: function (setName, setDefinition, setTags)
	{
		if(this.sets[setName])
			displayMessage("the set \""+setName+"\" will be redifined");
		//# this behaviour may be changed if necessary

		this.sets[setName] = { definition: setDefinition, tags: setTags };
	},

	// this returns a function(tiddler) which checks if the tiddler is in the set;
	//  if there's some "do" parts, it ignores them if forceFunc and
	//  returns an array of tiddlers instead of a function otherwise
	//
	getIsInSet: function (setDefinition,forceFunc)
	{
		var returnFunc = true, definedPart, resultRecursive,
		    parts = setDefinition.parts, type, i,
		    singleTokenRE = /(?:(\w*)\[((?:[^\]]|(?:\]\]))*)\])/,
		    tokenMatch, tokenType, tokenValue;
//# precalc setDefinition.parts[i].definedPart in .parseSetDefinition? (although func/not func stuff ..)

		// for each part..
		for(i = 0; i &lt; parts.length; i++)
		{
			definedPart = null;

			// process tokens first
			if(parts[i].token)
			{
				tokenMatch = singleTokenRE.exec(parts[i].token);
//# single tokens first; .oO when multiple are needed, implement parsing
				if(!tokenMatch) continue;
				tokenType  = tokenMatch[1];
				tokenValue = tokenMatch[2];
				definedPart = {
					type:  tokenType,
					value: tokenValue
				};

				// process elementaries with corresponding handlers
				if(config.elementarySets[tokenType]) {
					definedPart.checkTiddler = function(tiddler) {
						return config.elementarySets[this.type]["?"]
							(this.value, tiddler);
					};
					parts[i].definedPart = definedPart;
					continue;
				}

				//# process non-elementary tokens,
				//  for "set" and "setsTagged", launch recursively,
				//  if returns an array of tids instead of a function
				//  and !forceFunc, set returnFunc = false
			// in contrast to inline sets, named sets can cause infinite loops..
			}

			// next, process "sets" (defined for brackets)
			if(parts[i].set)
			{
				resultRecursive = this.getIsInSet(parts[i].set,forceFunc);
				parts[i].definedPart = resultRecursive instanceof Function ?
					{ checkTiddler: resultRecursive } : resultRecursive;
				// in the latter case resultRecursive is an array with tids
				continue;
			}

			//# for each "do" if !forceFunc, /skip/ it;
			//  set returnFunc = false otherwise
		}

		if(returnFunc) {
		// combine checks from parts via setDefinition.combine (example: "+4*1-3+5")
			return function(tiddler) {
				var re = /([\+\-\*])(\d+)/g, m, isGood = false, val;
//console.log(".combine: "+setDefinition.combine+", parts:");console.log(parts);
//console.log("find definedParts in parts[i].definedPart");
				while(m = re.exec(setDefinition.combine)) {
					i = parseInt(m[2]);
					val = parts[i].definedPart.checkTiddler(tiddler);
//console.log(i+": val is "+val+", isGood is "+isGood);
					switch(m[1])
					{
						case "+": isGood = isGood ||  val; break;
						case "*": isGood = isGood &amp;&amp;  val; break;
						case "-": isGood = isGood &amp;&amp; !val; break;
					}
				}
				return isGood;
			};
		} //else
			//# build and return an array of tiddlers
	},
	getIsInNamedSet: function (setName,forceFunc)
	{
		var set = this.sets[setName];
		if(!set) return null;
		return this.getIsInSet(set.definition,forceFunc);
	},
	getSetTiddlers: function (setDefinition,results)
	{
		results = results || [];

		var check = this.getIsInSet(setDefinition);
		if(!check)
			return results;

		var newTids = [];
		if(check instanceof Function)
			store.forEachTiddler(function(tName,tiddler) {
				if(check(tiddler)) newTids.push(tiddler);
			});
		else
			// check is not a function, but an array of tiddlers
			newTids = check;

		if(setDefinition.sortField) {
			var getComparableCounter = function(tiddler)
			{
				var c = tiddler.getSCounter(setDefinition.sortField);
				return (c != 0 &amp;&amp; !c)? -1 : c; // undefined up
			};
			newTids.sort(function(tiddlerA, tiddlerB)
			{
				return getComparableCounter(tiddlerA)
					- getComparableCounter(tiddlerB);
			});
		}

		for(var i = 0; i &lt; newTids.length; i++)
			results.pushUnique(newTids[i]);

		return results;
	},
	getNamedSetTiddlers: function (setName,results)
	{
		var set = this.sets[setName];
		if(!set) return results;
		return this.getSetTiddlers(set.definition,results);
	},
	calcActionStepsInDefinition: function (setDefinition)
	{
		var parts = setDefinition.parts, i,
		    singleTokenRE = /(?:(\w*)\[((?:[^\]]|(?:\]\]))*)\])/,
		    tokenMatch, tokenType, tokenValue;

		// for each part
		for(i = 0; i &lt; parts.length; i++)
		{
			// create descriptions of 2 actions sequences:
			// one adds a tiddler to the set, another removes the tiddler from it

			// process tokens first
			if(parts[i].token)
			{
				tokenMatch = singleTokenRE.exec(parts[i].token);
//# single tokens first; .oO when multiple are needed, implement parsing
				if(!tokenMatch) continue;
				tokenType  = tokenMatch[1];
				tokenValue = tokenMatch[2];
				
				// process elementaries with corresponding handlers
				if(config.elementarySets[tokenType]) {
//# add "don't recalc if already calced"
					parts[i].addAction = config.elementarySets[tokenType]
						["+"](tokenValue);
					parts[i].dropAction= config.elementarySets[tokenType]
						["-"](tokenValue);
					continue;
				}

				//# process non-elementary tokens,
				//# ...
			}

			// next, process "sets" (defined for brackets)
			if(parts[i].set)
			{
//# add "don't recalc if already calced"
				parts[i].addAction = this.getAddToSetAction(parts[i].set);
				parts[i].dropAction= this.getDropFromSetAction(parts[i].set);
				continue;
			}

			//# do anything about "do"s?
		}
		return;
	},
	getAddToSetAction: function (setDefinition)
	{
		// combine the already calced actions into one
		var re = /([\+\-\*])(\d+)/g, m, i, partActions, actions = "";
		while(m = re.exec(setDefinition.combine))
		{
			i = parseInt(m[2]);
			partActions = setDefinition.parts[i];
			switch(m[1])
			{
				case "+":
					if(actions || !partActions.addAction) continue;
					// unless that's the ~first action~, do nothing
					// (we suppose that if one describes a set like
					// "this OR that", than add action adds to "this"
					actions = partActions.addAction;
				break;
				case "*":
					if(!partActions.addAction) continue;
					if(actions) actions += ",,";
					actions += partActions.addAction;
				break;
				case "-":
					if(!partActions.dropAction) continue;
					if(actions) actions += ",,";
					actions += partActions.dropAction;
				break;
			}
		}
		return actions;
	},
	getAddToNamedSetAction: function (setName)
	{
		var set = this.sets[setName];
		if(!set) return null;
		return this.getAddToSetAction(set.definition);
	},
	getDropFromSetAction: function (setDefinition)
	{
		// combine the already calced actions into one
		var re = /([\+\-\*])(\d+)/g, m, i, partActions, actions = "";
		while(m = re.exec(setDefinition.combine))
		{
			i = parseInt(m[2]);
			partActions = setDefinition.parts[i];
			switch(m[1])
			{
				// case "*": do nothing (if a tiddler is droped from "a",
				// it is dropped from "a OR b" 
				// case "-": same (consider "a" and "a AND NOT b")
				case "+":
					if(!partActions.dropAction) continue;
					if(actions) actions += ",,";
					actions += partActions.dropAction;
				break;
			}
		}
		return actions;
	},
	getDropFromNamedSetAction: function (setName)
	{
		var set = this.sets[setName];
		if(!set) return null;
		return this.getDropFromSetAction(set.definition);
	},
	getSortFieldForNamedSet: function (setName)
	{
		return this.sets[setName] ? this.sets[setName].definition.sortField : null;
	},

	parseSetDefinition: function (text)
	{
		var set = { parts: [], combine: null, sortField: null };

		// remember tokens (..[..]..[..]...), substitute them with their numbers
		var tokenRegExp = /(?:\w*\[(?:[^\]]|(?:\]\]))*\])+/, // "]]" = escaped "]"
		    tokenMatch, origTokenText, tokenText,
		    sortFieldRegExp = /sortField\[(.*)\]/, sortFieldMatch;

		while(tokenMatch = tokenRegExp.exec(text))
		{
			origTokenText = tokenMatch[0];
			tokenText = origTokenText[0]=="[" ?
				("tiddler"+origTokenText) : origTokenText;
			sortFieldMatch = sortFieldRegExp.exec(tokenText);
			if(sortFieldMatch) {
				text = text.replace(origTokenText,"");
				set.sortField = sortFieldMatch[1];
			} else {
				text = text.replace(origTokenText,set.parts.length);
				set.parts.push({ token: tokenText });
			}
		}

		// find first-level brackets, add definitions, substitute in text
		var openPosition = text.indexOf("("), i, level = 0, closePosition, setText;
		while(openPosition &gt; -1)
		{
			// find closing bracket position
			level = 1; i = openPosition+1;
			while(level &gt; 0) {
				if(text[i] == "(")
					level++;
				if(text[i] == ")")
					level--;
				i++;
			}
			closePosition = i;

			// add definition, parse it recursively, subsititute
			setText = text.substring(openPosition+1, closePosition-1)
					// substitute numbers in setText back with tokens:
					.replace(/\d+/g,function(match){
						return set.parts[parseInt(match)].token
					});

			set.parts.push({ set: this.parseSetDefinition(setText) });
			text = text.substring(0,openPosition) + (set.parts.length-1)
				+ text.substring(closePosition);

			// find next open
			openPosition = text.indexOf("(");
		}

		// find &lt;num&gt; DO &lt;num&gt;, add them to parts, substitute
		var doRegExp = /(\d+)\s+DO\s+(\d+)/m, doMatch, target, action;
		while(doMatch = doRegExp.exec(text))
		{
			action = parseInt(doMatch[2]); target = parseInt(doMatch[1]);
			action = set.parts[action].token;
			target = set.parts[target].token || target;

			// add the definition part, substitute the DO expression in the text
			set.parts.push({ do: action , to: target });
			text = text.replace(doMatch[0],set.parts.length-1);
		}

		set.combine = "+"+text.replace(/\s+AND\s+/g,"*")
				 .replace(/\s+NOT\s+/g,"-")
				.replace(/\s+OR\s+/g,"+")
				.replace(/^ +/,"").replace(/ +$/,"").replace(/ +/g,"+");

		this.calcActionStepsInDefinition(set);

		return set;
	},
	handler: function(place,macroName,params,wikifier,paramString,tiddler)
	{
		// parse params
		var parsedParams = paramString.parseParams("name",null,true,false,true),
		    setName = getParam(parsedParams,"name"),
		    setText = getParam(parsedParams,"tids"),
		    setSortField = getParam(parsedParams,"sortField",""),
		    setTagsLine = getParam(parsedParams,"tags",""),
		    setTags = setTagsLine.readBracketedList();
		if(!setName || !setText)
			return;
		if(setSortField) setText += " sortField["+ setSortField +"]";
		var setDefinition = this.parseSetDefinition(setText);

		// show macro text
		var w = wikifier, macroTWcode = w.source.substring(w.matchStart,w.nextMatch),
		    hide = getFlag(parsedParams, "hide", false) || params.contains('hide');
		if (!hide)
			createTiddlyText(createTiddlyElement(place,"code"),macroTWcode);

		// define the set
		this.add(setName, setDefinition, setTags);
	}
};
// if SharedTiddlersPlugin is installed, make sets "include-aware"
var stp = config.extensions.SharedTiddlersPlugin;
if(stp)
	stp.useForReallyEachTiddler(config.macros.defineSet,"getSetTiddlers");

// hijack filterTiddlers so that if there's "set:..." part with an optional terminator
//  ":set", then that part is parsed as a definition of a set
TiddlyWiki.prototype.ds_orig_filterTiddlers = TiddlyWiki.prototype.filterTiddlers;
TiddlyWiki.prototype.filterTiddlers = function(filter,results)
{
	var beginSetMark = "set:", endSetMark = " modify:";

	// set definition starts with "set:", if no such thing, use ordinary filtering
	if(filter.indexOf(beginSetMark) != 0)
		return this.ds_orig_filterTiddlers(filter,results);

	// add tiddlers from the set
	results = results || [];
	var modifyPos = filter.indexOf(endSetMark), filterAsWell = (modifyPos != "-1"),
	    setDef = filterAsWell ? filter.substring(4,modifyPos) : filter.substr(4),
	    tids = config.macros.defineSet.getSetTiddlers(
		config.macros.defineSet.parseSetDefinition(setDef),results);

	// if necessary, apply the additional filters, return
	if(!filterAsWell)
		return results;
	filter = filter.substr(modifyPos + endSetMark.length);
	return this.ds_orig_filterTiddlers(filter,results);
};
config.filters.set = function(results,match)
{
	var setName = match[3];
	return config.macros.defineSet.getNamedSetTiddlers(setName,results);
};

//-------------------------------------------------------------------------------
// wikify SetsList on startup
//
var readSetsList = function()
{
	if(!window.store)
		return setTimeout(readSetsList,100);

	var setsList = store.fetchTiddler("SetsList"),
	    setsListText = setsList ? setsList.text : "";

	if(setsListText)
		wikify(setsListText,document.createElement("div"),null,setsList);
};
setTimeout(readSetsList,100);
//# test why this first timeout is needed (copied from CTP, STP)
//}}}</pre>
</div>
<div changecount="38" created="201509090712" modified="201511121816" modifier="Yakov Litvin" tags="systemConfig" title="SetsExtrasPlugin">
<pre>/***
|Requires|ForEachTiddlerPlugin SetManagerPlugin|
|Version|0.4|
этот плагин предназначен для дополнительных elementary sets, switch actions и др. необязательных расширений SetManagerPlugin
* ForEachTiddlerPlugin нужен, пока {{{.getSlice}}} и {{{.getSection}}} не определены в ядре

to do&lt;&lt;tiddler [[to do list template##main]] with:"set extras todo" with:orderSEtodo noedit&gt;&gt;
***/
//{{{
(function(){
if(!config.macros.itemMenu)
	return;

config.macros.itemMenu.actionStepsWithoutArguments["markChanged"] = function(tiddler)
{ // for coordinator
	tiddler.modifier = config.options.txtUserName;
	tiddler.modified = new Date();
};

config.elementarySets.hasPart =
{
	"?": function(param,tiddler)
	{
		var regExpText, re, type;

		switch(param.substr(0,2)) {
			case config.textPrimitives.sectionSeparator: // ##
				return !!(tiddler.getSection(param.substr(2)));
			case config.textPrimitives.sliceSeparator:   // ::
				return !!(tiddler.getSlice(param.substr(2)));
			case "@@":
				return !!(tiddler.fields[param.substr(2).toLowerCase()]);
			case "r@": // regExp (for tiddler.text) mode
			case "R@":
			case "t@": // title mode
			case "T@":
				regExpText = store.getTiddlerText(param.substr(2));
				type = param.substr(0,1);
				if(!regExpText) {
					if(type == "r" || type == "t")
						return true; // "forgiving mode", nothing is filtered out in this case
					else
						throw("RegExp for checkTiddler is not found in " + param.substr(2));
//# test this case out
				}
				// no break here
			case "r[":
			case "R[":
			case "t[":
			case "T[":
				if(!regExpText) {
					regExpText = param.substr(2);
					type = param.substr(0,1);
				}
				if(type == "r" || type == "t") {
					try {
						re = new RegExp(regExpText);
					} catch(e) {
						return false; // "forgiving mode"
					}
				} else
					re = new RegExp(regExpText);

				if(type == "r" || type == "R")
					return !!(tiddler.text.match(re));
				else
					return !!(tiddler.title.match(re));
		}
		return false;
	},
	"+": function(param) {
		return ""; // for now, no idea what to do here; this won't matter frequently
	},
	"-": function(param) {
		return ""; // for now, no idea what to do here; this won't matter frequently
	}
};

config.macros.itemMenu.actionStepsWithoutArguments["-tags"] = function(tiddler) {
	tiddler.tags = [];
};
config.elementarySets.taggedOnly = 
config.elementarySets.oTag = {
	"?": function(tag,tiddler) {
		return (tiddler.tags.length == 1) &amp;&amp; (!tag || tag == tiddler.tags[0]);
	},
	"+": function(tag) {
		return "-tags,,+tag.."+tag;
	},
	"-": function(tag) { return "-tag.."+tag; }
};

config.elementarySets.unclassified = {
//# implemented "as was"; may be scanning the whole tree instead
	"?": function(metaTag,tiddler) {

		var tags = [], tag, i;
		for(i = 0; i &lt; tiddler.tags.length; i++) {

			tag = store.fetchTiddler(tiddler.tags[i]);
			if(tag &amp;&amp; tag.tags.contains(metaTag))
				return false;
		}
		return true;
	},
//# implement
	"+": function(metaTag) {
		return ""; /*&lt;addToSetAction&gt; - show "available" tags, ask for a tag to add
				(may be new; in that case create a tag-tid with metaTag) */
	},
	"-": function(metaTag) {
		return "" /*&lt;dropFromSetAction&gt; - remove tags tagged with metaTag*/;
	}
};

//config.macros.itemMenu.actionStepsWithArguments["&lt;name&gt;"] = function(tiddler,arg) {
//};
//config.macros.itemMenu.actionStepsWithoutArguments["&lt;name&gt;"] = function(tiddler) {
//};
//config.elementarySets["&lt;name&gt;"] = {
//	"?": function(param,tiddler) { return &lt;isInSet&gt; },
//	"+": function(param) { return &lt;addToSetAction&gt; },
//	"-": function(param) { return &lt;dropFromSetAction&gt; }
//}
})()
//}}}</pre>
</div>
<div changecount="70" created="201212102148" creator="Yakov Litvin" modified="201402281931" modifier="Yakov Litvin" tags="systemConfig" title="SharedTiddlersPlugin">
<pre>/***
|''Name''|SharedTiddlersPlugin|
|''Description''|Introduces a possibility to use tiddlers from other ~TiddlyWikis (with or without importing them)|
|''Documentation''|http://yakovl.bplaced.net/TW/STP/STP.html#SharedTiddlersPluginInfo|
|''Type''|plugin|
|''Version''|2.4.0"'|
|''~CoreVersion''|2.2.6|
|''Requires''|UpToDateFiltersPlugin|
|''Requirements note''|[[UpToDateFiltersPlugin|http://yakovl.bplaced.net/TW/ExtraFilters.html#UpToDateFiltersPlugin]] is necessary only for TW below v2.6.2|
|''Source''|http://yakovl.bplaced.net/TW/STP/STP.html#SharedTiddlersPlugin|
|''Author''|Yakov Litvin|
|''Forked from''|[[IncludePlugin|http://tiddlywiki.abego-software.de/#IncludePlugin]], by Udo Borkowski|
|''Contact''|see [[docs|SharedTiddlersPluginInfo]]|
|''Copyright''|Yakov Litvin, 2013|
|''Licence''|[[BSD-like open source license|http://yakovl.bplaced.net/TW/STP/STP.html#%5B%5BYakov%20Litvin%20Public%20Licence%5D%5D]] |
|&gt;| In this tiddler, the code is minified and hidden; the full code can be found [[here|http://yakovl.bplaced.net/TW/STP/STP.html#SharedTiddlersPluginCode]]. |
''Config:''
***/
//{{{
config.options.STP_hijackPrettyLink = true;
config.options.STP_hijackImageFormatter = true;
//}}}
// /%
config.filters.all = function(results,match) {
	if(match[3] == "with included") { // brings included tiddlers as well
		var m,matched = this.reverseLookup();
		for(m = 0; m &lt; matched.length; m++)
			results.pushUnique(matched[m]);
	} else
		this.forEachTiddler(function(tName,tiddler){
			results.pushUnique(tiddler);
		});
	return results;
};
config.filters.includedFrom = function(results,match) {

	var url = twWeb.getStoreUrlById(match[3]);
	if(!url)
		return [];

	for(var i = 0; i &lt; results.length; i++)
		if(results[i].getIncludeURL() != url)
			results.splice(i--,1);
	return results;
};
config.filters.external = function(results,match) {

	for(var i = 0; i &lt; results.length; i++)
		if(!results[i].getIncludeURL())
			results.splice(i--,1);
	return results;
};
config.filters.internal = function(results,match) {

	for(var i = 0; i &lt; results.length; i++)
		if(results[i].getIncludeURL())
			results.splice(i--,1);
	return results;
};

(function(){
//==============================================================================
// install only once stuff

// Ensure the global abego namespace is set up.
if (!window.abego) window.abego = {};

// Install only once (don't install if abego.IncludePlugin is installed as well)
if (abego.TiddlyWikiIncluder)
	return alert("Warning: abego.TiddlyWikiIncluder already exists, so probably two copies of SharedTiddlersPlugin and/or IncludePlugin are installed and activated. It is highly recommended to deactivate all but one copy. You can find those by searching 'abego.TiddlyWikiIncluder'.");

// abego.TiddlyWikiIncluder is defined near the end of the code

// Define the API namespace:
window.sharedTiddlersAPI = {};

//==============================================================================
// Helpers

// This is used instead of displayMessage, because the latter sometimes doesn't show the messages
var displayAndLogMessage = function(text,linkText) {
	displayMessage(text,linkText);
	console.log(text);
};

var invokeLater = function(func, delay, priority) {
	return setTimeout(func,delay);
};

//------------------------------------------------------------------------------
// url helpers

var isRelativeURL = function(url) {
// as Unix filesystem root is "/", urls starting with it are not considered as relative

	return (url.search(/^(?:((http(s)?)|(file)):)|(.\:\\)|(\\\\)|(\/)/) != 0);
};

var getPathFromURL = function(url) {

	return (url.lastIndexOf("/") &gt; -1) ?
		url.substr(0, url.lastIndexOf("/") + 1) : "";
};

var resolveUrlFrom = function(urlToResolve, sourceUrl) {

	return (isRelativeURL(urlToResolve) &amp;&amp; sourceUrl) ?
		getPathFromURL(sourceUrl) + urlToResolve : urlToResolve;
};

// limitedly turns URI (URL) reference into an absolute URI (URL) and windows paths into URL
var stp_resolveURL = function(url) {

	if (url.search(/^((http(s)?)|(file)):/) != 0) {
	// no protocol prefix..

		if (isRelativeURL(url))

			url = resolveUrlFrom(url, document.location.toString());
		else
		// "url" is an "absolute" path to a local file. Prefix it with file://

			url = "file://" + url;

		// replace every \ by a /, to cover Windows style pathes
		url = url.replace(/\\/mg,"/");
	}
	return url;
};

//------------------------------------------------------------------------------
// file/tw loading functions

// an evolution of the deprecated loadRemoteFile function with TW 2.7.0 codes
var stp_loadRemoteFile = function(url,callback,params) {
	if(version.major &lt; 2 || version.major == 2 &amp;&amp; version.minor &lt; 7) {
		var httpSuccess = function(xhr) {
			try {
				return (!xhr.status &amp;&amp; location.protocol === "file:") ||
					(xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300) ||
					xhr.status === 304 || xhr.status === 1223;
			} catch(e) {}
			return false;
		};
		var options = {
			type:"GET",
			url:url,
			processData:false,
			data:undefined, // cut off?
			cache:false,
			beforeSend: function(xhr) {;},
			complete: function(xhr,textStatus) {
				if(httpSuccess(xhr))
					callback(true,params,xhr.responseText,url,xhr);
				else
					callback(false,params,null,url,xhr);
			}
		};
		try {
			if(window.Components &amp;&amp; window.netscape &amp;&amp; window.netscape.security &amp;&amp; document.location.protocol.indexOf("http") == -1)
				window.netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");
		} catch (ex) {}
		return jQuery.ajax(options);
	} else
		return httpReq("GET",url,callback,params);
};

// Asynchronously load the given (local or remote) file.
// 
// @param	url
// value:	either an URL or a local file path to a file
//
//	Examples:
//	* http://www.abego-software.de/index.html
//	* file:///C:/abegoWebSite-Copy/index.html
//	* C:\abegoWebSite-Copy\index.html    (for Windows machines)
//
//	Notice: backslashes in JavaScript string constants must be escaped, 
//	i.e. the last example must be written as: "C:\\abegoWebSite-Copy\\index.html"
//	when "hardcoded" in JavaScript source code.
// 
// @param	callback
// value:	function(content,url,params,errorMessage) 
//		called at the end of the operation. 
//		On success content holds the content of the loaded file. 
//		On error content is undefined and errorMessage holds an error message. 
//		params is the params passed into stp_LoadFile.
//
// @param	params
//		passed through to the callback function
// 
var stp_LoadFile = function(url,callback,params) {

	var onLoad = function(status,params,responseText,url,xhr) {
		return status 
				? callback(responseText, url, params)
				: callback(undefined, url, params, "Error loading %0".format([url]));
	};

	// Make sure the URL is a real URL, with protocol prefix etc.
	url = stp_resolveURL(url);
	
	stp_loadRemoteFile(url,onLoad,params);
};

// Asynchronously load the given (local or remote) TiddlyWiki store.
// 
// @param	url
// value:	either an URL or a local file path to a TiddlyWiki file (absolute or relative)
//
//	Examples:
//	* http://www.abego-software.de/index.html
//	* file:///C:/abegoWebSite-Copy/index.html
//	* include/beta.html
//	* C:\abegoWebSite-Copy\index.html    (for Windows machines)
//
//	Notice: backslashes in JavaScript string constants must be escaped, 
//	i.e. the last example must be written as: "C:\\abegoWebSite-Copy\\index.html"
//	when "hardcoded" in JavaScript source code.
// 
// @param	callbackWithStore
// value:	function(theStore,url,params,errorMessage) 
//			called at the end of the operation. 
//			On success theStore holds the loaded store (a TiddlyWiki object). 
//			On error theStore is undefined and errorMessage holds an error message. 
//			params is the params passed into stp_loadTiddlyWikiStore
//
// @param	params
//		passed through to the callbackWithStore
//
// @param	progress	[optional]
// value:	function(message, sender, state, url, params)
//		called in various situations during the operation,
//		typically used to show "the progress" of the operation.
//		sender: the constant "stp_loadTiddlyWikiStore"
//		state: one of these: "Started", "Processing", "Done", "Failed"
//		"Processing" means the data has been received and in now processed.
// 
var stp_loadTiddlyWikiStore = function(url,callbackWithStore,params,progress) {
	
	var sendProgress = function(message, state) {
		if (progress)
			progress(message,"stp_loadTiddlyWikiStore",state,url,params);
	};
	
	var sendError = function(message) {
		sendProgress("Error when loading %0".format([url]),"Failed");
		callbackWithStore(undefined, url, params, message);
		return message;
	};

	var sendStore = function(store) {
		sendProgress("Loaded %0".format([url]),"Done");
		callbackWithStore(store, url, params);
		return null;
	};
	
	
	var callback = function(content,theURL,params,errorMessage) {
		if (content === undefined) {
			sendError(errorMessage);
			return;
		};
		
		sendProgress("Processing %0".format([url]),"Processing");
		var invalidFileErrorMsg = "The file '%0' does not appear to be a valid TiddlyWiki file";
		try {
			// Load the content from the "content" string into a TiddlyWiki() object
			var importStore = new TiddlyWiki();
			var errorText = importStore.importTiddlyWiki(content)? null :
				"Problem with importing TiddlyWiki, probable reason is: "+
				invalidFileErrorMsg.format([url]);
			if(errorText)
				sendError(errorText);
			else
				sendStore(importStore);
		} catch (ex) {
			sendError(exceptionText(ex));
		};
	};
	
	sendProgress("Start loading %0".format([url]),"Started");
	stp_LoadFile(url,callback,params);
};

//------------------------------------------------------------------------------
// plugin installation helpers

var getArbitraryPluginInfo = function(tiddler) {
// getPluginInfo can't be used (for included tiddlers) because of the ugly slice handling of the core
//  (it uses {store} where it could handle the tiddler directly)
	var pInfo = {};

	var slices = {};
	var requiredInfo = ["Name","Description","Version","Requires","CoreVersion","Date","Source", "Author","License","Browsers"];
	store.slicesRE.lastIndex = 0;
	var match = store.slicesRE.exec(tiddler.text);
	while(match) {
		if(match[2])
			slices[match[2]] = match[3];
		else
			slices[match[5]] = match[6];
		match = store.slicesRE.exec(tiddler.text);
	}
	for(var i = 0; i &lt; requiredInfo.length; i++)
		if(slices[requiredInfo[i]])
			pInfo[requiredInfo[i]] = slices[requiredInfo[i]];
	pInfo.tiddler = tiddler;
	pInfo.title = tiddler.title;
	pInfo.log = [];

	return pInfo;
}

var checkPluginInstalled = function(pluginName) {
	for(var i = 0; i &lt; installedPlugins.length; i++)
		if(installedPlugins[i].title == pluginName || installedPlugins[i].Name == pluginName)
			return true;
	return false;
}

var installPlugin = function(tiddler,force) {

	var pluginName = getArbitraryPluginInfo(tiddler).Name || tiddler.title;
	// check if such a plugin was installed previously, return if so
	if(!force) // two layers to improve the speed in the "force == true" case
		if(checkPluginInstalled(pluginName))
			return;

	// get the plugin info
	var pluginInfo = getArbitraryPluginInfo(tiddler);
	if(tiddler.getIncludeURL())
		pluginInfo.log.push("included from "+tiddler.getIncludeURL());

	// install the plugin
	pluginInfo.executed = true;
	var startTime = new Date();

	try {
		window.eval(tiddler.text);
	} catch(ex) {
		pluginInfo.log.push(config.messages.pluginError.format([exceptionText(ex)]));
		pluginInfo.error = true;
		console.log("error evaluating " + tiddler.title, ex);
		story.displayTiddler(null,"PluginManager");
		displayMessage(config.messages.customConfigError);
	}
	pluginInfo.startupTime = String((new Date()) - startTime) + "ms";

	// register the plugin
	installedPlugins.push(pluginInfo);
}


//==============================================================================
// Shared Tiddlers Plugin

// Constants

var WAITING = "waiting";
var LOADING = "loading";

var ANI_DURATION_HIDE_STATE = 1000;

var REFRESH_PRIORITY = -200;
var ANIMATION_PRIORITY = -100;
var UPDATE_STATE_PRIORITY = -300;

// --------------------------------------------------
// Variables

var useInclude;         // this variable can be used to control include enabling by other things than cookies
var includedStores = {};  // url(String) -&gt; TiddlyWiki or String; if not (yet) loaded a status or an error string
var pendingOnLoadURLs = []; // [] of String: a list of urls that should be passed with the next "notifyListeners"
var refreshTiddlyWikiTimerID; // for delayed refresh
var listeners = [];
var progress;

// rules pointing which stores tiddlers with conflicting names should be fetched from
function FetchPreferences() {
	var prefs = {};
	
	this.add = function(tiddlerName,sourceUrl,substitute,substituteShadow) {
		if(!substitute &amp;&amp; !substituteShadow)
			return;
		if(prefs[tiddlerName] == undefined)
			prefs[tiddlerName] = {urlsSubs: [], urlsSubsSh: []};
		if(substitute)
			prefs[tiddlerName].urlsSubs.pushUnique(sourceUrl);
		if(substituteShadow)
			prefs[tiddlerName].urlsSubsSh.pushUnique(sourceUrl);
	};
/*	this.getPrefs = function(tiddlerName) {
		return jQuery.extend(true, {}, prefs[tiddlerName]);
	};
*/	this.getSubsUrl = function(tiddlerName) {
		var pref = prefs[tiddlerName];
		if(pref == null)
			return null;
		if(pref.urlsSubs.length == 0)
			return null;
		return pref.urlsSubs[0];
	};
	this.getSubsShUrl = function(tiddlerName) {
		var pref = prefs[tiddlerName];
		if(pref == null)
			return null;
		if(pref.urlsSubsSh.length == 0)
			return null;

		// check if there's a tiddler with both preferences
		var i, j;
		for(i = 0; i &lt; pref.urlsSubs.length; i++)
			for(j = 0; i &lt; pref.urlsSubsSh.length; j++)
				if(pref.urlsSubs[i] == pref.urlsSubsSh[j])
					return pref.urlsSubs[i];

		return pref.urlsSubsSh[0];
	};
	this.containSubsUrl = function(tName,url) {
		var pref = prefs[tName];
		if(pref == null)
			return false;
		return pref.urlsSubs.contains(url);
	};
	this.containSubsShUrl = function(tName,url) {
		var pref = prefs[tName];
		if(pref == null)
			return false;
		return pref.urlsSubsSh.contains(url);
	};
	this.removeByUrl = function(url) {  // removes all priorities of tiddlers, included from the url

		var tName, pref, i;

		for(tName in prefs) {
			pref = prefs[tName]
			for(i = 0; i &lt; pref.urlsSubs.length; i++)
				if(pref.urlsSubs[i] == url)
					pref.urlsSubs.splice(i--,1);
			for(i = 0; i &lt; pref.urlsSubsSh.length; i++)
				if(pref.urlsSubsSh[i] == url)
					pref.urlsSubsSh.splice(i--,1);
			// if (pref.urlsSubs.length == 0 &amp;&amp; pref.urlsSubsSh.length == 0), not nec. to delete pref
		}
	};
};
var fetchPreferences = new FetchPreferences();

function Conflicts() {

	// hashmaps by tiddler name of potentially conflicting tiddlers with that name;
	// each element is a hashmap by url of tiddlers with such names
	var pConfs = {},  // doesn't contain info about tiddlers in the main store
	    pSConfs = {}; // for tiddlers that may conflict when substituting a shadow

	this.init = function() {
		// notify of name conflicts in the whole set of initial and included tiddlers?
		if(config.options.chkWarnOnSharedTiddlersConflicts == undefined) config.options.chkWarnOnSharedTiddlersConflicts = true;
		// use alert() for notifications?
		if(config.options.chkAlertOnSharedTiddlersConflicts == undefined) config.options.chkAlertOnSharedTiddlersConflicts = false;
	};
	// check whether a new tiddler (not included yet) may cause a conflict (now or in the future)
	this.checkNew = function(tName, url, subs, subsSh) {

		// use to add when a tiddler with such name is already present
		var addData = function(confsMap, tidParams) {

			var includeData = function(tidParams) {		// better to create a separate class
				return { subs: tidParams.substitute, warned: false };
			};
			var getSubsPriority = function(data) {
				return data.subs;
			}

			var conf = confsMap[tidParams.title];
			if(!conf) {
				conf = confsMap[tidParams.title] = {};
				conf[tidParams.url] = includeData(tidParams);
			} else {
				var confPart = conf[tidParams.url];
				if(!confPart)
					conf[tidParams.url] = includeData(tidParams);
				else {
					if(!getSubsPriority(confPart) &amp;&amp; tidParams.substitute)
						conf[tidParams.url] = includeData(tidParams);
						// better to set subs to true and warned to false
				}
			}
		}

		// check if there's a tiddler with such a name
		var existingTid = forEachLoadedStore(function(theStore, storeUrl) {	// in included stores
			if(storeUrl != url)
				return theStore.fetchTiddler(tName);
		}) || window.sharedTiddlersAPI.orig_fetchTiddler(tName);		// or in the main one
		// if the tiddler is added to the main store after exactly one tiddler is included, no conflict is
		// detected by this algorithm; also, it doesn't account deleting the tiddler from the main store

		if(!existingTid)
			return;
		var mainStoreId = "main store",
		    existingTidUrl = existingTid.getIncludeURL();

		// check conflicts among all included tiddlers (important when no shadow with such name exists)
		if(!pConfs[tName])
			addData(pConfs, {
				title: tName,
				url: existingTidUrl || mainStoreId,
				substitute: existingTidUrl ? fetchPreferences.containSubsUrl(tName,existingTidUrl) : undefined
			});
		addData(pConfs, { title: tName, url: url, substitute: subs });

		// check conflicts among tiddlers that substitute a shadow
		if(subsSh) {
			var existingTidSubsSh = forEachLoadedStore(function(theStore, storeUrl) {
				if(storeUrl != url &amp;&amp; fetchPreferences.containSubsShUrl(tName,storeUrl))
					return theStore.fetchTiddler(tName);
			}) || window.sharedTiddlersAPI.orig_fetchTiddler(tName);
			// same problems
			
			if(!existingTidSubsSh)
				return;
			var existingTidSubsShUrl = existingTidSubsSh.getIncludeURL();

			// conflicts among substituting tiddlers are important when a shadow with such name exists
			if(!pSConfs[tName])
				addData(pSConfs, {
					title: tName,
					url: existingTidSubsShUrl || mainStoreId,
					substitute: existingTidSubsShUrl ? fetchPreferences.containSubsShUrl(tName,existingTidSubsShUrl) : undefined
				});
			addData(pSConfs, { title: tName, url: url, substitute: subs });
		}
	};
	this.markNodeUnloaded = function(url) {
		var t;
		for(t in pConfs)
			if(pConfs[t][url])
				delete pConfs[t][url];
		for(t in pSConfs)
			if(pSConfs[t][url])
				delete pSConfs[t][url];
	};
	this.notify = function() {
		var msgAndLog = config.options.chkWarnOnSharedTiddlersConflicts;
		var doAlert   = config.options.chkAlertOnSharedTiddlersConflicts;
		if(!doAlert &amp;&amp; !msgAndLog)
			return; // no conflict is marked as "warned" - this is by intent
		var tName, tUrl;

		var checkOrDisplayConflicts = function(map,msgAndLog,markWarned) {
			var msg = ""; // message to return (for alerting etc)
			var addM = function(m) { // pushes all notification messages
				msg += ("\n"+m);
				if(msgAndLog)
					displayAndLogMessage(m);
			};
			var tName, tSources, tUrl, subs, nOfConflicting, newPresent,
				subsMsg = "  (with the subsitute priority)";
				// mark conflicts among tiddlers with the substitute priority

			// find out where necessary, notify
			for(tName in map) {
				tSources = map[tName];

				// find out which priority is of interest
				subs = false;
				for(tUrl in tSources)
					if(tSources[tUrl].subs)
						subs = true;

				// if there's only one tiddler with "substitute", there's no conflict
				nOfConflicting = 0;
				for(tUrl in tSources)
					if(tSources[tUrl].subs == subs)
						nOfConflicting++;
				if(nOfConflicting &lt; 2)
					break;

				// find out if new conflicting tiddlers are present
				newPresent = false;
				for(tUrl in tSources)
					if(tSources[tUrl].subs == subs &amp;&amp; !tSources[tUrl].warned)
						newPresent = true;

				// start notification
				if(newPresent) {
					addM("* "+tName+" in:");
					for(tUrl in tSources)
						if(tSources[tUrl].subs == subs &amp;&amp; !tSources[tUrl].warned) {
							addM("** "+tUrl);
							if(markWarned)
								tSources[tUrl].warned = true;
						}
					if(subs)
						addM(subsMsg);
				}
			}
			return msg;
		};

		var msg = "";
		if(checkOrDisplayConflicts(pConfs,false,false)) { // new conflicts present
			msg += "New conflicts:";
			if(msgAndLog) displayAndLogMessage(msg);
			msg += checkOrDisplayConflicts(pConfs,msgAndLog,true);
		};
		if(checkOrDisplayConflicts(pSConfs,false,false)) { // new conflicts among tiddlers substituting shadows present
			if(msg) msg += "\n";
			var m = "New conflicts among tiddlers competing for substituting shadows:";
			msg += m;
			if(msgAndLog) displayAndLogMessage(m);
			msg += checkOrDisplayConflicts(pSConfs,msgAndLog,true);
		};
		if(doAlert &amp;&amp; msg)
			alert(msg);
	};
//	this.state = // return current state as a string (for includeState)
};
conflicts = new Conflicts();
conflicts.init();

// --------------------------------------------------
// Helper functions

var isIncludeEnabled = function() {
	if (useInclude === undefined)
		useInclude = config.options.chkUseInclude === undefined || config.options.chkUseInclude;
	return useInclude;
};

var getMissingIncludeMsg = function(url) {
	return "No include specified for %0".format([url])
};

// Called after one or more included TiddlyWikis are loaded
//
var notifyListeners = function() {
	var urls = pendingOnLoadURLs;
	pendingOnLoadURLs = [];
	if (urls.length)
		for (var i = 0; i &lt; listeners.length; i++)
			listeners[i](urls);
};

var idleCount; // Reset to 0 when the system is "not idle", incremented inside refreshTiddlyWiki

var refreshTiddlyWiki = function() {
	// To avoid to much refreshing/flickering don't refresh immediately 
	// but wait until the system was idle for a certain time.

	if (refreshTiddlyWikiTimerID !== undefined) clearInterval(refreshTiddlyWikiTimerID);

	idleCount = 0;

	var sendDone = function() {
		twWeb.sendProgress("","","Done");
	};

	refreshTiddlyWikiTimerID = setInterval(function() {
		idleCount++;
		if (idleCount &lt;= 10)
			return;

		clearInterval(refreshTiddlyWikiTimerID);
		refreshTiddlyWikiTimerID = undefined;

		twWeb.sendProgress("Refreshing...","","");
		refreshDisplay();
		invokeLater(sendDone,0,REFRESH_PRIORITY);
	},1);
};

// Calls callback for every loaded store and returns the first non-false/null.. value returned by callback.
//
// @param	callback
// value:	function(store, url)
//
var forEachLoadedStore = function(callback) {
	var result;
	for(var url in includedStores) {
		var theStore = twWeb.getStore(url);
		if (theStore &amp;&amp; (result = callback(theStore, url)))
			return result;
	}
};

// hijack fetchTiddler so that it works with tiddlers from included stores as well
var attachToStore = function() {
	if (!window.store)
		return invokeLater(attachToStore,100);

	var orig_fetchTiddler = store.fetchTiddler;
	window.sharedTiddlersAPI.orig_fetchTiddler = orig_fetchTiddler;
	// reserve access to the original method to be able to fetch tiddlers from main store,
	// including substituted ones

	store.fetchTiddler = function(title) {
		var t, subsUrl = fetchPreferences.getSubsUrl(title), subsShUrl;

		// first, look for the tiddler in the main store, unless there's nothing to substitute with
		if(!subsUrl) {
			t = orig_fetchTiddler.apply(this,arguments);
			if(t) return t;
		} else
			return includedStores[subsUrl].fetchTiddler(title);
		
		// then, look for shadowed tiddlers in main store and external ones to substitute those
		if(config.shadowTiddlers[title] !== undefined) {
			if(subsShUrl = fetchPreferences.getSubsShUrl(title))
				return includedStores[subsShUrl].fetchTiddler(title);
			else
				return undefined;
		};

		// Don't look for the "New Tiddler" tiddler in the included TiddlyWikis,
		// since returning such a tiddler (that is readonly) will make it impossible
		// in the Main TiddlyWiki to create new tiddlers via standart "new tiddler" button.
		if (title == config.macros.newTiddler.title) return undefined;

		// finally, look for an external one without "substitute" preference
		return forEachLoadedStore(function(theStore, url) {
			return theStore.fetchTiddler(title);
		});
	};

	// refresh TiddlyWiki to reflect the new included Tiddlers (if we have any).
	if(twWeb.getIncludedStoresUrls().length)
		refreshTiddlyWiki();
};

var includeFromIncludeList = function() {
	if (!window.store)
		return invokeLater(includeFromIncludeList,100);
	
	var includeListText = store.getTiddlerText("IncludeList");
	if (includeListText)
		wikify(includeListText,document.createElement("div"),undefined,store.fetchTiddler("IncludeList"));
};

var getFunctionUsingForReallyEachTiddler = function(func) {
	var wrapper = function() {
		var orig_forEachTiddler = store.forEachTiddler;

		var forEachTiddlerWithIncludes = function(callback) {
			var done = {};

			var callbackWrapper = function(title, tiddler) {
				// ensure every title is only processed once
				if(done[title]) 
					return;
				
				// do and set done for appropriate tiddlers
				if(!fetchPreferences.getSubsUrl(title)||
				   (fetchPreferences.getSubsUrl(title) == tiddler.getIncludeURL())) {
					done[title] = 1;
					callback.apply(this,arguments);
				};
			};
			
			// first, forEachTiddler over the original tiddlers
			orig_forEachTiddler.call(store, callbackWrapper);
			
			// add nonsubstituted shadowTiddler titles to done 
			// (to avoid an included store hide a shadow tiddler)
			for (var n in config.shadowTiddlers)
				if(!fetchPreferences.getSubsShUrl(n))
					done[n] = 1;

			// add the "New Tiddler" tiddler to done
			// to avoid an included store (with such tiddler) prevent creating new tiddlers
			done[config.macros.newTiddler.title] = 1;

			// forEachTiddler over every included store
			forEachLoadedStore(function(theStore, url) {
				theStore.forEachTiddler(callbackWrapper);
			});
		};
		
		store.forEachTiddler = forEachTiddlerWithIncludes;
		try {
			return func.apply(this,arguments);
		} finally {
			store.forEachTiddler = orig_forEachTiddler;
		};
	};
	
	return wrapper;
};

var useForReallyEachTiddler = function(object,property) {
	return object[property] = getFunctionUsingForReallyEachTiddler(object[property]);
};


//================================================================================
// config.extensions.SharedTiddlersPlugin (the "includer" engine)

config.extensions.SharedTiddlersPlugin = {

	// function config.extensions.SharedTiddlersPlugin.getFunctionUsingForReallyEachTiddler(func)
	//
	// Returns a function that behaves as func, but every call to store.forEachTiddler will actually 
	// be a call to forReallyEachTiddler (see below), i.e. iterate over the tiddlers of the main store 
	// and of the included TiddlyWikis
	//
	// @return the patched function
	//
	getFunctionUsingForReallyEachTiddler: getFunctionUsingForReallyEachTiddler,
	
	// function config.extensions.SharedTiddlersPlugin.useForReallyEachTiddler(object,property)
	//
	// Patches the function hold in the given property of the object in such a way that every call
	// to store.forEachTiddler will actually be a call to forReallyEachTiddler (see below), i.e.
	// iterate over the tiddlers of the main store and of the included TiddlyWikis
	//
	// @param  object
	// @param  property the name of the property of the object containing the function to be patched.
	// @return the patched function
	//
	useForReallyEachTiddler: useForReallyEachTiddler,
	
	// Add a listener function to the TiddlyWikiIncluder.
	//
	// @param  listener  function(urls)
	//			urls: [] of Strings, containing the urls of the TiddlyWiki just included
	//			(see url@config.extensions.SharedTiddlersPlugin.include)
	//			called whenever one or more TiddlyWiki store are successfully included.
	//
	addListener: function(listener) {
		listeners.push(listener);
	}
};


// -------------------------------------------------------------------------------
// TiddlyWikiIncluder initialization code

config.extensions.SharedTiddlersPlugin.addListener(refreshTiddlyWiki);

config.shadowTiddlers.AdvancedOptions +=
	("\n~IncludePlugin settings:"+
	 "\n&lt;&lt;option chkUseInclude&gt;&gt; Include ~TiddlyWikis"+
	 "\n&lt;&lt;option chkAlertOnSharedTiddlersConflicts&gt;&gt; Alert on tiddler name conflicts"+
	 "\n&lt;&lt;option chkWarnOnSharedTiddlersConflicts&gt;&gt; Display messages and write log in the browser console on conflicts"+
	 "\nIncludeList | IncludeState | ImportIncluded | [[help|http://yakovl.bplaced.net/TW/SharedTiddlersPlugin.html/#SharedTiddlersPluginInfo]]"+
	 "\n^^(Reload this ~TiddlyWiki to make changes become effective)^^");
config.shadowTiddlers.IncludeState = "&lt;&lt;includeState&gt;&gt;";

// add the "importer" engine
config.shadowTiddlers.ImportIncluded =
"| the url of the document to import from | &lt;&lt;option txtStoreUrl&gt;&gt;               |\n"+
"|    the filter of tiddlers to import    | &lt;&lt;option txtFilterTiddlersToImport&gt;&gt; |\n"+
"|           the importing mode           | &lt;&lt;option txtImportMode&gt;&gt;             |\n"+
"&lt;html&gt;&lt;a href='javascript:;' onclick='\n"+
"	var storeUrl = config.options.txtStoreUrl,\n"+
"	    params = {\n"+
"		filterLine: config.options.txtFilterTiddlersToImport,\n"+
"		importMode: config.options.txtImportMode,\n"+
"		noRefresh: true,\n"+
"	};\n"+

"	if(!storeUrl)\n"+
"		return displayMessage(\"please specify the url to import from\");\n"+
"	if(!params.filterLine)\n"+
"		return displayMessage(\"please specify the filter of tiddlers to import\");\n"+
"	if(!sharedTiddlersAPI.getStore(storeUrl))\n"+
"		displayMessage(\"warning: no store was loaded from \"+storeUrl+\" previously, trying now\");\n"+

"	twWeb.include(storeUrl,params);\n"+
"'&gt;import (without saving)&lt;a/&gt;&lt;/html&gt;";

//================================================================================
// Tiddler extension/modification

Tiddler.prototype.isIncluded = function() {
	return this.includeURL != undefined;
};

Tiddler.prototype.getIncludeURL = function() {
	return this.includeURL;
};

Tiddler.prototype.setIncludeURL = function(url) {
	this.includeURL = url;
};

Tiddler.prototype.deleteIncludeURL = function() {
	delete this.includeURL;
};

// make included tiddlers readonly
config.extensions.SharedTiddlersPlugin.orig_Tiddler_isReadOnly = Tiddler.prototype.isReadOnly;

Tiddler.prototype.isReadOnly = function() {
	return config.extensions.SharedTiddlersPlugin.orig_Tiddler_isReadOnly.apply(this,arguments) || this.isIncluded();
}

//================================================================================
// TiddlyWiki modifications

// In some TiddlyWiki functions the "forEachTiddler" should work on all tiddlers, also those from 
// included store. (E.g. TiddlyWiki.prototype.getTags)
//
// But not for all (e.g. TiddlyWiki.prototype.getTiddlers is used for saving, but only the "own" tiddlers should be saved)
//
// Therefore explicitly list the functions that should be "wrapped" to use the "forReallyEachTiddler".
//
var tiddlyWikiFunctionsUsingForReallyEachTiddler = {
	getMissingLinks: 1, getOrphans: 1,
	getTags: 1, reverseLookup: 1, updateTiddlers: 1};
	
for (var n in tiddlyWikiFunctionsUsingForReallyEachTiddler)
	useForReallyEachTiddler(TiddlyWiki.prototype,n);

//================================================================================
// Web of TiddlyWikis

function IncludingMemorizer() { // the structure to store info about already handled include macros
	var used = {};
	this.isUsed  = function(line) { return used[line]? true : false; };
	this.setUsed = function(line) { used[line] = 1; };
	this.getUsed = function() { return jQuery.extend(true, {}, used) };
	this.markUnused = function(usedMap) {

		for(var u in usedMap)
			used[u] = undefined; // don't delete to keep the order of inclusion (for reloading)
	};
};

function TwWeb() {

	var nodes = {};			// hashmap by node name of nodes' metadata
	var nodeConflicts = {};		// hashmap by node name of arrays of conflicts
	var nodeWaitingTasks = {};	// hashmap by node name of arrays of Waiting Tasks
	var nodeDescription = function(url) { // PoG: can be turned into a separated "class"
		return { url : url };
	};
	var selfNodeName;
	var self = this;

	this.includeUsages = new IncludingMemorizer();

// ----- Nodes desctiptions part ---------------------------------------------------------------------

	// set/get the name of "main" (including) node
	this.setSelfNodeName = function(name) {
		selfNodeName = name;
	};
	this.getSelfNodeName = function() {
		return selfNodeName;
	};

	// set/get/delete node description
	this.setNodeDesc = function(nodeName, desc) {

		var existing = this.getNodeDesc(nodeName);

		// currently, doesn't change metadata on conflict
		if(existing)
			this.addConflict(nodeName, desc);
		else
			nodes[nodeName] = desc;

		this.callWaitingTasks(nodeName);
	};
	this.getNodeDesc = function(nodeName) {
		return nodes[nodeName];
	};
	this.deleteNodeDesc = function(nodeName) {
		nodes[nodeName] = null;
	};

	// "API" method to be used in the macro
	this.addNodeDesc = function(nodeName, url) {
		this.setNodeDesc(nodeName, nodeDescription(url));
	};

	// returns "better" description if one is "strictly better" than the other or "even" and null otherwise
	this.compareNodeDesc = function(desc1, desc2) {

// looks like here's a mistake: probably ": desc2" (?)
		return (desc1.url == desc2.url)? desc1 : null;
	};

	this.getNodeUrl = function(nodeName) {

		var desc = this.getNodeDesc(nodeName);
		return desc? desc.url : null;
	};

	// @param	nodeId
	//		url or "node: nodeName" id of the node
	// @return	url of the node (if it is defined) or null
	//
	this.getStoreUrlById = function(nodeId) {

		var node = self.checkNodeNotation(nodeId),
		    url  = node ? self.getNodeUrl(node) : nodeId;
		return url;
	}

	this.setNodeNotation = function(nodeName) {

		return "node: " + nodeName;
	};
	this.checkNodeNotation = function(urlParam) {

		var nodeCalcRE = /node: (.*)/,
		    nodeCalcMatch = nodeCalcRE.exec(urlParam);

		return nodeCalcMatch ? nodeCalcMatch[1] : null;
	};

	this.addConflict = function(nodeName, nodeDesciption) {

		var betterDesc = this.compareNodeDesc(nodeDesciption,this.getNodeDesc(nodeName));
		if(betterDesc) {
			this.deleteNodeDesc(nodeName);
			this.setNodeDesc(nodeName, betterDesc);
			return;
		}

		if(nodeConflicts[nodeName])
			nodeConflicts[nodeName].push(nodeDesciption);
		else
			nodeConflicts[nodeName] = [ nodeDesciption ];

		alert(  "Warning: more than one description of the "+nodeName+" node was pushed. "+
			"The earlier version is kept."  );
	};

// ----- Waiting tasks part --------------------------------------------------------------------------

	this.setWaitingTask = function(nodeName, waitingTaskFunc, waitingTaskSelf) {

		var waitingTask = { action: waitingTaskFunc, self: waitingTaskSelf };

		if(nodeWaitingTasks[nodeName])
			nodeWaitingTasks[nodeName].push(waitingTask);
		else
			nodeWaitingTasks[nodeName] = [ waitingTask ];

		if(this.getNodeUrl(nodeName))
			this.callWaitingTasks(nodeName);
	};
	this.callWaitingTasks = function(nodeName) {

		var toDo = nodeWaitingTasks[nodeName];

		if(toDo)
			for(var i = 0; i &lt; toDo.length; i++)
				toDo[i].action.call(toDo[i].self);

		nodeWaitingTasks[nodeName] = null; // remove called Waiting Tasks
	};

// ----- Including stuff part ------------------------------------------------------------------------

	// ---- helpers ----

	this.setProgressFunction = function(func) {
		progress = func;
	};
/*	this.getProgressFunction = function() {	// is not in use
		return progress;
	};
*/	this.sendProgress = function(message, sender, state) {
		if (progress)
			progress.apply(this,arguments);
	};

	// Returns true when there are "pending" includes, i.e. TiddlyWiki that are not yet loaded.
	// A TiddlyWiki that failed loading is not pending.
	//
	this.hasPendingIncludes = function() {
		var state;
		for(var url in includedStores) {
			state = this.getState(url);
			if (state == WAITING || state == LOADING)
				return true;
		};
		return false;
	};

	// Called when an included TiddlyWiki could not be loaded.
	// By default an error message is displayed.
	//
	this.onError = function(url, errorMessage) {
		displayAndLogMessage("Error when including '%0':\n%1".format([url, errorMessage]));
	};

	// import a tiddler from an included store
	//
	// @param  tiddler - a tiddler to import
	// @param  mode: undefined or 1 - import anyway (other modes, like "don't substitute" will be supported)
	// @return the result object:
	//  .status means: -1 = error, 0 = tiddler is imported, &gt;0 - reserved for other situations
	//  .errorText is not empty on error
	//  .tiddler is the tiddler with /the title/ which is in the store after "it is over" (may be null)
	//  .from is the url line equal to the includeURL of the imported tiddler
	//
	this.importIncluded = function(tiddler,mode) {

		if(mode == undefined)
			mode = 1;
		else
			mode = parseInt(mode);

		var t, tInMain, result = { tiddler: null };
		var doImport = function(t) {
			store.addTiddler(t);
			store.setDirty(true);
			result.status = 0;
			result.tiddler = t;
			result.from = url;
		};

		if(tiddler instanceof Tiddler) {
			// see return value, this is for the case when the import is not done
			result.tiddler = window.sharedTiddlersAPI.orig_fetchTiddler(tiddler.title);
			t = jQuery.extend(true, new Tiddler(), tiddler);
		} else {
			result.status = -1;
			result.errorText = "not a Tiddler instance";
			return result;
		};
		var url;
		if(url = t.getIncludeURL())
			t.deleteIncludeURL();

		switch(mode) {
			case 4: { // import only newer and on confirm
				tInMain = window.sharedTiddlersAPI.orig_fetchTiddler(t.title);
				if(!tInMain || tInMain.modified &lt; t.modified)
					if(confirm("Up-to-date "+t.title+" from "+url+" is availabe, import?"))
						doImport(t);
				break
			}
			case 2: { // import only newer versions/unexisting tiddlers
				tInMain = window.sharedTiddlersAPI.orig_fetchTiddler(t.title);
				if(!tInMain || tInMain.modified &lt; t.modified)
					doImport(t);
				break
			}
			case 3: { // import on confirm
				if(confirm(t.title+" from "+url+" is availabe, import?"))
					doImport(t);
				break
			}
			case 1: { // import anyway
				doImport(t);
				break
			}
			default: {
				result.status = -1;
				result.errorText = "unknown import mode";
			}
		};
		return result;
	};
	this.importAndLog = function(tiddler,mode) {

		var name   = tiddler.title,
		    result = twWeb.importIncluded(tiddler,mode);
		// this.importIncluded is not used to be able to pass the method to the API

		switch(result.status) {
			case 0:	 console.log("imported: "+name+" from "+result.from);
				 break
			case -1: console.log("error importing "+name+": "+result.errorText);
				 break
		}
	};

	// ---- main ----

	// Includes the (local or remote) TiddlyWiki store with the given url.
	//
	// @param url		see url@stp_loadTiddlyWikiStore
	// @param includeParams	a set of the following params for including:
	//	filterLine		a filter expression defining a set of tiddlers to include
	//	substituting		points whether an included tiddler should sustitute
	//				one in the main document if there's a conflict of names
	//	substituteShadows	points whether shadowed tiddlers of the main document with names equal to
	//				those of included ones should be substituted (in cases of conflicts);
	//				works only with (substituting == true)
	//	delayMilliSeconds	addition delay of loading
	//	noRefresh
	//	importMode
	//	evalTiddlers
	//	wikifyTiddlers
	//
	this.include = function(urlOrNodeParam, includeParams) {

		if (!isIncludeEnabled())
			return;
		var self = this;

		var includeOrHandleUrl = function(url) {

			var loadStoreCallback = function(theStore,urlInCallback,params,errorMessage) {

				if(theStore === undefined) {
				
					includedStores[url] = errorMessage;
					self.onError(url, errorMessage);
					return;
				} else
					includedStores[url] = theStore;

				// keep orig_store not to load tw-documents multiple times
				// because of multiple include macros:
				includedStores[url].orig_store = new TiddlyWiki();
				includedStores[url].forEachTiddler(function(tName,tiddler){
					tiddler.setIncludeURL(url);
					includedStores[url].orig_store.addTiddler(tiddler);
				});
				includedStores[url].clear();

				// include, create fetchPreferences and notify of conflicts; or import
				addFromLoadedStore();
			};

			var addFromLoadedStore = function() {
			// uses url and includeParams exploiting closure

				var substituting = includeParams.substitute,
				    substituteShadows = includeParams.substituteShadows,
				    importMode = includeParams.importMode;

				if(twWeb.getStore(url) === null)
					return invokeLater(addFromLoadedStore, 100);	// 100 milliseconds
				// new tiddlers should be added *when the store is loaded*

				// add tiddlers to included stores and check new conflicts (among non-subs. tids)
				var i, t,
				    new_tiddlers = includedStores[url].orig_store.filterTiddlers(includeParams.filterLine);

				for(i = 0; i &lt; new_tiddlers.length; i++) {

					t = jQuery.extend(true, new Tiddler(), new_tiddlers[i]); //copy (by value)

					if(includedStores[url].orig_store.fetchTiddler(t.title)) {
					// ignore empty tiddlers created by the "tiddler" filter
					    if(importMode)
					        twWeb.importAndLog(t,importMode);
					    else {
					        // check for upcoming conflicts first
					        conflicts.checkNew(t.title, url, substituting, substituteShadows);
					        // then include
					        includedStores[url].addTiddler(t);
					    };
					    if(includeParams.evalTiddlers)
					        installPlugin(t);
					    if(includeParams.wikifyTiddlers)
					        wikify(t.text,document.createElement("div"),undefined,t);
					};
				};

				// add items to fetchPreferences if have to
				if(!importMode &amp;&amp; (substituting || substituteShadows))
					for(i = 0; i &lt; new_tiddlers.length; i++)
						fetchPreferences.add(new_tiddlers[i].title,url,substituting, substituteShadows);
				conflicts.notify();

				// "recalc" slices
				store.slices = {};
				// refresh things to get included stylesheets, PageTemplate and ViewTemplate applied
				if(!includeParams.noRefresh) {
					refreshAll();
					story.refreshAllTiddlers();
				}

				pendingOnLoadURLs.push(url);
				invokeLater(notifyListeners);
			};

			var loadStore = function() {
				includedStores[url] = LOADING;
				stp_loadTiddlyWikiStore(url,loadStoreCallback,null,progress);
				// {includeParams:includeParams} can be used instead of null so that
				// loadStoreCallback will have access to the includeParams
			};

			var urlIsNew = !(includedStores[url]);

			if(urlIsNew) {

				includedStores[url] = WAITING;

				if (includeParams.delayMilliSeconds)
					invokeLater(loadStore, includeParams.delayMilliSeconds);
				else
					loadStore();
			} else
				addFromLoadedStore();
		};

		var nodeName = this.checkNodeNotation(urlOrNodeParam);

		if(nodeName) {
			if(nodeName == this.getSelfNodeName()) // don't include from the main (self) TiddlyWiki
				return;
			this.setWaitingTask(nodeName,function(){
				var url = this.getNodeUrl(nodeName);
				includeOrHandleUrl(url);
			},this);
		} else
			includeOrHandleUrl(urlOrNodeParam);
	};
	
// ----- Methods for dealing with included stuff -----------------------------------------------------

	// @return [] of Strings, the URLs of the includes
	//
	this.getIncludedStoresUrls = function() { // in a form of an array

		var includes = [];
		for(var url in includedStores)
			includes.push(url);
		return includes;
	};
	// @return the (TiddlyWiki) store with the given URL or "node: nodeName", or null if not (yet) loaded.
	//
	this.getStore = function(nodeId) {

		var url = self.getStoreUrlById(nodeId)
		if(!url)
			return null;

		var s = includedStores[url];
		if(s &amp;&amp; s instanceof TiddlyWiki)
			return s;
		return null;
	};
	// @return a state/error text of the store with the given URL, or null when the store is already loaded
	//
	this.getState = function(nodeId) {

		var url = self.getStoreUrlById(nodeId)
		if(!url)
			return "the node "+self.checkNodeNotation(nodeId)+" is not described yet, the address is unknown";

		var s = includedStores[url];
		if (!s)
			return getMissingIncludeMsg(url);
		return typeof s == "string" ? s : null;
	};
	// reload one included store or all of them
	// previous inclusions are done again, by default only those without eval and import
	// important: reload doesn't work correctly with &lt;&lt;include&gt;&gt; usages with multiple urls
	//
	// @param  reloadParams  an object containing some of these configuration properties:
	//	urlOrNodeList	an array of TWs' IDs (url or "node: nodeName") to reload;
	//			if undefined, all TWs are reloaded
	//	eval		points whether to redo inclusions with the "eval" parameter (undefined == false)
	//	import		same for the "import" parameter, but undefined/null -&gt; true
	//	wikify		same for the "wikify" parameter
	this.reload = function(reloadParams) {

		// determine a TW(s) to reload (undefined =&gt; all)
		var i, twsToReload = reloadParams.urlOrNodeParam;

		// turn "IDs" into actual urls; filter out node names for which urls are not defined
		// so waiting tasks are not doubled
		if(twsToReload)
			for(i = 0; i &lt; twsToReload.length; i++){ 
				nodeName = this.checkNodeNotation(twsToReload[i]);
				twsToReload[i] = nodeName ? this.getNodeUrl(nodeName) : twsToReload[i];
				if(!twsToReload[i])
					twsToReload.splice(i--,1);
			}

		if(reloadParams.import === undefined || reloadParams.import === null)
			reloadParams.import = true;
		if(reloadParams.wikify === undefined || reloadParams.wikify === null)
			reloadParams.wikify = true;

		// collect macro expressions to reload
			// may the order of including be important?
		var usage, usages = this.includeUsages.getUsed(),
		    paramString, params, pParams, urlParam, nodeName,
			dontReload, i;

		for(usage in usages) {

			// parsing copied from config.macros.include.handler (to get macro params)
			paramString = usage.substring(10,usage.length - 2);
			params = paramString.readMacroParams();
			pParams = paramString.parseParams("url",null,true,false,true);
			urlParam = pParams[0]["url"][0];
			nodeName = this.checkNodeNotation(urlParam);
			urlParam = nodeName ? this.getNodeUrl(nodeName) : urlParam;

			// keep only inclusions that contain IDs corresponding to urls from twsToReload
			dontReload = true;
			if(twsToReload) {
				for(i = 0; i &lt; twsToReload.length; i++)
					if(urlParam == twsToReload[i])
						dontReload = false;
			} else
				dontReload = false;

			// exclude inclusions with import and eval, if necessary
			if(!reloadParams.import &amp;&amp; getParam(pParams,"import",undefined) ||
			   !reloadParams.eval &amp;&amp; params.contains('eval') ||
			   !reloadParams.wikify &amp;&amp; params.contains('wikify'))
				dontReload = true;

			if(dontReload) {
				delete usages[usage];
				continue;
			}

			// clean stuff: unload included store, clear priorities, remove conflicts;
			// deleting "used" marks is outside this loop
			includedStores[urlParam] = undefined;
			fetchPreferences.removeByUrl(urlParam);
			conflicts.markNodeUnloaded(urlParam);
		}
		// delete "used" marks
		this.includeUsages.markUnused(usages);
		
		// include again
		for(usage in usages)
			wikify(usage,document.createElement("div"),undefined,null);
	};
};
twWeb = new TwWeb();

//================================================================================
// Default Progress Handling for config.extensions.SharedTiddlersPlugin

var showAnimated = function(e, showing, duration) {
//	if (!anim || !abego.ShowAnimation) {
		e.style.display = showing ? "block" : "none";
		return;
//	}
	
//	anim.startAnimating(new abego.ShowAnimation(e,showing,duration));
};

config.extensions.SharedTiddlersPlugin.getDefaultProgressFunction = function() {

	setStylesheet(
		".includeProgressState{\n"+
		"background-color:#FFCC00;\n"+
		"position:absolute;\n"+
		"right:0.2em;\n"+
		"top:0.2em;\n"+
		"width:7em;\n"+
		"padding-left:0.2em;\n"+
		"padding-right:0.2em\n"+
		"}\n",
		"stp_Include");

	var createStateElem = function() {
		var e = document.createElement("div");
		e.className = "includeProgressState";
		e.style.display = "none";
		document.body.appendChild(e);
		return e;
	};
	
	var stateElem = createStateElem();


	var showState = function(message) {
		removeChildren(stateElem);
		createTiddlyText(stateElem,message);
		showAnimated(stateElem,true,0);
	};

	var hideState = function() {
		// hide the state the next idle time 
		invokeLater(function() {
			showAnimated(stateElem,false,ANI_DURATION_HIDE_STATE);
		},100,ANIMATION_PRIORITY);
	};
	
	var myProgressFunction = function(message, sender, state, url, params) {
		
		if (state == "Done" || state == "Failed") {
			hideState();
			return;
		}
		
		if (sender == "stp_loadTiddlyWikiStore") {
			idleCount = 0;
			if (state == "Processing")
				showState("Including...");
		} else {
			showState(message);
		}
	};
	return myProgressFunction;
};

twWeb.setProgressFunction(config.extensions.SharedTiddlersPlugin.getDefaultProgressFunction());


//================================================================================
// The "describeNode" macro
//
// Syntax: &lt;&lt;describeNode nodeName {nodeUrl|self}&gt;&gt;
//
config.macros.describeNode = {};
config.macros.describeNode.handler = function(place,macroName,params,wikifier,paramString,tiddler) {

	var macroTWcode = wikifier.source.substring(wikifier.matchStart, wikifier.nextMatch);
	createTiddlyText(createTiddlyElement(place,"code"),macroTWcode);

	// node description duplicates are handled when adding, so no "handle only once" here

	var includeURL = tiddler.getIncludeURL(),
	    nodeName = params[0],
	    urlParam = params[1],
	    self = (urlParam == "self");

	if(self) {
		var oldSelf = twWeb.getSelfNodeName();
		if(oldSelf &amp;&amp; (oldSelf != nodeName))
			return alert("The \'"+oldSelf+"\' alias is already assigned as the name of the current "+
					"TiddlyWiki; the new attempt to assign \'"+nodeName+"\' is ignored.");
		twWeb.setSelfNodeName(nodeName);
		return;
	}

	var url = resolveUrlFrom(urlParam, includeURL);
	url = stp_resolveURL(url); // if no includeURL

	twWeb.addNodeDesc(nodeName,url);
};

//================================================================================
// The "include" macro
//
// Syntax:	&lt;&lt;include [url:]url [filters:filterLine] [substitute]
//			  [substituteShadows] [hide:hideFlag] [delay:delayDuration]&gt;&gt;
//
config.macros.include = {};
config.macros.include.handler = function(place,macroName,params,wikifier,paramString,tiddler) {

	var macroTWcode = wikifier.source.substring(wikifier.matchStart, wikifier.nextMatch),
	    pParams = paramString.parseParams("url",null,true,false,true); // allowEval, cascadeDefaults, names allowed

	var hide = getFlag(pParams, "hide", false) || params.contains('hide');
	if (!hide)
		createTiddlyText(createTiddlyElement(place,"code"),macroTWcode);
	if (twWeb.includeUsages.isUsed(macroTWcode))
		return;
	twWeb.includeUsages.setUsed(macroTWcode);

	var urls = pParams[0]["url"],
	    includeParams = {
		delayMilliSeconds:	parseInt(getParam(pParams,"delay","0")),
		filterLine:		getParam(pParams,"filters","[all[-]]"),
		substitute:		params.contains('substitute'),
		substituteShadows:	params.contains('substituteShadows'),
		noRefresh:		params.contains('noRefresh'),
		importMode:		getParam(pParams,"import",undefined),
		evalTiddlers:		params.contains('eval'),
		wikifyTiddlers:		params.contains('wikify')
	};

	var checkUrlAndInclude = function(url) {

		if(url == 'hide' || url == 'substituteShadows' || url == 'substitute' || url == 'eval' ||
				url == 'wikify' || url == 'noRefresh')
			return;

		twWeb.include(url,includeParams);
	};

	for (var i = 0; urls &amp;&amp; i &lt; urls.length; i++)
		checkUrlAndInclude(urls[i]);
};

//================================================================================
// The "reloadIncluded" macro
//
// Syntax: &lt;&lt;reloadIncluded [urls:urlsJSON] [reloadParams:otherReloadParamsJSON]
//		[label:labelText] [tooltip:tooltipText] [class:className]&gt;&gt;
// (for reloadParams, see twWeb.reload)
//
config.macros.reloadIncluded = {};
config.macros.reloadIncluded.handler = function(place,macroName,params,wikifier,paramString,tiddler) {

	// parse params
	var pParams = paramString.parseParams("url",null,true,false,true),
	    label    = getParam(pParams,"label","refresh"),
	    tooltip  = getParam(pParams,"tooltip",undefined),
	    elClass  = getParam(pParams,"class"," "), // " " overwrites the default "button" class
	    urlsText = getParam(pParams,"urls",undefined),
	    otherReloadParamsText = getParam(pParams,"reloadParams","{}"),
	    reloadParams = JSON &amp;&amp; JSON.parse(otherReloadParamsText) || jQuery.parseJSON(otherReloadParamsText);
	reloadParams.urlOrNodeList = !urlsText ? undefined :
			(JSON &amp;&amp; JSON.parse(urlsText) || jQuery.parseJSON(urlsText));
	if(!tooltip) {
		if(reloadParams.urlOrNodeList) {
			tooltip = "refresh '"+reloadParams.urlOrNodeList[0]+"'";
			for(var i = 1; i &lt; reloadParams.urlOrNodeList.length; i++)
				tooltip += ", '"+reloadParams.urlOrNodeList[i]+"'";
			tooltip += (i &gt; 0) ? " nodes" : " node";
		} else
			tooltip = "refresh all included nodes";
	}

	// create button, add handler
	createTiddlyButton(place,label,tooltip,function(){
		var returnHere = function() {
			if(twWeb.hasPendingIncludes()) {
				invokeLater(returnHere,100);
				return;
			} // wait until all the stores are loaded and the page is refreshed
			var t = tiddler.title, te = DEFAULT_VIEW_TEMPLATE;
			story.displayTiddler(this,t,story.chooseTemplateForTiddler(t,te));
		}
		twWeb.reload(reloadParams);
		invokeLater(returnHere,100); // wait a bit for the nodes to unload
	},elClass);
};

//================================================================================
// The "includeState" macro
//
// Syntax: &lt;&lt;includeState&gt;&gt;
//
config.macros.includeState = {};
config.macros.includeState.handler = function(place,macroName,params,wikifier,paramString,tiddler) {
	var getFullState = function () {
		var s = "";
		var includes = twWeb.getIncludedStoresUrls();
		if (!includes.length)
			return "{{noIncludes{\nNo TiddlyWiki is included or including is disabled (see AdvancedOptions)\n}}}\n";
			
		s += "|!Address|!State|\n";
		for (var i = 0; i &lt; includes.length; i++) {
			var inc = includes[i];
			s += "|{{{"+inc+"}}}|";
			var t = twWeb.getState(inc);
			s += t ? "{{{"+t+"}}}" : "included";
			s += "|\n"
		}
		s += "|includeState|k\n";
		return s;
	};
	
	var updateState = function(){
		removeChildren(div);
		wikify(getFullState(),div);
		if (twWeb.hasPendingIncludes())
			invokeLater(updateState,500,UPDATE_STATE_PRIORITY);
	};

	var div = createTiddlyElement(place,"div");
	
	invokeLater(updateState,0,UPDATE_STATE_PRIORITY);
};

//================================================================================
// Change standart formatters

var getFormatterIndex = function(formatterName) {
	for(var i = 0; i &lt; config.formatters.length; i++)
		if(config.formatters[i].name == formatterName)
			return i;
	return null;
}

//--------------------------------------------------------------------------------
// Change the prettyLink formatter so that it
// * recognizes [[text|target]]@nodeName and [[target]]@nodeName syntax
// * takes into account includeURL of the tiddler and propagates inclusion

if(config.options.STP_hijackPrettyLink) {
	var prettyLinkFormatterIndex = getFormatterIndex("prettyLink");
	config.extensions.SharedTiddlersPlugin.orig_prettyLinkFormatter = config.formatters[prettyLinkFormatterIndex];
	config.formatters[prettyLinkFormatterIndex] = {

		name:  "prettyLink",
		match: "\\[\\[",
		lookaheadRegExp: /\[\[(.*?)(?:\|(~)?(.*?))?\]\](?:(?:@(\w+))(?:@([\w\s\:]+)@)?)?/mg,
		handler: function(w) {

			this.lookaheadRegExp.lastIndex = w.matchStart;
			var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
			if(lookaheadMatch &amp;&amp; lookaheadMatch.index == w.matchStart) {

				// call the formatter
				config.extensions.SharedTiddlersPlugin.orig_prettyLinkFormatter.handler(w);

				// call the include.handler, if necessary
				var node = lookaheadMatch[4]? lookaheadMatch[4] : undefined,
				    includeURL = w.tiddler? w.tiddler.getIncludeURL() : null,
				    urlParam = node? twWeb.setNodeNotation(node) : (includeURL? includeURL : undefined),
				    target = lookaheadMatch[3]? lookaheadMatch[3] : lookaheadMatch[1],
				    paramString = '"'+urlParam+'" filters:"[['+target+']]" hide noRefresh ';
				if(lookaheadMatch[5])
					paramString += lookaheadMatch[5];
				if(urlParam)
					config.macros.include.handler(w.output,"include",
						paramString.readMacroParams(true),w,paramString,w.tiddler);

				// move nextMatch according to this.lookaheadRegExp, not original prettyLink
				w.nextMatch = this.lookaheadRegExp.lastIndex;
			}
		}
	};
}

//--------------------------------------------------------------------------------
// Change the image formatter so that it
// * takes into account includeURL of the tiddler and recalcs relative urls

if(config.options.STP_hijackImageFormatter) {
	var imageFormatterIndex = getFormatterIndex("image");
	config.extensions.SharedTiddlersPlugin.orig_imageFormatterHandler = config.formatters[imageFormatterIndex].handler;
	config.formatters[imageFormatterIndex].handler = function(w) {

		var lastChildBeforeHandling = w.output.lastChild;
		config.extensions.SharedTiddlersPlugin.orig_imageFormatterHandler.apply(this,arguments);

		if(w.output.lastChild != lastChildBeforeHandling) {

			var img = w.output.lastChild,
			    includeURL = w.tiddler ? w.tiddler.getIncludeURL() : "",
			    imgSrc = jQuery(img).attr("src");

			// take includeURL into account:
			img.src = resolveUrlFrom(imgSrc, includeURL);
		}
	}
}

//================================================================================
// Add inline-management tools by hijacking .edit.handler

config.extensions.SharedTiddlersPlugin.orig_editHandler = config.macros.edit.handler;
config.macros.edit.handler = function(place,macroName,params,wikifier,paramString,tiddler) {
	var includeUrl = tiddler.getIncludeURL();
	if(params[0] == "text" &amp;&amp; includeUrl){ // only for "text", not other fields
		var e = createTiddlyElement(null,"div");
		e.className = "manageIncludedPanel";
		createTiddlyText(e,"manage the included tiddler: ");

		// go to the source
		var sourceUrl = includeUrl + "#[["+tiddler.title+"]]";
		createExternalLink(e, sourceUrl, "open in the source TiddlyWiki");
		// view the link to the source
		createTiddlyText(e," (");
		createTiddlyButton(e,"view link","view the link to the source",function(e){
			var popup = Popup.create(this);
			createTiddlyText(popup,sourceUrl);
			Popup.show();
			var ev = e || window.event;
			ev.cancelBubble = true;
			if(ev.stopPropagation)
				ev.stopPropagation();
			return false;
		}," ");
		createTiddlyText(e,")");

		// import
		if(!readOnly) {
			createTiddlyText(e," | ");
			createTiddlyButton(e,"import","import this tiddler",function(){
				twWeb.importAndLog(tiddler,1);
			 }," ");
		}

		// reload
		createTiddlyText(e," | ");
		config.macros.reloadIncluded.handler(e,"",null,null,'urls:\'["'+includeUrl+'"]\'',tiddler);

		// other actions

		// if the read only mode is not set, display all tools otherwise ...
		place.appendChild(e);
	}
	return config.extensions.SharedTiddlersPlugin.orig_editHandler(place,macroName,params,wikifier,paramString,tiddler);
};

//================================================================================
// Perform plugin startup tasks

// add this for the "install only once" check (which also prevents conflicts with abego.IncludePlugin)
// (this is also deprecated API for backward compability)
abego.TiddlyWikiIncluder = {
	getIncludes:	twWeb.getIncludedStoresUrls,
	getState:	twWeb.getState,
	getStore:	twWeb.getStore
};
attachToStore();
invokeLater(includeFromIncludeList,100);

// add several more methods to the "API namespace"

window.sharedTiddlersAPI.getIncludes  = twWeb.getIncludedStoresUrls;
window.sharedTiddlersAPI.getState     = twWeb.getState;
window.sharedTiddlersAPI.getStore     = twWeb.getStore;
window.sharedTiddlersAPI.importAndLog = twWeb.importAndLog;

// iterates over all tiddlers of "the store" and all tiddlers of included (and loaded) stores
//
window.sharedTiddlersAPI.forReallyEachTiddler = function(callback) {
	var caller = function() {
		store.forEachTiddler(callback);
	};
	getFunctionUsingForReallyEachTiddler(caller).call(store);		
};
})();
//%/ //</pre>
</div>
<div changecount="46" content-type="text/javascript" created="201505182012" modified="201509050845" modifier="Yakov Litvin" ordermytweaks="8" statecomment="готов {{PoGc{нужны ли ещё метаданные?}}}" tags="[[YL core tweaks]] systemConfig editing" title="ShowDirtyPlugin">
<pre>/***
|Description|highlights saving button (bold red) when there's unsaved changes|
|Version|1.0|
|Short status|&lt;&lt;insertEditable container:"@stateComment" size:max cell&gt;&gt;|
|Author|Yakov Litvin|
***/
//{{{
// add the "saveChangesButton" class to the save changes button
config.macros.saveChanges.SCM_orig_handler = config.macros.saveChanges.handler;
config.macros.saveChanges.handler = function(place,macroName,params)
{
	this.SCM_orig_handler.apply(this,arguments);
	place.lastChild.classList.add("saveChangesButton");
};

// styles that highlight save button when there's something to save
var css = ".saveChangesButton { font-weight: bold; color: red !important; }";

TiddlyWiki.prototype.SCM_orig_setDirty = TiddlyWiki.prototype.setDirty;
TiddlyWiki.prototype.setDirty = function(dirty)
{
	if(dirty)
		setStylesheet(css,"highlightSaving");
	else
		removeStyleSheet("highlightSaving");
	return this.SCM_orig_setDirty.apply(this,arguments);
};
//}}}</pre>
</div>
<div changecount="4" created="201402180705" creator="Yakov Litvin" modified="201608121650" modifier="Yakov Litvin" tags="systemConfig" title="TaggedTemplateTweak">
<pre>/***
|Name|TaggedTemplateTweak|
|Source|http://www.TiddlyTools.com/#TaggedTemplateTweak|
|Documentation|http://www.TiddlyTools.com/#TaggedTemplateTweakInfo|
|Version|1.6.1|
|Author|Eric Shulman|
|License|http://www.TiddlyTools.com/#LegalStatements|
|~CoreVersion|2.1|
|Type|plugin|
|Description|use alternative ViewTemplate/EditTemplate for specific tiddlers|
This plugin extends the core function, {{{story.chooseTemplateForTiddler()}}}, so that any given tiddler can be viewed and/or edited using alternatives to the standard tiddler templates.
!!!!!Documentation
&gt;see [[TaggedTemplateTweakInfo]]
!!!!!Code
***/
//{{{
version.extensions.TaggedTemplateTweak = {major: 1, minor: 6, revision: 1, date: new Date(2009,9,2)};

if (!config.options.txtTemplateTweakFieldname)	
	config.options.txtTemplateTweakFieldname = 'template';

Story.prototype.taggedTemplate_chooseTemplateForTiddler = Story.prototype.chooseTemplateForTiddler;
Story.prototype.chooseTemplateForTiddler = function(title,template)
{
	// get core template and split into theme and template name
	var coreTemplate = this.taggedTemplate_chooseTemplateForTiddler.apply(this,arguments);
	var theme = "", template = coreTemplate;
	var parts = template.split(config.textPrimitives.sectionSeparator);
	if (parts[1]) { theme = parts[0]; template = parts[1]; }
	else theme = config.options.txtTheme || ""; // if theme is not specified
	theme += config.textPrimitives.sectionSeparator;

	// look for template using title as prefix
	if (!store.getTaggedTiddlers(title).length) { // if tiddler is not a tag
		if (store.getTiddlerText(theme+title+template))
			return theme+title+template;	// theme##TitleTemplate
		if (store.getTiddlerText(title+template))
			return title+template;		// TitleTemplate
	}

	// look for templates using custom field value as prefix
	var v = store.getValue(title,config.options.txtTemplateTweakFieldname);
	if (store.getTiddlerText(theme+v+template))
		return theme+v+template;	// theme##valueTemplate
	if (store.getTiddlerText(v+template))
		return v+template;		// valueTemplate

	// look for template using tags as prefix
	var tiddler = store.getTiddler(title);
	if (!tiddler) return coreTemplate; // tiddler doesn't exist... use core result
	for (i = 0; i &lt; tiddler.tags.length; i++) {
		var t = tiddler.tags[i]+template; // add tag prefix to template
		var c = t.substr(0,1).toUpperCase()+t.substr(1); // capitalized for WikiWord title
		if (store.getTiddlerText(theme+t))	{ return theme+t; } // theme##tagTemplate
		if (store.getTiddlerText(theme+c))	{ return theme+c; } // theme##TagTemplate
		if (store.getTiddlerText(t)) 		{ return t; }	    // tagTemplate
		if (store.getTiddlerText(c))		{ return c; }	    // TagTemplate
	}

	// no match... use core result
	return coreTemplate;
}
//}}}</pre>
</div>
<div changecount="3" created="201606211629" creator="Яков Литвин" modified="201607131448" modifier="Яков Литвин" tags="systemConfig" title="TiddlerToolbarTranslation">
<pre>/***
Пример кода:
{{{
config.commands.closeTiddler.text = "close";
config.commands.closeTiddler.tooltip = "Close this tiddler";

config.commands.closeOthers.text = "close others";
config.commands.closeOthers.tooltip = "Close all other tiddlers";
}}}
(возможно, стоит заменить текст на картинки -- для mobile)
***/
//{{{

//}}}</pre>
</div>
<div changecount="25" created="201607141923" creator="Яков Литвин" modified="201610130457" modifier="Яков Литвин" tags="systemConfig" title="ToolbarIconsPlugin">
<pre>/***
|Description|Replaces toolbar buttons with icons|
|Source|Lewcid TW {{DDnc{add the link}}}|
|Tweaked by|Yakov Litvin|
|Version|2.0|
!!!Usage
For each command that you want to set an icon for, just add a line like the following into a tiddler tagged {{{systemConfig}}}, specifying the icon image location:
{{{
config.commands.editTiddler.imgLoc = "jump.bmp";
}}}
No need to edit ViewTemplate!

!!!To do:
* fix "close" SVG: [[it creates bad "padding"|"close" SVG wrong "padding"]]
** then fix padding for images (horizontal = vertical)
* extend so that ~SVGs can be used as icons as well (directly, not using base64); or find out how to convert [[an SVG|closeOthers SVG]] to base64
***/
//{{{
// based on TW 2.7.1 core code
config.macros.toolbar.createCommand = function(place,commandName,tiddler,className)
{
	if(typeof commandName != "string")
		for(var t in config.commands)
			if(config.commands[t] == commandName)
				commandName = t;
	
	if(!(tiddler instanceof Tiddler) || (typeof commandName != "string"))
		return
	var command = config.commands[commandName];

	if(command.isEnabled ? !command.isEnabled(tiddler) :
	   !this.isCommandEnabled(command,tiddler))
		return;

	var text = command.getText ? command.getText(tiddler) : this.getCommandText(command,tiddler);
	var tooltip = command.getTooltip ? command.getTooltip(tiddler) : this.getCommandTooltip(command,tiddler);
	var cmd = command.type == "popup" ? this.onClickPopup : this.onClickCommand;
	var btn = createTiddlyButton(null,text,tooltip,cmd);
	btn.setAttribute("commandName",commandName);
	btn.setAttribute("tiddler",tiddler.title);
	jQuery(btn).addClass("command_" + commandName);
	if(className)
		jQuery(btn).addClass(className);

	// main change:
	if(command.imgLoc) {
		btn.innerHTML = "&lt;img src='"+command.imgLoc+"'&gt;";
		jQuery(btn).addClass("imageWrappingLink");
	}

	place.appendChild(btn);
}

setStylesheet(".toolbarImg {vertical-align: middle; cursor:pointer;}\n"+
	".imageWrappingLink {display: inline-block;}\n", "commandIconStyles");

// base64 png work:
//config.commands.jump.imgLoc= "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAuCAIAAADcLmxdAAAAtUlEQVRYhe3QSw7EIAwD0Nz/0nQ1/cxQYjuRppWcLdh5EOMBE/8GjGHEMe9BRGF6EBUB6DDi3Yj0vhAxwggjjDCCRwQ2AiKtCirWi9jbjPhCgElEILRFmsQXU6DLBfAFjet/2ybtXQ68Z15dd1ANt70VB5tNSgWHElkfs6Xa5+nf2yVAEcgCWUAg1msqAg5xt6wooBGgg+5kA6lDKRQyC4fYpsWmDr1KTp4p1ZJivmWM+MwjEBvNTi/A51SXaAAAAABJRU5ErkJggg==";

// base64 SVG work as well:
//config.commands.closeTiddler.imgLoc = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0cHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0cHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxwYXRoIGQ9Ik0yMi4yNDUsNC4wMTVjMC4zMTMsMC4zMTMsMC4zMTMsMC44MjYsMCwxLjEzOWwtNi4yNzYsNi4yN2MtMC4zMTMsMC4zMTItMC4zMTMsMC44MjYsMCwxLjE0bDYuMjczLDYuMjcyICBjMC4zMTMsMC4zMTMsMC4zMTMsMC44MjYsMCwxLjE0bC0yLjI4NSwyLjI3N2MtMC4zMTQsMC4zMTItMC44MjgsMC4zMTItMS4xNDIsMGwtNi4yNzEtNi4yNzFjLTAuMzEzLTAuMzEzLTAuODI4LTAuMzEzLTEuMTQxLDAgIGwtNi4yNzYsNi4yNjdjLTAuMzEzLDAuMzEzLTAuODI4LDAuMzEzLTEuMTQxLDBsLTIuMjgyLTIuMjhjLTAuMzEzLTAuMzEzLTAuMzEzLTAuODI2LDAtMS4xNGw2LjI3OC02LjI2OSAgYzAuMzEzLTAuMzEyLDAuMzEzLTAuODI2LDAtMS4xNEwxLjcwOSw1LjE0N2MtMC4zMTQtMC4zMTMtMC4zMTQtMC44MjcsMC0xLjE0bDIuMjg0LTIuMjc4QzQuMzA4LDEuNDE3LDQuODIxLDEuNDE3LDUuMTM1LDEuNzMgIEwxMS40MDUsOGMwLjMxNCwwLjMxNCwwLjgyOCwwLjMxNCwxLjE0MSwwLjAwMWw2LjI3Ni02LjI2N2MwLjMxMi0wLjMxMiwwLjgyNi0wLjMxMiwxLjE0MSwwTDIyLjI0NSw0LjAxNXoiLz48L3N2Zz4=";
//}}}</pre>
</div>
<div changecount="3" created="201606211337" creator="Yakov Litvin" modified="201610061859" modifier="Яков Литвин" tags="systemConfig systemConfigDisable" title="TopLineMenuPlugin">
<pre>/***
|Version|0.9.5|
|state|ready; stickToTheTop option needs more refinement; meta to be written|
!~ToDo
* add style sheet for better positioning of items inside menu (~left/right/center classes)
* refine sticky menu behaviour (see the code, especially "when a tiddler is opened on top" issue)
* check how this interacts with TiddlersBarPlugin
To edit: [[TopLineMenu]]
!Code
***/
//{{{
// menu generating handler; create a macro instead?
config.macros.topLineMenu = {
	menuId: "topLineMenu",
	tiddlerName: "TopLineMenu",
	menuPlaceId: "displayArea",
	beforeSelector: "#tiddlerDisplay",
	stickToTheTop: true,
	handler: function() {

		if (document.getElementById(this.menuId))
			return;
		var place = document.getElementById(this.menuPlaceId);
		var theMenu = document.createElement("div");
		theMenu.setAttribute("id", this.menuId);
		place.insertBefore(theMenu, place.firstChild);

		wikify("&lt;&lt;tiddler [["+this.tiddlerName+"]]&gt;&gt;",theMenu);
		if(this.stickToTheTop) {
			theMenu.style.maxWidth = place.offsetWidth+"px";
			//# make this adapt when a sidebar is hidden
			
			var height = theMenu.offsetHeight;
			//# update on this.tiddlerName content edit
			
			jQuery(place).find(this.beforeSelector).css("margin-top",height+"px");
			//# fix: when a tiddler is opened on top, this doesn't ensures tiddler's
			//  title is visible
			
			// fix: with margins on startup theMenu was positioned
			// to the top of tiddlerDisplay, not to the top of displayArea
			jQuery(window).scroll();
			
			//# set z-index to hover above CodeMirror editor
			
			// may be of interest:
			// - http://stackoverflow.com/questions/37849710/making-one-navbar-sticky-when-user-scrolls
		}
	},
	init: function() {
		
		if(!this.stickToTheTop) return;
		
		jQuery(window).on("scroll",function(){
			
			var menuElement = document.getElementById(config.macros.topLineMenu.menuId),
			    header = document.getElementsByClassName("header")[0],
			    headerBottom = header.offsetTop + header.offsetHeight - findScrollY(),
			    position = findScrollY() + Math.max(headerBottom,0);
			menuElement.style.top = position+"px";
		});
		setStylesheet("#"+config.macros.topLineMenu.menuId+" {"+
			      "position:absolute;"+
		"}","topLinePositionCSS")
	}
};

// old-fashioned way to launch handler, copied from http://tiddlywiki.squize.org/#HoverMenuPlugin
window.old_restart_before_topLineMenu = restart;
restart = function() {
	window.old_restart_before_topLineMenu();
	config.macros.topLineMenu.handler();
};

// make TopLineMenu resistant to refreshing (refreshPageTemplate)
window.old_refreshPageTemplate_before_topLineMenu = refreshPageTemplate;
refreshPageTemplate = function(title) {
	window.old_refreshPageTemplate_before_topLineMenu(title);
	config.macros.topLineMenu.handler();
};
//}}}</pre>
</div>
<div changecount="1" created="201611170859" creator="Яков Литвин" modifier="Яков Литвин" tags="systemConfig" title="YourSearchPlugin">
<pre>/***
|''Name:''|YourSearchPlugin|
|''Version:''|2.1.6 (2012-04-19)|
|''Summary:''|Search your TiddlyWiki with advanced search features such as result lists, tiddler preview, result ranking, search filters, combined searches and many more.|
|''Source:''|http://tiddlywiki.abego-software.de/#YourSearchPlugin|
|''~CoreVersion:''|2.1|
|''Requires:''|~SavingWithRenamingFix|
|~|~SavingWithRenamingFix is not required, but if is used, should be launched first|
|''Twitter:''|[[@abego|https://twitter.com/#!/abego]]|
|''GitHub:''|https://github.com/abego/YourSearchPlugin|
|''Author:''|UdoBorkowski (ub [at] abego-software [dot] de)|
|''License:''|[[BSD open source license|http://www.abego-software.de/legal/apl-v10.html]]|
!About ~YourSearch
~YourSearch gives you a bunch of new features to simplify and speed up your daily searches in ~TiddlyWiki. It seamlessly integrates into the standard ~TiddlyWiki search: just start typing into the 'search' field and explore!

For more information see [[Help|YourSearch Help]].
!Source Code
***/
/***
This plugin's source code is compressed (and hidden). 
Use this [[link|https://github.com/abego/YourSearchPlugin/blob/master/src/main/js/YourSearchPlugin-src.js]] to get the readable source code.
***/
///%
if(!version.extensions.YourSearchPlugin){version.extensions.YourSearchPlugin={major:2,minor:1,revision:6,source:"http://tiddlywiki.abego-software.de/#YourSearchPlugin",licence:"[[BSD open source license (abego Software)|http://www.abego-software.de/legal/apl-v10.html]]",copyright:"Copyright (c) abego Software GmbH, 2005-2012 (www.abego-software.de)"};if(!window.abego){window.abego={}}if(!Array.forEach){Array.forEach=function(c,e,d){for(var b=0,a=c.length;b&lt;a;b++){e.call(d,c[b],b,c)}};Array.prototype.forEach=function(d,c){for(var b=0,a=this.length;b&lt;a;b++){d.call(c,this[b],b,this)}}}abego.toInt=function(b,a){if(!b){return a}var c=parseInt(b);return(c==NaN)?a:c};abego.createEllipsis=function(a){var b=createTiddlyElement(a,"span");b.innerHTML="&amp;hellip;"};abego.shallowCopy=function(b){if(!b){return b}var a={};for(var c in b){a[c]=b[c]}return a};abego.copyOptions=function(a){return !a?{}:abego.shallowCopy(a)};abego.countStrings=function(d,c){if(!c){return 0}var a=c.length;var f=0;var e=0;while(true){var b=d.indexOf(c,e);if(b&lt;0){return f}f++;e=b+a}return f};abego.getBracedText=function(j,e,a){if(!e){e=0}var k=/\{([^\}]*)\}/gm;k.lastIndex=e;var d=k.exec(j);if(d){var l=d[1];var b=abego.countStrings(l,"{");if(!b){if(a){a.lastIndex=k.lastIndex}return l}var g=j.length;for(var f=k.lastIndex;f&lt;g&amp;&amp;b;f++){var h=j.charAt(f);if(h=="{"){b++}else{if(h=="}"){b--}}}if(!b){if(a){a.lastIndex=f-1}return j.substring(d.index+1,f-1)}}};abego.select=function(d,c,b,a){if(!a){a=[]}d.forEach(function(e){if(c.call(b,e)){a.push(e)}});return a};abego.consumeEvent=function(a){if(a.stopPropagation){a.stopPropagation()}if(a.preventDefault){a.preventDefault()}a.cancelBubble=true;a.returnValue=true};abego.TiddlerFilterTerm=function(d,b){if(!b){b={}}var c=d;if(!b.textIsRegExp){c=d.escapeRegExp();if(b.fullWordMatch){c="\\b"+c+"\\b"}}var a=new RegExp(c,"m"+(b.caseSensitive?"":"i"));this.tester=new abego.MultiFieldRegExpTester(a,b.fields,b.withExtendedFields)};abego.TiddlerFilterTerm.prototype.test=function(a){return this.tester.test(a)};abego.parseNewTiddlerCommandLine=function(c){var a=/(.*?)\.(?:\s+|$)([^#]*)(#.*)?/.exec(c);if(!a){a=/([^#]*)()(#.*)?/.exec(c)}if(a){var d;if(a[3]){var b=a[3].replace(/#/g,"");d=b.parseParams("tag")}else{d=[[]]}var e=a[2]?a[2].trim():"";d.push({name:"text",value:e});d[0].text=[e];return{title:a[1].trim(),params:d}}else{return{title:c.trim(),params:[[]]}}};abego.parseTiddlerFilterTerm=function(queryText,offset,options){var re=/\s*(?:(?:\{([^\}]*)\})|(?:(=)|([#%!])|(?:(\w+)\s*\:(?!\/\/))|(?:(?:("(?:(?:\\")|[^"])+")|(?:\/((?:(?:\\\/)|[^\/])+)\/)|(\w+\:\/\/[^\s]+)|([^\s\)\-\"]+)))))/mg;var shortCuts={"!":"title","%":"text","#":"tags"};var fieldNames={};var fullWordMatch=false;re.lastIndex=offset;while(true){var i=re.lastIndex;var m=re.exec(queryText);if(!m||m.index!=i){throw"Word or String literal expected"}if(m[1]){var lastIndexRef={};var code=abego.getBracedText(queryText,0,lastIndexRef);if(!code){throw"Invalid {...} syntax"}var f=Function("tiddler","return ("+code+");");return{func:f,lastIndex:lastIndexRef.lastIndex,markRE:null}}if(m[2]){fullWordMatch=true}else{if(m[3]){fieldNames[shortCuts[m[3]]]=1}else{if(m[4]){fieldNames[m[4]]=1}else{var textIsRegExp=m[6];var text=m[5]?window.eval(m[5]):m[6]?m[6]:m[7]?m[7]:m[8];options=abego.copyOptions(options);options.fullWordMatch=fullWordMatch;options.textIsRegExp=textIsRegExp;var fields=[];for(var n in fieldNames){fields.push(n)}if(fields.length==0){options.fields=options.defaultFields}else{options.fields=fields;options.withExtendedFields=false}var term=new abego.TiddlerFilterTerm(text,options);var markREText=textIsRegExp?text:text.escapeRegExp();if(markREText&amp;&amp;fullWordMatch){markREText="\\b"+markREText+"\\b"}return{func:function(tiddler){return term.test(tiddler)},lastIndex:re.lastIndex,markRE:markREText?"(?:"+markREText+")":null}}}}}};abego.BoolExp=function(i,c,j){this.s=i;var h=j&amp;&amp;j.defaultOperationIs_OR;var e=/\s*\)/g;var f=/\s*(?:(and|\&amp;\&amp;)|(or|\|\|))/gi;var b=/\s*(\-|not)?(\s*\()?/gi;var a;var d=function(p){b.lastIndex=p;var l=b.exec(i);var o=false;var k=null;if(l&amp;&amp;l.index==p){p+=l[0].length;o=l[1];if(l[2]){var n=a(p);e.lastIndex=n.lastIndex;if(!e.exec(i)){throw"Missing ')'"}k={func:n.func,lastIndex:e.lastIndex,markRE:n.markRE}}}if(!k){k=c(i,p,j)}if(o){k.func=(function(m){return function(q){return !m(q)}})(k.func);k.markRE=null}return k};a=function(s){var n=d(s);while(true){var p=n.lastIndex;f.lastIndex=p;var k=f.exec(i);var o;var q;if(k&amp;&amp;k.index==p){o=!k[1];q=d(f.lastIndex)}else{try{q=d(p)}catch(r){return n}o=h}n.func=(function(t,m,l){return l?function(u){return t(u)||m(u)}:function(u){return t(u)&amp;&amp;m(u)}})(n.func,q.func,o);n.lastIndex=q.lastIndex;if(!n.markRE){n.markRE=q.markRE}else{if(q.markRE){n.markRE=n.markRE+"|"+q.markRE}}}};var g=a(0);this.evalFunc=g.func;if(g.markRE){this.markRegExp=new RegExp(g.markRE,j.caseSensitive?"mg":"img")}};abego.BoolExp.prototype.exec=function(){return this.evalFunc.apply(this,arguments)};abego.BoolExp.prototype.getMarkRegExp=function(){return this.markRegExp};abego.BoolExp.prototype.toString=function(){return this.s};abego.MultiFieldRegExpTester=function(b,a,c){this.re=b;this.fields=a?a:["title","text","tags"];this.withExtendedFields=c};abego.MultiFieldRegExpTester.prototype.test=function(b){var d=this.re;for(var a=0;a&lt;this.fields.length;a++){var c=store.getValue(b,this.fields[a]);if(typeof c=="string"&amp;&amp;d.test(c)){return this.fields[a]}}if(this.withExtendedFields){return store.forEachField(b,function(e,g,f){return typeof f=="string"&amp;&amp;d.test(f)?g:null},true)}return null};abego.TiddlerQuery=function(b,a,d,c,e){if(d){this.regExp=new RegExp(b,a?"mg":"img");this.tester=new abego.MultiFieldRegExpTester(this.regExp,c,e)}else{this.expr=new abego.BoolExp(b,abego.parseTiddlerFilterTerm,{defaultFields:c,caseSensitive:a,withExtendedFields:e})}this.getQueryText=function(){return b};this.getUseRegExp=function(){return d};this.getCaseSensitive=function(){return a};this.getDefaultFields=function(){return c};this.getWithExtendedFields=function(){return e}};abego.TiddlerQuery.prototype.test=function(a){if(!a){return false}if(this.regExp){return this.tester.test(a)}return this.expr.exec(a)};abego.TiddlerQuery.prototype.filter=function(a){return abego.select(a,this.test,this)};abego.TiddlerQuery.prototype.getMarkRegExp=function(){if(this.regExp){return"".search(this.regExp)&gt;=0?null:this.regExp}return this.expr.getMarkRegExp()};abego.TiddlerQuery.prototype.toString=function(){return(this.regExp?this.regExp:this.expr).toString()};abego.PageWiseRenderer=function(){this.firstIndexOnPage=0};merge(abego.PageWiseRenderer.prototype,{setItems:function(a){this.items=a;this.setFirstIndexOnPage(0)},getMaxPagesInNavigation:function(){return 10},getItemsCount:function(a){return this.items?this.items.length:0},getCurrentPageIndex:function(){return Math.floor(this.firstIndexOnPage/this.getItemsPerPage())},getLastPageIndex:function(){return Math.floor((this.getItemsCount()-1)/this.getItemsPerPage())},setFirstIndexOnPage:function(a){this.firstIndexOnPage=Math.min(Math.max(0,a),this.getItemsCount()-1)},getFirstIndexOnPage:function(){this.firstIndexOnPage=Math.floor(this.firstIndexOnPage/this.getItemsPerPage())*this.getItemsPerPage();return this.firstIndexOnPage},getLastIndexOnPage:function(){return Math.min(this.getFirstIndexOnPage()+this.getItemsPerPage()-1,this.getItemsCount()-1)},onPageChanged:function(a,b){},renderPage:function(a){if(a.beginRendering){a.beginRendering(this)}try{if(this.getItemsCount()){var d=this.getLastIndexOnPage();var c=-1;for(var b=this.getFirstIndexOnPage();b&lt;=d;b++){c++;a.render(this,this.items[b],b,c)}}}finally{if(a.endRendering){a.endRendering(this)}}},addPageNavigation:function(c){if(!this.getItemsCount()){return}var k=this;var g=function(n){if(!n){n=window.event}abego.consumeEvent(n);var i=abego.toInt(this.getAttribute("page"),0);var m=k.getCurrentPageIndex();if(i==m){return}var l=i*k.getItemsPerPage();k.setFirstIndexOnPage(l);k.onPageChanged(i,m)};var e;var h=this.getCurrentPageIndex();var f=this.getLastPageIndex();if(h&gt;0){e=createTiddlyButton(c,"Previous","Go to previous page (Shortcut: Alt-'&lt;')",g,"prev");e.setAttribute("page",(h-1).toString());e.setAttribute("accessKey","&lt;")}for(var d=-this.getMaxPagesInNavigation();d&lt;this.getMaxPagesInNavigation();d++){var b=h+d;if(b&lt;0){continue}if(b&gt;f){break}var a=(d+h+1).toString();var j=b==h?"currentPage":"otherPage";e=createTiddlyButton(c,a,"Go to page %0".format([a]),g,j);e.setAttribute("page",(b).toString())}if(h&lt;f){e=createTiddlyButton(c,"Next","Go to next page (Shortcut: Alt-'&gt;')",g,"next");e.setAttribute("page",(h+1).toString());e.setAttribute("accessKey","&gt;")}}});abego.LimitedTextRenderer=function(){var l=40;var c=4;var k=function(p,z,v){var q=p.length;if(q==0){p.push({start:z,end:v});return}var u=0;for(;u&lt;q;u++){var w=p[u];if(w.start&lt;=v&amp;&amp;z&lt;=w.end){var o;var s=u+1;for(;s&lt;q;s++){o=p[s];if(o.start&gt;v||z&gt;w.end){break}}var x=z;var y=v;for(var t=u;t&lt;s;t++){o=p[t];x=Math.min(x,o.start);y=Math.max(y,o.end)}p.splice(u,s-u,{start:x,end:y});return}if(w.start&gt;v){break}}p.splice(u,0,{start:z,end:v})};var d=function(n){var q=0;for(var p=0;p&lt;n.length;p++){var o=n[p];q+=o.end-o.start}return q};var b=function(n){return(n&gt;="a"&amp;&amp;n&lt;="z")||(n&gt;="A"&amp;&amp;n&lt;="Z")||n=="_"};var f=function(p,r){if(!b(p[r])){return null}for(var o=r-1;o&gt;=0&amp;&amp;b(p[o]);o--){}var q=o+1;var t=p.length;for(o=r+1;o&lt;t&amp;&amp;b(p[o]);o++){}return{start:q,end:o}};var a=function(o,q,p){var n;if(p){n=f(o,q)}else{if(q&lt;=0){return q}n=f(o,q-1)}if(!n){return q}if(p){if(n.start&gt;=q-c){return n.start}if(n.end&lt;=q+c){return n.end}}else{if(n.end&lt;=q+c){return n.end}if(n.start&gt;=q-c){return n.start}}return q};var j=function(r,q){var n=[];if(q){var u=0;do{q.lastIndex=u;var o=q.exec(r);if(o){if(u&lt;o.index){var p=r.substring(u,o.index);n.push({text:p})}n.push({text:o[0],isMatch:true});u=o.index+o[0].length}else{n.push({text:r.substr(u)});break}}while(true)}else{n.push({text:r})}return n};var i=function(p){var n=0;for(var o=0;o&lt;p.length;o++){if(p[o].isMatch){n++}}return n};var h=function(v,u,q,t,o){var w=Math.max(Math.floor(o/(t+1)),l);var n=Math.max(w-(q-u),0);var r=Math.min(Math.floor(q+n/3),v.length);var p=Math.max(r-w,0);p=a(v,p,true);r=a(v,r,false);return{start:p,end:r}};var m=function(r,y,o){var n=[];var v=i(r);var u=0;for(var p=0;p&lt;r.length;p++){var x=r[p];var w=x.text;if(x.isMatch){var q=h(y,u,u+w.length,v,o);k(n,q.start,q.end)}u+=w.length}return n};var g=function(t,p,o){var n=o-d(p);while(n&gt;0){if(p.length==0){k(p,0,a(t,o,false));return}else{var q=p[0];var v;var r;if(q.start==0){v=q.end;if(p.length&gt;1){r=p[1].start}else{k(p,v,a(t,v+n,false));return}}else{v=0;r=q.start}var u=Math.min(r,v+n);k(p,v,u);n-=(u-v)}}};var e=function(p,x,w,n,o){if(n.length==0){return}var u=function(z,I,D,F,C){var H;var G;var E=0;var B=0;var A=0;for(;B&lt;D.length;B++){H=D[B];G=H.text;if(F&lt;E+G.length){A=F-E;break}E+=G.length}var y=C-F;for(;B&lt;D.length&amp;&amp;y&gt;0;B++){H=D[B];G=H.text.substr(A);A=0;if(G.length&gt;y){G=G.substr(0,y)}if(H.isMatch){createTiddlyElement(z,"span",null,"marked",G)}else{createTiddlyText(z,G)}y-=G.length}if(C&lt;I.length){abego.createEllipsis(z)}};if(n[0].start&gt;0){abego.createEllipsis(p)}var q=o;for(var r=0;r&lt;n.length&amp;&amp;q&gt;0;r++){var t=n[r];var v=Math.min(t.end-t.start,q);u(p,x,w,t.start,t.start+v);q-=v}};this.render=function(p,q,o,t){if(q.length&lt;o){o=q.length}var r=j(q,t);var n=m(r,q,o);g(q,n,o);e(p,q,r,n,o)}};(function(){function alertAndThrow(msg){alert(msg);throw msg}if(version.major&lt;2||(version.major==2&amp;&amp;version.minor&lt;1)){alertAndThrow("YourSearchPlugin requires TiddlyWiki 2.1 or newer.\n\nCheck the archive for YourSearch plugins\nsupporting older versions of TiddlyWiki.\n\nArchive: http://tiddlywiki.abego-software.de/archive")}abego.YourSearch={};var lastResults=undefined;var lastQuery=undefined;var setLastResults=function(array){lastResults=array};var getLastResults=function(){return lastResults?lastResults:[]};var getLastResultsCount=function(){return lastResults?lastResults.length:0};var matchInTitleWeight=4;var precisionInTitleWeight=10;var matchInTagsWeight=2;var getMatchCount=function(s,re){var m=s.match(re);return m?m.length:0};var standardRankFunction=function(tiddler,query){var markRE=query.getMarkRegExp();if(!markRE){return 1}var matchesInTitle=tiddler.title.match(markRE);var nMatchesInTitle=matchesInTitle?matchesInTitle.length:0;var nMatchesInTags=getMatchCount(tiddler.getTags(),markRE);var lengthOfMatchesInTitle=matchesInTitle?matchesInTitle.join("").length:0;var precisionInTitle=tiddler.title.length&gt;0?lengthOfMatchesInTitle/tiddler.title.length:0;var rank=nMatchesInTitle*matchInTitleWeight+nMatchesInTags*matchInTagsWeight+precisionInTitle*precisionInTitleWeight+1;return rank};var findMatches=function(store,searchText,caseSensitive,useRegExp,sortField,excludeTag){lastQuery=null;var candidates=store.reverseLookup("tags",excludeTag,false);try{var defaultFields=[];if(config.options.chkSearchInTitle){defaultFields.push("title")}if(config.options.chkSearchInText){defaultFields.push("text")}if(config.options.chkSearchInTags){defaultFields.push("tags")}lastQuery=new abego.TiddlerQuery(searchText,caseSensitive,useRegExp,defaultFields,config.options.chkSearchExtendedFields)}catch(e){return[]}var results=lastQuery.filter(candidates);var rankFunction=abego.YourSearch.getRankFunction();for(var i=0;i&lt;results.length;i++){var tiddler=results[i];var rank=rankFunction(tiddler,lastQuery);tiddler.searchRank=rank}if(!sortField){sortField="title"}var sortFunction=function(a,b){var searchRankDiff=a.searchRank-b.searchRank;if(searchRankDiff==0){if(a[sortField]==b[sortField]){return(0)}else{return(a[sortField]&lt;b[sortField])?-1:+1}}else{return(searchRankDiff&gt;0)?-1:+1}};results.sort(sortFunction);return results};var maxCharsInTitle=80;var maxCharsInTags=50;var maxCharsInText=250;var maxCharsInField=50;var itemsPerPageDefault=25;var itemsPerPageWithPreviewDefault=10;var yourSearchResultID="yourSearchResult";var yourSearchResultItemsID="yourSearchResultItems";var lastSearchText=null;var resultElement=null;var searchInputField=null;var searchButton=null;var lastNewTiddlerButton=null;var initStylesheet=function(){if(version.extensions.YourSearchPlugin.styleSheetInited){return}version.extensions.YourSearchPlugin.styleSheetInited=true;setStylesheet(store.getTiddlerText("YourSearchStyleSheet"),"yourSearch")};var isResultOpen=function(){return resultElement!=null&amp;&amp;resultElement.parentNode==document.body};var closeResult=function(){if(isResultOpen()){document.body.removeChild(resultElement)}};var closeResultAndDisplayTiddler=function(e){closeResult();var title=this.getAttribute("tiddlyLink");if(title){var withHilite=this.getAttribute("withHilite");var oldHighlightHack=highlightHack;if(withHilite&amp;&amp;withHilite=="true"&amp;&amp;lastQuery){highlightHack=lastQuery.getMarkRegExp()}story.displayTiddler(this,title);highlightHack=oldHighlightHack}return(false)};var adjustResultPositionAndSize=function(){if(!searchInputField){return}var root=searchInputField;var rootLeft=findPosX(root);var rootTop=findPosY(root);var rootHeight=root.offsetHeight;var popupLeft=rootLeft;var popupTop=rootTop+rootHeight;var winWidth=findWindowWidth();if(winWidth&lt;resultElement.offsetWidth){resultElement.style.width=(winWidth-100)+"px";winWidth=findWindowWidth()}var popupWidth=resultElement.offsetWidth;if(popupLeft+popupWidth&gt;winWidth){popupLeft=winWidth-popupWidth-30}if(popupLeft&lt;0){popupLeft=0}resultElement.style.left=popupLeft+"px";resultElement.style.top=popupTop+"px";resultElement.style.display="block"};var scrollVisible=function(){if(resultElement){window.scrollTo(0,ensureVisible(resultElement))}if(searchInputField){window.scrollTo(0,ensureVisible(searchInputField))}};var ensureResultIsDisplayedNicely=function(){adjustResultPositionAndSize();scrollVisible()};var indexInPage=undefined;var currentTiddler=undefined;var pager=new abego.PageWiseRenderer();var MyItemRenderer=function(parent){this.itemHtml=store.getTiddlerText("YourSearchItemTemplate");if(!this.itemHtml){alertAndThrow("YourSearchItemTemplate not found")}this.place=document.getElementById(yourSearchResultItemsID);if(!this.place){this.place=createTiddlyElement(parent,"div",yourSearchResultItemsID)}};merge(MyItemRenderer.prototype,{render:function(pager,object,index,indexOnPage){indexInPage=indexOnPage;currentTiddler=object;var item=createTiddlyElement(this.place,"div",null,"yourSearchItem");item.innerHTML=this.itemHtml;applyHtmlMacros(item,null);refreshElements(item,null)},endRendering:function(pager){currentTiddler=null}});var refreshResult=function(){if(!resultElement||!searchInputField){return}var html=store.getTiddlerText("YourSearchResultTemplate");if(!html){html="&lt;b&gt;Tiddler YourSearchResultTemplate not found&lt;/b&gt;"}resultElement.innerHTML=html;applyHtmlMacros(resultElement,null);refreshElements(resultElement,null);var itemRenderer=new MyItemRenderer(resultElement);pager.renderPage(itemRenderer);ensureResultIsDisplayedNicely()};pager.getItemsPerPage=function(){var n=(config.options.chkPreviewText)?abego.toInt(config.options.txtItemsPerPageWithPreview,itemsPerPageWithPreviewDefault):abego.toInt(config.options.txtItemsPerPage,itemsPerPageDefault);return(n&gt;0)?n:1};pager.onPageChanged=function(){refreshResult()};var reopenResultIfApplicable=function(){if(searchInputField==null||!config.options.chkUseYourSearch){return}if((searchInputField.value==lastSearchText)&amp;&amp;lastSearchText&amp;&amp;!isResultOpen()){if(resultElement&amp;&amp;(resultElement.parentNode!=document.body)){document.body.appendChild(resultElement);ensureResultIsDisplayedNicely()}else{abego.YourSearch.onShowResult(true)}}};var invalidateResult=function(){closeResult();resultElement=null;lastSearchText=null};var isDescendantOrSelf=function(self,e){while(e!=null){if(self==e){return true}e=e.parentNode}return false};var onDocumentClick=function(e){if(e.target==searchInputField){return}if(e.target==searchButton){return}if(resultElement&amp;&amp;isDescendantOrSelf(resultElement,e.target)){return}closeResult()};var onDocumentKeyup=function(e){if(e.keyCode==27){closeResult()}};addEvent(document,"click",onDocumentClick);addEvent(document,"keyup",onDocumentKeyup);var myStorySearch=function(text,useCaseSensitive,useRegExp){lastSearchText=text;setLastResults(findMatches(store,text,useCaseSensitive,useRegExp,"title","excludeSearch"));abego.YourSearch.onShowResult()};var myMacroSearchHandler=function(place,macroName,params,wikifier,paramString,tiddler){initStylesheet();lastSearchText="";var searchTimeout=null;var doSearch=function(txt){if(config.options.chkUseYourSearch){myStorySearch(txt.value,config.options.chkCaseSensitiveSearch,config.options.chkRegExpSearch)}else{story.search(txt.value,config.options.chkCaseSensitiveSearch,config.options.chkRegExpSearch)}lastSearchText=txt.value};var clickHandler=function(e){doSearch(searchInputField);return false};var keyHandler=function(e){if(!e){e=window.event}searchInputField=this;switch(e.keyCode){case 13:if(e.ctrlKey&amp;&amp;lastNewTiddlerButton&amp;&amp;isResultOpen()){lastNewTiddlerButton.onclick.apply(lastNewTiddlerButton,[e])}else{doSearch(this)}break;case 27:if(isResultOpen()){closeResult()}else{this.value="";clearMessage()}break}if(String.fromCharCode(e.keyCode)==this.accessKey||e.altKey){reopenResultIfApplicable()}if(this.value.length&lt;3&amp;&amp;searchTimeout){clearTimeout(searchTimeout)}if(this.value.length&gt;2){if(this.value!=lastSearchText){if(!config.options.chkUseYourSearch||config.options.chkSearchAsYouType){if(searchTimeout){clearTimeout(searchTimeout)}var txt=this;searchTimeout=setTimeout(function(){doSearch(txt)},500)}}else{if(searchTimeout){clearTimeout(searchTimeout)}}}if(this.value.length==0){closeResult()}};var focusHandler=function(e){this.select();clearMessage();reopenResultIfApplicable()};var args=paramString.parseParams("list",null,true);var buttonAtRight=getFlag(args,"buttonAtRight");var sizeTextbox=getParam(args,"sizeTextbox",this.sizeTextbox);var txt=createTiddlyElement(null,"input",null,"txtOptionInput searchField",null);if(params[0]){txt.value=params[0]}txt.onkeyup=keyHandler;txt.onfocus=focusHandler;txt.setAttribute("size",sizeTextbox);txt.setAttribute("accessKey",this.accessKey);txt.setAttribute("autocomplete","off");if(config.browser.isSafari){txt.setAttribute("type","search");txt.setAttribute("results","5")}else{if(!config.browser.isIE){txt.setAttribute("type","text")}}var btn=createTiddlyButton(null,this.label,this.prompt,clickHandler);if(place){if(!buttonAtRight){place.appendChild(btn)}place.appendChild(txt);if(buttonAtRight){place.appendChild(btn)}}searchInputField=txt;searchButton=btn};var openAllFoundTiddlers=function(){closeResult();var results=getLastResults();var n=results.length;if(n){var titles=[];for(var i=0;i&lt;n;i++){titles.push(results[i].title)}story.displayTiddlers(null,titles)}};var createOptionWithRefresh=function(place,optionParams,wikifier,tiddler){invokeMacro(place,"option",optionParams,wikifier,tiddler);var elem=place.lastChild;var oldOnClick=elem.onclick;elem.onclick=function(e){var result=oldOnClick.apply(this,arguments);refreshResult();return result};return elem};var removeTextDecoration=function(s){var removeThis=["''","{{{","}}}","//","&lt;&lt;&lt;","/***","***/"];var reText="";for(var i=0;i&lt;removeThis.length;i++){if(i!=0){reText+="|"}reText+="("+removeThis[i].escapeRegExp()+")"}return s.replace(new RegExp(reText,"mg"),"").trim()};var getShortCutNumber=function(){var i=indexInPage;return(i&gt;=0&amp;&amp;i&lt;=9)?(i&lt;9?(i+1):0):-1};var limitedTextRenderer=new abego.LimitedTextRenderer();var renderLimitedText=function(place,s,maxLen){limitedTextRenderer.render(place,s,maxLen,lastQuery.getMarkRegExp())};var oldTiddlyWikiSaveTiddler=TiddlyWiki.prototype.saveTiddler;TiddlyWiki.prototype.saveTiddler=function(title,newTitle,newBody,modifier,modified,tags,fields){oldTiddlyWikiSaveTiddler.apply(this,arguments);invalidateResult()};var oldTiddlyWikiRemoveTiddler=TiddlyWiki.prototype.removeTiddler;TiddlyWiki.prototype.removeTiddler=function(title){oldTiddlyWikiRemoveTiddler.apply(this,arguments);invalidateResult()};config.macros.yourSearch={label:"yourSearch",prompt:"Gives access to the current/last YourSearch result",handler:function(place,macroName,params,wikifier,paramString,tiddler){if(params.length==0){return}var name=params[0];var func=config.macros.yourSearch.funcs[name];if(func){func(place,macroName,params,wikifier,paramString,tiddler)}},tests:{"true":function(){return true},"false":function(){return false},found:function(){return getLastResultsCount()&gt;0},previewText:function(){return config.options.chkPreviewText}},funcs:{itemRange:function(place){if(getLastResultsCount()){var lastIndex=pager.getLastIndexOnPage();var s="%0 - %1".format([pager.getFirstIndexOnPage()+1,lastIndex+1]);createTiddlyText(place,s)}},count:function(place){createTiddlyText(place,getLastResultsCount().toString())},query:function(place){if(lastQuery){createTiddlyText(place,lastQuery.toString())}},version:function(place){var t="YourSearch %0.%1.%2".format([version.extensions.YourSearchPlugin.major,version.extensions.YourSearchPlugin.minor,version.extensions.YourSearchPlugin.revision]);var e=createTiddlyElement(place,"a");e.setAttribute("href","http://tiddlywiki.abego-software.de/#YourSearchPlugin");e.innerHTML='&lt;font color="black" face="Arial, Helvetica, sans-serif"&gt;'+t+"&lt;font&gt;"},copyright:function(place){var e=createTiddlyElement(place,"a");e.setAttribute("href","http://www.abego-software.de");e.innerHTML='&lt;font color="black" face="Arial, Helvetica, sans-serif"&gt;&amp;copy; 2005-2008 &lt;b&gt;&lt;font color="red"&gt;abego&lt;/font&gt;&lt;/b&gt; Software&lt;font&gt;'},newTiddlerButton:function(place){if(lastQuery){var r=abego.parseNewTiddlerCommandLine(lastQuery.getQueryText());var btn=config.macros.newTiddler.createNewTiddlerButton(place,r.title,r.params,"new tiddler","Create a new tiddler based on search text. (Shortcut: Ctrl-Enter; Separators: '.', '#')",null,"text");var oldOnClick=btn.onclick;btn.onclick=function(){closeResult();oldOnClick.apply(this,arguments)};lastNewTiddlerButton=btn}},linkButton:function(place,macroName,params,wikifier,paramString,tiddler){if(params&lt;2){return}var tiddlyLink=params[1];var text=params&lt;3?tiddlyLink:params[2];var tooltip=params&lt;4?text:params[3];var accessKey=params&lt;5?null:params[4];var btn=createTiddlyButton(place,text,tooltip,closeResultAndDisplayTiddler,null,null,accessKey);btn.setAttribute("tiddlyLink",tiddlyLink)},closeButton:function(place,macroName,params,wikifier,paramString,tiddler){createTiddlyButton(place,"close","Close the Search Results (Shortcut: ESC)",closeResult)},openAllButton:function(place,macroName,params,wikifier,paramString,tiddler){var n=getLastResultsCount();if(n==0){return}var title=n==1?"open tiddler":"open all %0 tiddlers".format([n]);var button=createTiddlyButton(place,title,"Open all found tiddlers (Shortcut: Alt-O)",openAllFoundTiddlers);button.setAttribute("accessKey","O")},naviBar:function(place,macroName,params,wikifier,paramString,tiddler){pager.addPageNavigation(place)},"if":function(place,macroName,params,wikifier,paramString,tiddler){if(params.length&lt;2){return}var testName=params[1];var negate=(testName=="not");if(negate){if(params.length&lt;3){return}testName=params[2]}var test=config.macros.yourSearch.tests[testName];var showIt=false;try{if(test){showIt=test(place,macroName,params,wikifier,paramString,tiddler)!=negate}else{showIt=(!eval(testName))==negate}}catch(ex){}if(!showIt){place.style.display="none"}},chkPreviewText:function(place,macroName,params,wikifier,paramString,tiddler){var elem=createOptionWithRefresh(place,"chkPreviewText",wikifier,tiddler);elem.setAttribute("accessKey","P");elem.title="Show text preview of found tiddlers (Shortcut: Alt-P)";return elem}}};config.macros.foundTiddler={label:"foundTiddler",prompt:"Provides information on the tiddler currently processed on the YourSearch result page",handler:function(place,macroName,params,wikifier,paramString,tiddler){var name=params[0];var func=config.macros.foundTiddler.funcs[name];if(func){func(place,macroName,params,wikifier,paramString,tiddler)}},funcs:{title:function(place,macroName,params,wikifier,paramString,tiddler){if(!currentTiddler){return}var shortcutNumber=getShortCutNumber();var tooltip=shortcutNumber&gt;=0?"Open tiddler (Shortcut: Alt-%0)".format([shortcutNumber.toString()]):"Open tiddler";var btn=createTiddlyButton(place,null,tooltip,closeResultAndDisplayTiddler,null);btn.setAttribute("tiddlyLink",currentTiddler.title);btn.setAttribute("withHilite","true");renderLimitedText(btn,currentTiddler.title,maxCharsInTitle);if(shortcutNumber&gt;=0){btn.setAttribute("accessKey",shortcutNumber.toString())}},tags:function(place,macroName,params,wikifier,paramString,tiddler){if(!currentTiddler){return}renderLimitedText(place,currentTiddler.getTags(),maxCharsInTags)},text:function(place,macroName,params,wikifier,paramString,tiddler){if(!currentTiddler){return}renderLimitedText(place,removeTextDecoration(currentTiddler.text),maxCharsInText)},field:function(place,macroName,params,wikifier,paramString,tiddler){if(!currentTiddler){return}var name=params[1];var len=params.length&gt;2?abego.toInt(params[2],maxCharsInField):maxCharsInField;var v=store.getValue(currentTiddler,name);if(v){renderLimitedText(place,removeTextDecoration(v),len)}},number:function(place,macroName,params,wikifier,paramString,tiddler){var numberToDisplay=getShortCutNumber();if(numberToDisplay&gt;=0){var text="%0)".format([numberToDisplay.toString()]);createTiddlyElement(place,"span",null,"shortcutNumber",text)}}}};var opts={chkUseYourSearch:true,chkPreviewText:true,chkSearchAsYouType:true,chkSearchInTitle:true,chkSearchInText:true,chkSearchInTags:true,chkSearchExtendedFields:true,txtItemsPerPage:itemsPerPageDefault,txtItemsPerPageWithPreview:itemsPerPageWithPreviewDefault};for(var n in opts){if(config.options[n]==undefined){config.options[n]=opts[n]}}config.shadowTiddlers.AdvancedOptions+="\n&lt;&lt;option chkUseYourSearch&gt;&gt; Use 'Your Search' //([[more options|YourSearch Options]]) ([[help|YourSearch Help]])// ";config.shadowTiddlers["YourSearch Help"]="!Field Search\nWith the Field Search you can restrict your search to certain fields of a tiddler, e.g only search the tags or only the titles. The general form is //fieldname//'':''//textToSearch// (e.g. {{{title:intro}}}). In addition one-character shortcuts are also supported for the standard fields {{{title}}}, {{{text}}} and {{{tags}}}:\n|!What you want|!What you type|!Example|\n|Search ''titles only''|start word with ''!''|{{{!jonny}}} (shortcut for {{{title:jonny}}})|\n|Search ''contents/text only''|start word with ''%''|{{{%football}}} (shortcut for {{{text:football}}})|\n|Search ''tags only''|start word with ''#''|{{{#Plugin}}} (shortcut for {{{tags:Plugin}}})|\n\nUsing this feature you may also search the extended fields (\"Metadata\") introduced with TiddlyWiki 2.1, e.g. use {{{priority:1}}} to find all tiddlers with the priority field set to \"1\".\n\nYou may search a word in more than one field. E.g. {{{!#Plugin}}} (or {{{title:tags:Plugin}}} in the \"long form\") finds tiddlers containing \"Plugin\" either in the title or in the tags (but does not look for \"Plugin\" in the text). \n\n!Boolean Search\nThe Boolean Search is useful when searching for multiple words.\n|!What you want|!What you type|!Example|\n|''All words'' must exist|List of words|{{{jonny jeremy}}} (or {{{jonny and jeremy}}})|\n|''At least one word'' must exist|Separate words by ''or''|{{{jonny or jeremy}}}|\n|A word ''must not exist''|Start word with ''-''|{{{-jonny}}} (or {{{not jonny}}})|\n\n''Note:'' When you specify two words, separated with a space, YourSearch finds all tiddlers that contain both words, but not necessarily next to each other. If you want to find a sequence of word, e.g. '{{{John Brown}}}', you need to put the words into quotes. I.e. you type: {{{\"john brown\"}}}.\n\nUsing parenthesis you may change the default \"left to right\" evaluation of the boolean search. E.g. {{{not (jonny or jeremy)}}} finds all tiddlers that contain neither \"jonny\" nor \"jeremy. In contrast to this {{{not jonny or jeremy}}} (i.e. without parenthesis) finds all tiddlers that either don't contain \"jonny\" or that contain \"jeremy\".\n\n!'Exact Word' Search\nBy default a search result all matches that 'contain' the searched text. E.g. if you search for {{{Task}}} you will get all tiddlers containing 'Task', but also '~CompletedTask', '~TaskForce' etc.\n\nIf you only want to get the tiddlers that contain 'exactly the word' you need to prefix it with a '='. E.g. typing '=Task' will find the tiddlers that contain the word 'Task', ignoring words that just contain 'Task' as a substring.\n\n!~CaseSensitiveSearch and ~RegExpSearch\nThe standard search options ~CaseSensitiveSearch and ~RegExpSearch are fully supported by YourSearch. However when ''~RegExpSearch'' is on Filtered and Boolean Search are disabled.\n\nIn addition you may do a \"regular expression\" search even with the ''~RegExpSearch'' set to false by directly entering the regular expression into the search field, framed with {{{/.../}}}. \n\nExample: {{{/m[ae][iy]er/}}} will find all tiddlers that contain either \"maier\", \"mayer\", \"meier\" or \"meyer\".\n\n!~JavaScript Expression Filtering\nIf you are familiar with JavaScript programming and know some TiddlyWiki internals you may also use JavaScript expression for the search. Just enter a JavaScript boolean expression into the search field, framed with {{{ { ... } }}}. In the code refer to the variable tiddler and evaluate to {{{true}}} when the given tiddler should be included in the result. \n\nExample: {{{ { tiddler.modified &gt; new Date(\"Jul 4, 2005\")} }}} returns all tiddler modified after July 4th, 2005.\n\n!Combined Search\nYou are free to combine the various search options. \n\n''Examples''\n|!What you type|!Result|\n|{{{!jonny !jeremy -%football}}}|all tiddlers with both {{{jonny}}} and {{{jeremy}}} in its titles, but no {{{football}}} in content.|\n|{{{#=Task}}}|All tiddlers tagged with 'Task' (the exact word). Tags named '~CompletedTask', '~TaskForce' etc. are not considered.|\n\n!Access Keys\nYou are encouraged to use the access keys (also called \"shortcut\" keys) for the most frequently used operations. For quick reference these shortcuts are also mentioned in the tooltip for the various buttons etc.\n\n|!Key|!Operation|\n|{{{Alt-F}}}|''The most important keystroke'': It moves the cursor to the search input field so you can directly start typing your query. Pressing {{{Alt-F}}} will also display the previous search result. This way you can quickly display multiple tiddlers using \"Press {{{Alt-F}}}. Select tiddler.\" sequences.|\n|{{{ESC}}}|Closes the [[YourSearch Result]]. When the [[YourSearch Result]] is already closed and the cursor is in the search input field the field's content is cleared so you start a new query.|\n|{{{Alt-1}}}, {{{Alt-2}}},... |Pressing these keys opens the first, second etc. tiddler from the result list.|\n|{{{Alt-O}}}|Opens all found tiddlers.|\n|{{{Alt-P}}}|Toggles the 'Preview Text' mode.|\n|{{{Alt-'&lt;'}}}, {{{Alt-'&gt;'}}}|Displays the previous or next page in the [[YourSearch Result]].|\n|{{{Return}}}|When you have turned off the 'as you type' search mode pressing the {{{Return}}} key actually starts the search (as does pressing the 'search' button).|\n\n//If some of these shortcuts don't work for you check your browser if you have other extensions installed that already \"use\" these shortcuts.//";config.shadowTiddlers["YourSearch Options"]="|&gt;|!YourSearch Options|\n|&gt;|&lt;&lt;option chkUseYourSearch&gt;&gt; Use 'Your Search'|\n|!|&lt;&lt;option chkPreviewText&gt;&gt; Show Text Preview|\n|!|&lt;&lt;option chkSearchAsYouType&gt;&gt; 'Search As You Type' Mode (No RETURN required to start search)|\n|!|Default Search Filter:&lt;&lt;option chkSearchInTitle&gt;&gt;Title ('!')     &lt;&lt;option chkSearchInText&gt;&gt;Text ('%')     &lt;&lt;option chkSearchInTags&gt;&gt;Tags ('#')    &lt;&lt;option chkSearchExtendedFields&gt;&gt;Extended Fields&lt;html&gt;&lt;br&gt;&lt;font size=\"-2\"&gt;The fields of a tiddlers that are searched when you don't explicitly specify a filter in the search text &lt;br&gt;(Explictly specify fields using one or more '!', '%', '#' or 'fieldname:' prefix before the word/text to find).&lt;/font&gt;&lt;/html&gt;|\n|!|Number of items on search result page: &lt;&lt;option txtItemsPerPage&gt;&gt;|\n|!|Number of items on search result page with preview text: &lt;&lt;option txtItemsPerPageWithPreview&gt;&gt;|\n";config.shadowTiddlers.YourSearchStyleSheet="/***\n!~YourSearchResult Stylesheet\n***/\n/*{{{*/\n.yourSearchResult {\n\tposition: absolute;\n\twidth: 800px;\n\n\tpadding: 0.2em;\n\tlist-style: none;\n\tmargin: 0;\n\n\tbackground: #ffd;\n\tborder: 1px solid DarkGray;\n}\n\n/*}}}*/\n/***\n!!Summary Section\n***/\n/*{{{*/\n.yourSearchResult .summary {\n\tborder-bottom-width: thin;\n\tborder-bottom-style: solid;\n\tborder-bottom-color: #999999;\n\tpadding-bottom: 4px;\n}\n\n.yourSearchRange, .yourSearchCount, .yourSearchQuery   {\n\tfont-weight: bold;\n}\n\n.yourSearchResult .summary .button {\n\tfont-size: 10px;\n\n\tpadding-left: 0.3em;\n\tpadding-right: 0.3em;\n}\n\n.yourSearchResult .summary .chkBoxLabel {\n\tfont-size: 10px;\n\n\tpadding-right: 0.3em;\n}\n\n/*}}}*/\n/***\n!!Items Area\n***/\n/*{{{*/\n.yourSearchResult .marked {\n\tbackground: none;\n\tfont-weight: bold;\n}\n\n.yourSearchItem {\n\tmargin-top: 2px;\n}\n\n.yourSearchNumber {\n\tcolor: #808080;\n}\n\n\n.yourSearchTags {\n\tcolor: #008000;\n}\n\n.yourSearchText {\n\tcolor: #808080;\n\tmargin-bottom: 6px;\n}\n\n/*}}}*/\n/***\n!!Footer\n***/\n/*{{{*/\n.yourSearchFooter {\n\tmargin-top: 8px;\n\tborder-top-width: thin;\n\tborder-top-style: solid;\n\tborder-top-color: #999999;\n}\n\n.yourSearchFooter a:hover{\n\tbackground: none;\n\tcolor: none;\n}\n/*}}}*/\n/***\n!!Navigation Bar\n***/\n/*{{{*/\n.yourSearchNaviBar a {\n\tfont-size: 16px;\n\tmargin-left: 4px;\n\tmargin-right: 4px;\n\tcolor: black;\n\ttext-decoration: underline;\n}\n\n.yourSearchNaviBar a:hover {\n\tbackground-color: none;\n}\n\n.yourSearchNaviBar .prev {\n\tfont-weight: bold;\n\tcolor: blue;\n}\n\n.yourSearchNaviBar .currentPage {\n\tcolor: #FF0000;\n\tfont-weight: bold;\n\ttext-decoration: none;\n}\n\n.yourSearchNaviBar .next {\n\tfont-weight: bold;\n\tcolor: blue;\n}\n/*}}}*/\n";config.shadowTiddlers.YourSearchResultTemplate='&lt;!--\n{{{\n--&gt;\n&lt;span macro="yourSearch if found"&gt;\n&lt;!-- The Summary Header ============================================ --&gt;\n&lt;table class="summary" border="0" width="100%" cellspacing="0" cellpadding="0"&gt;&lt;tbody&gt;\n  &lt;tr&gt;\n\t&lt;td align="left"&gt;\n\t\tYourSearch Result &lt;span class="yourSearchRange" macro="yourSearch itemRange"&gt;&lt;/span&gt;\n\t\t&amp;nbsp;of&amp;nbsp;&lt;span class="yourSearchCount" macro="yourSearch count"&gt;&lt;/span&gt;\n\t\tfor&amp;nbsp;&lt;span class="yourSearchQuery" macro="yourSearch query"&gt;&lt;/span&gt;\n\t&lt;/td&gt;\n\t&lt;td class="yourSearchButtons" align="right"&gt;\n\t\t&lt;span macro="yourSearch chkPreviewText"&gt;&lt;/span&gt;&lt;span class="chkBoxLabel"&gt;preview text&lt;/span&gt;\n\t\t&lt;span macro="yourSearch newTiddlerButton"&gt;&lt;/span&gt;\n\t\t&lt;span macro="yourSearch openAllButton"&gt;&lt;/span&gt;\n\t\t&lt;span macro="yourSearch linkButton \'YourSearch Options\' options \'Configure YourSearch\'"&gt;&lt;/span&gt;\n\t\t&lt;span macro="yourSearch linkButton \'YourSearch Help\' help \'Get help how to use YourSearch\'"&gt;&lt;/span&gt;\n\t\t&lt;span macro="yourSearch closeButton"&gt;&lt;/span&gt;\n\t&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/tbody&gt;&lt;/table&gt;\n\n&lt;!-- The List of Found Tiddlers ============================================ --&gt;\n&lt;div id="yourSearchResultItems" itemsPerPage="25" itemsPerPageWithPreview="10"&gt;&lt;/div&gt;\n\n&lt;!-- The Footer (with the Navigation) ============================================ --&gt;\n&lt;table class="yourSearchFooter" border="0" width="100%" cellspacing="0" cellpadding="0"&gt;&lt;tbody&gt;\n  &lt;tr&gt;\n\t&lt;td align="left"&gt;\n\t\tResult page: &lt;span class="yourSearchNaviBar" macro="yourSearch naviBar"&gt;&lt;/span&gt;\n\t&lt;/td&gt;\n\t&lt;td align="right"&gt;&lt;span macro="yourSearch version"&gt;&lt;/span&gt;, &lt;span macro="yourSearch copyright"&gt;&lt;/span&gt;\n\t&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/tbody&gt;&lt;/table&gt;\n&lt;!-- end of the \'tiddlers found\' case =========================================== --&gt;\n&lt;/span&gt;\n\n\n&lt;!-- The "No tiddlers found" case =========================================== --&gt;\n&lt;span macro="yourSearch if not found"&gt;\n&lt;table class="summary" border="0" width="100%" cellspacing="0" cellpadding="0"&gt;&lt;tbody&gt;\n  &lt;tr&gt;\n\t&lt;td align="left"&gt;\n\t\tYourSearch Result: No tiddlers found for &lt;span class="yourSearchQuery" macro="yourSearch query"&gt;&lt;/span&gt;.\n\t&lt;/td&gt;\n\t&lt;td class="yourSearchButtons" align="right"&gt;\n\t\t&lt;span macro="yourSearch newTiddlerButton"&gt;&lt;/span&gt;\n\t\t&lt;span macro="yourSearch linkButton \'YourSearch Options\' options \'Configure YourSearch\'"&gt;&lt;/span&gt;\n\t\t&lt;span macro="yourSearch linkButton \'YourSearch Help\' help \'Get help how to use YourSearch\'"&gt;&lt;/span&gt;\n\t\t&lt;span macro="yourSearch closeButton"&gt;&lt;/span&gt;\n\t&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/tbody&gt;&lt;/table&gt;\n&lt;/span&gt;\n\n\n&lt;!--\n}}}\n--&gt;\n';config.shadowTiddlers.YourSearchItemTemplate="&lt;!--\n{{{\n--&gt;\n&lt;span class='yourSearchNumber' macro='foundTiddler number'&gt;&lt;/span&gt;\n&lt;span class='yourSearchTitle' macro='foundTiddler title'/&gt;&lt;/span&gt;&amp;nbsp;-&amp;nbsp;\n&lt;span class='yourSearchTags' macro='foundTiddler field tags 50'/&gt;&lt;/span&gt;\n&lt;span macro=\"yourSearch if previewText\"&gt;&lt;div class='yourSearchText' macro='foundTiddler field text 250'/&gt;&lt;/div&gt;&lt;/span&gt;\n&lt;!--\n}}}\n--&gt;";config.shadowTiddlers.YourSearch="&lt;&lt;tiddler [[YourSearch Help]]&gt;&gt;";config.shadowTiddlers["YourSearch Result"]="The popup-like window displaying the result of a YourSearch query.";config.macros.search.handler=myMacroSearchHandler;var checkForOtherHijacker=function(){if(config.macros.search.handler!=myMacroSearchHandler){alert("Message from YourSearchPlugin:\n\n\nAnother plugin has disabled the 'Your Search' features.\n\n\nYou may disable the other plugin or change the load order of \nthe plugins (by changing the names of the tiddlers)\nto enable the 'Your Search' features.")}};setTimeout(checkForOtherHijacker,5000);abego.YourSearch.getStandardRankFunction=function(){return standardRankFunction};abego.YourSearch.getRankFunction=function(){return abego.YourSearch.getStandardRankFunction()};abego.YourSearch.getCurrentTiddler=function(){return currentTiddler};abego.YourSearch.closeResult=function(){closeResult()};abego.YourSearch.getFoundTiddlers=function(){return lastResults};abego.YourSearch.getQuery=function(){return lastQuery};abego.YourSearch.onShowResult=function(useOldResult){highlightHack=lastQuery?lastQuery.getMarkRegExp():null;if(!useOldResult){pager.setItems(getLastResults())}if(!resultElement){resultElement=createTiddlyElement(document.body,"div",yourSearchResultID,"yourSearchResult")}else{if(resultElement.parentNode!=document.body){document.body.appendChild(resultElement)}}refreshResult();highlightHack=null}})()};
//%/</pre>
</div>
<div changecount="1" created="201702031120" creator="Яков Литвин" modifier="Яков Литвин" title="PageTemplate">
<pre>&lt;!--{{{--&gt;
&lt;!-- &lt;div class='header' role='banner' macro='gradient vert [[ColorPalette::PrimaryLight]] [[ColorPalette::PrimaryMid]]'&gt;
&lt;div class='headerShadow'&gt;
&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;
&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;
&lt;/div&gt;
&lt;div class='headerForeground'&gt;
&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;
&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id='mainMenu' role='navigation' refresh='content' tiddler='MainMenu'&gt;&lt;/div&gt;
&lt;div id='sidebar'&gt;
&lt;div id='sidebarOptions' role='navigation' refresh='content' tiddler='SideBarOptions'&gt;&lt;/div&gt;
&lt;div id='sidebarTabs' role='complementary' refresh='content' force='true' tiddler='SideBarTabs'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div id='displayArea' role='main'&gt;
&lt;div id='messageArea'&gt;&lt;/div&gt;
&lt;div id='tiddlerDisplay'&gt;&lt;/div&gt;
&lt;/div&gt;
--&gt;
&lt;!--}}}--&gt;</pre>
</div>
<div changecount="1" created="201610041444" creator="Яков Литвин" modifier="Яков Литвин" title="WebTheme">
<pre>|PageTemplate|WebPageTemplate|
|ViewTemplate|WebViewTemplate|
|StyleSheet|WebStyleSheet|</pre>
</div>
<div changecount="2" created="201610051922" creator="Яков Литвин" modified="201612052344" modifier="Яков Литвин" tags="code" title="WebPageTemplate">
<pre>&lt;!--{{{--&gt;
&lt;div id='displayArea' role='main'&gt;
  &lt;div id='messageArea'&gt;&lt;/div&gt;
  &lt;div id='tiddlerDisplay'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!--&lt;div id='footer' refresh='content' tiddler='SiteFooter'&gt;&lt;/div&gt;--&gt;
&lt;!--}}}--&gt;</pre>
</div>
<div changecount="1" created="201610070826" creator="Яков Литвин" modifier="Яков Литвин" tags="code" title="WebViewTemplate">
<pre>&lt;!--{{{--&gt;
&lt;div class='toolbar' role='navigation' macro='toolbar [[ToolbarCommands::ViewToolbar]]'&gt;&lt;/div&gt;
&lt;div class='title' macro='view title'&gt;&lt;/div&gt;
&lt;div class='subtitle'&gt;&lt;span macro='view modifier link'&gt;&lt;/span&gt;, &lt;span macro='view modified date'&gt;&lt;/span&gt; (&lt;span macro='message views.wikified.createdPrompt'&gt;&lt;/span&gt; &lt;span macro='view created date'&gt;&lt;/span&gt;)&lt;/div&gt;
&lt;div class='tagging' macro='tagging'&gt;&lt;/div&gt;
&lt;div class='tagged' macro='tags'&gt;&lt;/div&gt;
&lt;div class='viewer' macro='view text wikified'&gt;&lt;/div&gt;
&lt;div class='tagClear'&gt;&lt;/div&gt;
&lt;!--}}}--&gt;</pre>
</div>
<div changecount="20" created="201610131723" creator="Яков Литвин" modified="201701271541" modifier="Яков Литвин" tags="code" title="courseWebViewTemplate">
<pre>&lt;!--{{{--&gt;
&lt;link rel='stylesheet' type='text/css' href='css/bootstrap.min.css' /&gt;
&lt;link rel='stylesheet' type='text/css' href='css/course.css' /&gt;
&lt;div id="navigation"&gt;
	&lt;div class="container"&gt;
		&lt;div class="row"&gt;
			&lt;div class="col-md-4 hidden-xs hidden-sm"&gt;&lt;a href="http://childrenscience.ru/"&gt;&lt;img src="images/logo_small.svg?crc=140944996" width="176" height="25" /&gt;&lt;/a&gt;&lt;/div&gt;
			&lt;div class="col-md-3 col-xs-6"&gt;&lt;a href="http://childrenscience.ru/courses.html" class="nav-link"&gt;Курсы&lt;/a&gt;&lt;/div&gt;
			&lt;div class="col-md-3 col-xs-6"&gt;&lt;a href="http://childrenscience.ru/about.html" class="nav-link"&gt;О проекте&lt;/a&gt;&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;
&lt;/div&gt;

&lt;div class="container" id="main_content"&gt;
	&lt;div class="row"&gt;
		&lt;div class="col-md-12 col-xs-12" id="course-header"&gt;
			&lt;h2 id="course-name"&gt;Решение генетических задач&lt;/h2&gt;
			&lt;h4 id="course-author"&gt;Екатерина Романовна Черткова&lt;/h4&gt;
			&lt;h4 id="course-audience"&gt;9–11 класс&lt;/h4&gt;
			&lt;img src="images/cpm.png" width="70px" height="67px" class="pull-left" id="course-sponsor-img" /&gt;
			&lt;div class="pull-left center-block" id="course-sponsor-txt"&gt;Курс создан при поддержке&lt;br/&gt;Центра Педагогического мастерства&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;
	&lt;div macro='fillCourseHeader'&gt;&lt;/div&gt; &lt;!-- TW stuff --&gt;
	&lt;div class="row row-flex" id="course-content"&gt;
	
		&lt;div class="col-sm-4 col-xs-12" id="lessons-list"&gt;
			&lt;div class="lesson"&gt;
				&lt;a href="#" class="lesson-name h4"&gt;О курсе&lt;/a&gt;
			&lt;/div&gt;
		
			&lt;div class="lesson"&gt;
				&lt;div class="lesson-name h4"&gt;Урок с подтемами или часть.&lt;/div&gt;
				&lt;div class="sub-lessons"&gt;
					&lt;a href="#" class="lesson-name"&gt;Урок 0&lt;/a&gt;
					&lt;a href="#" class="lesson-name lesson-active"&gt;Урок 1 (активен)&lt;/a&gt;
					&lt;a href="#" class="lesson-name"&gt;Урок 2. С очень длинным, просто отвратительным названием.&lt;/a&gt;
					&lt;a href="#" class="lesson-name"&gt;Урок 3&lt;/a&gt;
				&lt;/div&gt;
			&lt;/div&gt;
			&lt;div class="lesson"&gt;
				&lt;div class="lesson-name h4"&gt;Урок с подтемами или часть.&lt;/div&gt;
				&lt;div class="sub-lessons"&gt;
					&lt;a href="#" class="lesson-name"&gt;Урок 0&lt;/a&gt;
					&lt;a href="#" class="lesson-name"&gt;Урок 1&lt;/a&gt;
					&lt;a href="#" class="lesson-name"&gt;Урок 2. С очень длинным, просто отвратительным названием.&lt;/a&gt;
					&lt;a href="#" class="lesson-name"&gt;Урок 3&lt;/a&gt;
				&lt;/div&gt;
			&lt;/div&gt;
			
			&lt;div class="lesson"&gt;
				&lt;a href="#" class="lesson-name h4"&gt;Урок без подтем&lt;/a&gt;
			&lt;/div&gt;
			&lt;div class="lesson"&gt;
				&lt;a href="#" class="lesson-name h4"&gt;Урок без подтем&lt;/a&gt;
			&lt;/div&gt;
			&lt;div class="lesson"&gt;
				&lt;a href="#" class="lesson-name h4 lesson-active"&gt;Активный урок без подтем&lt;/a&gt;
			&lt;/div&gt;
			&lt;div class="lesson"&gt;
				&lt;a href="#" class="lesson-name h4"&gt;Урок без подтем&lt;/a&gt;
			&lt;/div&gt;
			
		&lt;/div&gt;
		
		&lt;div class="col-sm-8" id="lesson-content"&gt;
		
			&lt;h2&gt;Строение нуклеиновых кислот&lt;/h2&gt;
			&lt;h5&gt;Занятие 2&lt;/h5&gt;
			&lt;p&gt;Курс «Решение генетических задач» поможет разобраться в алгоритме решения генетических задач, встречающихся на ЕГЭ и олимпиадах.&lt;/p&gt;
			&lt;p&gt;На первом занятии автор курса, преподаватель школы «Интеллектуал» Екатерина Черткова расскажет о строении нуклеиновых кислот и процессах, которые с ними происходят.&lt;/p&gt;
			&lt;a class="btn btn-primary" href="#"&gt;Пройти занятие&lt;/a&gt;
			
			&lt;ol id="lesson-steps"&gt;
				&lt;li&gt;
					&lt;p&gt;&lt;a href="#"&gt;&lt;img src="images/video.svg" width="24px" height="24px" class="pull-left"/&gt;&lt;span class="lesson-label"&gt;Шаг 1 - видео&lt;/span&gt;&lt;/a&gt;&lt;br/&gt;&lt;small&gt;видео - 5:99&lt;/small&gt;&lt;/p&gt;
				&lt;/li&gt;
				&lt;li&gt;
					&lt;p&gt;&lt;a href="#"&gt;&lt;img src="images/text.svg" width="24px" height="24px" class="pull-left"/&gt;&lt;span class="lesson-label"&gt;Шаг 2 - конспект&lt;/span&gt;&lt;/a&gt;&lt;br/&gt;&lt;small&gt;конспект&lt;/small&gt;&lt;/p&gt;
				&lt;/li&gt;
				&lt;li&gt;
					&lt;p&gt;&lt;a href="#"&gt;&lt;img src="images/test.svg" width="24px" height="24px" class="pull-left"/&gt;&lt;span class="lesson-label"&gt;Шаг 3 - тест&lt;/span&gt;&lt;/a&gt;&lt;br/&gt;&lt;small&gt;текст&lt;/small&gt;&lt;/p&gt;
				&lt;/li&gt;
				&lt;li&gt;
					&lt;p&gt;&lt;a href="#"&gt;&lt;img src="images/task.svg" width="24px" height="24px" class="pull-left"/&gt;&lt;span class="lesson-label"&gt;Шаг 4 - задание&lt;/span&gt;&lt;/a&gt;&lt;br/&gt;&lt;small&gt;задание&lt;/small&gt;&lt;/p&gt;
				&lt;/li&gt;
			&lt;/ol&gt;
			
			&lt;p&gt;&lt;a href="#"&gt;&lt;img src="images/dwnld_solid.svg" width="24px" height="24px" /&gt;Конспект лекции &lt;img src="images/pdf.png" width="28px" height="18px" /&gt; 278 kB &lt;/a&gt;&lt;/p&gt;
			&lt;p&gt;&lt;a href="#"&gt;&lt;img src="images/dwnld_solid.svg" width="24px" height="24px" /&gt;Слайды видеолекции &lt;img src="images/pdf.png" width="28px" height="18px" /&gt; 278 kB &lt;/a&gt;&lt;/p&gt;
		
		&lt;/div&gt;
		
	&lt;/div&gt;
	&lt;div macro='fillCourseContents'&gt;&lt;/div&gt; &lt;!-- TW stuff --&gt;
&lt;/div&gt;

&lt;div id="footer"&gt;
	&lt;div class="container"&gt;
		&lt;div class=row&gt;
			&lt;div class="col-md-8 col-sm-6"&gt;
				&lt;h4&gt;&lt;strong&gt;Пишите!&lt;/strong&gt;&lt;/h4&gt;
				&lt;h4&gt;&lt;a href="mailto:info@childrenscience.ru"&gt;info@childrenscience.ru&lt;/a&gt;&lt;/h4&gt;
			&lt;/div&gt;
			&lt;div class="col-md-4 col-sm-6"&gt;
				&lt;h4&gt;&lt;strong&gt;Мы в соцсетях:&lt;/strong&gt;&lt;/h4&gt;
				&lt;div class="row"&gt;
					&lt;div class="col-sm-3 col-xs-2"&gt;&lt;a href="http://vk.com/childrenscience"&gt;&lt;img src="images/vk.png" width="46px" height="46px"&gt;&lt;/a&gt;&lt;/div&gt;
					&lt;div class="col-sm-3 col-xs-2"&gt;&lt;a href="https://www.facebook.com/detinauka"&gt;&lt;img src="images/fb.png" width="46px" height="46px"&gt;&lt;/a&gt;&lt;/div&gt;
					&lt;div class="col-sm-3 col-xs-2"&gt;&lt;a href="http://childrenscience.livejournal.com/"&gt;&lt;img src="images/lj.png" width="46px" height="46px"&gt;&lt;/a&gt;&lt;/div&gt;
					&lt;div class="col-sm-3 col-xs-2"&gt;&lt;a href="https://www.youtube.com/childrenscience"&gt;&lt;img src="images/yt.png" width="46px" height="46px"&gt;&lt;/a&gt;&lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;
			
		&lt;/div&gt;
	&lt;/div&gt;
&lt;/div&gt;
&lt;script src="js/bootstrap.min.js"&gt;&lt;/script&gt;
&lt;!--}}}--&gt;</pre>
</div>
<div changecount="9" created="201610121832" creator="Яков Литвин" modified="201705151351" modifier="Яков Литвин" tags="code" title="unitWebViewTemplate">
<pre>&lt;!--{{{--&gt;
&lt;div class='centralAllColumn'&gt;
 &lt;div macro='unitStep'&gt;
 &lt;/div&gt;&lt;div class='unitStepFooter' macro='unitStepFooter'&gt;
 &lt;/div&gt;	&lt;!-- implement this, make sure it's visible and on bottom if possible --&gt;
&lt;/div&gt;
&lt;!--}}}--&gt;</pre>
</div>
<div changecount="291" created="201610041445" creator="Яков Литвин" modified="201706191840" modifier="YourName" tags="code" title="WebStyleSheet">
<pre>[[StyleSheet]]
/*{{{*/
/* indicate visitor mode */
body { background-color: #ffffff; }
.tiddler {
	padding: 0;
	/*display: flex;
	flex-direction: column;
	min-height: 100vh;*/
}
*[tiddlyLink] { cursor: pointer }
/* .tiddlyLink { cursor: pointer } */
a:hover {
	background-color: inherit;
}
a { cursor: pointer; }
h2 {
	border: none;
}

#displayArea { position: relative; width: 100%; margin-left: 0; margin-right: 0; margin-top: 0; }

/* links' style adjustments */
#navigation a { padding: 25px 0 2px !important; }
#navigation .nav-link { border-bottom: thin solid rgba(0,0,0,0.2); }
#navigation .nav-link:hover { background-color: white !important; color: #00d5e0; border-bottom: 1px solid rgba(0,213,224,0.3);}

/* lesson */
.unitStep {
	width: 100%;
}
.lessonNavigation	  {
	padding-top: 9px;
	padding-bottom: 5px;
	border-bottom: 2px solid rgb(233,233,233);
}
.lessonNavigation a	  {
	display: inline-block;
	vertical-align: middle;
	color:   #198C99;
	font-family: open-sans, sans-serif; font-weight: normal; font-size: 16px;
	margin-left: 0.55em; margin-right:0.55em;
	padding-left: 0.2em; padding-right: 0.2em;
	cursor:  pointer;
}
.lessonNavigation .currentStep {
	padding-top: 0.2em; /*padding-bottom: 0.2em;*/
	background-color: #AEF0FF; border-radius: 50%;
}
.lessonNavigation .currentStep:hover {
	background-color: #AEF0FF;
}
.lessonNavigation .noLinkToContents	{ padding-left: 3em; }
.lessonNavigation .noLinkToContents,
.lessonNavigation .noLink		{ cursor: default; }
/*.lessonNavigation .noLinkToContents:hover { color: black; }*/
.lessonNavigation div	  { display: inline-block; }
/* the magic to enable vertical align (see http://christopheraue.net/2014/02/20/centering-with-vertical-align-middle/) */
.lessonNavigation	  { height: 30px; }
.lessonNavigation a:after { vertical-align: middle; display: inline-block; height: 100%; content: ''; }

.lessonNavigation a:hover { background-color: white; color: #198C99; }
.currentStep div { border-radius: 50%; background-color: #AEF0FF; }

.unitStep {
	margin-top: 10px; margin-bottom: 10px; /* temporal solution until this is set by the plugin */
}

.goPrevContainer, .unitStepContentContainer, .goNextContainer {
	display: inline-block;
	content: ""; vertical-align: middle; /* trick from http://codepen.io/edge0703/pen/iHJuA */
}
.goPrevContainer, .goNextContainer {
	width: calc(50% - 512px);/* calc version behaves bad on zoom in *//*15%;*/
	height: 100%;
	text-align: center;
	line-height: 1em;
}
.goPrevContainer:hover, .goNextContainer:hover {
	margin-top: calc(1em + 8px);
}
.goPrevContainer:hover:after {
	content: "Назад"; display: block; margin-right: 4px;
	margin-top: 8px;
}
.goNextContainer:hover:after {
	content: "Дальше"; display: block; margin-left: 4px;
	margin-top: 8px;
}
.goPrevContainer &gt; div, .goNextContainer &gt; div {
	display: inline-block;
	width: 80px; height: 80px;
}
.backContainer, .forthContainer { cursor: pointer; }
.backward, .forward {
	margin-top: 16px;
	display: inline-block;
/*	vertical-align: middle;*/
}
.backward { margin-right: 4px; }
.forward  { margin-left:  4px; }
/*.backward:before, .forward:before {
	display: inline-block; height: 100%;
	content: ''; vertical-align: middle;
}*/
.goPrevContainer &gt; div:hover, .goNextContainer &gt; div:hover {
	background-color: #eeeeee;
	border-radius: 50%;
}
.unitStepContentContainer {
	width: 1024px;/*70%;*/
}
.contentIframe, .contentImage {
	width: 100%;
}
.unitStepFooter {
	border-top: 2px solid rgb(233,233,233);
}

/* course */
.courseTopLineMenu, .courseHeader, .courseTableOfContents { padding-left: 40px; }
.courseTopLineMenu {
	min-height: 70px;
}
.courseTopLineMenu a:hover {
	background-color: inherit;
}
.courseTopLineMenu .svg {
	height: 27px;
	display: inline-block;
/*	vertical-align: middle;*/
}
/*.courseTopLineMenu .svg:after { vertical-align: middle; display: inline-block; height: 100%; content: ''; }*/
.courseHeader	{
	background-color: #77cc77; color: white;
	background-repeat: no-repeat;
	background-size: cover;
}
#course-header	{ background-size: cover !important; }
 .courseTitle	{ font-size: 3em; }
div[tiddler="Химия. Материалы для самостоятельного обучения"]
 #course-header	{ background-color: rgba(0,0,0,0.4); }
div[tiddler="Олимпиадная математика"]
 #course-name	{ margin-top: 10px; }
.courseContent	{}
 .courseTableOfContents {
	display: table-cell; width: 25%;
	min-height: 1em; background-color: #dddddd;
 }
  .lesson-name {
	cursor: pointer;
  }
  .lesson-name.h4 {line-height: 19px;}
  /* indent-0 inherits padding-left from .lesson-name */
  .indent-1 { padding-left: 45px !important; }
  .indent-2 { padding-left: 60px !important; }
  .h2 {
	cursor: default; /* this is until .h2 is not used in accordeon */
  }
  .h2:hover {
	text-decoration: none; /* this is until .h2 is not used in accordeon */
  }
  .mute, .mute:hover {
	color: #999999 !important;
	cursor: default;
  }
 .courseLessonTableOfContents {
	display: table-cell; width: 75%;
	min-height: 1em;
	padding-top: 100px;
	padding-left: 50px;
 }
  .lessonTitle {
	font-size: 3em;
  }
  .startLessonButton {
	display: inline-block;
	padding: 0.7em 1em;
	margin: 1em 0;
	background-color: #1F98AE;
	color: white;
	border-radius: 0.5em;
  }
  .chem_page_preview { width:50%; }
  .startLessonButton:hover {
	background-color: #006F82;
  }
  .lessonStepInCourseContents {
	height: 45px;
	color: rgb(123, 133, 135);
	border-bottom: 1px solid rgb(222, 222, 222);
  }
   .lessonStepInCourseContents div {
	display: inline-block;
	vertical-align: middle;
   }
   .lessonStepInCourseContents div:before {
	display: inline-block; height: 100%; vertical-align: middle; content: '';
   }
   .lessonStepNumber {
	width: 2em;
	text-align: center;
	font-weight: bold;
   }
  .attachment-icon     { width: 39px; height: 24px; }
  .pdf-attachment-icon { width: 37px; height: 18px; }

  div[tiddler="Окружающий мир. 1й класс"] #lessons-list div:last-child {
	margin-top: 25px;
  }
  div[tiddler="Окружающий мир. 1й класс"] #lessons-list div:last-child a {
	border-bottom: none;
  }
  div[tiddler="Окружающий мир. 1й класс"] #lessons-list div:last-child a:hover {
	border-bottom: none;
  }
  #lesson-content table {
	font-size: 18px; /* for paragraphs is set inside course.css */
	margin-bottom: 0.5em;
  }
  #lesson-content table td {
	padding-bottom: 1em;
	padding-right: 1em;
	vertical-align: top;
  }
  #lesson-content table.logos td {
	vertical-align: middle;
  }

.courseFooter	{
	min-height: 1em; background-color: black; color: white;
}

.taskCatalogue td {
	vertical-align: top;
}
/*}}}*/</pre>
</div>
<div changecount="17" created="201304252307" creator="Titan" modified="201701161902" modifier="Яков Литвин" title="SystemSettings">
<pre>chkAnimate: false
chkAutoSave: true
chkSaveBackups: false</pre>
</div>
<div changecount="49" created="201606221542" creator="Яков Литвин" modified="201705221715" modifier="Яков Литвин" title="StyleSheet">
<pre>/*{{{*/
/* indicate author mode */
body { background-color: #f6fff0; }

/* smartphones and tablets */

/* smartphones */
@media screen and (max-width: 700px) {
	.header	{ display: none; }
}

/**/
div[tags~="systemConfig"] .viewer pre	{ clear: both !important; }

div[tags~="unit"] .tagging,
div[tags~="course"] .tagging	{ display: none; }

.larger { font-size: larger; }

/* arrows, 80:140 */
.backward, .forward {
	display: inline-block;
/*	width:   64px;
	height:  112px;
*/	width:   25px;
	height:  48px;
}
.backward {
	/* background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMTIuNSAyMyIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTIuNSAyMzsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+LnN0MHtmaWxsOiMyMTJCMkI7fTwvc3R5bGU+PGc+PHBhdGggY2xhc3M9InN0MCIgZD0iTTExLjEsMjNsMS40LTEuNEwyLjQsMTEuNUwxMi41LDEuNEwxMS4xLDBMMC4zLDEwLjhDMC4xLDExLDAsMTEuMiwwLDExLjVzMC4xLDAuNSwwLjMsMC43TDExLjEsMjN6Ii8+PC9nPjwvc3ZnPg==); */
	background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAwCAMAAADTlCGvAAAAG1BMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB4Gco9AAAACHRSTlMAEDBQwNDg8PRX3M8AAAAySURBVDjL7cmxDQAwCAOwAKXw/8VIncnSOV4NrDxAojpYpCkUz2WB0+X7WKpUH8UG5hgU7gQbPMr73AAAAABJRU5ErkJggg==);
	background-repeat: no-repeat;
}
.forward {
	/* background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMTIuNSAyMyIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTIuNSAyMzsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+LnN0MHtmaWxsOiMyMTJCMkI7fTwvc3R5bGU+PGc+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEuNCwyM0wwLDIxLjZsMTAuMS0xMC4xTDAsMS40TDEuNCwwbDEwLjgsMTAuOGMwLjIsMC4yLDAuMywwLjQsMC4zLDAuN3MtMC4xLDAuNS0wLjMsMC43TDEuNCwyM3oiLz48L2c+PC9zdmc+); */
	background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAwCAMAAADTlCGvAAAAG1BMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB4Gco9AAAACHRSTlMAEDBQwNDg8PRX3M8AAAAySURBVDjL7ckxEgAgCAMwCiL8/8V6znRxbtaYOWzmlWDTKtVHrXmQvVmUKxRPsLhF4gD0rwQb4xAyFgAAAABJRU5ErkJggg==);
	background-repeat: no-repeat;
}

.logo-sign {
	background-image: url(images/cpm.png);background-size: auto 30px;
	width:33px; height:30px;
	background-repeat: no-repeat;
}

/* step types */
.pager {
	background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i0KHQu9C+0LlfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjQgMjQiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnPjxnPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzM5NEI0RCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xOS41LDIwLjVjMCwxLjEtMC45LDItMiwyaC0xMWMtMS4xLDAtMi0wLjktMi0ydi0xNGMwLTEuMSwwLjktMiwyLTJoMTFjMS4xLDAsMiwwLjksMiwyVjIwLjV6Ii8+PC9nPjxnPjxsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzM5NEI0RCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHgxPSI4IiB5MT0iOS41IiB4Mj0iMTYiIHkyPSI5LjUiLz48L2c+PGc+PGxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzk0QjREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgeDE9IjgiIHkxPSIxNy41IiB4Mj0iMTYiIHkyPSIxNy41Ii8+PC9nPjxnPjxsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzM5NEI0RCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHgxPSI4IiB5MT0iMTMuNSIgeDI9IjE2IiB5Mj0iMTMuNSIvPjwvZz48L2c+PC9nPjwvc3ZnPg==);
}
.video {
	background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i0KHQu9C+0LlfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjQgMjQiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxwYXRoIGZpbGw9IiMzOTRCNEQiIGQ9Ik02Ljk4LDUuNzljMC4wNDMsMC4wMTUsMC4xNjUsMC4wNDEsMC4yMzcsMC4wODVsMTEuNzU2LDcuMTM2YzAuMTQ2LDAuMDg5LDAuMjI0LDAuMTY4LDAuMjQsMC4xNjhjMC4wMDIsMCwwLjAxMS0wLjAwMSwwLjAxMi0wLjAwM2MtMC4wMDgsMC4wMjItMC4wNjIsMC4xMDgtMC4yMjMsMC4yMDZMNy4yNzksMjAuNTE5Yy0wLjA3MiwwLjA0NC0wLjI1OCwwLjA3LTAuMzAxLDAuMDg1Yy0wLjAwOS0wLjA0Ni0wLjE0Ni0wLjEwOS0wLjE0Ni0wLjE5MVY1Ljk4MUM2LjgzMyw1Ljg5OSw2Ljk3MSw1LjgzNiw2Ljk4LDUuNzkgTTYuODg4LDQuNzY4Yy0wLjU0OCwwLTEuMDU1LDAuNDQzLTEuMDU1LDEuMjEzdjE0LjQzMmMwLDAuNzcsMC41MDcsMS4yMTMsMS4wNTUsMS4yMTNjMC4yMzUsMCwwLjU2Ni0wLjA4MSwwLjg0OC0wLjI1M2wxMS43NTYtNy4xMzZjMC45NC0wLjU3MiwwLjk1Ni0xLjUwOCwwLjAxNi0yLjA4TDcuNzI4LDUuMDJDNy40NDcsNC44NDksNy4xMjMsNC43NjgsNi44ODgsNC43NjhMNi44ODgsNC43Njh6Ii8+PC9nPjwvc3ZnPg==);
}
.task {
	background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i0KHQu9C+0LlfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjQgMjQiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzM5NEI0RCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xMC42NjYsMjEuNWMtMC41NSwwLTEuNDUsMC0yLDBINS43M2MtMC41NSwwLTEuMjMtMC4yMDItMS4yMy0wLjc1MlY4Ljg4OUM0LjUsOC4zMzksNS4xOCw3LjUsNS43Myw3LjVoMi4yNzhjMC41NSwwLDEuNDIzLDAuMDQxLDEuOTQtMC4xNDdjMCwwLDEuMzItMC4zODMsMC41NDQtMS4xOUM5Ljg5Myw1LjU0LDkuNTg5LDUuMDE1LDkuNTg5LDQuMTMyYzAtMS4yMDQsMS4zOTYtMi42NTYsMi43MTEtMi42NTZjMS4zMTYsMCwyLjcxMSwxLjQ4OCwyLjcxMSwyLjY5M2MwLDAuODg0LTAuMzA0LDEuNDYzLTAuOTAzLDIuMDg2Yy0wLjc3NiwwLjgwNywwLjU0NCwxLjA5NiwwLjU0NCwxLjA5NmMwLjUxNywwLjE4OCwxLjM5LDAuMTUsMS45NCwwLjE1aDIuMjc4YzAuNTUsMCwwLjYzLDAuODM5LDAuNjMsMS4zODl2MS44NmMwLDAuNTUsMC4wMjcsMS40MjEtMC4xNjUsMS45MzdjMCwwLTAuNDU1LDEuNDYyLTEuMzM2LDAuNzUxYy0wLjY4LTAuNTQ4LTEuMjYxLTEuMTI4LTIuMjI2LTEuMTI4Yy0xLjMxNiwwLTIuNzI1LDEuMzA1LTIuNzI1LDIuNTA5YzAsMS4yMDQsMS40NDQsMi41MDksMi43NiwyLjUwOWMwLjk2NSwwLDEuNTk4LTAuNTc5LDIuMjc4LTEuMTI4YzAuODgyLTAuNzExLDEuMjQ3LDAuNzUxLDEuMjQ3LDAuNzUxYzAuMTkzLDAuNTE1LDAuMTY4LDEuMzg3LDAuMTY4LDEuOTM3djEuODZjMCwwLjU1LTAuMDgsMC43NTItMC42MywwLjc1MmgtMi45MzZjLTAuNTUsMC0xLjQ1LDAtMiwwSDEwLjY2NnoiLz48L2c+PC9zdmc+);
}
.test {
	background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i0KHQu9C+0LlfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjQgMjQiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzM5NEI0RCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xOS4zMzMsMTkuNWMwLDEuMTA1LTAuODk1LDItMiwyaC0xMWMtMS4xMDUsMC0yLTAuODk1LTItMnYtMTFjMC0xLjEwNSwwLjg5NS0yLDItMmgxMWMxLjEwNSwwLDIsMC44OTUsMiwyVjE5LjV6Ii8+PC9nPjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMzOTRCNEQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludHM9IjcuMDM1LDExLjIwNSAxMC43MTcsMTcuODkzIDIwLjI0OSwyLjE4OCAiLz48L2c+PC9zdmc+);
}
.pager, .video, .test, .task {
	height:24px; width:24px;
	background-repeat: no-repeat;
}
/*}}}*/
/***
&lt;html&gt;
&lt;div class="explanation" style=""&gt;&lt;/div&gt;&lt;div class="pager" style=""&gt;&lt;/div&gt;
&lt;div class="video" style=""&gt;&lt;/div&gt;
&lt;div class="task" style=""&gt;&lt;/div&gt;
&lt;div class="test" style=""&gt;&lt;/div&gt;
&lt;/html&gt;
***/

div[tiddler="Окружающий мир. 1й класс"] #navigation, div[tiddler="Окружающий мир. 1й класс"] #footer { display: none !important; }</pre>
</div>
<div changecount="4" created="201610241412" creator="Яков Литвин" modified="201706202223" modifier="YourName" tags="code" title="MarkupPreHead">
<pre>&lt;!--{{{--&gt;
&lt;link rel='alternate' type='application/rss+xml' title='RSS' href='index.xml' /&gt;

&lt;link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&amp;amp;subset=cyrillic" rel="stylesheet"&gt;
&lt;style&gt;
@font-face {
	font-family: open-sans;
	src: url(./_Commons/widgets/1.0.1/fonts/OpenSans/OpenSans-Regular.ttf);
}
@font-face {
	font-family: conqueror;
	src: url(./fonts/Conqueror/Conqueror.webkit/Conqueror.ttf);
}
&lt;/style&gt;
&lt;!--}}}--&gt;
</pre>
</div>
<div changecount="7" created="201606211312" creator="Yakov Litvin" modified="201705221704" modifier="Яков Литвин" title="SiteTitle">
<pre>Онлайн-образование для школьников</pre>
</div>
<div changecount="2" created="201610041423" creator="Яков Литвин" modified="201611181347" modifier="Яков Литвин" title="SiteSubtitle">
<pre>Дети и наука</pre>
</div>
<div created="201707051425" title="WindowTitle">
<pre>Окружающий мир</pre>
</div>
<div created="201707051425" title="WebDefaultTiddlers">
<pre>[[Окружающий мир]]</pre>
</div>
</div>